(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const X of document.querySelectorAll('link[rel="modulepreload"]'))E(X);new MutationObserver(X=>{for(const te of X)if(te.type==="childList")for(const q of te.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&E(q)}).observe(document,{childList:!0,subtree:!0});function D(X){const te={};return X.integrity&&(te.integrity=X.integrity),X.referrerPolicy&&(te.referrerPolicy=X.referrerPolicy),X.crossOrigin==="use-credentials"?te.credentials="include":X.crossOrigin==="anonymous"?te.credentials="omit":te.credentials="same-origin",te}function E(X){if(X.ep)return;X.ep=!0;const te=D(X);fetch(X.href,te)}})();function hm(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var oh={exports:{}},Yl={};var M_;function Vp(){if(M_)return Yl;M_=1;var f=Symbol.for("react.transitional.element"),_=Symbol.for("react.fragment");function D(E,X,te){var q=null;if(te!==void 0&&(q=""+te),X.key!==void 0&&(q=""+X.key),"key"in X){te={};for(var h in X)h!=="key"&&(te[h]=X[h])}else te=X;return X=te.ref,{$$typeof:f,type:E,key:q,ref:X!==void 0?X:null,props:te}}return Yl.Fragment=_,Yl.jsx=D,Yl.jsxs=D,Yl}var O_;function Xp(){return O_||(O_=1,oh.exports=Vp()),oh.exports}var c=Xp(),ch={exports:{}},He={};var L_;function Qp(){if(L_)return He;L_=1;var f=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),q=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),w=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,a={};function u(O,P,ae){this.props=O,this.context=P,this.refs=a,this.updater=ae||k}u.prototype.isReactComponent={},u.prototype.setState=function(O,P){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,P,"setState")},u.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function l(){}l.prototype=u.prototype;function o(O,P,ae){this.props=O,this.context=P,this.refs=a,this.updater=ae||k}var g=o.prototype=new l;g.constructor=o,C(g,u.prototype),g.isPureReactComponent=!0;var y=Array.isArray;function R(){}var L={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function M(O,P,ae){var ve=ae.ref;return{$$typeof:f,type:O,key:P,ref:ve!==void 0?ve:null,props:ae}}function U(O,P){return M(O.type,P,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===f}function I(O){var P={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ae){return P[ae]})}var $=/\/+/g;function Q(O,P){return typeof O=="object"&&O!==null&&O.key!=null?I(""+O.key):P.toString(36)}function se(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(P){O.status==="pending"&&(O.status="fulfilled",O.value=P)},function(P){O.status==="pending"&&(O.status="rejected",O.reason=P)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,P,ae,ve,be){var Te=typeof O;(Te==="undefined"||Te==="boolean")&&(O=null);var B=!1;if(O===null)B=!0;else switch(Te){case"bigint":case"string":case"number":B=!0;break;case"object":switch(O.$$typeof){case f:case _:B=!0;break;case x:return B=O._init,K(B(O._payload),P,ae,ve,be)}}if(B)return be=be(O),B=ve===""?"."+Q(O,0):ve,y(be)?(ae="",B!=null&&(ae=B.replace($,"$&/")+"/"),K(be,P,ae,"",function(pe){return pe})):be!=null&&(V(be)&&(be=U(be,ae+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace($,"$&/")+"/")+B)),P.push(be)),1;B=0;var ie=ve===""?".":ve+":";if(y(O))for(var ce=0;ce<O.length;ce++)ve=O[ce],Te=ie+Q(ve,ce),B+=K(ve,P,ae,Te,be);else if(ce=T(O),typeof ce=="function")for(O=ce.call(O),ce=0;!(ve=O.next()).done;)ve=ve.value,Te=ie+Q(ve,ce++),B+=K(ve,P,ae,Te,be);else if(Te==="object"){if(typeof O.then=="function")return K(se(O),P,ae,ve,be);throw P=String(O),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return B}function J(O,P,ae){if(O==null)return O;var ve=[],be=0;return K(O,ve,"","",function(Te){return P.call(ae,Te,be++)}),ve}function j(O){if(O._status===-1){var P=O._result;P=P(),P.then(function(ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=ae)},function(ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=ae)}),O._status===-1&&(O._status=0,O._result=P)}if(O._status===1)return O._result.default;throw O._result}var F=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},W={map:J,forEach:function(O,P,ae){J(O,function(){P.apply(this,arguments)},ae)},count:function(O){var P=0;return J(O,function(){P++}),P},toArray:function(O){return J(O,function(P){return P})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return He.Activity=p,He.Children=W,He.Component=u,He.Fragment=D,He.Profiler=X,He.PureComponent=o,He.StrictMode=E,He.Suspense=d,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,He.__COMPILER_RUNTIME={__proto__:null,c:function(O){return L.H.useMemoCache(O)}},He.cache=function(O){return function(){return O.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(O,P,ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ve=C({},O.props),be=O.key;if(P!=null)for(Te in P.key!==void 0&&(be=""+P.key),P)!b.call(P,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&P.ref===void 0||(ve[Te]=P[Te]);var Te=arguments.length-2;if(Te===1)ve.children=ae;else if(1<Te){for(var B=Array(Te),ie=0;ie<Te;ie++)B[ie]=arguments[ie+2];ve.children=B}return M(O.type,be,ve)},He.createContext=function(O){return O={$$typeof:q,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:te,_context:O},O},He.createElement=function(O,P,ae){var ve,be={},Te=null;if(P!=null)for(ve in P.key!==void 0&&(Te=""+P.key),P)b.call(P,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(be[ve]=P[ve]);var B=arguments.length-2;if(B===1)be.children=ae;else if(1<B){for(var ie=Array(B),ce=0;ce<B;ce++)ie[ce]=arguments[ce+2];be.children=ie}if(O&&O.defaultProps)for(ve in B=O.defaultProps,B)be[ve]===void 0&&(be[ve]=B[ve]);return M(O,Te,be)},He.createRef=function(){return{current:null}},He.forwardRef=function(O){return{$$typeof:h,render:O}},He.isValidElement=V,He.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:j}},He.memo=function(O,P){return{$$typeof:m,type:O,compare:P===void 0?null:P}},He.startTransition=function(O){var P=L.T,ae={};L.T=ae;try{var ve=O(),be=L.S;be!==null&&be(ae,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(R,F)}catch(Te){F(Te)}finally{P!==null&&ae.types!==null&&(P.types=ae.types),L.T=P}},He.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},He.use=function(O){return L.H.use(O)},He.useActionState=function(O,P,ae){return L.H.useActionState(O,P,ae)},He.useCallback=function(O,P){return L.H.useCallback(O,P)},He.useContext=function(O){return L.H.useContext(O)},He.useDebugValue=function(){},He.useDeferredValue=function(O,P){return L.H.useDeferredValue(O,P)},He.useEffect=function(O,P){return L.H.useEffect(O,P)},He.useEffectEvent=function(O){return L.H.useEffectEvent(O)},He.useId=function(){return L.H.useId()},He.useImperativeHandle=function(O,P,ae){return L.H.useImperativeHandle(O,P,ae)},He.useInsertionEffect=function(O,P){return L.H.useInsertionEffect(O,P)},He.useLayoutEffect=function(O,P){return L.H.useLayoutEffect(O,P)},He.useMemo=function(O,P){return L.H.useMemo(O,P)},He.useOptimistic=function(O,P){return L.H.useOptimistic(O,P)},He.useReducer=function(O,P,ae){return L.H.useReducer(O,P,ae)},He.useRef=function(O){return L.H.useRef(O)},He.useState=function(O){return L.H.useState(O)},He.useSyncExternalStore=function(O,P,ae){return L.H.useSyncExternalStore(O,P,ae)},He.useTransition=function(){return L.H.useTransition()},He.version="19.2.3",He}var j_;function Oh(){return j_||(j_=1,ch.exports=Qp()),ch.exports}var z=Oh();const Ya=hm(z);var uh={exports:{}},$l={},hh={exports:{}},dh={};var B_;function Zp(){return B_||(B_=1,(function(f){function _(K,J){var j=K.length;K.push(J);e:for(;0<j;){var F=j-1>>>1,W=K[F];if(0<X(W,J))K[F]=J,K[j]=W,j=F;else break e}}function D(K){return K.length===0?null:K[0]}function E(K){if(K.length===0)return null;var J=K[0],j=K.pop();if(j!==J){K[0]=j;e:for(var F=0,W=K.length,O=W>>>1;F<O;){var P=2*(F+1)-1,ae=K[P],ve=P+1,be=K[ve];if(0>X(ae,j))ve<W&&0>X(be,ae)?(K[F]=be,K[ve]=j,F=ve):(K[F]=ae,K[P]=j,F=P);else if(ve<W&&0>X(be,j))K[F]=be,K[ve]=j,F=ve;else break e}}return J}function X(K,J){var j=K.sortIndex-J.sortIndex;return j!==0?j:K.id-J.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var te=performance;f.unstable_now=function(){return te.now()}}else{var q=Date,h=q.now();f.unstable_now=function(){return q.now()-h}}var d=[],m=[],x=1,p=null,w=3,T=!1,k=!1,C=!1,a=!1,u=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,o=typeof setImmediate<"u"?setImmediate:null;function g(K){for(var J=D(m);J!==null;){if(J.callback===null)E(m);else if(J.startTime<=K)E(m),J.sortIndex=J.expirationTime,_(d,J);else break;J=D(m)}}function y(K){if(C=!1,g(K),!k)if(D(d)!==null)k=!0,R||(R=!0,I());else{var J=D(m);J!==null&&se(y,J.startTime-K)}}var R=!1,L=-1,b=5,M=-1;function U(){return a?!0:!(f.unstable_now()-M<b)}function V(){if(a=!1,R){var K=f.unstable_now();M=K;var J=!0;try{e:{k=!1,C&&(C=!1,l(L),L=-1),T=!0;var j=w;try{t:{for(g(K),p=D(d);p!==null&&!(p.expirationTime>K&&U());){var F=p.callback;if(typeof F=="function"){p.callback=null,w=p.priorityLevel;var W=F(p.expirationTime<=K);if(K=f.unstable_now(),typeof W=="function"){p.callback=W,g(K),J=!0;break t}p===D(d)&&E(d),g(K)}else E(d);p=D(d)}if(p!==null)J=!0;else{var O=D(m);O!==null&&se(y,O.startTime-K),J=!1}}break e}finally{p=null,w=j,T=!1}J=void 0}}finally{J?I():R=!1}}}var I;if(typeof o=="function")I=function(){o(V)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=V,I=function(){Q.postMessage(null)}}else I=function(){u(V,0)};function se(K,J){L=u(function(){K(f.unstable_now())},J)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(K){K.callback=null},f.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<K?Math.floor(1e3/K):5},f.unstable_getCurrentPriorityLevel=function(){return w},f.unstable_next=function(K){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var j=w;w=J;try{return K()}finally{w=j}},f.unstable_requestPaint=function(){a=!0},f.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var j=w;w=K;try{return J()}finally{w=j}},f.unstable_scheduleCallback=function(K,J,j){var F=f.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?F+j:F):j=F,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,K={id:x++,callback:J,priorityLevel:K,startTime:j,expirationTime:W,sortIndex:-1},j>F?(K.sortIndex=j,_(m,K),D(d)===null&&K===D(m)&&(C?(l(L),L=-1):C=!0,se(y,j-F))):(K.sortIndex=W,_(d,K),k||T||(k=!0,R||(R=!0,I()))),K},f.unstable_shouldYield=U,f.unstable_wrapCallback=function(K){var J=w;return function(){var j=w;w=J;try{return K.apply(this,arguments)}finally{w=j}}}})(dh)),dh}var N_;function Jp(){return N_||(N_=1,hh.exports=Zp()),hh.exports}var fh={exports:{}},hi={};var H_;function ev(){if(H_)return hi;H_=1;var f=Oh();function _(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(){}var E={d:{f:D,r:function(){throw Error(_(522))},D,C:D,L:D,m:D,X:D,S:D,M:D},p:0,findDOMNode:null},X=Symbol.for("react.portal");function te(d,m,x){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:p==null?null:""+p,children:d,containerInfo:m,implementation:x}}var q=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,hi.createPortal=function(d,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(_(299));return te(d,m,null,x)},hi.flushSync=function(d){var m=q.T,x=E.p;try{if(q.T=null,E.p=2,d)return d()}finally{q.T=m,E.p=x,E.d.f()}},hi.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,E.d.C(d,m))},hi.prefetchDNS=function(d){typeof d=="string"&&E.d.D(d)},hi.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var x=m.as,p=h(x,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?E.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:w,fetchPriority:T}):x==="script"&&E.d.X(d,{crossOrigin:p,integrity:w,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},hi.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=h(m.as,m.crossOrigin);E.d.M(d,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&E.d.M(d)},hi.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,p=h(x,m.crossOrigin);E.d.L(d,x,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},hi.preloadModule=function(d,m){if(typeof d=="string")if(m){var x=h(m.as,m.crossOrigin);E.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else E.d.m(d)},hi.requestFormReset=function(d){E.d.r(d)},hi.unstable_batchedUpdates=function(d,m){return d(m)},hi.useFormState=function(d,m,x){return q.H.useFormState(d,m,x)},hi.useFormStatus=function(){return q.H.useHostTransitionStatus()},hi.version="19.2.3",hi}var z_;function tv(){if(z_)return fh.exports;z_=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(_){console.error(_)}}return f(),fh.exports=ev(),fh.exports}var U_;function iv(){if(U_)return $l;U_=1;var f=Jp(),_=Oh(),D=tv();function E(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function te(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function q(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(te(e)!==e)throw Error(E(188))}function m(e){var t=e.alternate;if(!t){if(t=te(e),t===null)throw Error(E(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){i=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===i)return d(n),e;if(r===s)return d(n),t;r=r.sibling}throw Error(E(188))}if(i.return!==s.return)i=n,s=r;else{for(var S=!1,N=n.child;N;){if(N===i){S=!0,i=n,s=r;break}if(N===s){S=!0,s=n,i=r;break}N=N.sibling}if(!S){for(N=r.child;N;){if(N===i){S=!0,i=r,s=n;break}if(N===s){S=!0,s=r,i=n;break}N=N.sibling}if(!S)throw Error(E(189))}}if(i.alternate!==s)throw Error(E(190))}if(i.tag!==3)throw Error(E(188));return i.stateNode.current===i?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var $=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case u:return"Profiler";case a:return"StrictMode";case y:return"Suspense";case R:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case o:return e.displayName||"Context";case l:return(e._context.displayName||"Context")+".Consumer";case g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}var se=Array.isArray,K=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=D.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},F=[],W=-1;function O(e){return{current:e}}function P(e){0>W||(e.current=F[W],F[W]=null,W--)}function ae(e,t){W++,F[W]=e.current,e.current=t}var ve=O(null),be=O(null),Te=O(null),B=O(null);function ie(e,t){switch(ae(Te,t),ae(be,e),ae(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?e_(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=e_(t),e=t_(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(ve),ae(ve,e)}function ce(){P(ve),P(be),P(Te)}function pe(e){e.memoizedState!==null&&ae(B,e);var t=ve.current,i=t_(t,e.type);t!==i&&(ae(be,e),ae(ve,i))}function Oe(e){be.current===e&&(P(ve),P(be)),B.current===e&&(P(B),ql._currentValue=j)}var Ee,Ne;function lt(e){if(Ee===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||"",Ne=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+e+Ne}var Xe=!1;function ji(e,t){if(!e||Xe)return"";Xe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(he){var le=he}Reflect.construct(e,[],ye)}else{try{ye.call()}catch(he){le=he}e.call(ye.prototype)}}else{try{throw Error()}catch(he){le=he}(ye=e())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(he){if(he&&le&&typeof he.stack=="string")return[he.stack,le.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),S=r[0],N=r[1];if(S&&N){var G=S.split(`
`),re=N.split(`
`);for(n=s=0;s<G.length&&!G[s].includes("DetermineComponentFrameRoot");)s++;for(;n<re.length&&!re[n].includes("DetermineComponentFrameRoot");)n++;if(s===G.length||n===re.length)for(s=G.length-1,n=re.length-1;1<=s&&0<=n&&G[s]!==re[n];)n--;for(;1<=s&&0<=n;s--,n--)if(G[s]!==re[n]){if(s!==1||n!==1)do if(s--,n--,0>n||G[s]!==re[n]){var me=`
`+G[s].replace(" at new "," at ");return e.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",e.displayName)),me}while(1<=s&&0<=n);break}}}finally{Xe=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?lt(i):""}function je(e,t){switch(e.tag){case 26:case 27:case 5:return lt(e.type);case 16:return lt("Lazy");case 13:return e.child!==t&&t!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return ji(e.type,!1);case 11:return ji(e.type.render,!1);case 1:return ji(e.type,!0);case 31:return lt("Activity");default:return""}}function _s(e){try{var t="",i=null;do t+=je(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ft=Object.prototype.hasOwnProperty,pi=f.unstable_scheduleCallback,$e=f.unstable_cancelCallback,Ms=f.unstable_shouldYield,ii=f.unstable_requestPaint,yt=f.unstable_now,Mt=f.unstable_getCurrentPriorityLevel,Bi=f.unstable_ImmediatePriority,Vs=f.unstable_UserBlockingPriority,si=f.unstable_NormalPriority,fr=f.unstable_LowPriority,ni=f.unstable_IdlePriority,ms=f.log,it=f.unstable_setDisableYieldValue,Ji=null,st=null;function ri(e){if(typeof ms=="function"&&it(e),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(Ji,e)}catch{}}var mt=Math.clz32?Math.clz32:Ct,ot=Math.log,vi=Math.LN2;function Ct(e){return e>>>=0,e===0?32:31-(ot(e)/vi|0)|0}var An=256,Pr=262144,_r=4194304;function es(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fr(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var N=s&134217727;return N!==0?(s=N&~r,s!==0?n=es(s):(S&=N,S!==0?n=es(S):i||(i=N&~e,i!==0&&(n=es(i))))):(N=s&~r,N!==0?n=es(N):S!==0?n=es(S):i||(i=s&~e,i!==0&&(n=es(i)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,i=t&-t,r>=i||r===32&&(i&4194048)!==0)?t:n}function Dn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ir(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qr(){var e=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),e}function Os(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Xt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tn(e,t,i,s,n,r){var S=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var N=e.entanglements,G=e.expirationTimes,re=e.hiddenUpdates;for(i=S&~i;0<i;){var me=31-mt(i),ye=1<<me;N[me]=0,G[me]=-1;var le=re[me];if(le!==null)for(re[me]=null,me=0;me<le.length;me++){var he=le[me];he!==null&&(he.lane&=-536870913)}i&=~ye}s!==0&&so(e,s,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(S&~t))}function so(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-mt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function mr(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-mt(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}function no(e,t){var i=t&-t;return i=(i&42)!==0?1:Xa(i),(i&(e.suspendedLanes|t))!==0?0:i}function Xa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function gi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pr(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:C_(e.type))}function ro(e,t){var i=J.p;try{return J.p=e,t()}finally{J.p=i}}var Ls=Math.random().toString(36).slice(2),St="__reactFiber$"+Ls,Kt="__reactProps$"+Ls,js="__reactContainer$"+Ls,Qa="__reactEvents$"+Ls,Za="__reactListeners$"+Ls,kc="__reactHandles$"+Ls,Wr="__reactResources$"+Ls,nt="__reactMarker$"+Ls;function Rn(e){delete e[St],delete e[Kt],delete e[Qa],delete e[Za],delete e[kc]}function Ni(e){var t=e[St];if(t)return t;for(var i=e.parentNode;i;){if(t=i[js]||i[St]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=o_(e);e!==null;){if(i=e[St])return i;e=o_(e)}return t}e=i,i=e.parentNode}return null}function Hi(e){if(e=e[St]||e[js]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ts(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(E(33))}function zi(e){var t=e[Wr];return t||(t=e[Wr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Dt(e){e[nt]=!0}var ps=new Set,Ja={};function Bs(e,t){Xs(e,t),Xs(e+"Capture",t)}function Xs(e,t){for(Ja[e]=t,e=0;e<t.length;e++)ps.add(t[e])}var Qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qs={},Zt={};function Kr(e){return ft.call(Zt,e)?!0:ft.call(Qs,e)?!1:Qt.test(e)?Zt[e]=!0:(Qs[e]=!0,!1)}function vr(e,t,i){if(Kr(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Mn(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function ai(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function On(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gr(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(S){i=""+S,r.call(this,S)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(S){i=""+S},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gr(e){if(!e._valueTracker){var t=On(e)?"checked":"value";e._valueTracker=gr(e,t,""+e[t])}}function Ln(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=On(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function jn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var el=/[\n"\\]/g;function di(e){return e.replace(el,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Yr(e,t,i,s,n,r,S,N){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),t!=null?S==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ft(t)):e.value!==""+Ft(t)&&(e.value=""+Ft(t)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),t!=null?tl(e,S,Ft(t)):i!=null?tl(e,S,Ft(i)):s!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Ft(N):e.removeAttribute("name")}function $r(e,t,i,s,n,r,S,N){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||i!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Gr(e);return}i=i!=null?""+Ft(i):"",t=t!=null?""+Ft(t):i,N||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=N?e.checked:!!s,e.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Gr(e)}function tl(e,t,i){t==="number"&&jn(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ns(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Ft(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function il(e,t,i){if(t!=null&&(t=""+Ft(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Ft(i):""}function Zs(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(E(92));if(se(s)){if(1<s.length)throw Error(E(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Ft(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Gr(e)}function Hs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vr(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||Ac.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function ao(e,t,i){if(t!=null&&typeof t!="object")throw Error(E(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&i[n]!==s&&Vr(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&Vr(e,r,t[r])}function Js(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(e){return sl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function li(){}var en=null;function br(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zs=null,vs=null;function Us(e){var t=Hi(e);if(t&&(e=t.stateNode)){var i=e[Kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Yr(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+di(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=s[Kt]||null;if(!n)throw Error(E(90));Yr(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Ln(s)}break e;case"textarea":il(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ns(e,!!i.multiple,t,!1)}}}var Bn=!1;function nl(e,t,i){if(Bn)return e(t,i);Bn=!0;try{var s=e(t);return s}finally{if(Bn=!1,(zs!==null||vs!==null)&&($o(),zs&&(t=zs,e=vs,vs=zs=null,Us(t),e)))for(t=0;t<e.length;t++)Us(e[t])}}function Nn(e,t){var i=e.stateNode;if(i===null)return null;var s=i[Kt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(E(231,t,typeof i));return i}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zr=!1;if(oi)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{Zr=!1}var gs=null,rl=null,yr=null;function ze(){if(yr)return yr;var e,t=rl,i=t.length,s,n="value"in gs?gs.value:gs.textContent,r=n.length;for(e=0;e<i&&t[e]===n[e];e++);var S=i-e;for(s=1;s<=S&&t[i-s]===n[r-s];s++);return yr=n.slice(e,1<s?1-s:void 0)}function is(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sr(){return!0}function Jr(){return!1}function Et(e){function t(i,s,n,r,S){this._reactName=i,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=S,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(i=e[N],this[N]=i?i(r):r[N]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Sr:Jr,this.isPropagationStopped=Jr,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),t}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Et(ss),Ps=p({},ss,{view:0,detail:0}),wr=Et(Ps),ea,sn,Hn,Fs=p({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(ea=e.screenX-Hn.screenX,sn=e.screenY-Hn.screenY):sn=ea=0,Hn=e),ea)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),al=Et(Fs),ns=p({},Fs,{dataTransfer:0}),bi=Et(ns),ta=p({},Ps,{relatedTarget:0}),Is=Et(ta),nn=p({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),rn=Et(nn),zn=p({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ia=Et(zn),Dc=p({},ss,{data:0}),lo=Et(Dc),oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ve[e])?!!t[e]:!1}function sa(){return ll}var yi=p({},Ps,{key:function(e){if(e.key){var t=oo[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(e){return e.type==="keypress"?is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qs=Et(yi),Ws=p({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),an=Et(Ws),na=p({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),co=Et(na),uo=p({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Un=Et(uo),Pn=p({},Fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tc=Et(Pn),ra=p({},ss,{newState:0,oldState:0}),ho=Et(ra),_e=[9,13,27,32],aa=oi&&"CompositionEvent"in window,Si=null;oi&&"documentMode"in document&&(Si=document.documentMode);var la=oi&&"TextEvent"in window&&!Si,bs=oi&&(!aa||Si&&8<Si&&11>=Si),Cr=" ",oa=!1;function Er(e,t){switch(e){case"keyup":return _e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ke(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function fo(e,t){switch(e){case"compositionend":return ke(t);case"keypress":return t.which!==32?null:(oa=!0,Cr);case"textInput":return e=t.data,e===Cr&&oa?null:e;default:return null}}function ca(e,t){if(Pi)return e==="compositionend"||!aa&&Er(e,t)?(e=ze(),yr=rl=gs=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bs&&t.locale!=="ko"?null:t.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ua(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gt[e.type]:t==="textarea"}function ln(e,t,i,s){zs?vs?vs.push(s):vs=[s]:zs=s,t=tc(t,"onChange"),0<t.length&&(i=new tn("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Fi=null,on=null;function Rc(e){$f(e,0)}function cn(e){var t=ts(e);if(Ln(t))return e}function _o(e,t){if(e==="change")return t}var kr=!1;if(oi){var Ii;if(oi){var ha="oninput"in document;if(!ha){var mo=document.createElement("div");mo.setAttribute("oninput","return;"),ha=typeof mo.oninput=="function"}Ii=ha}else Ii=!1;kr=Ii&&(!document.documentMode||9<document.documentMode)}function Fn(){Fi&&(Fi.detachEvent("onpropertychange",wi),on=Fi=null)}function wi(e){if(e.propertyName==="value"&&cn(on)){var t=[];ln(t,on,e,br(e)),nl(Rc,t)}}function ol(e,t,i){e==="focusin"?(Fn(),Fi=t,on=i,Fi.attachEvent("onpropertychange",wi)):e==="focusout"&&Fn()}function po(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cn(on)}function Mc(e,t){if(e==="click")return cn(t)}function Oc(e,t){if(e==="input"||e==="change")return cn(t)}function da(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:da;function qi(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!ft.call(t,n)||!Yt(e[n],t[n]))return!1}return!0}function Ks(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cl(e,t){var i=Ks(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ks(i)}}function un(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?un(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hn(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=jn(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=jn(e.document)}return t}function ul(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Lc=oi&&"documentMode"in document&&11>=document.documentMode,ys=null,Ot=null,In=null,qn=!1;function Bt(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;qn||ys==null||ys!==jn(s)||(s=ys,"selectionStart"in s&&ul(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),In&&qi(In,s)||(In=s,s=tc(Ot,"onSelect"),0<s.length&&(t=new tn("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=ys)))}function dn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var fn={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionrun:dn("Transition","TransitionRun"),transitionstart:dn("Transition","TransitionStart"),transitioncancel:dn("Transition","TransitionCancel"),transitionend:dn("Transition","TransitionEnd")},Ar={},kt={};oi&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function Wi(e){if(Ar[e])return Ar[e];if(!fn[e])return e;var t=fn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in kt)return Ar[e]=t[i];return e}var wt=Wi("animationend"),$t=Wi("animationiteration"),At=Wi("animationstart"),ci=Wi("transitionrun"),vo=Wi("transitionstart"),go=Wi("transitioncancel"),hl=Wi("transitionend"),bo=new Map,dl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dl.push("scrollEnd");function xi(e,t){bo.set(e,t),Bs(t,[e])}var Dr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fi=[],Ss=0,_n=0;function fa(){for(var e=Ss,t=_n=Ss=0;t<e;){var i=fi[t];fi[t++]=null;var s=fi[t];fi[t++]=null;var n=fi[t];fi[t++]=null;var r=fi[t];if(fi[t++]=null,s!==null&&n!==null){var S=s.pending;S===null?n.next=n:(n.next=S.next,S.next=n),s.pending=n}r!==0&&ma(i,n,r)}}function mn(e,t,i,s){fi[Ss++]=e,fi[Ss++]=t,fi[Ss++]=i,fi[Ss++]=s,_n|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function _a(e,t,i,s){return mn(e,t,i,s),Wn(e)}function rs(e,t){return mn(e,null,null,t),Wn(e)}function ma(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var n=!1,r=e.return;r!==null;)r.childLanes|=i,s=r.alternate,s!==null&&(s.childLanes|=i),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-mt(i),e=r.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=i|536870912),r):null}function Wn(e){if(50<Nl)throw Nl=0,Ou=null,Error(E(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ui={};function Tr(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,i,s){return new Tr(e,t,i,s)}function Rr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ws(e,t){var i=e.alternate;return i===null?(i=It(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function yo(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pa(e,t,i,s,n,r){var S=0;if(s=e,typeof e=="function")Rr(e)&&(S=1);else if(typeof e=="string")S=Hp(e,i,ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case M:return e=It(31,i,t,n),e.elementType=M,e.lanes=r,e;case C:return xs(i.children,n,r,t);case a:S=8,n|=24;break;case u:return e=It(12,i,t,n|2),e.elementType=u,e.lanes=r,e;case y:return e=It(13,i,t,n),e.elementType=y,e.lanes=r,e;case R:return e=It(19,i,t,n),e.elementType=R,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case o:S=10;break e;case l:S=9;break e;case g:S=11;break e;case L:S=14;break e;case b:S=16,s=null;break e}S=29,i=Error(E(130,e===null?"null":typeof e,"")),s=null}return t=It(S,i,t,n),t.elementType=e,t.type=s,t.lanes=r,t}function xs(e,t,i,s){return e=It(7,e,s,t),e.lanes=i,e}function va(e,t,i){return e=It(6,e,null,t),e.lanes=i,e}function fl(e){var t=It(18,null,null,0);return t.stateNode=e,t}function _l(e,t,i){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ml=new WeakMap;function Ci(e,t){if(typeof e=="object"&&e!==null){var i=ml.get(e);return i!==void 0?i:(t={value:e,source:t,stack:_s(t)},ml.set(e,t),t)}return{value:e,source:t,stack:_s(t)}}var Kn=[],Gn=0,ga=null,Mr=0,Ei=[],ki=0,Ki=null,as=1,Ai="";function Cs(e,t){Kn[Gn++]=Mr,Kn[Gn++]=ga,ga=e,Mr=t}function pl(e,t,i){Ei[ki++]=as,Ei[ki++]=Ai,Ei[ki++]=Ki,Ki=e;var s=as;e=Ai;var n=32-mt(s)-1;s&=~(1<<n),i+=1;var r=32-mt(t)+n;if(30<r){var S=n-n%5;r=(s&(1<<S)-1).toString(32),s>>=S,n-=S,as=1<<32-mt(t)+n|i<<n|s,Ai=r+e}else as=1<<r|i<<n|s,Ai=e}function ba(e){e.return!==null&&(Cs(e,1),pl(e,1,0))}function v(e){for(;e===ga;)ga=Kn[--Gn],Kn[Gn]=null,Mr=Kn[--Gn],Kn[Gn]=null;for(;e===Ki;)Ki=Ei[--ki],Ei[ki]=null,Ai=Ei[--ki],Ei[ki]=null,as=Ei[--ki],Ei[ki]=null}function A(e,t){Ei[ki++]=as,Ei[ki++]=Ai,Ei[ki++]=Ki,as=t.id,Ai=t.overflow,Ki=e}var H=null,Y=null,oe=!1,de=null,we=!1,Ae=Error(E(519));function Re(e){var t=Error(E(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ie(Ci(t,e)),Ae}function Se(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[St]=e,t[Kt]=s,i){case"dialog":Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":case"embed":Ke("load",t);break;case"video":case"audio":for(i=0;i<zl.length;i++)Ke(zl[i],t);break;case"source":Ke("error",t);break;case"img":case"image":case"link":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"input":Ke("invalid",t),$r(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ke("invalid",t);break;case"textarea":Ke("invalid",t),Zs(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||Zf(t.textContent,i)?(s.popover!=null&&(Ke("beforetoggle",t),Ke("toggle",t)),s.onScroll!=null&&Ke("scroll",t),s.onScrollEnd!=null&&Ke("scrollend",t),s.onClick!=null&&(t.onclick=li),t=!0):t=!1,t||Re(e,!0)}function Ce(e){for(H=e.return;H;)switch(H.tag){case 5:case 31:case 13:we=!1;return;case 27:case 3:we=!0;return;default:H=H.return}}function xe(e){if(e!==H)return!1;if(!oe)return Ce(e),oe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Yu(e.type,e.memoizedProps)),i=!i),i&&Y&&Re(e),Ce(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));Y=l_(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));Y=l_(e)}else t===27?(t=Y,rr(e.type)?(e=Zu,Zu=null,Y=e):Y=t):Y=H?cs(e.stateNode.nextSibling):null;return!0}function Fe(){Y=H=null,oe=!1}function _t(){var e=de;return e!==null&&(Mi===null?Mi=e:Mi.push.apply(Mi,e),de=null),e}function Ie(e){de===null?de=[e]:de.push(e)}var _i=O(null),qt=null,Nt=null;function qe(e,t,i){ae(_i,t._currentValue),t._currentValue=i}function pt(e){e._currentValue=_i.current,P(_i)}function Gi(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Es(e,t,i,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var S=n.child;r=r.firstContext;e:for(;r!==null;){var N=r;r=n;for(var G=0;G<t.length;G++)if(N.context===t[G]){r.lanes|=i,N=r.alternate,N!==null&&(N.lanes|=i),Gi(r.return,i,e),s||(S=null);break e}r=N.next}}else if(n.tag===18){if(S=n.return,S===null)throw Error(E(341));S.lanes|=i,r=S.alternate,r!==null&&(r.lanes|=i),Gi(S,i,e),S=null}else S=n.child;if(S!==null)S.return=n;else for(S=n;S!==null;){if(S===e){S=null;break}if(n=S.sibling,n!==null){n.return=S.return,S=n;break}S=S.return}n=S}}function ks(e,t,i,s){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var S=n.alternate;if(S===null)throw Error(E(387));if(S=S.memoizedProps,S!==null){var N=n.type;Yt(n.pendingProps.value,S.value)||(e!==null?e.push(N):e=[N])}}else if(n===B.current){if(S=n.alternate,S===null)throw Error(E(387));S.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(ql):e=[ql])}n=n.return}e!==null&&Es(t,e,i,s),t.flags|=262144}function ls(e){for(e=e.firstContext;e!==null;){if(!Yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function As(e){qt=e,Nt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vt(e){return Nh(qt,e)}function So(e,t){return qt===null&&As(e),Nh(e,t)}function Nh(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Nt===null){if(e===null)throw Error(E(308));Nt=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Nt=Nt.next=t;return i}var Lm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},jm=f.unstable_scheduleCallback,Bm=f.unstable_NormalPriority,Ht={$$typeof:o,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new Lm,data:new Map,refCount:0}}function vl(e){e.refCount--,e.refCount===0&&jm(Bm,function(){e.controller.abort()})}var gl=null,Bc=0,ya=0,Sa=null;function Nm(e,t){if(gl===null){var i=gl=[];Bc=0,ya=zu(),Sa={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Bc++,t.then(Hh,Hh),t}function Hh(){if(--Bc===0&&gl!==null){Sa!==null&&(Sa.status="fulfilled");var e=gl;gl=null,ya=0,Sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hm(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(n){i.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<i.length;n++)(0,i[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<i.length;n++)(0,i[n])(void 0)}),s}var zh=K.S;K.S=function(e,t){wf=yt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Nm(e,t),zh!==null&&zh(e,t)};var Or=O(null);function Nc(){var e=Or.current;return e!==null?e:dt.pooledCache}function wo(e,t){t===null?ae(Or,Or.current):ae(Or,t.pool)}function Uh(){var e=Nc();return e===null?null:{parent:Ht._currentValue,pool:e}}var wa=Error(E(460)),Hc=Error(E(474)),xo=Error(E(542)),Co={then:function(){}};function Ph(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(li,li),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e;default:if(typeof t.status=="string")t.then(li,li);else{if(e=dt,e!==null&&100<e.shellSuspendCounter)throw Error(E(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e}throw jr=t,wa}}function Lr(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(jr=i,wa):i}}var jr=null;function Ih(){if(jr===null)throw Error(E(459));var e=jr;return jr=null,e}function qh(e){if(e===wa||e===xo)throw Error(E(483))}var xa=null,bl=0;function Eo(e){var t=bl;return bl+=1,xa===null&&(xa=[]),Fh(xa,e,t)}function yl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ko(e,t){throw t.$$typeof===w?Error(E(525)):(e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wh(e){function t(ee,Z){if(e){var ne=ee.deletions;ne===null?(ee.deletions=[Z],ee.flags|=16):ne.push(Z)}}function i(ee,Z){if(!e)return null;for(;Z!==null;)t(ee,Z),Z=Z.sibling;return null}function s(ee){for(var Z=new Map;ee!==null;)ee.key!==null?Z.set(ee.key,ee):Z.set(ee.index,ee),ee=ee.sibling;return Z}function n(ee,Z){return ee=ws(ee,Z),ee.index=0,ee.sibling=null,ee}function r(ee,Z,ne){return ee.index=ne,e?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<Z?(ee.flags|=67108866,Z):ne):(ee.flags|=67108866,Z)):(ee.flags|=1048576,Z)}function S(ee){return e&&ee.alternate===null&&(ee.flags|=67108866),ee}function N(ee,Z,ne,ge){return Z===null||Z.tag!==6?(Z=va(ne,ee.mode,ge),Z.return=ee,Z):(Z=n(Z,ne),Z.return=ee,Z)}function G(ee,Z,ne,ge){var Le=ne.type;return Le===C?me(ee,Z,ne.props.children,ge,ne.key):Z!==null&&(Z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===b&&Lr(Le)===Z.type)?(Z=n(Z,ne.props),yl(Z,ne),Z.return=ee,Z):(Z=pa(ne.type,ne.key,ne.props,null,ee.mode,ge),yl(Z,ne),Z.return=ee,Z)}function re(ee,Z,ne,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=_l(ne,ee.mode,ge),Z.return=ee,Z):(Z=n(Z,ne.children||[]),Z.return=ee,Z)}function me(ee,Z,ne,ge,Le){return Z===null||Z.tag!==7?(Z=xs(ne,ee.mode,ge,Le),Z.return=ee,Z):(Z=n(Z,ne),Z.return=ee,Z)}function ye(ee,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=va(""+Z,ee.mode,ne),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return ne=pa(Z.type,Z.key,Z.props,null,ee.mode,ne),yl(ne,Z),ne.return=ee,ne;case k:return Z=_l(Z,ee.mode,ne),Z.return=ee,Z;case b:return Z=Lr(Z),ye(ee,Z,ne)}if(se(Z)||I(Z))return Z=xs(Z,ee.mode,ne,null),Z.return=ee,Z;if(typeof Z.then=="function")return ye(ee,Eo(Z),ne);if(Z.$$typeof===o)return ye(ee,So(ee,Z),ne);ko(ee,Z)}return null}function le(ee,Z,ne,ge){var Le=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Le!==null?null:N(ee,Z,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return ne.key===Le?G(ee,Z,ne,ge):null;case k:return ne.key===Le?re(ee,Z,ne,ge):null;case b:return ne=Lr(ne),le(ee,Z,ne,ge)}if(se(ne)||I(ne))return Le!==null?null:me(ee,Z,ne,ge,null);if(typeof ne.then=="function")return le(ee,Z,Eo(ne),ge);if(ne.$$typeof===o)return le(ee,Z,So(ee,ne),ge);ko(ee,ne)}return null}function he(ee,Z,ne,ge,Le){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ee=ee.get(ne)||null,N(Z,ee,""+ge,Le);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case T:return ee=ee.get(ge.key===null?ne:ge.key)||null,G(Z,ee,ge,Le);case k:return ee=ee.get(ge.key===null?ne:ge.key)||null,re(Z,ee,ge,Le);case b:return ge=Lr(ge),he(ee,Z,ne,ge,Le)}if(se(ge)||I(ge))return ee=ee.get(ne)||null,me(Z,ee,ge,Le,null);if(typeof ge.then=="function")return he(ee,Z,ne,Eo(ge),Le);if(ge.$$typeof===o)return he(ee,Z,ne,So(Z,ge),Le);ko(Z,ge)}return null}function De(ee,Z,ne,ge){for(var Le=null,Qe=null,Me=Z,Pe=Z=0,Ye=null;Me!==null&&Pe<ne.length;Pe++){Me.index>Pe?(Ye=Me,Me=null):Ye=Me.sibling;var Ze=le(ee,Me,ne[Pe],ge);if(Ze===null){Me===null&&(Me=Ye);break}e&&Me&&Ze.alternate===null&&t(ee,Me),Z=r(Ze,Z,Pe),Qe===null?Le=Ze:Qe.sibling=Ze,Qe=Ze,Me=Ye}if(Pe===ne.length)return i(ee,Me),oe&&Cs(ee,Pe),Le;if(Me===null){for(;Pe<ne.length;Pe++)Me=ye(ee,ne[Pe],ge),Me!==null&&(Z=r(Me,Z,Pe),Qe===null?Le=Me:Qe.sibling=Me,Qe=Me);return oe&&Cs(ee,Pe),Le}for(Me=s(Me);Pe<ne.length;Pe++)Ye=he(Me,ee,Pe,ne[Pe],ge),Ye!==null&&(e&&Ye.alternate!==null&&Me.delete(Ye.key===null?Pe:Ye.key),Z=r(Ye,Z,Pe),Qe===null?Le=Ye:Qe.sibling=Ye,Qe=Ye);return e&&Me.forEach(function(ur){return t(ee,ur)}),oe&&Cs(ee,Pe),Le}function Be(ee,Z,ne,ge){if(ne==null)throw Error(E(151));for(var Le=null,Qe=null,Me=Z,Pe=Z=0,Ye=null,Ze=ne.next();Me!==null&&!Ze.done;Pe++,Ze=ne.next()){Me.index>Pe?(Ye=Me,Me=null):Ye=Me.sibling;var ur=le(ee,Me,Ze.value,ge);if(ur===null){Me===null&&(Me=Ye);break}e&&Me&&ur.alternate===null&&t(ee,Me),Z=r(ur,Z,Pe),Qe===null?Le=ur:Qe.sibling=ur,Qe=ur,Me=Ye}if(Ze.done)return i(ee,Me),oe&&Cs(ee,Pe),Le;if(Me===null){for(;!Ze.done;Pe++,Ze=ne.next())Ze=ye(ee,Ze.value,ge),Ze!==null&&(Z=r(Ze,Z,Pe),Qe===null?Le=Ze:Qe.sibling=Ze,Qe=Ze);return oe&&Cs(ee,Pe),Le}for(Me=s(Me);!Ze.done;Pe++,Ze=ne.next())Ze=he(Me,ee,Pe,Ze.value,ge),Ze!==null&&(e&&Ze.alternate!==null&&Me.delete(Ze.key===null?Pe:Ze.key),Z=r(Ze,Z,Pe),Qe===null?Le=Ze:Qe.sibling=Ze,Qe=Ze);return e&&Me.forEach(function($p){return t(ee,$p)}),oe&&Cs(ee,Pe),Le}function ht(ee,Z,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:e:{for(var Le=ne.key;Z!==null;){if(Z.key===Le){if(Le=ne.type,Le===C){if(Z.tag===7){i(ee,Z.sibling),ge=n(Z,ne.props.children),ge.return=ee,ee=ge;break e}}else if(Z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===b&&Lr(Le)===Z.type){i(ee,Z.sibling),ge=n(Z,ne.props),yl(ge,ne),ge.return=ee,ee=ge;break e}i(ee,Z);break}else t(ee,Z);Z=Z.sibling}ne.type===C?(ge=xs(ne.props.children,ee.mode,ge,ne.key),ge.return=ee,ee=ge):(ge=pa(ne.type,ne.key,ne.props,null,ee.mode,ge),yl(ge,ne),ge.return=ee,ee=ge)}return S(ee);case k:e:{for(Le=ne.key;Z!==null;){if(Z.key===Le)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){i(ee,Z.sibling),ge=n(Z,ne.children||[]),ge.return=ee,ee=ge;break e}else{i(ee,Z);break}else t(ee,Z);Z=Z.sibling}ge=_l(ne,ee.mode,ge),ge.return=ee,ee=ge}return S(ee);case b:return ne=Lr(ne),ht(ee,Z,ne,ge)}if(se(ne))return De(ee,Z,ne,ge);if(I(ne)){if(Le=I(ne),typeof Le!="function")throw Error(E(150));return ne=Le.call(ne),Be(ee,Z,ne,ge)}if(typeof ne.then=="function")return ht(ee,Z,Eo(ne),ge);if(ne.$$typeof===o)return ht(ee,Z,So(ee,ne),ge);ko(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Z!==null&&Z.tag===6?(i(ee,Z.sibling),ge=n(Z,ne),ge.return=ee,ee=ge):(i(ee,Z),ge=va(ne,ee.mode,ge),ge.return=ee,ee=ge),S(ee)):i(ee,Z)}return function(ee,Z,ne,ge){try{bl=0;var Le=ht(ee,Z,ne,ge);return xa=null,Le}catch(Me){if(Me===wa||Me===xo)throw Me;var Qe=It(29,Me,null,ee.mode);return Qe.lanes=ge,Qe.return=ee,Qe}}}var Br=Wh(!0),Kh=Wh(!1),Yn=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $n(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(tt&2)!==0){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=Wn(e),ma(e,null,i),t}return mn(e,s,t,i),Wn(e)}function Sl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,mr(e,i)}}function Pc(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var n=null,r=null;if(i=i.firstBaseUpdate,i!==null){do{var S={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};r===null?n=r=S:r=r.next=S,i=i.next}while(i!==null);r===null?n=r=t:r=r.next=t}else n=r=t;i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Fc=!1;function wl(){if(Fc){var e=Sa;if(e!==null)throw e}}function xl(e,t,i,s){Fc=!1;var n=e.updateQueue;Yn=!1;var r=n.firstBaseUpdate,S=n.lastBaseUpdate,N=n.shared.pending;if(N!==null){n.shared.pending=null;var G=N,re=G.next;G.next=null,S===null?r=re:S.next=re,S=G;var me=e.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==S&&(N===null?me.firstBaseUpdate=re:N.next=re,me.lastBaseUpdate=G))}if(r!==null){var ye=n.baseState;S=0,me=re=G=null,N=r;do{var le=N.lane&-536870913,he=le!==N.lane;if(he?(Ge&le)===le:(s&le)===le){le!==0&&le===ya&&(Fc=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var De=e,Be=N;le=t;var ht=i;switch(Be.tag){case 1:if(De=Be.payload,typeof De=="function"){ye=De.call(ht,ye,le);break e}ye=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Be.payload,le=typeof De=="function"?De.call(ht,ye,le):De,le==null)break e;ye=p({},ye,le);break e;case 2:Yn=!0}}le=N.callback,le!==null&&(e.flags|=64,he&&(e.flags|=8192),he=n.callbacks,he===null?n.callbacks=[le]:he.push(le))}else he={lane:le,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(re=me=he,G=ye):me=me.next=he,S|=le;if(N=N.next,N===null){if(N=n.shared.pending,N===null)break;he=N,N=he.next,he.next=null,n.lastBaseUpdate=he,n.shared.pending=null}}while(!0);me===null&&(G=ye),n.baseState=G,n.firstBaseUpdate=re,n.lastBaseUpdate=me,r===null&&(n.shared.lanes=0),er|=S,e.lanes=S,e.memoizedState=ye}}function Gh(e,t){if(typeof e!="function")throw Error(E(191,e));e.call(t)}function Yh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Gh(i[e],t)}var Ca=O(null),Ao=O(0);function $h(e,t){e=Cn,ae(Ao,e),ae(Ca,t),Cn=e|t.baseLanes}function Ic(){ae(Ao,Cn),ae(Ca,Ca.current)}function qc(){Cn=Ao.current,P(Ca),P(Ao)}var Yi=O(null),os=null;function Xn(e){var t=e.alternate;ae(Lt,Lt.current&1),ae(Yi,e),os===null&&(t===null||Ca.current!==null||t.memoizedState!==null)&&(os=e)}function Wc(e){ae(Lt,Lt.current),ae(Yi,e),os===null&&(os=e)}function Vh(e){e.tag===22?(ae(Lt,Lt.current),ae(Yi,e),os===null&&(os=e)):Qn()}function Qn(){ae(Lt,Lt.current),ae(Yi,Yi.current)}function $i(e){P(Yi),os===e&&(os=null),P(Lt)}var Lt=O(0);function Do(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Xu(i)||Qu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pn=0,Ue=null,ct=null,zt=null,To=!1,Ea=!1,Nr=!1,Ro=0,Cl=0,ka=null,zm=0;function Tt(){throw Error(E(321))}function Kc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Yt(e[i],t[i]))return!1;return!0}function Gc(e,t,i,s,n,r){return pn=r,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=e===null||e.memoizedState===null?Od:lu,Nr=!1,r=i(s,n),Nr=!1,Ea&&(r=Qh(t,i,s,n)),Xh(e),r}function Xh(e){K.H=Al;var t=ct!==null&&ct.next!==null;if(pn=0,zt=ct=Ue=null,To=!1,Cl=0,ka=null,t)throw Error(E(300));e===null||Ut||(e=e.dependencies,e!==null&&ls(e)&&(Ut=!0))}function Qh(e,t,i,s){Ue=e;var n=0;do{if(Ea&&(ka=null),Cl=0,Ea=!1,25<=n)throw Error(E(301));if(n+=1,zt=ct=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}K.H=Ld,r=t(i,s)}while(Ea);return r}function Um(){var e=K.H,t=e.useState()[0];return t=typeof t.then=="function"?El(t):t,e=e.useState()[0],(ct!==null?ct.memoizedState:null)!==e&&(Ue.flags|=1024),t}function Yc(){var e=Ro!==0;return Ro=0,e}function $c(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Vc(e){if(To){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}To=!1}pn=0,zt=ct=Ue=null,Ea=!1,Cl=Ro=0,ka=null}function mi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ue.memoizedState=zt=e:zt=zt.next=e,zt}function jt(){if(ct===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=zt===null?Ue.memoizedState:zt.next;if(t!==null)zt=t,ct=e;else{if(e===null)throw Ue.alternate===null?Error(E(467)):Error(E(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},zt===null?Ue.memoizedState=zt=e:zt=zt.next=e}return zt}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var t=Cl;return Cl+=1,ka===null&&(ka=[]),e=Fh(ka,e,t),t=Ue,(zt===null?t.memoizedState:zt.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?Od:lu),e}function Oo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===o)return vt(e)}throw Error(E(438,String(e)))}function Xc(e){var t=null,i=Ue.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=Ue.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Mo(),Ue.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=U;return t.index++,i}function vn(e,t){return typeof t=="function"?t(e):t}function Lo(e){var t=jt();return Qc(t,ct,e)}function Qc(e,t,i){var s=e.queue;if(s===null)throw Error(E(311));s.lastRenderedReducer=i;var n=e.baseQueue,r=s.pending;if(r!==null){if(n!==null){var S=n.next;n.next=r.next,r.next=S}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var N=S=null,G=null,re=t,me=!1;do{var ye=re.lane&-536870913;if(ye!==re.lane?(Ge&ye)===ye:(pn&ye)===ye){var le=re.revertLane;if(le===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),ye===ya&&(me=!0);else if((pn&le)===le){re=re.next,le===ya&&(me=!0);continue}else ye={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(N=G=ye,S=r):G=G.next=ye,Ue.lanes|=le,er|=le;ye=re.action,Nr&&i(r,ye),r=re.hasEagerState?re.eagerState:i(r,ye)}else le={lane:ye,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(N=G=le,S=r):G=G.next=le,Ue.lanes|=ye,er|=ye;re=re.next}while(re!==null&&re!==t);if(G===null?S=r:G.next=N,!Yt(r,e.memoizedState)&&(Ut=!0,me&&(i=Sa,i!==null)))throw i;e.memoizedState=r,e.baseState=S,e.baseQueue=G,s.lastRenderedState=r}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Zc(e){var t=jt(),i=t.queue;if(i===null)throw Error(E(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,r=t.memoizedState;if(n!==null){i.pending=null;var S=n=n.next;do r=e(r,S.action),S=S.next;while(S!==n);Yt(r,t.memoizedState)||(Ut=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),i.lastRenderedState=r}return[r,s]}function Zh(e,t,i){var s=Ue,n=jt(),r=oe;if(r){if(i===void 0)throw Error(E(407));i=i()}else i=t();var S=!Yt((ct||n).memoizedState,i);if(S&&(n.memoizedState=i,Ut=!0),n=n.queue,tu(td.bind(null,s,n,e),[e]),n.getSnapshot!==t||S||zt!==null&&zt.memoizedState.tag&1){if(s.flags|=2048,Aa(9,{destroy:void 0},ed.bind(null,s,n,i,t),null),dt===null)throw Error(E(349));r||(pn&127)!==0||Jh(s,t,i)}return i}function Jh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ue.updateQueue,t===null?(t=Mo(),Ue.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function ed(e,t,i,s){t.value=i,t.getSnapshot=s,id(t)&&sd(e)}function td(e,t,i){return i(function(){id(t)&&sd(e)})}function id(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Yt(e,i)}catch{return!0}}function sd(e){var t=rs(e,2);t!==null&&Oi(t,e,2)}function Jc(e){var t=mi();if(typeof e=="function"){var i=e;if(e=i(),Nr){ri(!0);try{i()}finally{ri(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:e},t}function nd(e,t,i,s){return e.baseState=i,Qc(e,ct,typeof s=="function"?s:vn)}function Pm(e,t,i,s,n){if(No(e))throw Error(E(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){r.listeners.push(S)}};K.T!==null?i(!0):r.isTransition=!1,s(r),i=t.pending,i===null?(r.next=t.pending=r,rd(t,r)):(r.next=i.next,t.pending=i.next=r)}}function rd(e,t){var i=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=K.T,S={};K.T=S;try{var N=i(n,s),G=K.S;G!==null&&G(S,N),ad(e,t,N)}catch(re){eu(e,t,re)}finally{r!==null&&S.types!==null&&(r.types=S.types),K.T=r}}else try{r=i(n,s),ad(e,t,r)}catch(re){eu(e,t,re)}}function ad(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){ld(e,t,s)},function(s){return eu(e,t,s)}):ld(e,t,i)}function ld(e,t,i){t.status="fulfilled",t.value=i,od(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,rd(e,i)))}function eu(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,od(t),t=t.next;while(t!==s)}e.action=null}function od(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cd(e,t){return t}function ud(e,t){if(oe){var i=dt.formState;if(i!==null){e:{var s=Ue;if(oe){if(Y){t:{for(var n=Y,r=we;n.nodeType!==8;){if(!r){n=null;break t}if(n=cs(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Y=cs(n.nextSibling),s=n.data==="F!";break e}}Re(s)}s=!1}s&&(t=i[0])}}return i=mi(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:t},i.queue=s,i=Td.bind(null,Ue,s),s.dispatch=i,s=Jc(!1),r=au.bind(null,Ue,!1,s.queue),s=mi(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,i=Pm.bind(null,Ue,n,r,i),n.dispatch=i,s.memoizedState=e,[t,i,!1]}function hd(e){var t=jt();return dd(t,ct,e)}function dd(e,t,i){if(t=Qc(e,t,cd)[0],e=Lo(vn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=El(t)}catch(S){throw S===wa?xo:S}else s=t;t=jt();var n=t.queue,r=n.dispatch;return i!==t.memoizedState&&(Ue.flags|=2048,Aa(9,{destroy:void 0},Fm.bind(null,n,i),null)),[s,r,e]}function Fm(e,t){e.action=t}function fd(e){var t=jt(),i=ct;if(i!==null)return dd(t,i,e);jt(),t=t.memoizedState,i=jt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function Aa(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=Ue.updateQueue,t===null&&(t=Mo(),Ue.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function _d(){return jt().memoizedState}function jo(e,t,i,s){var n=mi();Ue.flags|=e,n.memoizedState=Aa(1|t,{destroy:void 0},i,s===void 0?null:s)}function Bo(e,t,i,s){var n=jt();s=s===void 0?null:s;var r=n.memoizedState.inst;ct!==null&&s!==null&&Kc(s,ct.memoizedState.deps)?n.memoizedState=Aa(t,r,i,s):(Ue.flags|=e,n.memoizedState=Aa(1|t,r,i,s))}function md(e,t){jo(8390656,8,e,t)}function tu(e,t){Bo(2048,8,e,t)}function Im(e){Ue.flags|=4;var t=Ue.updateQueue;if(t===null)t=Mo(),Ue.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function pd(e){var t=jt().memoizedState;return Im({ref:t,nextImpl:e}),function(){if((tt&2)!==0)throw Error(E(440));return t.impl.apply(void 0,arguments)}}function vd(e,t){return Bo(4,2,e,t)}function gd(e,t){return Bo(4,4,e,t)}function bd(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yd(e,t,i){i=i!=null?i.concat([e]):null,Bo(4,4,bd.bind(null,t,e),i)}function iu(){}function Sd(e,t){var i=jt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&Kc(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function wd(e,t){var i=jt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&Kc(t,s[1]))return s[0];if(s=e(),Nr){ri(!0);try{e()}finally{ri(!1)}}return i.memoizedState=[s,t],s}function su(e,t,i){return i===void 0||(pn&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Cf(),Ue.lanes|=e,er|=e,i)}function xd(e,t,i,s){return Yt(i,t)?i:Ca.current!==null?(e=su(e,i,s),Yt(e,t)||(Ut=!0),e):(pn&42)===0||(pn&1073741824)!==0&&(Ge&261930)===0?(Ut=!0,e.memoizedState=i):(e=Cf(),Ue.lanes|=e,er|=e,t)}function Cd(e,t,i,s,n){var r=J.p;J.p=r!==0&&8>r?r:8;var S=K.T,N={};K.T=N,au(e,!1,t,i);try{var G=n(),re=K.S;if(re!==null&&re(N,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var me=Hm(G,s);kl(e,t,me,Qi(e))}else kl(e,t,s,Qi(e))}catch(ye){kl(e,t,{then:function(){},status:"rejected",reason:ye},Qi())}finally{J.p=r,S!==null&&N.types!==null&&(S.types=N.types),K.T=S}}function qm(){}function nu(e,t,i,s){if(e.tag!==5)throw Error(E(476));var n=Ed(e).queue;Cd(e,n,t,j,i===null?qm:function(){return kd(e),i(s)})}function Ed(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:j},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function kd(e){var t=Ed(e);t.next===null&&(t=e.alternate.memoizedState),kl(e,t.next.queue,{},Qi())}function ru(){return vt(ql)}function Ad(){return jt().memoizedState}function Dd(){return jt().memoizedState}function Wm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Qi();e=$n(i);var s=Vn(t,e,i);s!==null&&(Oi(s,t,i),Sl(s,t,i)),t={cache:jc()},e.payload=t;return}t=t.return}}function Km(e,t,i){var s=Qi();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},No(e)?Rd(t,i):(i=_a(e,t,i,s),i!==null&&(Oi(i,e,s),Md(i,t,s)))}function Td(e,t,i){var s=Qi();kl(e,t,i,s)}function kl(e,t,i,s){var n={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(No(e))Rd(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var S=t.lastRenderedState,N=r(S,i);if(n.hasEagerState=!0,n.eagerState=N,Yt(N,S))return mn(e,t,n,0),dt===null&&fa(),!1}catch{}if(i=_a(e,t,n,s),i!==null)return Oi(i,e,s),Md(i,t,s),!0}return!1}function au(e,t,i,s){if(s={lane:2,revertLane:zu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},No(e)){if(t)throw Error(E(479))}else t=_a(e,i,s,2),t!==null&&Oi(t,e,2)}function No(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function Rd(e,t){Ea=To=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Md(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,mr(e,i)}}var Al={readContext:vt,use:Oo,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Al.useEffectEvent=Tt;var Od={readContext:vt,use:Oo,useCallback:function(e,t){return mi().memoizedState=[e,t===void 0?null:t],e},useContext:vt,useEffect:md,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,jo(4194308,4,bd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){jo(4,2,e,t)},useMemo:function(e,t){var i=mi();t=t===void 0?null:t;var s=e();if(Nr){ri(!0);try{e()}finally{ri(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=mi();if(i!==void 0){var n=i(t);if(Nr){ri(!0);try{i(t)}finally{ri(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Km.bind(null,Ue,e),[s.memoizedState,e]},useRef:function(e){var t=mi();return e={current:e},t.memoizedState=e},useState:function(e){e=Jc(e);var t=e.queue,i=Td.bind(null,Ue,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:iu,useDeferredValue:function(e,t){var i=mi();return su(i,e,t)},useTransition:function(){var e=Jc(!1);return e=Cd.bind(null,Ue,e.queue,!0,!1),mi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=Ue,n=mi();if(oe){if(i===void 0)throw Error(E(407));i=i()}else{if(i=t(),dt===null)throw Error(E(349));(Ge&127)!==0||Jh(s,t,i)}n.memoizedState=i;var r={value:i,getSnapshot:t};return n.queue=r,md(td.bind(null,s,r,e),[e]),s.flags|=2048,Aa(9,{destroy:void 0},ed.bind(null,s,r,i,t),null),i},useId:function(){var e=mi(),t=dt.identifierPrefix;if(oe){var i=Ai,s=as;i=(s&~(1<<32-mt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Ro++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=zm++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ru,useFormState:ud,useActionState:ud,useOptimistic:function(e){var t=mi();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=au.bind(null,Ue,!0,i),i.dispatch=t,[e,t]},useMemoCache:Xc,useCacheRefresh:function(){return mi().memoizedState=Wm.bind(null,Ue)},useEffectEvent:function(e){var t=mi(),i={impl:e};return t.memoizedState=i,function(){if((tt&2)!==0)throw Error(E(440));return i.impl.apply(void 0,arguments)}}},lu={readContext:vt,use:Oo,useCallback:Sd,useContext:vt,useEffect:tu,useImperativeHandle:yd,useInsertionEffect:vd,useLayoutEffect:gd,useMemo:wd,useReducer:Lo,useRef:_d,useState:function(){return Lo(vn)},useDebugValue:iu,useDeferredValue:function(e,t){var i=jt();return xd(i,ct.memoizedState,e,t)},useTransition:function(){var e=Lo(vn)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:El(e),t]},useSyncExternalStore:Zh,useId:Ad,useHostTransitionStatus:ru,useFormState:hd,useActionState:hd,useOptimistic:function(e,t){var i=jt();return nd(i,ct,e,t)},useMemoCache:Xc,useCacheRefresh:Dd};lu.useEffectEvent=pd;var Ld={readContext:vt,use:Oo,useCallback:Sd,useContext:vt,useEffect:tu,useImperativeHandle:yd,useInsertionEffect:vd,useLayoutEffect:gd,useMemo:wd,useReducer:Zc,useRef:_d,useState:function(){return Zc(vn)},useDebugValue:iu,useDeferredValue:function(e,t){var i=jt();return ct===null?su(i,e,t):xd(i,ct.memoizedState,e,t)},useTransition:function(){var e=Zc(vn)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:El(e),t]},useSyncExternalStore:Zh,useId:Ad,useHostTransitionStatus:ru,useFormState:fd,useActionState:fd,useOptimistic:function(e,t){var i=jt();return ct!==null?nd(i,ct,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Xc,useCacheRefresh:Dd};Ld.useEffectEvent=pd;function ou(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:p({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var cu={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Qi(),n=$n(s);n.payload=t,i!=null&&(n.callback=i),t=Vn(e,n,s),t!==null&&(Oi(t,e,s),Sl(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Qi(),n=$n(s);n.tag=1,n.payload=t,i!=null&&(n.callback=i),t=Vn(e,n,s),t!==null&&(Oi(t,e,s),Sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Qi(),s=$n(i);s.tag=2,t!=null&&(s.callback=t),t=Vn(e,s,i),t!==null&&(Oi(t,e,i),Sl(t,e,i))}};function jd(e,t,i,s,n,r,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,S):t.prototype&&t.prototype.isPureReactComponent?!qi(i,s)||!qi(n,r):!0}function Bd(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function Hr(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=p({},i));for(var n in e)i[n]===void 0&&(i[n]=e[n])}return i}function Nd(e){Dr(e)}function Hd(e){console.error(e)}function zd(e){Dr(e)}function Ho(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Ud(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function uu(e,t,i){return i=$n(i),i.tag=3,i.payload={element:null},i.callback=function(){Ho(e,t)},i}function Pd(e){return e=$n(e),e.tag=3,e}function Fd(e,t,i,s){var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){Ud(t,i,s)}}var S=i.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){Ud(t,i,s),typeof n!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var N=s.stack;this.componentDidCatch(s.value,{componentStack:N!==null?N:""})})}function Gm(e,t,i,s,n){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&ks(t,i,n,!0),i=Yi.current,i!==null){switch(i.tag){case 31:case 13:return os===null?Vo():i.alternate===null&&Rt===0&&(Rt=3),i.flags&=-257,i.flags|=65536,i.lanes=n,s===Co?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),Bu(e,s,n)),!1;case 22:return i.flags|=65536,s===Co?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),Bu(e,s,n)),!1}throw Error(E(435,i.tag))}return Bu(e,s,n),Vo(),!1}if(oe)return t=Yi.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==Ae&&(e=Error(E(422),{cause:s}),Ie(Ci(e,i)))):(s!==Ae&&(t=Error(E(423),{cause:s}),Ie(Ci(t,i))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Ci(s,i),n=uu(e.stateNode,s,n),Pc(e,n),Rt!==4&&(Rt=2)),!1;var r=Error(E(520),{cause:s});if(r=Ci(r,i),Bl===null?Bl=[r]:Bl.push(r),Rt!==4&&(Rt=2),t===null)return!0;s=Ci(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,e=uu(i.stateNode,s,e),Pc(i,e),!1;case 1:if(t=i.type,r=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))))return i.flags|=65536,n&=-n,i.lanes|=n,n=Pd(n),Fd(n,e,i,s),Pc(i,n),!1}i=i.return}while(i!==null);return!1}var hu=Error(E(461)),Ut=!1;function Jt(e,t,i,s){t.child=e===null?Kh(t,null,i,s):Br(t,e.child,i,s)}function Id(e,t,i,s,n){i=i.render;var r=t.ref;if("ref"in s){var S={};for(var N in s)N!=="ref"&&(S[N]=s[N])}else S=s;return As(t),s=Gc(e,t,i,S,r,n),N=Yc(),e!==null&&!Ut?($c(e,t,n),gn(e,t,n)):(oe&&N&&ba(t),t.flags|=1,Jt(e,t,s,n),t.child)}function qd(e,t,i,s,n){if(e===null){var r=i.type;return typeof r=="function"&&!Rr(r)&&r.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=r,Wd(e,t,r,s,n)):(e=pa(i.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!bu(e,n)){var S=r.memoizedProps;if(i=i.compare,i=i!==null?i:qi,i(S,s)&&e.ref===t.ref)return gn(e,t,n)}return t.flags|=1,e=ws(r,s),e.ref=t.ref,e.return=t,t.child=e}function Wd(e,t,i,s,n){if(e!==null){var r=e.memoizedProps;if(qi(r,s)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=s=r,bu(e,n))(e.flags&131072)!==0&&(Ut=!0);else return t.lanes=e.lanes,gn(e,t,n)}return du(e,t,i,s,n)}function Kd(e,t,i,s){var n=s.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|i:i,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,t.child=null;return Gd(e,t,r,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wo(t,r!==null?r.cachePool:null),r!==null?$h(t,r):Ic(),Vh(t);else return s=t.lanes=536870912,Gd(e,t,r!==null?r.baseLanes|i:i,i,s)}else r!==null?(wo(t,r.cachePool),$h(t,r),Qn(),t.memoizedState=null):(e!==null&&wo(t,null),Ic(),Qn());return Jt(e,t,n,i),t.child}function Dl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Gd(e,t,i,s,n){var r=Nc();return r=r===null?null:{parent:Ht._currentValue,pool:r},t.memoizedState={baseLanes:i,cachePool:r},e!==null&&wo(t,null),Ic(),Vh(t),e!==null&&ks(e,t,s,!0),t.childLanes=n,null}function zo(e,t){return t=Po({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Yd(e,t,i){return Br(t,e.child,null,i),e=zo(t,t.pendingProps),e.flags|=2,$i(t),t.memoizedState=null,e}function Ym(e,t,i){var s=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(oe){if(s.mode==="hidden")return e=zo(t,s),t.lanes=536870912,Dl(null,e);if(Wc(t),(e=Y)?(e=a_(e,we),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ki!==null?{id:as,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},i=fl(e),i.return=t,t.child=i,H=t,Y=null)):e=null,e===null)throw Re(t);return t.lanes=536870912,null}return zo(t,s)}var r=e.memoizedState;if(r!==null){var S=r.dehydrated;if(Wc(t),n)if(t.flags&256)t.flags&=-257,t=Yd(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(E(558));else if(Ut||ks(e,t,i,!1),n=(i&e.childLanes)!==0,Ut||n){if(s=dt,s!==null&&(S=no(s,i),S!==0&&S!==r.retryLane))throw r.retryLane=S,rs(e,S),Oi(s,e,S),hu;Vo(),t=Yd(e,t,i)}else e=r.treeContext,Y=cs(S.nextSibling),H=t,oe=!0,de=null,we=!1,e!==null&&A(t,e),t=zo(t,s),t.flags|=4096;return t}return e=ws(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Uo(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(E(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function du(e,t,i,s,n){return As(t),i=Gc(e,t,i,s,void 0,n),s=Yc(),e!==null&&!Ut?($c(e,t,n),gn(e,t,n)):(oe&&s&&ba(t),t.flags|=1,Jt(e,t,i,n),t.child)}function $d(e,t,i,s,n,r){return As(t),t.updateQueue=null,i=Qh(t,s,i,n),Xh(e),s=Yc(),e!==null&&!Ut?($c(e,t,r),gn(e,t,r)):(oe&&s&&ba(t),t.flags|=1,Jt(e,t,i,r),t.child)}function Vd(e,t,i,s,n){if(As(t),t.stateNode===null){var r=ui,S=i.contextType;typeof S=="object"&&S!==null&&(r=vt(S)),r=new i(s,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=cu,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=s,r.state=t.memoizedState,r.refs={},zc(t),S=i.contextType,r.context=typeof S=="object"&&S!==null?vt(S):ui,r.state=t.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(ou(t,i,S,s),r.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(S=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),S!==r.state&&cu.enqueueReplaceState(r,r.state,null),xl(t,s,r,n),wl(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){r=t.stateNode;var N=t.memoizedProps,G=Hr(i,N);r.props=G;var re=r.context,me=i.contextType;S=ui,typeof me=="object"&&me!==null&&(S=vt(me));var ye=i.getDerivedStateFromProps;me=typeof ye=="function"||typeof r.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,me||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(N||re!==S)&&Bd(t,r,s,S),Yn=!1;var le=t.memoizedState;r.state=le,xl(t,s,r,n),wl(),re=t.memoizedState,N||le!==re||Yn?(typeof ye=="function"&&(ou(t,i,ye,s),re=t.memoizedState),(G=Yn||jd(t,i,G,s,le,re,S))?(me||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=re),r.props=s,r.state=re,r.context=S,s=G):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Uc(e,t),S=t.memoizedProps,me=Hr(i,S),r.props=me,ye=t.pendingProps,le=r.context,re=i.contextType,G=ui,typeof re=="object"&&re!==null&&(G=vt(re)),N=i.getDerivedStateFromProps,(re=typeof N=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(S!==ye||le!==G)&&Bd(t,r,s,G),Yn=!1,le=t.memoizedState,r.state=le,xl(t,s,r,n),wl();var he=t.memoizedState;S!==ye||le!==he||Yn||e!==null&&e.dependencies!==null&&ls(e.dependencies)?(typeof N=="function"&&(ou(t,i,N,s),he=t.memoizedState),(me=Yn||jd(t,i,me,s,le,he,G)||e!==null&&e.dependencies!==null&&ls(e.dependencies))?(re||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,he,G),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,he,G)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||S===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=he),r.props=s,r.state=he,r.context=G,s=me):(typeof r.componentDidUpdate!="function"||S===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Uo(e,t),s=(t.flags&128)!==0,r||s?(r=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&s?(t.child=Br(t,e.child,null,n),t.child=Br(t,null,i,n)):Jt(e,t,i,n),t.memoizedState=r.state,e=t.child):e=gn(e,t,n),e}function Xd(e,t,i,s){return Fe(),t.flags|=256,Jt(e,t,i,s),t.child}var fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _u(e){return{baseLanes:e,cachePool:Uh()}}function mu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Xi),e}function Qd(e,t,i){var s=t.pendingProps,n=!1,r=(t.flags&128)!==0,S;if((S=r)||(S=e!==null&&e.memoizedState===null?!1:(Lt.current&2)!==0),S&&(n=!0,t.flags&=-129),S=(t.flags&32)!==0,t.flags&=-33,e===null){if(oe){if(n?Xn(t):Qn(),(e=Y)?(e=a_(e,we),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ki!==null?{id:as,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},i=fl(e),i.return=t,t.child=i,H=t,Y=null)):e=null,e===null)throw Re(t);return Qu(e)?t.lanes=32:t.lanes=536870912,null}var N=s.children;return s=s.fallback,n?(Qn(),n=t.mode,N=Po({mode:"hidden",children:N},n),s=xs(s,n,i,null),N.return=t,s.return=t,N.sibling=s,t.child=N,s=t.child,s.memoizedState=_u(i),s.childLanes=mu(e,S,i),t.memoizedState=fu,Dl(null,s)):(Xn(t),pu(t,N))}var G=e.memoizedState;if(G!==null&&(N=G.dehydrated,N!==null)){if(r)t.flags&256?(Xn(t),t.flags&=-257,t=vu(e,t,i)):t.memoizedState!==null?(Qn(),t.child=e.child,t.flags|=128,t=null):(Qn(),N=s.fallback,n=t.mode,s=Po({mode:"visible",children:s.children},n),N=xs(N,n,i,null),N.flags|=2,s.return=t,N.return=t,s.sibling=N,t.child=s,Br(t,e.child,null,i),s=t.child,s.memoizedState=_u(i),s.childLanes=mu(e,S,i),t.memoizedState=fu,t=Dl(null,s));else if(Xn(t),Qu(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var re=S.dgst;S=re,s=Error(E(419)),s.stack="",s.digest=S,Ie({value:s,source:null,stack:null}),t=vu(e,t,i)}else if(Ut||ks(e,t,i,!1),S=(i&e.childLanes)!==0,Ut||S){if(S=dt,S!==null&&(s=no(S,i),s!==0&&s!==G.retryLane))throw G.retryLane=s,rs(e,s),Oi(S,e,s),hu;Xu(N)||Vo(),t=vu(e,t,i)}else Xu(N)?(t.flags|=192,t.child=e.child,t=null):(e=G.treeContext,Y=cs(N.nextSibling),H=t,oe=!0,de=null,we=!1,e!==null&&A(t,e),t=pu(t,s.children),t.flags|=4096);return t}return n?(Qn(),N=s.fallback,n=t.mode,G=e.child,re=G.sibling,s=ws(G,{mode:"hidden",children:s.children}),s.subtreeFlags=G.subtreeFlags&65011712,re!==null?N=ws(re,N):(N=xs(N,n,i,null),N.flags|=2),N.return=t,s.return=t,s.sibling=N,t.child=s,Dl(null,s),s=t.child,N=e.child.memoizedState,N===null?N=_u(i):(n=N.cachePool,n!==null?(G=Ht._currentValue,n=n.parent!==G?{parent:G,pool:G}:n):n=Uh(),N={baseLanes:N.baseLanes|i,cachePool:n}),s.memoizedState=N,s.childLanes=mu(e,S,i),t.memoizedState=fu,Dl(e.child,s)):(Xn(t),i=e.child,e=i.sibling,i=ws(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(S=t.deletions,S===null?(t.deletions=[e],t.flags|=16):S.push(e)),t.child=i,t.memoizedState=null,i)}function pu(e,t){return t=Po({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Po(e,t){return e=It(22,e,null,t),e.lanes=0,e}function vu(e,t,i){return Br(t,e.child,null,i),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zd(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Gi(e.return,t,i)}function gu(e,t,i,s,n,r){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n,treeForkCount:r}:(S.isBackwards=t,S.rendering=null,S.renderingStartTime=0,S.last=s,S.tail=i,S.tailMode=n,S.treeForkCount=r)}function Jd(e,t,i){var s=t.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var S=Lt.current,N=(S&2)!==0;if(N?(S=S&1|2,t.flags|=128):S&=1,ae(Lt,S),Jt(e,t,s,i),s=oe?Mr:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,i,t);else if(e.tag===19)Zd(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Do(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),gu(t,!1,n,i,r,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Do(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}gu(t,!0,i,null,r,s);break;case"together":gu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function gn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(ks(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,i=ws(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ws(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function bu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ls(e)))}function $m(e,t,i){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),qe(t,Ht,e.memoizedState.cache),Fe();break;case 27:case 5:pe(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:qe(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Wc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Xn(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Qd(e,t,i):(Xn(t),e=gn(e,t,i),e!==null?e.sibling:null);Xn(t);break;case 19:var n=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(ks(e,t,i,!1),s=(i&t.childLanes)!==0),n){if(s)return Jd(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ae(Lt,Lt.current),s)break;return null;case 22:return t.lanes=0,Kd(e,t,i,t.pendingProps);case 24:qe(t,Ht,e.memoizedState.cache)}return gn(e,t,i)}function ef(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ut=!0;else{if(!bu(e,i)&&(t.flags&128)===0)return Ut=!1,$m(e,t,i);Ut=(e.flags&131072)!==0}else Ut=!1,oe&&(t.flags&1048576)!==0&&pl(t,Mr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Lr(t.elementType),t.type=e,typeof e=="function")Rr(e)?(s=Hr(e,s),t.tag=1,t=Vd(null,t,e,s,i)):(t.tag=0,t=du(null,t,e,s,i));else{if(e!=null){var n=e.$$typeof;if(n===g){t.tag=11,t=Id(null,t,e,s,i);break e}else if(n===L){t.tag=14,t=qd(null,t,e,s,i);break e}}throw t=Q(e)||e,Error(E(306,t,""))}}return t;case 0:return du(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,n=Hr(s,t.pendingProps),Vd(e,t,s,n,i);case 3:e:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(E(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,Uc(e,t),xl(t,s,null,i);var S=t.memoizedState;if(s=S.cache,qe(t,Ht,s),s!==r.cache&&Es(t,[Ht],i,!0),wl(),s=S.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:S.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Xd(e,t,s,i);break e}else if(s!==n){n=Ci(Error(E(424)),t),Ie(n),t=Xd(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Y=cs(e.firstChild),H=t,oe=!0,de=null,we=!0,i=Kh(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Fe(),s===n){t=gn(e,t,i);break e}Jt(e,t,s,i)}t=t.child}return t;case 26:return Uo(e,t),e===null?(i=d_(t.type,null,t.pendingProps,null))?t.memoizedState=i:oe||(i=t.type,e=t.pendingProps,s=ic(Te.current).createElement(i),s[St]=t,s[Kt]=e,ei(s,i,e),Dt(s),t.stateNode=s):t.memoizedState=d_(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pe(t),e===null&&oe&&(s=t.stateNode=c_(t.type,t.pendingProps,Te.current),H=t,we=!0,n=Y,rr(t.type)?(Zu=n,Y=cs(s.firstChild)):Y=n),Jt(e,t,t.pendingProps.children,i),Uo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&oe&&((n=s=Y)&&(s=Cp(s,t.type,t.pendingProps,we),s!==null?(t.stateNode=s,H=t,Y=cs(s.firstChild),we=!1,n=!0):n=!1),n||Re(t)),pe(t),n=t.type,r=t.pendingProps,S=e!==null?e.memoizedProps:null,s=r.children,Yu(n,r)?s=null:S!==null&&Yu(n,S)&&(t.flags|=32),t.memoizedState!==null&&(n=Gc(e,t,Um,null,null,i),ql._currentValue=n),Uo(e,t),Jt(e,t,s,i),t.child;case 6:return e===null&&oe&&((e=i=Y)&&(i=Ep(i,t.pendingProps,we),i!==null?(t.stateNode=i,H=t,Y=null,e=!0):e=!1),e||Re(t)),null;case 13:return Qd(e,t,i);case 4:return ie(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Br(t,null,s,i):Jt(e,t,s,i),t.child;case 11:return Id(e,t,t.type,t.pendingProps,i);case 7:return Jt(e,t,t.pendingProps,i),t.child;case 8:return Jt(e,t,t.pendingProps.children,i),t.child;case 12:return Jt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,qe(t,t.type,s.value),Jt(e,t,s.children,i),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,As(t),n=vt(n),s=s(n),t.flags|=1,Jt(e,t,s,i),t.child;case 14:return qd(e,t,t.type,t.pendingProps,i);case 15:return Wd(e,t,t.type,t.pendingProps,i);case 19:return Jd(e,t,i);case 31:return Ym(e,t,i);case 22:return Kd(e,t,i,t.pendingProps);case 24:return As(t),s=vt(Ht),e===null?(n=Nc(),n===null&&(n=dt,r=jc(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=i),n=r),t.memoizedState={parent:s,cache:n},zc(t),qe(t,Ht,n)):((e.lanes&i)!==0&&(Uc(e,t),xl(t,null,null,i),wl()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),qe(t,Ht,s)):(s=r.cache,qe(t,Ht,s),s!==n.cache&&Es(t,[Ht],i,!0))),Jt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(E(156,t.tag))}function bn(e){e.flags|=4}function yu(e,t,i,s,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Df())e.flags|=8192;else throw jr=Co,Hc}else e.flags&=-16777217}function tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!v_(t))if(Df())e.flags|=8192;else throw jr=Co,Hc}function Fo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?qr():536870912,e.lanes|=t,Ma|=t)}function Tl(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function Vm(e,t,i){var s=t.pendingProps;switch(v(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return gt(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),pt(Ht),ce(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(xe(t)?bn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_t())),gt(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(bn(t),r!==null?(gt(t),tf(t,r)):(gt(t),yu(t,n,null,s,i))):r?r!==e.memoizedState?(bn(t),gt(t),tf(t,r)):(gt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&bn(t),gt(t),yu(t,n,e,s,i)),null;case 27:if(Oe(t),i=Te.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&bn(t);else{if(!s){if(t.stateNode===null)throw Error(E(166));return gt(t),null}e=ve.current,xe(t)?Se(t):(e=c_(n,s,i),t.stateNode=e,bn(t))}return gt(t),null;case 5:if(Oe(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&bn(t);else{if(!s){if(t.stateNode===null)throw Error(E(166));return gt(t),null}if(r=ve.current,xe(t))Se(t);else{var S=ic(Te.current);switch(r){case 1:r=S.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=S.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=S.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=S.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?S.createElement("select",{is:s.is}):S.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?S.createElement(n,{is:s.is}):S.createElement(n)}}r[St]=t,r[Kt]=s;e:for(S=t.child;S!==null;){if(S.tag===5||S.tag===6)r.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}t.stateNode=r;e:switch(ei(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&bn(t)}}return gt(t),yu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&bn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(E(166));if(e=Te.current,xe(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,n=H,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[St]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Zf(e.nodeValue,i)),e||Re(t,!0)}else e=ic(e).createTextNode(s),e[St]=t,t.stateNode=e}return gt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=xe(t),i!==null){if(e===null){if(!s)throw Error(E(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(557));e[St]=t}else Fe(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),e=!1}else i=_t(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?($i(t),t):($i(t),null);if((t.flags&128)!==0)throw Error(E(558))}return gt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=xe(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(E(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(E(317));n[St]=t}else Fe(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),n=!1}else n=_t(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?($i(t),t):($i(t),null)}return $i(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Fo(t,t.updateQueue),gt(t),null);case 4:return ce(),e===null&&Iu(t.stateNode.containerInfo),gt(t),null;case 10:return pt(t.type),gt(t),null;case 19:if(P(Lt),s=t.memoizedState,s===null)return gt(t),null;if(n=(t.flags&128)!==0,r=s.rendering,r===null)if(n)Tl(s,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Do(e),r!==null){for(t.flags|=128,Tl(s,!1),e=r.updateQueue,t.updateQueue=e,Fo(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)yo(i,e),i=i.sibling;return ae(Lt,Lt.current&1|2),oe&&Cs(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&yt()>Go&&(t.flags|=128,n=!0,Tl(s,!1),t.lanes=4194304)}else{if(!n)if(e=Do(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Fo(t,e),Tl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!oe)return gt(t),null}else 2*yt()-s.renderingStartTime>Go&&i!==536870912&&(t.flags|=128,n=!0,Tl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yt(),e.sibling=null,i=Lt.current,ae(Lt,n?i&1|2:i&1),oe&&Cs(t,s.treeForkCount),e):(gt(t),null);case 22:case 23:return $i(t),qc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),i=t.updateQueue,i!==null&&Fo(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&P(Or),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),pt(Ht),gt(t),null;case 25:return null;case 30:return null}throw Error(E(156,t.tag))}function Xm(e,t){switch(v(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pt(Ht),ce(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Oe(t),null;case 31:if(t.memoizedState!==null){if($i(t),t.alternate===null)throw Error(E(340));Fe()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if($i(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));Fe()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(Lt),null;case 4:return ce(),null;case 10:return pt(t.type),null;case 22:case 23:return $i(t),qc(),e!==null&&P(Or),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pt(Ht),null;case 25:return null;default:return null}}function sf(e,t){switch(v(t),t.tag){case 3:pt(Ht),ce();break;case 26:case 27:case 5:Oe(t);break;case 4:ce();break;case 31:t.memoizedState!==null&&$i(t);break;case 13:$i(t);break;case 19:P(Lt);break;case 10:pt(t.type);break;case 22:case 23:$i(t),qc(),e!==null&&P(Or);break;case 24:pt(Ht)}}function Rl(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var n=s.next;i=n;do{if((i.tag&e)===e){s=void 0;var r=i.create,S=i.inst;s=r(),S.destroy=s}i=i.next}while(i!==n)}}catch(N){at(t,t.return,N)}}function Zn(e,t,i){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){var S=s.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,n=t;var G=i,re=N;try{re()}catch(me){at(n,G,me)}}}s=s.next}while(s!==r)}}catch(me){at(t,t.return,me)}}function nf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Yh(t,i)}catch(s){at(e,e.return,s)}}}function rf(e,t,i){i.props=Hr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){at(e,t,s)}}function Ml(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(n){at(e,t,n)}}function Gs(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(n){at(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(n){at(e,t,n)}else i.current=null}function af(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(n){at(e,e.return,n)}}function Su(e,t,i){try{var s=e.stateNode;gp(s,e.type,i,t),s[Kt]=t}catch(n){at(e,e.return,n)}}function lf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rr(e.type)||e.tag===4}function wu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xu(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=li));else if(s!==4&&(s===27&&rr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(xu(e,t,i),e=e.sibling;e!==null;)xu(e,t,i),e=e.sibling}function Io(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&rr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Io(e,t,i),e=e.sibling;e!==null;)Io(e,t,i),e=e.sibling}function of(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ei(t,s,i),t[St]=e,t[Kt]=i}catch(r){at(e,e.return,r)}}var yn=!1,Pt=!1,Cu=!1,cf=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function Qm(e,t){if(e=e.containerInfo,Ku=cc,e=hn(e),ul(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{i.nodeType,r.nodeType}catch{i=null;break e}var S=0,N=-1,G=-1,re=0,me=0,ye=e,le=null;t:for(;;){for(var he;ye!==i||n!==0&&ye.nodeType!==3||(N=S+n),ye!==r||s!==0&&ye.nodeType!==3||(G=S+s),ye.nodeType===3&&(S+=ye.nodeValue.length),(he=ye.firstChild)!==null;)le=ye,ye=he;for(;;){if(ye===e)break t;if(le===i&&++re===n&&(N=S),le===r&&++me===s&&(G=S),(he=ye.nextSibling)!==null)break;ye=le,le=ye.parentNode}ye=he}i=N===-1||G===-1?null:{start:N,end:G}}else i=null}i=i||{start:0,end:0}}else i=null;for(Gu={focusedElem:e,selectionRange:i},cc=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){switch(t=Vt,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)n=e[i],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,i=t,n=r.memoizedProps,r=r.memoizedState,s=i.stateNode;try{var De=Hr(i.type,n);e=s.getSnapshotBeforeUpdate(De,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(Be){at(i,i.return,Be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Vu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(E(163))}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}}function uf(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:wn(e,i),s&4&&Rl(5,i);break;case 1:if(wn(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(S){at(i,i.return,S)}else{var n=Hr(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(S){at(i,i.return,S)}}s&64&&nf(i),s&512&&Ml(i,i.return);break;case 3:if(wn(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Yh(e,t)}catch(S){at(i,i.return,S)}}break;case 27:t===null&&s&4&&of(i);case 26:case 5:wn(e,i),t===null&&s&4&&af(i),s&512&&Ml(i,i.return);break;case 12:wn(e,i);break;case 31:wn(e,i),s&4&&ff(e,i);break;case 13:wn(e,i),s&4&&_f(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ap.bind(null,i),kp(e,i))));break;case 22:if(s=i.memoizedState!==null||yn,!s){t=t!==null&&t.memoizedState!==null||Pt,n=yn;var r=Pt;yn=s,(Pt=t)&&!r?xn(e,i,(i.subtreeFlags&8772)!==0):wn(e,i),yn=n,Pt=r}break;case 30:break;default:wn(e,i)}}function hf(e){var t=e.alternate;t!==null&&(e.alternate=null,hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,Di=!1;function Sn(e,t,i){for(i=i.child;i!==null;)df(e,t,i),i=i.sibling}function df(e,t,i){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(Ji,i)}catch{}switch(i.tag){case 26:Pt||Gs(i,t),Sn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Pt||Gs(i,t);var s=xt,n=Di;rr(i.type)&&(xt=i.stateNode,Di=!1),Sn(e,t,i),Pl(i.stateNode),xt=s,Di=n;break;case 5:Pt||Gs(i,t);case 6:if(s=xt,n=Di,xt=null,Sn(e,t,i),xt=s,Di=n,xt!==null)if(Di)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(i.stateNode)}catch(r){at(i,t,r)}else try{xt.removeChild(i.stateNode)}catch(r){at(i,t,r)}break;case 18:xt!==null&&(Di?(e=xt,n_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ua(e)):n_(xt,i.stateNode));break;case 4:s=xt,n=Di,xt=i.stateNode.containerInfo,Di=!0,Sn(e,t,i),xt=s,Di=n;break;case 0:case 11:case 14:case 15:Zn(2,i,t),Pt||Zn(4,i,t),Sn(e,t,i);break;case 1:Pt||(Gs(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&rf(i,t,s)),Sn(e,t,i);break;case 21:Sn(e,t,i);break;case 22:Pt=(s=Pt)||i.memoizedState!==null,Sn(e,t,i),Pt=s;break;default:Sn(e,t,i)}}function ff(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ua(e)}catch(i){at(t,t.return,i)}}}function _f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ua(e)}catch(i){at(t,t.return,i)}}function Zm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new cf),t;default:throw Error(E(435,e.tag))}}function qo(e,t){var i=Zm(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var n=lp.bind(null,e,s);s.then(n,n)}})}function Ti(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s],r=e,S=t,N=S;e:for(;N!==null;){switch(N.tag){case 27:if(rr(N.type)){xt=N.stateNode,Di=!1;break e}break;case 5:xt=N.stateNode,Di=!1;break e;case 3:case 4:xt=N.stateNode.containerInfo,Di=!0;break e}N=N.return}if(xt===null)throw Error(E(160));df(r,S,n),xt=null,Di=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mf(t,e),t=t.sibling}var Ds=null;function mf(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ti(t,e),Ri(e),s&4&&(Zn(3,e,e.return),Rl(3,e),Zn(5,e,e.return));break;case 1:Ti(t,e),Ri(e),s&512&&(Pt||i===null||Gs(i,i.return)),s&64&&yn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var n=Ds;if(Ti(t,e),Ri(e),s&512&&(Pt||i===null||Gs(i,i.return)),s&4){var r=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":r=n.getElementsByTagName("title")[0],(!r||r[nt]||r[St]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),ei(r,s,i),r[St]=e,Dt(r),s=r;break e;case"link":var S=m_("link","href",n).get(s+(i.href||""));if(S){for(var N=0;N<S.length;N++)if(r=S[N],r.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&r.getAttribute("rel")===(i.rel==null?null:i.rel)&&r.getAttribute("title")===(i.title==null?null:i.title)&&r.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){S.splice(N,1);break t}}r=n.createElement(s),ei(r,s,i),n.head.appendChild(r);break;case"meta":if(S=m_("meta","content",n).get(s+(i.content||""))){for(N=0;N<S.length;N++)if(r=S[N],r.getAttribute("content")===(i.content==null?null:""+i.content)&&r.getAttribute("name")===(i.name==null?null:i.name)&&r.getAttribute("property")===(i.property==null?null:i.property)&&r.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&r.getAttribute("charset")===(i.charSet==null?null:i.charSet)){S.splice(N,1);break t}}r=n.createElement(s),ei(r,s,i),n.head.appendChild(r);break;default:throw Error(E(468,s))}r[St]=e,Dt(r),s=r}e.stateNode=s}else p_(n,e.type,e.stateNode);else e.stateNode=__(n,s,e.memoizedProps);else r!==s?(r===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):r.count--,s===null?p_(n,e.type,e.stateNode):__(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Su(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ti(t,e),Ri(e),s&512&&(Pt||i===null||Gs(i,i.return)),i!==null&&s&4&&Su(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ti(t,e),Ri(e),s&512&&(Pt||i===null||Gs(i,i.return)),e.flags&32){n=e.stateNode;try{Hs(n,"")}catch(De){at(e,e.return,De)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,Su(e,n,i!==null?i.memoizedProps:n)),s&1024&&(Cu=!0);break;case 6:if(Ti(t,e),Ri(e),s&4){if(e.stateNode===null)throw Error(E(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(De){at(e,e.return,De)}}break;case 3:if(rc=null,n=Ds,Ds=sc(t.containerInfo),Ti(t,e),Ds=n,Ri(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Ua(t.containerInfo)}catch(De){at(e,e.return,De)}Cu&&(Cu=!1,pf(e));break;case 4:s=Ds,Ds=sc(e.stateNode.containerInfo),Ti(t,e),Ri(e),Ds=s;break;case 12:Ti(t,e),Ri(e);break;case 31:Ti(t,e),Ri(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,qo(e,s)));break;case 13:Ti(t,e),Ri(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ko=yt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,qo(e,s)));break;case 22:n=e.memoizedState!==null;var G=i!==null&&i.memoizedState!==null,re=yn,me=Pt;if(yn=re||n,Pt=me||G,Ti(t,e),Pt=me,yn=re,Ri(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(i===null||G||yn||Pt||zr(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){G=i=t;try{if(r=G.stateNode,n)S=r.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=G.stateNode;var ye=G.memoizedProps.style,le=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;N.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(De){at(G,G.return,De)}}}else if(t.tag===6){if(i===null){G=t;try{G.stateNode.nodeValue=n?"":G.memoizedProps}catch(De){at(G,G.return,De)}}}else if(t.tag===18){if(i===null){G=t;try{var he=G.stateNode;n?r_(he,!0):r_(G.stateNode,!1)}catch(De){at(G,G.return,De)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,qo(e,i))));break;case 19:Ti(t,e),Ri(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,qo(e,s)));break;case 30:break;case 21:break;default:Ti(t,e),Ri(e)}}function Ri(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(lf(s)){i=s;break}s=s.return}if(i==null)throw Error(E(160));switch(i.tag){case 27:var n=i.stateNode,r=wu(e);Io(e,r,n);break;case 5:var S=i.stateNode;i.flags&32&&(Hs(S,""),i.flags&=-33);var N=wu(e);Io(e,N,S);break;case 3:case 4:var G=i.stateNode.containerInfo,re=wu(e);xu(e,re,G);break;default:throw Error(E(161))}}catch(me){at(e,e.return,me)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;pf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)uf(e,t.alternate,t),t=t.sibling}function zr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Zn(4,t,t.return),zr(t);break;case 1:Gs(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&rf(t,t.return,i),zr(t);break;case 27:Pl(t.stateNode);case 26:case 5:Gs(t,t.return),zr(t);break;case 22:t.memoizedState===null&&zr(t);break;case 30:zr(t);break;default:zr(t)}e=e.sibling}}function xn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,r=t,S=r.flags;switch(r.tag){case 0:case 11:case 15:xn(n,r,i),Rl(4,r);break;case 1:if(xn(n,r,i),s=r,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(re){at(s,s.return,re)}if(s=r,n=s.updateQueue,n!==null){var N=s.stateNode;try{var G=n.shared.hiddenCallbacks;if(G!==null)for(n.shared.hiddenCallbacks=null,n=0;n<G.length;n++)Gh(G[n],N)}catch(re){at(s,s.return,re)}}i&&S&64&&nf(r),Ml(r,r.return);break;case 27:of(r);case 26:case 5:xn(n,r,i),i&&s===null&&S&4&&af(r),Ml(r,r.return);break;case 12:xn(n,r,i);break;case 31:xn(n,r,i),i&&S&4&&ff(n,r);break;case 13:xn(n,r,i),i&&S&4&&_f(n,r);break;case 22:r.memoizedState===null&&xn(n,r,i),Ml(r,r.return);break;case 30:break;default:xn(n,r,i)}t=t.sibling}}function Eu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&vl(i))}function ku(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vl(e))}function Ts(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vf(e,t,i,s),t=t.sibling}function vf(e,t,i,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Ts(e,t,i,s),n&2048&&Rl(9,t);break;case 1:Ts(e,t,i,s);break;case 3:Ts(e,t,i,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vl(e)));break;case 12:if(n&2048){Ts(e,t,i,s),e=t.stateNode;try{var r=t.memoizedProps,S=r.id,N=r.onPostCommit;typeof N=="function"&&N(S,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(G){at(t,t.return,G)}}else Ts(e,t,i,s);break;case 31:Ts(e,t,i,s);break;case 13:Ts(e,t,i,s);break;case 23:break;case 22:r=t.stateNode,S=t.alternate,t.memoizedState!==null?r._visibility&2?Ts(e,t,i,s):Ol(e,t):r._visibility&2?Ts(e,t,i,s):(r._visibility|=2,Da(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),n&2048&&Eu(S,t);break;case 24:Ts(e,t,i,s),n&2048&&ku(t.alternate,t);break;default:Ts(e,t,i,s)}}function Da(e,t,i,s,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,S=t,N=i,G=s,re=S.flags;switch(S.tag){case 0:case 11:case 15:Da(r,S,N,G,n),Rl(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?Da(r,S,N,G,n):Ol(r,S):(me._visibility|=2,Da(r,S,N,G,n)),n&&re&2048&&Eu(S.alternate,S);break;case 24:Da(r,S,N,G,n),n&&re&2048&&ku(S.alternate,S);break;default:Da(r,S,N,G,n)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,n=s.flags;switch(s.tag){case 22:Ol(i,s),n&2048&&Eu(s.alternate,s);break;case 24:Ol(i,s),n&2048&&ku(s.alternate,s);break;default:Ol(i,s)}t=t.sibling}}var Ll=8192;function Ta(e,t,i){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)gf(e,t,i),e=e.sibling}function gf(e,t,i){switch(e.tag){case 26:Ta(e,t,i),e.flags&Ll&&e.memoizedState!==null&&zp(i,Ds,e.memoizedState,e.memoizedProps);break;case 5:Ta(e,t,i);break;case 3:case 4:var s=Ds;Ds=sc(e.stateNode.containerInfo),Ta(e,t,i),Ds=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ll,Ll=16777216,Ta(e,t,i),Ll=s):Ta(e,t,i));break;default:Ta(e,t,i)}}function bf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Vt=s,Sf(s,e)}bf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yf(e),e=e.sibling}function yf(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&Zn(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Wo(e)):jl(e);break;default:jl(e)}}function Wo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Vt=s,Sf(s,e)}bf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Zn(8,t,t.return),Wo(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Wo(t));break;default:Wo(t)}e=e.sibling}}function Sf(e,t){for(;Vt!==null;){var i=Vt;switch(i.tag){case 0:case 11:case 15:Zn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:vl(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Vt=s;else e:for(i=e;Vt!==null;){s=Vt;var n=s.sibling,r=s.return;if(hf(s),s===i){Vt=null;break e}if(n!==null){n.return=r,Vt=n;break e}Vt=r}}}var Jm={getCacheForType:function(e){var t=vt(Ht),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return vt(Ht).controller.signal}},ep=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,We=null,Ge=0,rt=0,Vi=null,Jn=!1,Ra=!1,Au=!1,Cn=0,Rt=0,er=0,Ur=0,Du=0,Xi=0,Ma=0,Bl=null,Mi=null,Tu=!1,Ko=0,wf=0,Go=1/0,Yo=null,tr=null,Wt=0,ir=null,Oa=null,En=0,Ru=0,Mu=null,xf=null,Nl=0,Ou=null;function Qi(){return(tt&2)!==0&&Ge!==0?Ge&-Ge:K.T!==null?zu():pr()}function Cf(){if(Xi===0)if((Ge&536870912)===0||oe){var e=Pr;Pr<<=1,(Pr&3932160)===0&&(Pr=262144),Xi=e}else Xi=536870912;return e=Yi.current,e!==null&&(e.flags|=32),Xi}function Oi(e,t,i){(e===dt&&(rt===2||rt===9)||e.cancelPendingCommit!==null)&&(La(e,0),sr(e,Ge,Xi,!1)),Xt(e,i),((tt&2)===0||e!==dt)&&(e===dt&&((tt&2)===0&&(Ur|=i),Rt===4&&sr(e,Ge,Xi,!1)),Ys(e))}function Ef(e,t,i){if((tt&6)!==0)throw Error(E(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Dn(e,t),n=s?sp(e,t):ju(e,t,!0),r=s;do{if(n===0){Ra&&!s&&sr(e,t,0,!1);break}else{if(i=e.current.alternate,r&&!tp(i)){n=ju(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){t=S;e:{var N=e;n=Bl;var G=N.current.memoizedState.isDehydrated;if(G&&(La(N,S).flags|=256),S=ju(N,S,!1),S!==2){if(Au&&!G){N.errorRecoveryDisabledLanes|=r,Ur|=r,n=4;break e}r=Mi,Mi=n,r!==null&&(Mi===null?Mi=r:Mi.push.apply(Mi,r))}n=S}if(r=!1,n!==2)continue}}if(n===1){La(e,0),sr(e,t,0,!0);break}e:{switch(s=e,r=n,r){case 0:case 1:throw Error(E(345));case 4:if((t&4194048)!==t)break;case 6:sr(s,t,Xi,!Jn);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(E(329))}if((t&62914560)===t&&(n=Ko+300-yt(),10<n)){if(sr(s,t,Xi,!Jn),Fr(s,0,!0)!==0)break e;En=t,s.timeoutHandle=i_(kf.bind(null,s,i,Mi,Yo,Tu,t,Xi,Ur,Ma,Jn,r,"Throttled",-0,0),n);break e}kf(s,i,Mi,Yo,Tu,t,Xi,Ur,Ma,Jn,r,null,-0,0)}}break}while(!0);Ys(e)}function kf(e,t,i,s,n,r,S,N,G,re,me,ye,le,he){if(e.timeoutHandle=-1,ye=t.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},gf(t,r,ye);var De=(r&62914560)===r?Ko-yt():(r&4194048)===r?wf-yt():0;if(De=Up(ye,De),De!==null){En=r,e.cancelPendingCommit=De(jf.bind(null,e,t,r,i,s,n,S,N,G,me,ye,null,le,he)),sr(e,r,S,!re);return}}jf(e,t,r,i,s,n,S,N,G)}function tp(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var n=i[s],r=n.getSnapshot;n=n.value;try{if(!Yt(r(),n))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sr(e,t,i,s){t&=~Du,t&=~Ur,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-mt(n),S=1<<r;s[r]=-1,n&=~S}i!==0&&so(e,i,t)}function $o(){return(tt&6)===0?(Hl(0),!1):!0}function Lu(){if(We!==null){if(rt===0)var e=We.return;else e=We,Nt=qt=null,Vc(e),xa=null,bl=0,e=We;for(;e!==null;)sf(e.alternate,e),e=e.return;We=null}}function La(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Sp(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),En=0,Lu(),dt=e,We=i=ws(e.current,null),Ge=t,rt=0,Vi=null,Jn=!1,Ra=Dn(e,t),Au=!1,Ma=Xi=Du=Ur=er=Rt=0,Mi=Bl=null,Tu=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-mt(s),r=1<<n;t|=e[n],s&=~r}return Cn=t,fa(),i}function Af(e,t){Ue=null,K.H=Al,t===wa||t===xo?(t=Ih(),rt=3):t===Hc?(t=Ih(),rt=4):rt=t===hu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vi=t,We===null&&(Rt=1,Ho(e,Ci(t,e.current)))}function Df(){var e=Yi.current;return e===null?!0:(Ge&4194048)===Ge?os===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===os:!1}function Tf(){var e=K.H;return K.H=Al,e===null?Al:e}function Rf(){var e=K.A;return K.A=Jm,e}function Vo(){Rt=4,Jn||(Ge&4194048)!==Ge&&Yi.current!==null||(Ra=!0),(er&134217727)===0&&(Ur&134217727)===0||dt===null||sr(dt,Ge,Xi,!1)}function ju(e,t,i){var s=tt;tt|=2;var n=Tf(),r=Rf();(dt!==e||Ge!==t)&&(Yo=null,La(e,t)),t=!1;var S=Rt;e:do try{if(rt!==0&&We!==null){var N=We,G=Vi;switch(rt){case 8:Lu(),S=6;break e;case 3:case 2:case 9:case 6:Yi.current===null&&(t=!0);var re=rt;if(rt=0,Vi=null,ja(e,N,G,re),i&&Ra){S=0;break e}break;default:re=rt,rt=0,Vi=null,ja(e,N,G,re)}}ip(),S=Rt;break}catch(me){Af(e,me)}while(!0);return t&&e.shellSuspendCounter++,Nt=qt=null,tt=s,K.H=n,K.A=r,We===null&&(dt=null,Ge=0,fa()),S}function ip(){for(;We!==null;)Mf(We)}function sp(e,t){var i=tt;tt|=2;var s=Tf(),n=Rf();dt!==e||Ge!==t?(Yo=null,Go=yt()+500,La(e,t)):Ra=Dn(e,t);e:do try{if(rt!==0&&We!==null){t=We;var r=Vi;t:switch(rt){case 1:rt=0,Vi=null,ja(e,t,r,1);break;case 2:case 9:if(Ph(r)){rt=0,Vi=null,Of(t);break}t=function(){rt!==2&&rt!==9||dt!==e||(rt=7),Ys(e)},r.then(t,t);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Ph(r)?(rt=0,Vi=null,Of(t)):(rt=0,Vi=null,ja(e,t,r,7));break;case 5:var S=null;switch(We.tag){case 26:S=We.memoizedState;case 5:case 27:var N=We;if(S?v_(S):N.stateNode.complete){rt=0,Vi=null;var G=N.sibling;if(G!==null)We=G;else{var re=N.return;re!==null?(We=re,Xo(re)):We=null}break t}}rt=0,Vi=null,ja(e,t,r,5);break;case 6:rt=0,Vi=null,ja(e,t,r,6);break;case 8:Lu(),Rt=6;break e;default:throw Error(E(462))}}np();break}catch(me){Af(e,me)}while(!0);return Nt=qt=null,K.H=s,K.A=n,tt=i,We!==null?0:(dt=null,Ge=0,fa(),Rt)}function np(){for(;We!==null&&!Ms();)Mf(We)}function Mf(e){var t=ef(e.alternate,e,Cn);e.memoizedProps=e.pendingProps,t===null?Xo(e):We=t}function Of(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=$d(i,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=$d(i,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:Vc(t);default:sf(i,t),t=We=yo(t,Cn),t=ef(i,t,Cn)}e.memoizedProps=e.pendingProps,t===null?Xo(e):We=t}function ja(e,t,i,s){Nt=qt=null,Vc(t),xa=null,bl=0;var n=t.return;try{if(Gm(e,n,t,i,Ge)){Rt=1,Ho(e,Ci(i,e.current)),We=null;return}}catch(r){if(n!==null)throw We=n,r;Rt=1,Ho(e,Ci(i,e.current)),We=null;return}t.flags&32768?(oe||s===1?e=!0:Ra||(Ge&536870912)!==0?e=!1:(Jn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Yi.current,s!==null&&s.tag===13&&(s.flags|=16384))),Lf(t,e)):Xo(t)}function Xo(e){var t=e;do{if((t.flags&32768)!==0){Lf(t,Jn);return}e=t.return;var i=Vm(t.alternate,t,Cn);if(i!==null){We=i;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Rt===0&&(Rt=5)}function Lf(e,t){do{var i=Xm(e.alternate,e);if(i!==null){i.flags&=32767,We=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){We=e;return}We=e=i}while(e!==null);Rt=6,We=null}function jf(e,t,i,s,n,r,S,N,G){e.cancelPendingCommit=null;do Qo();while(Wt!==0);if((tt&6)!==0)throw Error(E(327));if(t!==null){if(t===e.current)throw Error(E(177));if(r=t.lanes|t.childLanes,r|=_n,Tn(e,i,r,S,N,G),e===dt&&(We=dt=null,Ge=0),Oa=t,ir=e,En=i,Ru=r,Mu=n,xf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,op(si,function(){return Uf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=K.T,K.T=null,n=J.p,J.p=2,S=tt,tt|=4;try{Qm(e,t,i)}finally{tt=S,J.p=n,K.T=s}}Wt=1,Bf(),Nf(),Hf()}}function Bf(){if(Wt===1){Wt=0;var e=ir,t=Oa,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=K.T,K.T=null;var s=J.p;J.p=2;var n=tt;tt|=4;try{mf(t,e);var r=Gu,S=hn(e.containerInfo),N=r.focusedElem,G=r.selectionRange;if(S!==N&&N&&N.ownerDocument&&un(N.ownerDocument.documentElement,N)){if(G!==null&&ul(N)){var re=G.start,me=G.end;if(me===void 0&&(me=re),"selectionStart"in N)N.selectionStart=re,N.selectionEnd=Math.min(me,N.value.length);else{var ye=N.ownerDocument||document,le=ye&&ye.defaultView||window;if(le.getSelection){var he=le.getSelection(),De=N.textContent.length,Be=Math.min(G.start,De),ht=G.end===void 0?Be:Math.min(G.end,De);!he.extend&&Be>ht&&(S=ht,ht=Be,Be=S);var ee=cl(N,Be),Z=cl(N,ht);if(ee&&Z&&(he.rangeCount!==1||he.anchorNode!==ee.node||he.anchorOffset!==ee.offset||he.focusNode!==Z.node||he.focusOffset!==Z.offset)){var ne=ye.createRange();ne.setStart(ee.node,ee.offset),he.removeAllRanges(),Be>ht?(he.addRange(ne),he.extend(Z.node,Z.offset)):(ne.setEnd(Z.node,Z.offset),he.addRange(ne))}}}}for(ye=[],he=N;he=he.parentNode;)he.nodeType===1&&ye.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ye.length;N++){var ge=ye[N];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}cc=!!Ku,Gu=Ku=null}finally{tt=n,J.p=s,K.T=i}}e.current=t,Wt=2}}function Nf(){if(Wt===2){Wt=0;var e=ir,t=Oa,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=K.T,K.T=null;var s=J.p;J.p=2;var n=tt;tt|=4;try{uf(e,t.alternate,t)}finally{tt=n,J.p=s,K.T=i}}Wt=3}}function Hf(){if(Wt===4||Wt===3){Wt=0,ii();var e=ir,t=Oa,i=En,s=xf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Wt=5:(Wt=0,Oa=ir=null,zf(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(tr=null),gi(i),t=t.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(Ji,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=K.T,n=J.p,J.p=2,K.T=null;try{for(var r=e.onRecoverableError,S=0;S<s.length;S++){var N=s[S];r(N.value,{componentStack:N.stack})}}finally{K.T=t,J.p=n}}(En&3)!==0&&Qo(),Ys(e),n=e.pendingLanes,(i&261930)!==0&&(n&42)!==0?e===Ou?Nl++:(Nl=0,Ou=e):Nl=0,Hl(0)}}function zf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vl(t)))}function Qo(){return Bf(),Nf(),Hf(),Uf()}function Uf(){if(Wt!==5)return!1;var e=ir,t=Ru;Ru=0;var i=gi(En),s=K.T,n=J.p;try{J.p=32>i?32:i,K.T=null,i=Mu,Mu=null;var r=ir,S=En;if(Wt=0,Oa=ir=null,En=0,(tt&6)!==0)throw Error(E(331));var N=tt;if(tt|=4,yf(r.current),vf(r,r.current,S,i),tt=N,Hl(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(Ji,r)}catch{}return!0}finally{J.p=n,K.T=s,zf(e,t)}}function Pf(e,t,i){t=Ci(i,t),t=uu(e.stateNode,t,2),e=Vn(e,t,2),e!==null&&(Xt(e,2),Ys(e))}function at(e,t,i){if(e.tag===3)Pf(e,e,i);else for(;t!==null;){if(t.tag===3){Pf(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(tr===null||!tr.has(s))){e=Ci(i,e),i=Pd(2),s=Vn(t,i,2),s!==null&&(Fd(i,s,t,e),Xt(s,2),Ys(s));break}}t=t.return}}function Bu(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new ep;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(i)||(Au=!0,n.add(i),e=rp.bind(null,e,t,i),t.then(e,e))}function rp(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,dt===e&&(Ge&i)===i&&(Rt===4||Rt===3&&(Ge&62914560)===Ge&&300>yt()-Ko?(tt&2)===0&&La(e,0):Du|=i,Ma===Ge&&(Ma=0)),Ys(e)}function Ff(e,t){t===0&&(t=qr()),e=rs(e,t),e!==null&&(Xt(e,t),Ys(e))}function ap(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ff(e,i)}function lp(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(E(314))}s!==null&&s.delete(t),Ff(e,i)}function op(e,t){return pi(e,t)}var Zo=null,Ba=null,Nu=!1,Jo=!1,Hu=!1,nr=0;function Ys(e){e!==Ba&&e.next===null&&(Ba===null?Zo=Ba=e:Ba=Ba.next=e),Jo=!0,Nu||(Nu=!0,up())}function Hl(e,t){if(!Hu&&Jo){Hu=!0;do for(var i=!1,s=Zo;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var r=0;else{var S=s.suspendedLanes,N=s.pingedLanes;r=(1<<31-mt(42|e)+1)-1,r&=n&~(S&~N),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(i=!0,Kf(s,r))}else r=Ge,r=Fr(s,s===dt?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(r&3)===0||Dn(s,r)||(i=!0,Kf(s,r));s=s.next}while(i);Hu=!1}}function cp(){If()}function If(){Jo=Nu=!1;var e=0;nr!==0&&yp()&&(e=nr);for(var t=yt(),i=null,s=Zo;s!==null;){var n=s.next,r=qf(s,t);r===0?(s.next=null,i===null?Zo=n:i.next=n,n===null&&(Ba=i)):(i=s,(e!==0||(r&3)!==0)&&(Jo=!0)),s=n}Wt!==0&&Wt!==5||Hl(e),nr!==0&&(nr=0)}function qf(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var S=31-mt(r),N=1<<S,G=n[S];G===-1?((N&i)===0||(N&s)!==0)&&(n[S]=Ir(N,t)):G<=t&&(e.expiredLanes|=N),r&=~N}if(t=dt,i=Ge,i=Fr(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(rt===2||rt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&$e(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Dn(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&$e(s),gi(i)){case 2:case 8:i=Vs;break;case 32:i=si;break;case 268435456:i=ni;break;default:i=si}return s=Wf.bind(null,e),i=pi(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&$e(s),e.callbackPriority=2,e.callbackNode=null,2}function Wf(e,t){if(Wt!==0&&Wt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Qo()&&e.callbackNode!==i)return null;var s=Ge;return s=Fr(e,e===dt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Ef(e,s,t),qf(e,yt()),e.callbackNode!=null&&e.callbackNode===i?Wf.bind(null,e):null)}function Kf(e,t){if(Qo())return null;Ef(e,t,!0)}function up(){wp(function(){(tt&6)!==0?pi(Bi,cp):If()})}function zu(){if(nr===0){var e=ya;e===0&&(e=An,An<<=1,(An&261888)===0&&(An=256)),nr=e}return nr}function Gf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qr(""+e)}function Yf(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function hp(e,t,i,s,n){if(t==="submit"&&i&&i.stateNode===n){var r=Gf((n[Kt]||null).action),S=s.submitter;S&&(t=(t=S[Kt]||null)?Gf(t.formAction):S.getAttribute("formAction"),t!==null&&(r=t,S=null));var N=new tn("action","action",null,s,n);e.push({event:N,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(nr!==0){var G=S?Yf(n,S):new FormData(n);nu(i,{pending:!0,data:G,method:n.method,action:r},null,G)}}else typeof r=="function"&&(N.preventDefault(),G=S?Yf(n,S):new FormData(n),nu(i,{pending:!0,data:G,method:n.method,action:r},r,G))},currentTarget:n}]})}}for(var Uu=0;Uu<dl.length;Uu++){var Pu=dl[Uu],dp=Pu.toLowerCase(),fp=Pu[0].toUpperCase()+Pu.slice(1);xi(dp,"on"+fp)}xi(wt,"onAnimationEnd"),xi($t,"onAnimationIteration"),xi(At,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(ci,"onTransitionRun"),xi(vo,"onTransitionStart"),xi(go,"onTransitionCancel"),xi(hl,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_p=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function $f(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var S=s.length-1;0<=S;S--){var N=s[S],G=N.instance,re=N.currentTarget;if(N=N.listener,G!==r&&n.isPropagationStopped())break e;r=N,n.currentTarget=re;try{r(n)}catch(me){Dr(me)}n.currentTarget=null,r=G}else for(S=0;S<s.length;S++){if(N=s[S],G=N.instance,re=N.currentTarget,N=N.listener,G!==r&&n.isPropagationStopped())break e;r=N,n.currentTarget=re;try{r(n)}catch(me){Dr(me)}n.currentTarget=null,r=G}}}}function Ke(e,t){var i=t[Qa];i===void 0&&(i=t[Qa]=new Set);var s=e+"__bubble";i.has(s)||(Vf(t,e,2,!1),i.add(s))}function Fu(e,t,i){var s=0;t&&(s|=4),Vf(i,e,s,t)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[ec]){e[ec]=!0,ps.forEach(function(i){i!=="selectionchange"&&(_p.has(i)||Fu(i,!1,e),Fu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ec]||(t[ec]=!0,Fu("selectionchange",!1,t))}}function Vf(e,t,i,s){switch(C_(t)){case 2:var n=Ip;break;case 8:n=qp;break;default:n=sh}i=n.bind(null,t,i,e),n=void 0,!Zr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function qu(e,t,i,s,n){var r=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var N=s.stateNode.containerInfo;if(N===n)break;if(S===4)for(S=s.return;S!==null;){var G=S.tag;if((G===3||G===4)&&S.stateNode.containerInfo===n)return;S=S.return}for(;N!==null;){if(S=Ni(N),S===null)return;if(G=S.tag,G===5||G===6||G===26||G===27){s=r=S;continue e}N=N.parentNode}}s=s.return}nl(function(){var re=r,me=br(i),ye=[];e:{var le=bo.get(e);if(le!==void 0){var he=tn,De=e;switch(e){case"keypress":if(is(i)===0)break e;case"keydown":case"keyup":he=qs;break;case"focusin":De="focus",he=Is;break;case"focusout":De="blur",he=Is;break;case"beforeblur":case"afterblur":he=Is;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=bi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=co;break;case wt:case $t:case At:he=rn;break;case hl:he=Un;break;case"scroll":case"scrollend":he=wr;break;case"wheel":he=Tc;break;case"copy":case"cut":case"paste":he=ia;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=an;break;case"toggle":case"beforetoggle":he=ho}var Be=(t&4)!==0,ht=!Be&&(e==="scroll"||e==="scrollend"),ee=Be?le!==null?le+"Capture":null:le;Be=[];for(var Z=re,ne;Z!==null;){var ge=Z;if(ne=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ne===null||ee===null||(ge=Nn(Z,ee),ge!=null&&Be.push(Ul(Z,ge,ne))),ht)break;Z=Z.return}0<Be.length&&(le=new he(le,De,null,i,me),ye.push({event:le,listeners:Be}))}}if((t&7)===0){e:{if(le=e==="mouseover"||e==="pointerover",he=e==="mouseout"||e==="pointerout",le&&i!==en&&(De=i.relatedTarget||i.fromElement)&&(Ni(De)||De[js]))break e;if((he||le)&&(le=me.window===me?me:(le=me.ownerDocument)?le.defaultView||le.parentWindow:window,he?(De=i.relatedTarget||i.toElement,he=re,De=De?Ni(De):null,De!==null&&(ht=te(De),Be=De.tag,De!==ht||Be!==5&&Be!==27&&Be!==6)&&(De=null)):(he=null,De=re),he!==De)){if(Be=al,ge="onMouseLeave",ee="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Be=an,ge="onPointerLeave",ee="onPointerEnter",Z="pointer"),ht=he==null?le:ts(he),ne=De==null?le:ts(De),le=new Be(ge,Z+"leave",he,i,me),le.target=ht,le.relatedTarget=ne,ge=null,Ni(me)===re&&(Be=new Be(ee,Z+"enter",De,i,me),Be.target=ne,Be.relatedTarget=ht,ge=Be),ht=ge,he&&De)t:{for(Be=mp,ee=he,Z=De,ne=0,ge=ee;ge;ge=Be(ge))ne++;ge=0;for(var Le=Z;Le;Le=Be(Le))ge++;for(;0<ne-ge;)ee=Be(ee),ne--;for(;0<ge-ne;)Z=Be(Z),ge--;for(;ne--;){if(ee===Z||Z!==null&&ee===Z.alternate){Be=ee;break t}ee=Be(ee),Z=Be(Z)}Be=null}else Be=null;he!==null&&Xf(ye,le,he,Be,!1),De!==null&&ht!==null&&Xf(ye,ht,De,Be,!0)}}e:{if(le=re?ts(re):window,he=le.nodeName&&le.nodeName.toLowerCase(),he==="select"||he==="input"&&le.type==="file")var Qe=_o;else if(ua(le))if(kr)Qe=Oc;else{Qe=po;var Me=ol}else he=le.nodeName,!he||he.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?re&&Js(re.elementType)&&(Qe=_o):Qe=Mc;if(Qe&&(Qe=Qe(e,re))){ln(ye,Qe,i,me);break e}Me&&Me(e,le,re),e==="focusout"&&re&&le.type==="number"&&re.memoizedProps.value!=null&&tl(le,"number",le.value)}switch(Me=re?ts(re):window,e){case"focusin":(ua(Me)||Me.contentEditable==="true")&&(ys=Me,Ot=re,In=null);break;case"focusout":In=Ot=ys=null;break;case"mousedown":qn=!0;break;case"contextmenu":case"mouseup":case"dragend":qn=!1,Bt(ye,i,me);break;case"selectionchange":if(Lc)break;case"keydown":case"keyup":Bt(ye,i,me)}var Pe;if(aa)e:{switch(e){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Pi?Er(e,i)&&(Ye="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ye="onCompositionStart");Ye&&(bs&&i.locale!=="ko"&&(Pi||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Pi&&(Pe=ze()):(gs=me,rl="value"in gs?gs.value:gs.textContent,Pi=!0)),Me=tc(re,Ye),0<Me.length&&(Ye=new lo(Ye,e,null,i,me),ye.push({event:Ye,listeners:Me}),Pe?Ye.data=Pe:(Pe=ke(i),Pe!==null&&(Ye.data=Pe)))),(Pe=la?fo(e,i):ca(e,i))&&(Ye=tc(re,"onBeforeInput"),0<Ye.length&&(Me=new lo("onBeforeInput","beforeinput",null,i,me),ye.push({event:Me,listeners:Ye}),Me.data=Pe)),hp(ye,e,re,i,me)}$f(ye,t)})}function Ul(e,t,i){return{instance:e,listener:t,currentTarget:i}}function tc(e,t){for(var i=t+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Nn(e,i),n!=null&&s.unshift(Ul(e,n,r)),n=Nn(e,t),n!=null&&s.push(Ul(e,n,r))),e.tag===3)return s;e=e.return}return[]}function mp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,i,s,n){for(var r=t._reactName,S=[];i!==null&&i!==s;){var N=i,G=N.alternate,re=N.stateNode;if(N=N.tag,G!==null&&G===s)break;N!==5&&N!==26&&N!==27||re===null||(G=re,n?(re=Nn(i,r),re!=null&&S.unshift(Ul(i,re,G))):n||(re=Nn(i,r),re!=null&&S.push(Ul(i,re,G)))),i=i.return}S.length!==0&&e.push({event:t,listeners:S})}var pp=/\r\n?/g,vp=/\u0000|\uFFFD/g;function Qf(e){return(typeof e=="string"?e:""+e).replace(pp,`
`).replace(vp,"")}function Zf(e,t){return t=Qf(t),Qf(e)===t}function ut(e,t,i,s,n,r){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Hs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Hs(e,""+s);break;case"className":Mn(e,"class",s);break;case"tabIndex":Mn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(e,i,s);break;case"style":ao(e,s,r);break;case"data":if(t!=="object"){Mn(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Qr(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(i==="formAction"?(t!=="input"&&ut(e,t,"name",n.name,n,null),ut(e,t,"formEncType",n.formEncType,n,null),ut(e,t,"formMethod",n.formMethod,n,null),ut(e,t,"formTarget",n.formTarget,n,null)):(ut(e,t,"encType",n.encType,n,null),ut(e,t,"method",n.method,n,null),ut(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Qr(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=li);break;case"onScroll":s!=null&&Ke("scroll",e);break;case"onScrollEnd":s!=null&&Ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(E(61));if(i=s.__html,i!=null){if(n.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Qr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Ke("beforetoggle",e),Ke("toggle",e),vr(e,"popover",s);break;case"xlinkActuate":ai(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ai(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ai(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ai(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ai(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ai(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ai(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ai(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ai(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":vr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Xr.get(i)||i,vr(e,i,s))}}function Wu(e,t,i,s,n,r){switch(i){case"style":ao(e,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(E(61));if(i=s.__html,i!=null){if(n.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Hs(e,s):(typeof s=="number"||typeof s=="bigint")&&Hs(e,""+s);break;case"onScroll":s!=null&&Ke("scroll",e);break;case"onScrollEnd":s!=null&&Ke("scrollend",e);break;case"onClick":s!=null&&(e.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),r=e[Kt]||null,r=r!=null?r[i]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof s=="function")){typeof r!="function"&&r!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,n);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):vr(e,i,s)}}}function ei(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",e),Ke("load",e);var s=!1,n=!1,r;for(r in i)if(i.hasOwnProperty(r)){var S=i[r];if(S!=null)switch(r){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ut(e,t,r,S,i,null)}}n&&ut(e,t,"srcSet",i.srcSet,i,null),s&&ut(e,t,"src",i.src,i,null);return;case"input":Ke("invalid",e);var N=r=S=n=null,G=null,re=null;for(s in i)if(i.hasOwnProperty(s)){var me=i[s];if(me!=null)switch(s){case"name":n=me;break;case"type":S=me;break;case"checked":G=me;break;case"defaultChecked":re=me;break;case"value":r=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(E(137,t));break;default:ut(e,t,s,me,i,null)}}$r(e,r,N,G,re,S,n,!1);return;case"select":Ke("invalid",e),s=S=r=null;for(n in i)if(i.hasOwnProperty(n)&&(N=i[n],N!=null))switch(n){case"value":r=N;break;case"defaultValue":S=N;break;case"multiple":s=N;default:ut(e,t,n,N,i,null)}t=r,i=S,e.multiple=!!s,t!=null?Ns(e,!!s,t,!1):i!=null&&Ns(e,!!s,i,!0);return;case"textarea":Ke("invalid",e),r=n=s=null;for(S in i)if(i.hasOwnProperty(S)&&(N=i[S],N!=null))switch(S){case"value":s=N;break;case"defaultValue":n=N;break;case"children":r=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(E(91));break;default:ut(e,t,S,N,i,null)}Zs(e,s,n,r);return;case"option":for(G in i)i.hasOwnProperty(G)&&(s=i[G],s!=null)&&(G==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":ut(e,t,G,s,i,null));return;case"dialog":Ke("beforetoggle",e),Ke("toggle",e),Ke("cancel",e),Ke("close",e);break;case"iframe":case"object":Ke("load",e);break;case"video":case"audio":for(s=0;s<zl.length;s++)Ke(zl[s],e);break;case"image":Ke("error",e),Ke("load",e);break;case"details":Ke("toggle",e);break;case"embed":case"source":case"link":Ke("error",e),Ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in i)if(i.hasOwnProperty(re)&&(s=i[re],s!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ut(e,t,re,s,i,null)}return;default:if(Js(t)){for(me in i)i.hasOwnProperty(me)&&(s=i[me],s!==void 0&&Wu(e,t,me,s,i,void 0));return}}for(N in i)i.hasOwnProperty(N)&&(s=i[N],s!=null&&ut(e,t,N,s,i,null))}function gp(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,S=null,N=null,G=null,re=null,me=null;for(he in i){var ye=i[he];if(i.hasOwnProperty(he)&&ye!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":G=ye;default:s.hasOwnProperty(he)||ut(e,t,he,null,s,ye)}}for(var le in s){var he=s[le];if(ye=i[le],s.hasOwnProperty(le)&&(he!=null||ye!=null))switch(le){case"type":r=he;break;case"name":n=he;break;case"checked":re=he;break;case"defaultChecked":me=he;break;case"value":S=he;break;case"defaultValue":N=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(E(137,t));break;default:he!==ye&&ut(e,t,le,he,s,ye)}}Yr(e,S,N,G,re,me,r,n);return;case"select":he=S=N=le=null;for(r in i)if(G=i[r],i.hasOwnProperty(r)&&G!=null)switch(r){case"value":break;case"multiple":he=G;default:s.hasOwnProperty(r)||ut(e,t,r,null,s,G)}for(n in s)if(r=s[n],G=i[n],s.hasOwnProperty(n)&&(r!=null||G!=null))switch(n){case"value":le=r;break;case"defaultValue":N=r;break;case"multiple":S=r;default:r!==G&&ut(e,t,n,r,s,G)}t=N,i=S,s=he,le!=null?Ns(e,!!i,le,!1):!!s!=!!i&&(t!=null?Ns(e,!!i,t,!0):Ns(e,!!i,i?[]:"",!1));return;case"textarea":he=le=null;for(N in i)if(n=i[N],i.hasOwnProperty(N)&&n!=null&&!s.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ut(e,t,N,null,s,n)}for(S in s)if(n=s[S],r=i[S],s.hasOwnProperty(S)&&(n!=null||r!=null))switch(S){case"value":le=n;break;case"defaultValue":he=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(E(91));break;default:n!==r&&ut(e,t,S,n,s,r)}il(e,le,he);return;case"option":for(var De in i)le=i[De],i.hasOwnProperty(De)&&le!=null&&!s.hasOwnProperty(De)&&(De==="selected"?e.selected=!1:ut(e,t,De,null,s,le));for(G in s)le=s[G],he=i[G],s.hasOwnProperty(G)&&le!==he&&(le!=null||he!=null)&&(G==="selected"?e.selected=le&&typeof le!="function"&&typeof le!="symbol":ut(e,t,G,le,s,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in i)le=i[Be],i.hasOwnProperty(Be)&&le!=null&&!s.hasOwnProperty(Be)&&ut(e,t,Be,null,s,le);for(re in s)if(le=s[re],he=i[re],s.hasOwnProperty(re)&&le!==he&&(le!=null||he!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(E(137,t));break;default:ut(e,t,re,le,s,he)}return;default:if(Js(t)){for(var ht in i)le=i[ht],i.hasOwnProperty(ht)&&le!==void 0&&!s.hasOwnProperty(ht)&&Wu(e,t,ht,void 0,s,le);for(me in s)le=s[me],he=i[me],!s.hasOwnProperty(me)||le===he||le===void 0&&he===void 0||Wu(e,t,me,le,s,he);return}}for(var ee in i)le=i[ee],i.hasOwnProperty(ee)&&le!=null&&!s.hasOwnProperty(ee)&&ut(e,t,ee,null,s,le);for(ye in s)le=s[ye],he=i[ye],!s.hasOwnProperty(ye)||le===he||le==null&&he==null||ut(e,t,ye,le,s,he)}function Jf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var n=i[s],r=n.transferSize,S=n.initiatorType,N=n.duration;if(r&&N&&Jf(S)){for(S=0,N=n.responseEnd,s+=1;s<i.length;s++){var G=i[s],re=G.startTime;if(re>N)break;var me=G.transferSize,ye=G.initiatorType;me&&Jf(ye)&&(G=G.responseEnd,S+=me*(G<N?1:(N-re)/(G-re)))}if(--s,t+=8*(r+S)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ku=null,Gu=null;function ic(e){return e.nodeType===9?e:e.ownerDocument}function e_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t_(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $u=null;function yp(){var e=window.event;return e&&e.type==="popstate"?e===$u?!1:($u=e,!0):($u=null,!1)}var i_=typeof setTimeout=="function"?setTimeout:void 0,Sp=typeof clearTimeout=="function"?clearTimeout:void 0,s_=typeof Promise=="function"?Promise:void 0,wp=typeof queueMicrotask=="function"?queueMicrotask:typeof s_<"u"?function(e){return s_.resolve(null).then(e).catch(xp)}:i_;function xp(e){setTimeout(function(){throw e})}function rr(e){return e==="head"}function n_(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(n),Ua(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Pl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Pl(i);for(var r=i.firstChild;r;){var S=r.nextSibling,N=r.nodeName;r[nt]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&r.rel.toLowerCase()==="stylesheet"||i.removeChild(r),r=S}}else i==="body"&&Pl(e.ownerDocument.body);i=n}while(i);Ua(t)}function r_(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Vu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vu(i),Rn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Cp(e,t,i,s){for(;e.nodeType===1;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[nt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=cs(e.nextSibling),e===null)break}return null}function Ep(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=cs(e.nextSibling),e===null))return null;return e}function a_(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=cs(e.nextSibling),e===null))return null;return e}function Xu(e){return e.data==="$?"||e.data==="$~"}function Qu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function kp(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Zu=null;function l_(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return cs(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function o_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function c_(e,t,i){switch(t=ic(i),e){case"html":if(e=t.documentElement,!e)throw Error(E(452));return e;case"head":if(e=t.head,!e)throw Error(E(453));return e;case"body":if(e=t.body,!e)throw Error(E(454));return e;default:throw Error(E(451))}}function Pl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Rn(e)}var us=new Map,u_=new Set;function sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var kn=J.d;J.d={f:Ap,r:Dp,D:Tp,C:Rp,L:Mp,m:Op,X:jp,S:Lp,M:Bp};function Ap(){var e=kn.f(),t=$o();return e||t}function Dp(e){var t=Hi(e);t!==null&&t.tag===5&&t.type==="form"?kd(t):kn.r(e)}var Na=typeof document>"u"?null:document;function h_(e,t,i){var s=Na;if(s&&typeof t=="string"&&t){var n=di(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof i=="string"&&(n+='[crossorigin="'+i+'"]'),u_.has(n)||(u_.add(n),e={rel:e,crossOrigin:i,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),ei(t,"link",e),Dt(t),s.head.appendChild(t)))}}function Tp(e){kn.D(e),h_("dns-prefetch",e,null)}function Rp(e,t){kn.C(e,t),h_("preconnect",e,t)}function Mp(e,t,i){kn.L(e,t,i);var s=Na;if(s&&e&&t){var n='link[rel="preload"][as="'+di(t)+'"]';t==="image"&&i&&i.imageSrcSet?(n+='[imagesrcset="'+di(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(n+='[imagesizes="'+di(i.imageSizes)+'"]')):n+='[href="'+di(e)+'"]';var r=n;switch(t){case"style":r=Ha(e);break;case"script":r=za(e)}us.has(r)||(e=p({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),us.set(r,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Fl(r))||t==="script"&&s.querySelector(Il(r))||(t=s.createElement("link"),ei(t,"link",e),Dt(t),s.head.appendChild(t)))}}function Op(e,t){kn.m(e,t);var i=Na;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+di(s)+'"][href="'+di(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=za(e)}if(!us.has(r)&&(e=p({rel:"modulepreload",href:e},t),us.set(r,e),i.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Il(r)))return}s=i.createElement("link"),ei(s,"link",e),Dt(s),i.head.appendChild(s)}}}function Lp(e,t,i){kn.S(e,t,i);var s=Na;if(s&&e){var n=zi(s).hoistableStyles,r=Ha(e);t=t||"default";var S=n.get(r);if(!S){var N={loading:0,preload:null};if(S=s.querySelector(Fl(r)))N.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},i),(i=us.get(r))&&Ju(e,i);var G=S=s.createElement("link");Dt(G),ei(G,"link",e),G._p=new Promise(function(re,me){G.onload=re,G.onerror=me}),G.addEventListener("load",function(){N.loading|=1}),G.addEventListener("error",function(){N.loading|=2}),N.loading|=4,nc(S,t,s)}S={type:"stylesheet",instance:S,count:1,state:N},n.set(r,S)}}}function jp(e,t){kn.X(e,t);var i=Na;if(i&&e){var s=zi(i).hoistableScripts,n=za(e),r=s.get(n);r||(r=i.querySelector(Il(n)),r||(e=p({src:e,async:!0},t),(t=us.get(n))&&eh(e,t),r=i.createElement("script"),Dt(r),ei(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function Bp(e,t){kn.M(e,t);var i=Na;if(i&&e){var s=zi(i).hoistableScripts,n=za(e),r=s.get(n);r||(r=i.querySelector(Il(n)),r||(e=p({src:e,async:!0,type:"module"},t),(t=us.get(n))&&eh(e,t),r=i.createElement("script"),Dt(r),ei(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function d_(e,t,i,s){var n=(n=Te.current)?sc(n):null;if(!n)throw Error(E(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ha(i.href),i=zi(n).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ha(i.href);var r=zi(n).hoistableStyles,S=r.get(e);if(S||(n=n.ownerDocument||n,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,S),(r=n.querySelector(Fl(e)))&&!r._p&&(S.instance=r,S.state.loading=5),us.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},us.set(e,i),r||Np(n,e,i,S.state))),t&&s===null)throw Error(E(528,""));return S}if(t&&s!==null)throw Error(E(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=za(i),i=zi(n).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(E(444,e))}}function Ha(e){return'href="'+di(e)+'"'}function Fl(e){return'link[rel="stylesheet"]['+e+"]"}function f_(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Np(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ei(t,"link",i),Dt(t),e.head.appendChild(t))}function za(e){return'[src="'+di(e)+'"]'}function Il(e){return"script[async]"+e}function __(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+di(i.href)+'"]');if(s)return t.instance=s,Dt(s),s;var n=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Dt(s),ei(s,"style",n),nc(s,i.precedence,e),t.instance=s;case"stylesheet":n=Ha(i.href);var r=e.querySelector(Fl(n));if(r)return t.state.loading|=4,t.instance=r,Dt(r),r;s=f_(i),(n=us.get(n))&&Ju(s,n),r=(e.ownerDocument||e).createElement("link"),Dt(r);var S=r;return S._p=new Promise(function(N,G){S.onload=N,S.onerror=G}),ei(r,"link",s),t.state.loading|=4,nc(r,i.precedence,e),t.instance=r;case"script":return r=za(i.src),(n=e.querySelector(Il(r)))?(t.instance=n,Dt(n),n):(s=i,(n=us.get(r))&&(s=p({},i),eh(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),Dt(n),ei(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(E(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,nc(s,i.precedence,e));return t.instance}function nc(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,S=0;S<s.length;S++){var N=s[S];if(N.dataset.precedence===t)r=N;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Ju(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function eh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var rc=null;function m_(e,t,i){if(rc===null){var s=new Map,n=rc=new Map;n.set(i,s)}else n=rc,s=n.get(i),s||(s=new Map,n.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var r=i[n];if(!(r[nt]||r[St]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var S=r.getAttribute(t)||"";S=e+S;var N=s.get(S);N?N.push(r):s.set(S,[r])}}return s}function p_(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Hp(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function v_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function zp(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var n=Ha(s.href),r=t.querySelector(Fl(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ac.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=r,Dt(r);return}r=t.ownerDocument||t,s=f_(s),(n=us.get(n))&&Ju(s,n),r=r.createElement("link"),Dt(r);var S=r;S._p=new Promise(function(N,G){S.onload=N,S.onerror=G}),ei(r,"link",s),i.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=ac.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var th=0;function Up(e,t){return e.stylesheets&&e.count===0&&oc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&th===0&&(th=62500*bp());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>th?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lc=null;function oc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lc=new Map,t.forEach(Pp,e),lc=null,ac.call(e))}function Pp(e,t){if(!(t.state.loading&4)){var i=lc.get(e);if(i)var s=i.get(null);else{i=new Map,lc.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var S=n[r];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(i.set(S.dataset.precedence,S),s=S)}s&&i.set(null,s)}n=t.instance,S=n.getAttribute("data-precedence"),r=i.get(S)||s,r===s&&i.set(null,n),i.set(S,n),this.count++,s=ac.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var ql={$$typeof:o,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Fp(e,t,i,s,n,r,S,N,G){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function g_(e,t,i,s,n,r,S,N,G,re,me,ye){return e=new Fp(e,t,i,S,G,re,me,ye,N),t=1,r===!0&&(t|=24),r=It(3,null,null,t),e.current=r,r.stateNode=e,t=jc(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:i,cache:t},zc(r),e}function b_(e){return e?(e=ui,e):ui}function y_(e,t,i,s,n,r){n=b_(n),s.context===null?s.context=n:s.pendingContext=n,s=$n(t),s.payload={element:i},r=r===void 0?null:r,r!==null&&(s.callback=r),i=Vn(e,s,t),i!==null&&(Oi(i,e,t),Sl(i,e,t))}function S_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function ih(e,t){S_(e,t),(e=e.alternate)&&S_(e,t)}function w_(e){if(e.tag===13||e.tag===31){var t=rs(e,67108864);t!==null&&Oi(t,e,67108864),ih(e,67108864)}}function x_(e){if(e.tag===13||e.tag===31){var t=Qi();t=Xa(t);var i=rs(e,t);i!==null&&Oi(i,e,t),ih(e,t)}}var cc=!0;function Ip(e,t,i,s){var n=K.T;K.T=null;var r=J.p;try{J.p=2,sh(e,t,i,s)}finally{J.p=r,K.T=n}}function qp(e,t,i,s){var n=K.T;K.T=null;var r=J.p;try{J.p=8,sh(e,t,i,s)}finally{J.p=r,K.T=n}}function sh(e,t,i,s){if(cc){var n=nh(s);if(n===null)qu(e,t,s,uc,i),E_(e,s);else if(Kp(n,e,t,i,s))s.stopPropagation();else if(E_(e,s),t&4&&-1<Wp.indexOf(e)){for(;n!==null;){var r=Hi(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var S=es(r.pendingLanes);if(S!==0){var N=r;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var G=1<<31-mt(S);N.entanglements[1]|=G,S&=~G}Ys(r),(tt&6)===0&&(Go=yt()+500,Hl(0))}}break;case 31:case 13:N=rs(r,2),N!==null&&Oi(N,r,2),$o(),ih(r,2)}if(r=nh(s),r===null&&qu(e,t,s,uc,i),r===n)break;n=r}n!==null&&s.stopPropagation()}else qu(e,t,s,null,i)}}function nh(e){return e=br(e),rh(e)}var uc=null;function rh(e){if(uc=null,e=Ni(e),e!==null){var t=te(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=q(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uc=e,null}function C_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mt()){case Bi:return 2;case Vs:return 8;case si:case fr:return 32;case ni:return 268435456;default:return 32}default:return 32}}var ah=!1,ar=null,lr=null,or=null,Wl=new Map,Kl=new Map,cr=[],Wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E_(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":Wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(t.pointerId)}}function Gl(e,t,i,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Hi(t),t!==null&&w_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Kp(e,t,i,s,n){switch(t){case"focusin":return ar=Gl(ar,e,t,i,s,n),!0;case"dragenter":return lr=Gl(lr,e,t,i,s,n),!0;case"mouseover":return or=Gl(or,e,t,i,s,n),!0;case"pointerover":var r=n.pointerId;return Wl.set(r,Gl(Wl.get(r)||null,e,t,i,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Kl.set(r,Gl(Kl.get(r)||null,e,t,i,s,n)),!0}return!1}function k_(e){var t=Ni(e.target);if(t!==null){var i=te(t);if(i!==null){if(t=i.tag,t===13){if(t=q(i),t!==null){e.blockedOn=t,ro(e.priority,function(){x_(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,ro(e.priority,function(){x_(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=nh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);en=s,i.target.dispatchEvent(s),en=null}else return t=Hi(i),t!==null&&w_(t),e.blockedOn=i,!1;t.shift()}return!0}function A_(e,t,i){hc(e)&&i.delete(t)}function Gp(){ah=!1,ar!==null&&hc(ar)&&(ar=null),lr!==null&&hc(lr)&&(lr=null),or!==null&&hc(or)&&(or=null),Wl.forEach(A_),Kl.forEach(A_)}function dc(e,t){e.blockedOn===t&&(e.blockedOn=null,ah||(ah=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,Gp)))}var fc=null;function D_(e){fc!==e&&(fc=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){fc===e&&(fc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(rh(s||i)===null)continue;break}var r=Hi(i);r!==null&&(e.splice(t,3),t-=3,nu(r,{pending:!0,data:n,method:i.method,action:s},s,n))}}))}function Ua(e){function t(G){return dc(G,e)}ar!==null&&dc(ar,e),lr!==null&&dc(lr,e),or!==null&&dc(or,e),Wl.forEach(t),Kl.forEach(t);for(var i=0;i<cr.length;i++){var s=cr[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<cr.length&&(i=cr[0],i.blockedOn===null);)k_(i),i.blockedOn===null&&cr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var n=i[s],r=i[s+1],S=n[Kt]||null;if(typeof r=="function")S||D_(i);else if(S){var N=null;if(r&&r.hasAttribute("formAction")){if(n=r,S=r[Kt]||null)N=S.formAction;else if(rh(n)!==null)continue}else N=S.action;typeof N=="function"?i[s+1]=N:(i.splice(s,3),s-=3),D_(i)}}}function T_(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(S){return n=S})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function lh(e){this._internalRoot=e}_c.prototype.render=lh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));var i=t.current,s=Qi();y_(i,s,e,t,null,null)},_c.prototype.unmount=lh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;y_(e.current,2,null,e,null,null),$o(),t[js]=null}};function _c(e){this._internalRoot=e}_c.prototype.unstable_scheduleHydration=function(e){if(e){var t=pr();e={blockedOn:null,target:e,priority:t};for(var i=0;i<cr.length&&t!==0&&t<cr[i].priority;i++);cr.splice(i,0,e),i===0&&k_(e)}};var R_=_.version;if(R_!=="19.2.3")throw Error(E(527,R_,"19.2.3"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=m(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Yp={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{Ji=mc.inject(Yp),st=mc}catch{}}return $l.createRoot=function(e,t){if(!X(e))throw Error(E(299));var i=!1,s="",n=Nd,r=Hd,S=zd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(S=t.onRecoverableError)),t=g_(e,1,!1,null,null,i,s,null,n,r,S,T_),e[js]=t.current,Iu(e),new lh(t)},$l.hydrateRoot=function(e,t,i){if(!X(e))throw Error(E(299));var s=!1,n="",r=Nd,S=Hd,N=zd,G=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onUncaughtError!==void 0&&(r=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.formState!==void 0&&(G=i.formState)),t=g_(e,1,!0,t,i??null,s,n,G,r,S,N,T_),t.context=b_(null),i=t.current,s=Qi(),s=Xa(s),n=$n(s),n.callback=null,Vn(i,n,s),i=s,t.current.lanes=i,Xt(t,i),Ys(t),e[js]=t.current,Iu(e),new _c(t)},$l.version="19.2.3",$l}var P_;function sv(){if(P_)return uh.exports;P_=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(_){console.error(_)}}return f(),uh.exports=iv(),uh.exports}var nv=sv();const rv=hm(nv);function F_(f,_){(_==null||_>f.length)&&(_=f.length);for(var D=0,E=Array(_);D<_;D++)E[D]=f[D];return E}function av(f){if(Array.isArray(f))return f}function lv(f,_,D){return(_=_v(_))in f?Object.defineProperty(f,_,{value:D,enumerable:!0,configurable:!0,writable:!0}):f[_]=D,f}function ov(f,_){var D=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(D!=null){var E,X,te,q,h=[],d=!0,m=!1;try{if(te=(D=D.call(f)).next,_!==0)for(;!(d=(E=te.call(D)).done)&&(h.push(E.value),h.length!==_);d=!0);}catch(x){m=!0,X=x}finally{try{if(!d&&D.return!=null&&(q=D.return(),Object(q)!==q))return}finally{if(m)throw X}}return h}}function cv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I_(f,_){var D=Object.keys(f);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(f);_&&(E=E.filter(function(X){return Object.getOwnPropertyDescriptor(f,X).enumerable})),D.push.apply(D,E)}return D}function q_(f){for(var _=1;_<arguments.length;_++){var D=arguments[_]!=null?arguments[_]:{};_%2?I_(Object(D),!0).forEach(function(E){lv(f,E,D[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(D)):I_(Object(D)).forEach(function(E){Object.defineProperty(f,E,Object.getOwnPropertyDescriptor(D,E))})}return f}function uv(f,_){if(f==null)return{};var D,E,X=hv(f,_);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(f);for(E=0;E<te.length;E++)D=te[E],_.indexOf(D)===-1&&{}.propertyIsEnumerable.call(f,D)&&(X[D]=f[D])}return X}function hv(f,_){if(f==null)return{};var D={};for(var E in f)if({}.hasOwnProperty.call(f,E)){if(_.indexOf(E)!==-1)continue;D[E]=f[E]}return D}function dv(f,_){return av(f)||ov(f,_)||mv(f,_)||cv()}function fv(f,_){if(typeof f!="object"||!f)return f;var D=f[Symbol.toPrimitive];if(D!==void 0){var E=D.call(f,_);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(f)}function _v(f){var _=fv(f,"string");return typeof _=="symbol"?_:_+""}function mv(f,_){if(f){if(typeof f=="string")return F_(f,_);var D={}.toString.call(f).slice(8,-1);return D==="Object"&&f.constructor&&(D=f.constructor.name),D==="Map"||D==="Set"?Array.from(f):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?F_(f,_):void 0}}function pv(f,_,D){return _ in f?Object.defineProperty(f,_,{value:D,enumerable:!0,configurable:!0,writable:!0}):f[_]=D,f}function W_(f,_){var D=Object.keys(f);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(f);_&&(E=E.filter(function(X){return Object.getOwnPropertyDescriptor(f,X).enumerable})),D.push.apply(D,E)}return D}function K_(f){for(var _=1;_<arguments.length;_++){var D=arguments[_]!=null?arguments[_]:{};_%2?W_(Object(D),!0).forEach(function(E){pv(f,E,D[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(D)):W_(Object(D)).forEach(function(E){Object.defineProperty(f,E,Object.getOwnPropertyDescriptor(D,E))})}return f}function vv(){for(var f=arguments.length,_=new Array(f),D=0;D<f;D++)_[D]=arguments[D];return function(E){return _.reduceRight(function(X,te){return te(X)},E)}}function Xl(f){return function _(){for(var D=this,E=arguments.length,X=new Array(E),te=0;te<E;te++)X[te]=arguments[te];return X.length>=f.length?f.apply(this,X):function(){for(var q=arguments.length,h=new Array(q),d=0;d<q;d++)h[d]=arguments[d];return _.apply(D,[].concat(X,h))}}}function wc(f){return{}.toString.call(f).includes("Object")}function gv(f){return!Object.keys(f).length}function Jl(f){return typeof f=="function"}function bv(f,_){return Object.prototype.hasOwnProperty.call(f,_)}function yv(f,_){return wc(_)||dr("changeType"),Object.keys(_).some(function(D){return!bv(f,D)})&&dr("changeField"),_}function Sv(f){Jl(f)||dr("selectorType")}function wv(f){Jl(f)||wc(f)||dr("handlerType"),wc(f)&&Object.values(f).some(function(_){return!Jl(_)})&&dr("handlersType")}function xv(f){f||dr("initialIsRequired"),wc(f)||dr("initialType"),gv(f)&&dr("initialContent")}function Cv(f,_){throw new Error(f[_]||f.default)}var Ev={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},dr=Xl(Cv)(Ev),pc={changes:yv,selector:Sv,handler:wv,initial:xv};function kv(f){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pc.initial(f),pc.handler(_);var D={current:f},E=Xl(Tv)(D,_),X=Xl(Dv)(D),te=Xl(pc.changes)(f),q=Xl(Av)(D);function h(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(x){return x};return pc.selector(m),m(D.current)}function d(m){vv(E,X,te,q)(m)}return[h,d]}function Av(f,_){return Jl(_)?_(f.current):_}function Dv(f,_){return f.current=K_(K_({},f.current),_),_}function Tv(f,_,D){return Jl(_)?_(f.current):Object.keys(D).forEach(function(E){var X;return(X=_[E])===null||X===void 0?void 0:X.call(_,f.current[E])}),D}var Rv={create:kv},Mv={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Ov(f){return function _(){for(var D=this,E=arguments.length,X=new Array(E),te=0;te<E;te++)X[te]=arguments[te];return X.length>=f.length?f.apply(this,X):function(){for(var q=arguments.length,h=new Array(q),d=0;d<q;d++)h[d]=arguments[d];return _.apply(D,[].concat(X,h))}}}function Lv(f){return{}.toString.call(f).includes("Object")}function jv(f){return f||G_("configIsRequired"),Lv(f)||G_("configType"),f.urls?(Bv(),{paths:{vs:f.urls.monacoBase}}):f}function Bv(){console.warn(dm.deprecation)}function Nv(f,_){throw new Error(f[_]||f.default)}var dm={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},G_=Ov(Nv)(dm),Hv={config:jv},zv=function(){for(var _=arguments.length,D=new Array(_),E=0;E<_;E++)D[E]=arguments[E];return function(X){return D.reduceRight(function(te,q){return q(te)},X)}};function fm(f,_){return Object.keys(_).forEach(function(D){_[D]instanceof Object&&f[D]&&Object.assign(_[D],fm(f[D],_[D]))}),q_(q_({},f),_)}var Uv={type:"cancelation",msg:"operation is manually canceled"};function _h(f){var _=!1,D=new Promise(function(E,X){f.then(function(te){return _?X(Uv):E(te)}),f.catch(X)});return D.cancel=function(){return _=!0},D}var Pv=["monaco"],Fv=Rv.create({config:Mv,isInitialized:!1,resolve:null,reject:null,monaco:null}),_m=dv(Fv,2),to=_m[0],Cc=_m[1];function Iv(f){var _=Hv.config(f),D=_.monaco,E=uv(_,Pv);Cc(function(X){return{config:fm(X.config,E),monaco:D}})}function qv(){var f=to(function(_){var D=_.monaco,E=_.isInitialized,X=_.resolve;return{monaco:D,isInitialized:E,resolve:X}});if(!f.isInitialized){if(Cc({isInitialized:!0}),f.monaco)return f.resolve(f.monaco),_h(mh);if(window.monaco&&window.monaco.editor)return mm(window.monaco),f.resolve(window.monaco),_h(mh);zv(Wv,Gv)(Yv)}return _h(mh)}function Wv(f){return document.body.appendChild(f)}function Kv(f){var _=document.createElement("script");return f&&(_.src=f),_}function Gv(f){var _=to(function(E){var X=E.config,te=E.reject;return{config:X,reject:te}}),D=Kv("".concat(_.config.paths.vs,"/loader.js"));return D.onload=function(){return f()},D.onerror=_.reject,D}function Yv(){var f=to(function(D){var E=D.config,X=D.resolve,te=D.reject;return{config:E,resolve:X,reject:te}}),_=window.require;_.config(f.config),_(["vs/editor/editor.main"],function(D){var E=D.m||D;mm(E),f.resolve(E)},function(D){f.reject(D)})}function mm(f){to().monaco||Cc({monaco:f})}function $v(){return to(function(f){var _=f.monaco;return _})}var mh=new Promise(function(f,_){return Cc({resolve:f,reject:_})}),pm={config:Iv,init:qv,__getMonacoInstance:$v},Vv={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ph=Vv,Xv={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Qv=Xv;function Zv({children:f}){return Ya.createElement("div",{style:Qv.container},f)}var Jv=Zv,eg=Jv;function tg({width:f,height:_,isEditorReady:D,loading:E,_ref:X,className:te,wrapperProps:q}){return Ya.createElement("section",{style:{...ph.wrapper,width:f,height:_},...q},!D&&Ya.createElement(eg,null,E),Ya.createElement("div",{ref:X,style:{...ph.fullWidth,...!D&&ph.hide},className:te}))}var ig=tg,vm=z.memo(ig);function sg(f){z.useEffect(f,[])}var gm=sg;function ng(f,_,D=!0){let E=z.useRef(!0);z.useEffect(E.current||!D?()=>{E.current=!1}:f,_)}var Zi=ng;function Ql(){}function Ka(f,_,D,E){return rg(f,E)||ag(f,_,D,E)}function rg(f,_){return f.editor.getModel(bm(f,_))}function ag(f,_,D,E){return f.editor.createModel(_,D,E?bm(f,E):void 0)}function bm(f,_){return f.Uri.parse(_)}function lg({original:f,modified:_,language:D,originalLanguage:E,modifiedLanguage:X,originalModelPath:te,modifiedModelPath:q,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:d=!1,theme:m="light",loading:x="Loading...",options:p={},height:w="100%",width:T="100%",className:k,wrapperProps:C={},beforeMount:a=Ql,onMount:u=Ql}){let[l,o]=z.useState(!1),[g,y]=z.useState(!0),R=z.useRef(null),L=z.useRef(null),b=z.useRef(null),M=z.useRef(u),U=z.useRef(a),V=z.useRef(!1);gm(()=>{let se=pm.init();return se.then(K=>(L.current=K)&&y(!1)).catch(K=>K?.type!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>R.current?Q():se.cancel()}),Zi(()=>{if(R.current&&L.current){let se=R.current.getOriginalEditor(),K=Ka(L.current,f||"",E||D||"text",te||"");K!==se.getModel()&&se.setModel(K)}},[te],l),Zi(()=>{if(R.current&&L.current){let se=R.current.getModifiedEditor(),K=Ka(L.current,_||"",X||D||"text",q||"");K!==se.getModel()&&se.setModel(K)}},[q],l),Zi(()=>{let se=R.current.getModifiedEditor();se.getOption(L.current.editor.EditorOption.readOnly)?se.setValue(_||""):_!==se.getValue()&&(se.executeEdits("",[{range:se.getModel().getFullModelRange(),text:_||"",forceMoveMarkers:!0}]),se.pushUndoStop())},[_],l),Zi(()=>{R.current?.getModel()?.original.setValue(f||"")},[f],l),Zi(()=>{let{original:se,modified:K}=R.current.getModel();L.current.editor.setModelLanguage(se,E||D||"text"),L.current.editor.setModelLanguage(K,X||D||"text")},[D,E,X],l),Zi(()=>{L.current?.editor.setTheme(m)},[m],l),Zi(()=>{R.current?.updateOptions(p)},[p],l);let I=z.useCallback(()=>{if(!L.current)return;U.current(L.current);let se=Ka(L.current,f||"",E||D||"text",te||""),K=Ka(L.current,_||"",X||D||"text",q||"");R.current?.setModel({original:se,modified:K})},[D,_,X,f,E,te,q]),$=z.useCallback(()=>{!V.current&&b.current&&(R.current=L.current.editor.createDiffEditor(b.current,{automaticLayout:!0,...p}),I(),L.current?.editor.setTheme(m),o(!0),V.current=!0)},[p,m,I]);z.useEffect(()=>{l&&M.current(R.current,L.current)},[l]),z.useEffect(()=>{!g&&!l&&$()},[g,l,$]);function Q(){let se=R.current?.getModel();h||se?.original?.dispose(),d||se?.modified?.dispose(),R.current?.dispose()}return Ya.createElement(vm,{width:T,height:w,isEditorReady:l,loading:x,_ref:b,className:k,wrapperProps:C})}var og=lg,cg=z.memo(og);function ug(f){let _=z.useRef();return z.useEffect(()=>{_.current=f},[f]),_.current}var hg=ug,vc=new Map;function dg({defaultValue:f,defaultLanguage:_,defaultPath:D,value:E,language:X,path:te,theme:q="light",line:h,loading:d="Loading...",options:m={},overrideServices:x={},saveViewState:p=!0,keepCurrentModel:w=!1,width:T="100%",height:k="100%",className:C,wrapperProps:a={},beforeMount:u=Ql,onMount:l=Ql,onChange:o,onValidate:g=Ql}){let[y,R]=z.useState(!1),[L,b]=z.useState(!0),M=z.useRef(null),U=z.useRef(null),V=z.useRef(null),I=z.useRef(l),$=z.useRef(u),Q=z.useRef(),se=z.useRef(E),K=hg(te),J=z.useRef(!1),j=z.useRef(!1);gm(()=>{let O=pm.init();return O.then(P=>(M.current=P)&&b(!1)).catch(P=>P?.type!=="cancelation"&&console.error("Monaco initialization: error:",P)),()=>U.current?W():O.cancel()}),Zi(()=>{let O=Ka(M.current,f||E||"",_||X||"",te||D||"");O!==U.current?.getModel()&&(p&&vc.set(K,U.current?.saveViewState()),U.current?.setModel(O),p&&U.current?.restoreViewState(vc.get(te)))},[te],y),Zi(()=>{U.current?.updateOptions(m)},[m],y),Zi(()=>{!U.current||E===void 0||(U.current.getOption(M.current.editor.EditorOption.readOnly)?U.current.setValue(E):E!==U.current.getValue()&&(j.current=!0,U.current.executeEdits("",[{range:U.current.getModel().getFullModelRange(),text:E,forceMoveMarkers:!0}]),U.current.pushUndoStop(),j.current=!1))},[E],y),Zi(()=>{let O=U.current?.getModel();O&&X&&M.current?.editor.setModelLanguage(O,X)},[X],y),Zi(()=>{h!==void 0&&U.current?.revealLine(h)},[h],y),Zi(()=>{M.current?.editor.setTheme(q)},[q],y);let F=z.useCallback(()=>{if(!(!V.current||!M.current)&&!J.current){$.current(M.current);let O=te||D,P=Ka(M.current,E||f||"",_||X||"",O||"");U.current=M.current?.editor.create(V.current,{model:P,automaticLayout:!0,...m},x),p&&U.current.restoreViewState(vc.get(O)),M.current.editor.setTheme(q),h!==void 0&&U.current.revealLine(h),R(!0),J.current=!0}},[f,_,D,E,X,te,m,x,p,q,h]);z.useEffect(()=>{y&&I.current(U.current,M.current)},[y]),z.useEffect(()=>{!L&&!y&&F()},[L,y,F]),se.current=E,z.useEffect(()=>{y&&o&&(Q.current?.dispose(),Q.current=U.current?.onDidChangeModelContent(O=>{j.current||o(U.current.getValue(),O)}))},[y,o]),z.useEffect(()=>{if(y){let O=M.current.editor.onDidChangeMarkers(P=>{let ae=U.current.getModel()?.uri;if(ae&&P.find(ve=>ve.path===ae.path)){let ve=M.current.editor.getModelMarkers({resource:ae});g?.(ve)}});return()=>{O?.dispose()}}return()=>{}},[y,g]);function W(){Q.current?.dispose(),w?p&&vc.set(te,U.current.saveViewState()):U.current.getModel()?.dispose(),U.current.dispose()}return Ya.createElement(vm,{width:T,height:k,isEditorReady:y,loading:d,_ref:V,className:C,wrapperProps:a})}var fg=dg,_g=z.memo(fg),mg=_g;function pg(f,_,D,E){if(typeof _=="function"?f!==_||!E:!_.has(f))throw new TypeError("Cannot read private member from an object whose class did not declare it");return D==="m"?E:D==="a"?E.call(f):E?E.value:_.get(f)}function vg(f,_,D,E,X){if(typeof _=="function"?f!==_||!0:!_.has(f))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _.set(f,D),D}var yc;const fs="__TAURI_TO_IPC_KEY__";function gg(f,_=!1){return window.__TAURI_INTERNALS__.transformCallback(f,_)}async function fe(f,_={},D){return window.__TAURI_INTERNALS__.invoke(f,_,D)}class bg{get rid(){return pg(this,yc,"f")}constructor(_){yc.set(this,void 0),vg(this,yc,_)}async close(){return fe("plugin:resources|close",{rid:this.rid})}}yc=new WeakMap;var ti;(function(f){f.WINDOW_RESIZED="tauri://resize",f.WINDOW_MOVED="tauri://move",f.WINDOW_CLOSE_REQUESTED="tauri://close-requested",f.WINDOW_DESTROYED="tauri://destroyed",f.WINDOW_FOCUS="tauri://focus",f.WINDOW_BLUR="tauri://blur",f.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",f.WINDOW_THEME_CHANGED="tauri://theme-changed",f.WINDOW_CREATED="tauri://window-created",f.WEBVIEW_CREATED="tauri://webview-created",f.DRAG_ENTER="tauri://drag-enter",f.DRAG_OVER="tauri://drag-over",f.DRAG_DROP="tauri://drag-drop",f.DRAG_LEAVE="tauri://drag-leave"})(ti||(ti={}));async function ym(f,_){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(f,_),await fe("plugin:event|unlisten",{event:f,eventId:_})}async function io(f,_,D){var E;const X=typeof D?.target=="string"?{kind:"AnyLabel",label:D.target}:(E=D?.target)!==null&&E!==void 0?E:{kind:"Any"};return fe("plugin:event|listen",{event:f,target:X,handler:gg(_)}).then(te=>async()=>ym(f,te))}async function Lh(f,_,D){return io(f,E=>{ym(f,E.id),_(E)},D)}async function Sm(f,_){await fe("plugin:event|emit",{event:f,payload:_})}async function wm(f,_,D){await fe("plugin:event|emit_to",{target:typeof f=="string"?{kind:"AnyLabel",label:f}:f,event:_,payload:D})}var vh={exports:{}},Y_;function yg(){return Y_||(Y_=1,(function(f,_){(function(D,E){f.exports=E()})(self,(()=>(()=>{var D={4567:function(q,h,d){var m=this&&this.__decorate||function(o,g,y,R){var L,b=arguments.length,M=b<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,y):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(o,g,y,R);else for(var U=o.length-1;U>=0;U--)(L=o[U])&&(M=(b<3?L(M):b>3?L(g,y,M):L(g,y))||M);return b>3&&M&&Object.defineProperty(g,y,M),M},x=this&&this.__param||function(o,g){return function(y,R){g(y,R,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.AccessibilityManager=void 0;const p=d(9042),w=d(6114),T=d(9924),k=d(844),C=d(5596),a=d(4725),u=d(3656);let l=h.AccessibilityManager=class extends k.Disposable{constructor(o,g){super(),this._terminal=o,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new T.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((y=>this._handleResize(y.rows)))),this.register(this._terminal.onRender((y=>this._refreshRows(y.start,y.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((y=>this._handleChar(y)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((y=>this._handleTab(y)))),this.register(this._terminal.onKey((y=>this._handleKey(y.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new C.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,k.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(o){for(let g=0;g<o;g++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),w.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,w.isMac&&this._liveRegion.remove()}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,g){this._liveRegionDebouncer.refresh(o,g,this._terminal.rows)}_renderRows(o,g){const y=this._terminal.buffer,R=y.lines.length.toString();for(let L=o;L<=g;L++){const b=y.translateBufferLineToString(y.ydisp+L,!0),M=(y.ydisp+L+1).toString(),U=this._rowElements[L];U&&(b.length===0?U.innerText="":U.textContent=b,U.setAttribute("aria-posinset",M),U.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,g){const y=o.target,R=this._rowElements[g===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==R)return;let L,b;if(g===0?(L=y,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(L=this._rowElements.shift(),b=y,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const M=this._createAccessibilityTreeNode();this._rowElements.unshift(M),this._rowContainer.insertAdjacentElement("afterbegin",M)}else{const M=this._createAccessibilityTreeNode();this._rowElements.push(M),this._rowContainer.appendChild(M)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=document.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};h.AccessibilityManager=l=m([x(1,a.IRenderService)],l)},3614:(q,h)=>{function d(w){return w.replace(/\r?\n/g,"\r")}function m(w,T){return T?"\x1B[200~"+w+"\x1B[201~":w}function x(w,T,k,C){w=m(w=d(w),k.decPrivateModes.bracketedPasteMode&&C.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(w,!0),T.value=""}function p(w,T,k){const C=k.getBoundingClientRect(),a=w.clientX-C.left-10,u=w.clientY-C.top-10;T.style.width="20px",T.style.height="20px",T.style.left=`${a}px`,T.style.top=`${u}px`,T.style.zIndex="1000",T.focus()}Object.defineProperty(h,"__esModule",{value:!0}),h.rightClickHandler=h.moveTextAreaUnderMouseCursor=h.paste=h.handlePasteEvent=h.copyHandler=h.bracketTextForPaste=h.prepareTextForTerminal=void 0,h.prepareTextForTerminal=d,h.bracketTextForPaste=m,h.copyHandler=function(w,T){w.clipboardData&&w.clipboardData.setData("text/plain",T.selectionText),w.preventDefault()},h.handlePasteEvent=function(w,T,k,C){w.stopPropagation(),w.clipboardData&&x(w.clipboardData.getData("text/plain"),T,k,C)},h.paste=x,h.moveTextAreaUnderMouseCursor=p,h.rightClickHandler=function(w,T,k,C,a){p(w,T,k),a&&C.rightClickSelect(w),T.value=C.selectionText,T.select()}},7239:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorContrastCache=void 0;const m=d(1505);h.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(x,p,w){this._css.set(x,p,w)}getCss(x,p){return this._css.get(x,p)}setColor(x,p,w){this._color.set(x,p,w)}getColor(x,p){return this._color.get(x,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.addDisposableDomListener=void 0,h.addDisposableDomListener=function(d,m,x,p){d.addEventListener(m,x,p);let w=!1;return{dispose:()=>{w||(w=!0,d.removeEventListener(m,x,p))}}}},6465:function(q,h,d){var m=this&&this.__decorate||function(a,u,l,o){var g,y=arguments.length,R=y<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,u,l,o);else for(var L=a.length-1;L>=0;L--)(g=a[L])&&(R=(y<3?g(R):y>3?g(u,l,R):g(u,l))||R);return y>3&&R&&Object.defineProperty(u,l,R),R},x=this&&this.__param||function(a,u){return function(l,o){u(l,o,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Linkifier2=void 0;const p=d(3656),w=d(8460),T=d(844),k=d(2585);let C=h.Linkifier2=class extends T.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new w.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new w.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,T.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,T.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{const u=this._linkProviders.indexOf(a);u!==-1&&this._linkProviders.splice(u,1)}}}attachToDom(a,u,l){this._element=a,this._mouseService=u,this._renderService=l,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;const u=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const l=a.composedPath();for(let o=0;o<l.length;o++){const g=l[o];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,u){var l,o;this._activeProviderReplies&&u||((l=this._activeProviderReplies)===null||l===void 0||l.forEach((y=>{y?.forEach((R=>{R.link.dispose&&R.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=a.y);let g=!1;for(const[y,R]of this._linkProviders.entries())u?!((o=this._activeProviderReplies)===null||o===void 0)&&o.get(y)&&(g=this._checkLinkProviderResult(y,a,g)):R.provideLinks(a.y,(L=>{var b,M;if(this._isMouseOut)return;const U=L?.map((V=>({link:V})));(b=this._activeProviderReplies)===null||b===void 0||b.set(y,U),g=this._checkLinkProviderResult(y,a,g),((M=this._activeProviderReplies)===null||M===void 0?void 0:M.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)}))}_removeIntersectingLinks(a,u){const l=new Set;for(let o=0;o<u.size;o++){const g=u.get(o);if(g)for(let y=0;y<g.length;y++){const R=g[y],L=R.link.range.start.y<a?0:R.link.range.start.x,b=R.link.range.end.y>a?this._bufferService.cols:R.link.range.end.x;for(let M=L;M<=b;M++){if(l.has(M)){g.splice(y--,1);break}l.add(M)}}}}_checkLinkProviderResult(a,u,l){var o;if(!this._activeProviderReplies)return l;const g=this._activeProviderReplies.get(a);let y=!1;for(let R=0;R<a;R++)this._activeProviderReplies.has(R)&&!this._activeProviderReplies.get(R)||(y=!0);if(!y&&g){const R=g.find((L=>this._linkAtPosition(L.link,u)));R&&(l=!0,this._handleNewLink(R))}if(this._activeProviderReplies.size===this._linkProviders.length&&!l)for(let R=0;R<this._activeProviderReplies.size;R++){const L=(o=this._activeProviderReplies.get(R))===null||o===void 0?void 0:o.find((b=>this._linkAtPosition(b.link,u)));if(L){l=!0,this._handleNewLink(L);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;const u=this._positionFromMouseEvent(a,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!u||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,T.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(a.link,u)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var l,o;return(o=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||o===void 0?void 0:o.decorations.pointerCursor},set:l=>{var o,g;!((o=this._currentLink)===null||o===void 0)&&o.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:()=>{var l,o;return(o=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||o===void 0?void 0:o.decorations.underline},set:l=>{var o,g,y;!((o=this._currentLink)===null||o===void 0)&&o.state&&((y=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||y===void 0?void 0:y.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((l=>{if(!this._currentLink)return;const o=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(o,g),this._lastMouseEvent&&this._element)){const y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}}))))}_linkHover(a,u,l){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(l,u.text)}_fireUnderlineEvent(a,u){const l=a.range,o=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-o-1,l.end.x,l.end.y-o-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(a,u,l){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(l,u.text)}_linkAtPosition(a,u){const l=a.range.start.y*this._bufferService.cols+a.range.start.x,o=a.range.end.y*this._bufferService.cols+a.range.end.x,g=u.y*this._bufferService.cols+u.x;return l<=g&&g<=o}_positionFromMouseEvent(a,u,l){const o=l.getCoords(a,u,this._bufferService.cols,this._bufferService.rows);if(o)return{x:o[0],y:o[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,u,l,o,g){return{x1:a,y1:u,x2:l,y2:o,cols:this._bufferService.cols,fg:g}}};h.Linkifier2=C=m([x(0,k.IBufferService)],C)},9042:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.tooMuchOutput=h.promptLabel=void 0,h.promptLabel="Terminal input",h.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(q,h,d){var m=this&&this.__decorate||function(C,a,u,l){var o,g=arguments.length,y=g<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(C,a,u,l);else for(var R=C.length-1;R>=0;R--)(o=C[R])&&(y=(g<3?o(y):g>3?o(a,u,y):o(a,u))||y);return g>3&&y&&Object.defineProperty(a,u,y),y},x=this&&this.__param||function(C,a){return function(u,l){a(u,l,C)}};Object.defineProperty(h,"__esModule",{value:!0}),h.OscLinkProvider=void 0;const p=d(511),w=d(2585);let T=h.OscLinkProvider=class{constructor(C,a,u){this._bufferService=C,this._optionsService=a,this._oscLinkService=u}provideLinks(C,a){var u;const l=this._bufferService.buffer.lines.get(C-1);if(!l)return void a(void 0);const o=[],g=this._optionsService.rawOptions.linkHandler,y=new p.CellData,R=l.getTrimmedLength();let L=-1,b=-1,M=!1;for(let U=0;U<R;U++)if(b!==-1||l.hasContent(U)){if(l.loadCell(U,y),y.hasExtendedAttrs()&&y.extended.urlId){if(b===-1){b=U,L=y.extended.urlId;continue}M=y.extended.urlId!==L}else b!==-1&&(M=!0);if(M||b!==-1&&U===R-1){const V=(u=this._oscLinkService.getLinkData(L))===null||u===void 0?void 0:u.uri;if(V){const I={start:{x:b+1,y:C},end:{x:U+(M||U!==R-1?0:1),y:C}};let $=!1;if(!g?.allowNonHttpProtocols)try{const Q=new URL(V);["http:","https:"].includes(Q.protocol)||($=!0)}catch{$=!0}$||o.push({text:V,range:I,activate:(Q,se)=>g?g.activate(Q,se,I):k(0,se),hover:(Q,se)=>{var K;return(K=g?.hover)===null||K===void 0?void 0:K.call(g,Q,se,I)},leave:(Q,se)=>{var K;return(K=g?.leave)===null||K===void 0?void 0:K.call(g,Q,se,I)}})}M=!1,y.hasExtendedAttrs()&&y.extended.urlId?(b=U,L=y.extended.urlId):(b=-1,L=-1)}}a(o)}};function k(C,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}h.OscLinkProvider=T=m([x(0,w.IBufferService),x(1,w.IOptionsService),x(2,w.IOscLinkService)],T)},6193:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderDebouncer=void 0,h.RenderDebouncer=class{constructor(d,m){this._parentWindow=d,this._renderCallback=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(d,m,x){this._rowCount=x,d=d!==void 0?d:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},5596:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ScreenDprMonitor=void 0;const m=d(844);class x extends m.Disposable{constructor(w){super(),this._parentWindow=w,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,m.toDisposable)((()=>{this.clearListener()})))}setListener(w){this._listener&&this.clearListener(),this._listener=w,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var w;this._outerListener&&((w=this._resolutionMediaMatchList)===null||w===void 0||w.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}h.ScreenDprMonitor=x},3236:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;const m=d(3614),x=d(3656),p=d(6465),w=d(9042),T=d(3730),k=d(1680),C=d(3107),a=d(5744),u=d(2950),l=d(1296),o=d(428),g=d(4269),y=d(5114),R=d(8934),L=d(3230),b=d(9312),M=d(4725),U=d(6731),V=d(8055),I=d(8969),$=d(8460),Q=d(844),se=d(6114),K=d(8437),J=d(2584),j=d(7399),F=d(5941),W=d(9074),O=d(2585),P=d(5435),ae=d(4567),ve=typeof window<"u"?window.document:null;class be extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(B={}){super(B),this.browser=se,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new Q.MutableDisposable),this._onCursorMove=this.register(new $.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new $.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new $.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new $.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new $.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new $.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new $.EventEmitter),this._onBlur=this.register(new $.EventEmitter),this._onA11yCharEmitter=this.register(new $.EventEmitter),this._onA11yTabEmitter=this.register(new $.EventEmitter),this._onWillOpen=this.register(new $.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(T.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(W.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((ie,ce)=>this.refresh(ie,ce)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((ie=>this._reportWindowsOptions(ie)))),this.register(this._inputHandler.onColor((ie=>this._handleColorEvent(ie)))),this.register((0,$.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,$.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,$.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,$.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((ie=>this._afterResize(ie.cols,ie.rows)))),this.register((0,Q.toDisposable)((()=>{var ie,ce;this._customKeyEventHandler=void 0,(ce=(ie=this.element)===null||ie===void 0?void 0:ie.parentNode)===null||ce===void 0||ce.removeChild(this.element)})))}_handleColorEvent(B){if(this._themeService)for(const ie of B){let ce,pe="";switch(ie.index){case 256:ce="foreground",pe="10";break;case 257:ce="background",pe="11";break;case 258:ce="cursor",pe="12";break;default:ce="ansi",pe="4;"+ie.index}switch(ie.type){case 0:const Oe=V.color.toColorRGB(ce==="ansi"?this._themeService.colors.ansi[ie.index]:this._themeService.colors[ce]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${pe};${(0,F.toRgbString)(Oe)}${J.C1_ESCAPED.ST}`);break;case 1:if(ce==="ansi")this._themeService.modifyColors((Ee=>Ee.ansi[ie.index]=V.rgba.toColor(...ie.color)));else{const Ee=ce;this._themeService.modifyColors((Ne=>Ne[Ee]=V.rgba.toColor(...ie.color)))}break;case 2:this._themeService.restoreColor(ie.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(B){B?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ae.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const B=this.buffer.ybase+this.buffer.y,ie=this.buffer.lines.get(B);if(!ie)return;const ce=Math.min(this.buffer.x,this.cols-1),pe=this._renderService.dimensions.css.cell.height,Oe=ie.getWidth(ce),Ee=this._renderService.dimensions.css.cell.width*Oe,Ne=this.buffer.y*this._renderService.dimensions.css.cell.height,lt=ce*this._renderService.dimensions.css.cell.width;this.textarea.style.left=lt+"px",this.textarea.style.top=Ne+"px",this.textarea.style.width=Ee+"px",this.textarea.style.height=pe+"px",this.textarea.style.lineHeight=pe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,x.addDisposableDomListener)(this.element,"copy",(ie=>{this.hasSelection()&&(0,m.copyHandler)(ie,this._selectionService)})));const B=ie=>(0,m.handlePasteEvent)(ie,this.textarea,this.coreService,this.optionsService);this.register((0,x.addDisposableDomListener)(this.textarea,"paste",B)),this.register((0,x.addDisposableDomListener)(this.element,"paste",B)),se.isFirefox?this.register((0,x.addDisposableDomListener)(this.element,"mousedown",(ie=>{ie.button===2&&(0,m.rightClickHandler)(ie,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,x.addDisposableDomListener)(this.element,"contextmenu",(ie=>{(0,m.rightClickHandler)(ie,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),se.isLinux&&this.register((0,x.addDisposableDomListener)(this.element,"auxclick",(ie=>{ie.button===1&&(0,m.moveTextAreaUnderMouseCursor)(ie,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,x.addDisposableDomListener)(this.textarea,"keyup",(B=>this._keyUp(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keydown",(B=>this._keyDown(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keypress",(B=>this._keyPress(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionupdate",(B=>this._compositionHelper.compositionupdate(B)))),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,x.addDisposableDomListener)(this.textarea,"input",(B=>this._inputEvent(B)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(B){var ie;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),B.appendChild(this.element);const ce=ve.createDocumentFragment();this._viewportElement=ve.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ce.appendChild(this._viewportElement),this._viewportScrollArea=ve.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ve.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ve.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ce.appendChild(this.screenElement),this.textarea=ve.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",w.promptLabel),se.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,(ie=this._document.defaultView)!==null&&ie!==void 0?ie:window),this._instantiationService.setService(M.ICoreBrowserService,this._coreBrowserService),this.register((0,x.addDisposableDomListener)(this.textarea,"focus",(pe=>this._handleTextAreaFocus(pe)))),this.register((0,x.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(U.ThemeService),this._instantiationService.setService(M.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((pe=>this._onRender.fire(pe)))),this.onResize((pe=>this._renderService.resize(pe.cols,pe.rows))),this._compositionView=ve.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ce);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((pe=>this.scrollLines(pe.amount,pe.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((pe=>this.scrollLines(pe.amount,pe.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((pe=>this._renderService.handleSelectionChanged(pe.start,pe.end,pe.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((pe=>{this.textarea.value=pe,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((pe=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,x.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(C.BufferDecorationRenderer,this.screenElement)),this.register((0,x.addDisposableDomListener)(this.element,"mousedown",(pe=>this._selectionService.handleMouseDown(pe)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ae.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(pe=>this._handleScreenReaderModeOptionChange(pe)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(pe=>{!this._overviewRulerRenderer&&pe&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const B=this,ie=this.element;function ce(Ee){const Ne=B._mouseService.getMouseReportCoords(Ee,B.screenElement);if(!Ne)return!1;let lt,Xe;switch(Ee.overrideType||Ee.type){case"mousemove":Xe=32,Ee.buttons===void 0?(lt=3,Ee.button!==void 0&&(lt=Ee.button<3?Ee.button:3)):lt=1&Ee.buttons?0:4&Ee.buttons?1:2&Ee.buttons?2:3;break;case"mouseup":Xe=0,lt=Ee.button<3?Ee.button:3;break;case"mousedown":Xe=1,lt=Ee.button<3?Ee.button:3;break;case"wheel":if(B.viewport.getLinesScrolled(Ee)===0)return!1;Xe=Ee.deltaY<0?0:1,lt=4;break;default:return!1}return!(Xe===void 0||lt===void 0||lt>4)&&B.coreMouseService.triggerMouseEvent({col:Ne.col,row:Ne.row,x:Ne.x,y:Ne.y,button:lt,action:Xe,ctrl:Ee.ctrlKey,alt:Ee.altKey,shift:Ee.shiftKey})}const pe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Oe={mouseup:Ee=>(ce(Ee),Ee.buttons||(this._document.removeEventListener("mouseup",pe.mouseup),pe.mousedrag&&this._document.removeEventListener("mousemove",pe.mousedrag)),this.cancel(Ee)),wheel:Ee=>(ce(Ee),this.cancel(Ee,!0)),mousedrag:Ee=>{Ee.buttons&&ce(Ee)},mousemove:Ee=>{Ee.buttons||ce(Ee)}};this.register(this.coreMouseService.onProtocolChange((Ee=>{Ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ee?pe.mousemove||(ie.addEventListener("mousemove",Oe.mousemove),pe.mousemove=Oe.mousemove):(ie.removeEventListener("mousemove",pe.mousemove),pe.mousemove=null),16&Ee?pe.wheel||(ie.addEventListener("wheel",Oe.wheel,{passive:!1}),pe.wheel=Oe.wheel):(ie.removeEventListener("wheel",pe.wheel),pe.wheel=null),2&Ee?pe.mouseup||(ie.addEventListener("mouseup",Oe.mouseup),pe.mouseup=Oe.mouseup):(this._document.removeEventListener("mouseup",pe.mouseup),ie.removeEventListener("mouseup",pe.mouseup),pe.mouseup=null),4&Ee?pe.mousedrag||(pe.mousedrag=Oe.mousedrag):(this._document.removeEventListener("mousemove",pe.mousedrag),pe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,x.addDisposableDomListener)(ie,"mousedown",(Ee=>{if(Ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ee))return ce(Ee),pe.mouseup&&this._document.addEventListener("mouseup",pe.mouseup),pe.mousedrag&&this._document.addEventListener("mousemove",pe.mousedrag),this.cancel(Ee)}))),this.register((0,x.addDisposableDomListener)(ie,"wheel",(Ee=>{if(!pe.wheel){if(!this.buffer.hasScrollback){const Ne=this.viewport.getLinesScrolled(Ee);if(Ne===0)return;const lt=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ee.deltaY<0?"A":"B");let Xe="";for(let ji=0;ji<Math.abs(Ne);ji++)Xe+=lt;return this.coreService.triggerDataEvent(Xe,!0),this.cancel(Ee,!0)}return this.viewport.handleWheel(Ee)?this.cancel(Ee):void 0}}),{passive:!1})),this.register((0,x.addDisposableDomListener)(ie,"touchstart",(Ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ee),this.cancel(Ee)}),{passive:!0})),this.register((0,x.addDisposableDomListener)(ie,"touchmove",(Ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ee)?void 0:this.cancel(Ee)}),{passive:!1}))}refresh(B,ie){var ce;(ce=this._renderService)===null||ce===void 0||ce.refreshRows(B,ie)}updateCursorStyle(B){var ie;!((ie=this._selectionService)===null||ie===void 0)&&ie.shouldColumnSelect(B)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(B,ie,ce=0){var pe;ce===1?(super.scrollLines(B,ie,ce),this.refresh(0,this.rows-1)):(pe=this.viewport)===null||pe===void 0||pe.scrollLines(B)}paste(B){(0,m.paste)(B,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(B){this._customKeyEventHandler=B}registerLinkProvider(B){return this.linkifier2.registerLinkProvider(B)}registerCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const ie=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),ie}deregisterCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(B){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)}registerDecoration(B){return this._decorationService.registerDecoration(B)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(B,ie,ce){this._selectionService.setSelection(B,ie,ce)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()}selectAll(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()}selectLines(B,ie){var ce;(ce=this._selectionService)===null||ce===void 0||ce.selectLines(B,ie)}_keyDown(B){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;const ie=this.browser.isMac&&this.options.macOptionIsMeta&&B.altKey;if(!ie&&!this._compositionHelper.keydown(B))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;ie||B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ce=(0,j.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),ce.type===3||ce.type===2){const pe=this.rows-1;return this.scrollLines(ce.type===2?-pe:pe),this.cancel(B,!0)}return ce.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(ce.cancel&&this.cancel(B,!0),!ce.key||!!(B.key&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&B.key.length===1&&B.key.charCodeAt(0)>=65&&B.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ce.key!==J.C0.ETX&&ce.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ce.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(ce.key,!0),!this.optionsService.rawOptions.screenReaderMode||B.altKey||B.ctrlKey?this.cancel(B,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(B,ie){const ce=B.isMac&&!this.options.macOptionIsMeta&&ie.altKey&&!ie.ctrlKey&&!ie.metaKey||B.isWindows&&ie.altKey&&ie.ctrlKey&&!ie.metaKey||B.isWindows&&ie.getModifierState("AltGraph");return ie.type==="keypress"?ce:ce&&(!ie.keyCode||ie.keyCode>47)}_keyUp(B){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||((function(ie){return ie.keyCode===16||ie.keyCode===17||ie.keyCode===18})(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)}_keyPress(B){let ie;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)ie=B.charCode;else if(B.which===null||B.which===void 0)ie=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;ie=B.which}return!(!ie||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(ie=String.fromCharCode(ie),this._onKey.fire({key:ie,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(ie,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(B){if(B.data&&B.inputType==="insertText"&&(!B.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const ie=B.data;return this.coreService.triggerDataEvent(ie,!0),this.cancel(B),!0}return!1}resize(B,ie){B!==this.cols||ie!==this.rows?super.resize(B,ie):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(B,ie){var ce,pe;(ce=this._charSizeService)===null||ce===void 0||ce.measure(),(pe=this.viewport)===null||pe===void 0||pe.syncScrollArea(!0)}clear(){var B;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ie=1;ie<this.rows;ie++)this.buffer.lines.push(this.buffer.getBlankLine(K.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(B=this.viewport)===null||B===void 0||B.reset(),this.refresh(0,this.rows-1)}}reset(){var B,ie;this.options.rows=this.rows,this.options.cols=this.cols;const ce=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)===null||B===void 0||B.reset(),this._decorationService.reset(),(ie=this.viewport)===null||ie===void 0||ie.reset(),this._customKeyEventHandler=ce,this.refresh(0,this.rows-1)}clearTextureAtlas(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()}_reportFocus(){var B;!((B=this.element)===null||B===void 0)&&B.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(B){if(this._renderService)switch(B){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const ie=this._renderService.dimensions.css.canvas.width.toFixed(0),ce=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${ce};${ie}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const pe=this._renderService.dimensions.css.cell.width.toFixed(0),Oe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${Oe};${pe}t`)}}cancel(B,ie){if(this.options.cancelEvents||ie)return B.preventDefault(),B.stopPropagation(),!1}}h.Terminal=be},9924:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TimeBasedDebouncer=void 0,h.TimeBasedDebouncer=class{constructor(d,m=1e3){this._renderCallback=d,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,m,x){this._rowCount=x,d=d!==void 0?d:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const w=p-this._lastRefreshMs,T=this._debounceThresholdMS-w;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),T)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,m)}}},1680:function(q,h,d){var m=this&&this.__decorate||function(u,l,o,g){var y,R=arguments.length,L=R<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,o):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,l,o,g);else for(var b=u.length-1;b>=0;b--)(y=u[b])&&(L=(R<3?y(L):R>3?y(l,o,L):y(l,o))||L);return R>3&&L&&Object.defineProperty(l,o,L),L},x=this&&this.__param||function(u,l){return function(o,g){l(o,g,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Viewport=void 0;const p=d(3656),w=d(4725),T=d(8460),k=d(844),C=d(2585);let a=h.Viewport=class extends k.Disposable{constructor(u,l,o,g,y,R,L,b){super(),this._viewportElement=u,this._scrollArea=l,this._bufferService=o,this._optionsService=g,this._charSizeService=y,this._renderService=R,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new T.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((M=>this._activeBuffer=M.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((M=>this._renderDimensions=M))),this._handleThemeChange(b.colors),this.register(b.onChangeColors((M=>this._handleThemeChange(M)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,l){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&o<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const l=this._getPixelsScrolled(u);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(u,l){var o;let g,y="";const R=[],L=l??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let M=u;M<L;M++){const U=b.get(M);if(!U)continue;const V=(o=b.get(M+1))===null||o===void 0?void 0:o.isWrapped;if(y+=U.translateToString(!V),!V||M===b.length-1){const I=document.createElement("div");I.textContent=y,R.push(I),y.length>0&&(g=I),y=""}}return{bufferElements:R,cursorElement:g}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(u,l){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&l.altKey||o==="ctrl"&&l.ctrlKey||o==="shift"&&l.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const l=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}};h.Viewport=a=m([x(2,C.IBufferService),x(3,C.IOptionsService),x(4,w.ICharSizeService),x(5,w.IRenderService),x(6,w.ICoreBrowserService),x(7,w.IThemeService)],a)},3107:function(q,h,d){var m=this&&this.__decorate||function(a,u,l,o){var g,y=arguments.length,R=y<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,u,l,o);else for(var L=a.length-1;L>=0;L--)(g=a[L])&&(R=(y<3?g(R):y>3?g(u,l,R):g(u,l))||R);return y>3&&R&&Object.defineProperty(u,l,R),R},x=this&&this.__param||function(a,u){return function(l,o){u(l,o,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.BufferDecorationRenderer=void 0;const p=d(3656),w=d(4725),T=d(844),k=d(2585);let C=h.BufferDecorationRenderer=class extends T.Disposable{constructor(a,u,l,o){super(),this._screenElement=a,this._bufferService=u,this._decorationService=l,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,p.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((g=>this._removeDecoration(g)))),this.register((0,T.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var u,l;const o=document.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((u=a?.options)===null||u===void 0?void 0:u.layer)==="top"),o.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(l=a.options.x)!==null&&l!==void 0?l:0;return g&&g>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(a,o),o}_refreshStyle(a){const u=a.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let l=this._decorationElements.get(a);l||(l=this._createElement(a),a.element=l,this._decorationElements.set(a,l),this._container.appendChild(l),a.onDispose((()=>{this._decorationElements.delete(a),l.remove()}))),l.style.top=u*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(l)}}_refreshXPosition(a,u=a.element){var l;if(!u)return;const o=(l=a.options.x)!==null&&l!==void 0?l:0;(a.options.anchor||"left")==="right"?u.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var u;(u=this._decorationElements.get(a))===null||u===void 0||u.remove(),this._decorationElements.delete(a),a.dispose()}};h.BufferDecorationRenderer=C=m([x(1,k.IBufferService),x(2,k.IDecorationService),x(3,w.IRenderService)],C)},5871:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorZoneStore=void 0,h.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const m of this._zones)if(m.color===d.options.overviewRulerOptions.color&&m.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,d.marker.line))return;if(this._lineAdjacentToZone(m,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(m,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,m){return m>=d.startBufferLine&&m<=d.endBufferLine}_lineAdjacentToZone(d,m,x){return m>=d.startBufferLine-this._linePadding[x||"full"]&&m<=d.endBufferLine+this._linePadding[x||"full"]}_addLineToZone(d,m){d.startBufferLine=Math.min(d.startBufferLine,m),d.endBufferLine=Math.max(d.endBufferLine,m)}}},5744:function(q,h,d){var m=this&&this.__decorate||function(g,y,R,L){var b,M=arguments.length,U=M<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,R):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(g,y,R,L);else for(var V=g.length-1;V>=0;V--)(b=g[V])&&(U=(M<3?b(U):M>3?b(y,R,U):b(y,R))||U);return M>3&&U&&Object.defineProperty(y,R,U),U},x=this&&this.__param||function(g,y){return function(R,L){y(R,L,g)}};Object.defineProperty(h,"__esModule",{value:!0}),h.OverviewRulerRenderer=void 0;const p=d(5871),w=d(3656),T=d(4725),k=d(844),C=d(2585),a={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let o=h.OverviewRulerRenderer=class extends k.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,y,R,L,b,M,U){var V;super(),this._viewportElement=g,this._screenElement=y,this._bufferService=R,this._decorationService=L,this._renderService=b,this._optionsService=M,this._coreBrowseService=U,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(V=this._viewportElement.parentElement)===null||V===void 0||V.insertBefore(this._canvas,this._viewportElement);const I=this._canvas.getContext("2d");if(!I)throw new Error("Ctx cannot be null");this._ctx=I,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,k.toDisposable)((()=>{var $;($=this._canvas)===null||$===void 0||$.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,w.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=g,u.center=y,u.right=g,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=u.left,l.right=u.left+u.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);a.left=y,a.center=y,a.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const y of g)y.position!=="full"&&this._renderColorZone(y);for(const y of g)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(l[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-a[g.position||"full"]/2),u[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[g.position||"full"]))}_queueRefresh(g,y){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};h.OverviewRulerRenderer=o=m([x(2,C.IBufferService),x(3,C.IDecorationService),x(4,T.IRenderService),x(5,C.IOptionsService),x(6,T.ICoreBrowserService)],o)},2950:function(q,h,d){var m=this&&this.__decorate||function(C,a,u,l){var o,g=arguments.length,y=g<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(C,a,u,l);else for(var R=C.length-1;R>=0;R--)(o=C[R])&&(y=(g<3?o(y):g>3?o(a,u,y):o(a,u))||y);return g>3&&y&&Object.defineProperty(a,u,y),y},x=this&&this.__param||function(C,a){return function(u,l){a(u,l,C)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CompositionHelper=void 0;const p=d(4725),w=d(2585),T=d(2584);let k=h.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(C,a,u,l,o,g){this._textarea=C,this._compositionView=a,this._bufferService=u,this._optionsService=l,this._coreService=o,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(C){this._compositionView.textContent=C.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(C){if(this._isComposing||this._isSendingComposition){if(C.keyCode===229||C.keyCode===16||C.keyCode===17||C.keyCode===18)return!1;this._finalizeComposition(!1)}return C.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(C){if(this._compositionView.classList.remove("active"),this._isComposing=!1,C){const a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}}),0)}else{this._isSendingComposition=!1;const a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){const C=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const a=this._textarea.value,u=a.replace(C,"");this._dataAlreadySent=u,a.length>C.length?this._coreService.triggerDataEvent(u,!0):a.length<C.length?this._coreService.triggerDataEvent(`${T.C0.DEL}`,!0):a.length===C.length&&a!==C&&this._coreService.triggerDataEvent(a,!0)}}),0)}updateCompositionElements(C){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}C||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};h.CompositionHelper=k=m([x(2,w.IBufferService),x(3,w.IOptionsService),x(4,w.ICoreService),x(5,p.IRenderService)],k)},9806:(q,h)=>{function d(m,x,p){const w=p.getBoundingClientRect(),T=m.getComputedStyle(p),k=parseInt(T.getPropertyValue("padding-left")),C=parseInt(T.getPropertyValue("padding-top"));return[x.clientX-w.left-k,x.clientY-w.top-C]}Object.defineProperty(h,"__esModule",{value:!0}),h.getCoords=h.getCoordsRelativeToElement=void 0,h.getCoordsRelativeToElement=d,h.getCoords=function(m,x,p,w,T,k,C,a,u){if(!k)return;const l=d(m,x,p);return l?(l[0]=Math.ceil((l[0]+(u?C/2:0))/C),l[1]=Math.ceil(l[1]/a),l[0]=Math.min(Math.max(l[0],1),w+(u?1:0)),l[1]=Math.min(Math.max(l[1],1),T),l):void 0}},9504:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.moveToCellSequence=void 0;const m=d(2584);function x(a,u,l,o){const g=a-p(a,l),y=u-p(u,l),R=Math.abs(g-y)-(function(L,b,M){let U=0;const V=L-p(L,M),I=b-p(b,M);for(let $=0;$<Math.abs(V-I);$++){const Q=w(L,b)==="A"?-1:1,se=M.buffer.lines.get(V+Q*$);se?.isWrapped&&U++}return U})(a,u,l);return C(R,k(w(a,u),o))}function p(a,u){let l=0,o=u.buffer.lines.get(a),g=o?.isWrapped;for(;g&&a>=0&&a<u.rows;)l++,o=u.buffer.lines.get(--a),g=o?.isWrapped;return l}function w(a,u){return a>u?"A":"B"}function T(a,u,l,o,g,y){let R=a,L=u,b="";for(;R!==l||L!==o;)R+=g?1:-1,g&&R>y.cols-1?(b+=y.buffer.translateBufferLineToString(L,!1,a,R),R=0,a=0,L++):!g&&R<0&&(b+=y.buffer.translateBufferLineToString(L,!1,0,a+1),R=y.cols-1,a=R,L--);return b+y.buffer.translateBufferLineToString(L,!1,a,R)}function k(a,u){const l=u?"O":"[";return m.C0.ESC+l+a}function C(a,u){a=Math.floor(a);let l="";for(let o=0;o<a;o++)l+=u;return l}h.moveToCellSequence=function(a,u,l,o){const g=l.buffer.x,y=l.buffer.y;if(!l.buffer.hasScrollback)return(function(b,M,U,V,I,$){return x(M,V,I,$).length===0?"":C(T(b,M,b,M-p(M,I),!1,I).length,k("D",$))})(g,y,0,u,l,o)+x(y,u,l,o)+(function(b,M,U,V,I,$){let Q;Q=x(M,V,I,$).length>0?V-p(V,I):M;const se=V,K=(function(J,j,F,W,O,P){let ae;return ae=x(F,W,O,P).length>0?W-p(W,O):j,J<F&&ae<=W||J>=F&&ae<W?"C":"D"})(b,M,U,V,I,$);return C(T(b,Q,U,se,K==="C",I).length,k(K,$))})(g,y,a,u,l,o);let R;if(y===u)return R=g>a?"D":"C",C(Math.abs(g-a),k(R,o));R=y>u?"D":"C";const L=Math.abs(y-u);return C((function(b,M){return M.cols-b})(y>u?a:g,l)+(L-1)*l.cols+1+((y>u?g:a)-1),k(R,o))}},1296:function(q,h,d){var m=this&&this.__decorate||function(I,$,Q,se){var K,J=arguments.length,j=J<3?$:se===null?se=Object.getOwnPropertyDescriptor($,Q):se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(I,$,Q,se);else for(var F=I.length-1;F>=0;F--)(K=I[F])&&(j=(J<3?K(j):J>3?K($,Q,j):K($,Q))||j);return J>3&&j&&Object.defineProperty($,Q,j),j},x=this&&this.__param||function(I,$){return function(Q,se){$(Q,se,I)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRenderer=void 0;const p=d(3787),w=d(2550),T=d(2223),k=d(6171),C=d(4725),a=d(8055),u=d(8460),l=d(844),o=d(2585),g="xterm-dom-renderer-owner-",y="xterm-rows",R="xterm-fg-",L="xterm-bg-",b="xterm-focus",M="xterm-selection";let U=1,V=h.DomRenderer=class extends l.Disposable{constructor(I,$,Q,se,K,J,j,F,W,O){super(),this._element=I,this._screenElement=$,this._viewportElement=Q,this._linkifier2=se,this._charSizeService=J,this._optionsService=j,this._bufferService=F,this._coreBrowserService=W,this._themeService=O,this._terminalClass=U++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((P=>this._injectCss(P)))),this._injectCss(this._themeService.colors),this._rowFactory=K.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((P=>this._handleLinkHover(P)))),this.register(this._linkifier2.onHideLinkUnderline((P=>this._handleLinkLeave(P)))),this.register((0,l.toDisposable)((()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new w.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Q of this._rowElements)Q.style.width=`${this.dimensions.css.canvas.width}px`,Q.style.height=`${this.dimensions.css.cell.height}px`,Q.style.lineHeight=`${this.dimensions.css.cell.height}px`,Q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const $=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${y} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${y} .xterm-dim { color: ${a.color.multiplyOpacity(I.foreground,.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,$+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",$+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,$+=`${this._terminalSelector} .${y}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(const[Q,se]of I.ansi.entries())$+=`${this._terminalSelector} .${R}${Q} { color: ${se.css}; }${this._terminalSelector} .${R}${Q}.xterm-dim { color: ${a.color.multiplyOpacity(se,.5).css}; }${this._terminalSelector} .${L}${Q} { background-color: ${se.css}; }`;$+=`${this._terminalSelector} .${R}${T.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(I.background).css}; }${this._terminalSelector} .${R}${T.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${L}${T.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){const I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,$){for(let Q=this._rowElements.length;Q<=$;Q++){const se=document.createElement("div");this._rowContainer.appendChild(se),this._rowElements.push(se)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,$){this._refreshRowElements(I,$),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,$,Q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,$,Q),this.renderRows(0,this._bufferService.rows-1),!I||!$)return;const se=I[1]-this._bufferService.buffer.ydisp,K=$[1]-this._bufferService.buffer.ydisp,J=Math.max(se,0),j=Math.min(K,this._bufferService.rows-1);if(J>=this._bufferService.rows||j<0)return;const F=document.createDocumentFragment();if(Q){const W=I[0]>$[0];F.appendChild(this._createSelectionElement(J,W?$[0]:I[0],W?I[0]:$[0],j-J+1))}else{const W=se===J?I[0]:0,O=J===K?$[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(J,W,O));const P=j-J-1;if(F.appendChild(this._createSelectionElement(J+1,0,this._bufferService.cols,P)),J!==j){const ae=K===j?$[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(j,0,ae))}}this._selectionContainer.appendChild(F)}_createSelectionElement(I,$,Q,se=1){const K=document.createElement("div");return K.style.height=se*this.dimensions.css.cell.height+"px",K.style.top=I*this.dimensions.css.cell.height+"px",K.style.left=$*this.dimensions.css.cell.width+"px",K.style.width=this.dimensions.css.cell.width*(Q-$)+"px",K}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const I of this._rowElements)I.replaceChildren()}renderRows(I,$){const Q=this._bufferService.buffer,se=Q.ybase+Q.y,K=Math.min(Q.x,this._bufferService.cols-1),J=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=I;W<=$;W++){const O=W+Q.ydisp,P=this._rowElements[W],ae=Q.lines.get(O);if(!P||!ae)break;P.replaceChildren(...this._rowFactory.createRow(ae,O,O===se,j,F,K,J,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,$,Q,se,K,J){Q<0&&(I=0),se<0&&($=0);const j=this._bufferService.rows-1;Q=Math.max(Math.min(Q,j),0),se=Math.max(Math.min(se,j),0),K=Math.min(K,this._bufferService.cols);const F=this._bufferService.buffer,W=F.ybase+F.y,O=Math.min(F.x,K-1),P=this._optionsService.rawOptions.cursorBlink,ae=this._optionsService.rawOptions.cursorStyle,ve=this._optionsService.rawOptions.cursorInactiveStyle;for(let be=Q;be<=se;++be){const Te=be+F.ydisp,B=this._rowElements[be],ie=F.lines.get(Te);if(!B||!ie)break;B.replaceChildren(...this._rowFactory.createRow(ie,Te,Te===W,ae,ve,O,P,this.dimensions.css.cell.width,this._widthCache,J?be===Q?I:0:-1,J?(be===se?$:K)-1:-1))}}};h.DomRenderer=V=m([x(4,o.IInstantiationService),x(5,C.ICharSizeService),x(6,o.IOptionsService),x(7,o.IBufferService),x(8,C.ICoreBrowserService),x(9,C.IThemeService)],V)},3787:function(q,h,d){var m=this&&this.__decorate||function(R,L,b,M){var U,V=arguments.length,I=V<3?L:M===null?M=Object.getOwnPropertyDescriptor(L,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(R,L,b,M);else for(var $=R.length-1;$>=0;$--)(U=R[$])&&(I=(V<3?U(I):V>3?U(L,b,I):U(L,b))||I);return V>3&&I&&Object.defineProperty(L,b,I),I},x=this&&this.__param||function(R,L){return function(b,M){L(b,M,R)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRendererRowFactory=void 0;const p=d(2223),w=d(643),T=d(511),k=d(2585),C=d(8055),a=d(4725),u=d(4269),l=d(6171),o=d(3734);let g=h.DomRendererRowFactory=class{constructor(R,L,b,M,U,V,I){this._document=R,this._characterJoinerService=L,this._optionsService=b,this._coreBrowserService=M,this._coreService=U,this._decorationService=V,this._themeService=I,this._workCell=new T.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(R,L,b){this._selectionStart=R,this._selectionEnd=L,this._columnSelectMode=b}createRow(R,L,b,M,U,V,I,$,Q,se,K){const J=[],j=this._characterJoinerService.getJoinedCharacters(L),F=this._themeService.colors;let W,O=R.getNoBgTrimmedLength();b&&O<V+1&&(O=V+1);let P=0,ae="",ve=0,be=0,Te=0,B=!1,ie=0,ce=!1,pe=0;const Oe=[],Ee=se!==-1&&K!==-1;for(let Ne=0;Ne<O;Ne++){R.loadCell(Ne,this._workCell);let lt=this._workCell.getWidth();if(lt===0)continue;let Xe=!1,ji=Ne,je=this._workCell;if(j.length>0&&Ne===j[0][0]){Xe=!0;const it=j.shift();je=new u.JoinedCellData(this._workCell,R.translateToString(!0,it[0],it[1]),it[1]-it[0]),ji=it[1]-1,lt=je.getWidth()}const _s=this._isCellInSelection(Ne,L),ft=b&&Ne===V,pi=Ee&&Ne>=se&&Ne<=K;let $e=!1;this._decorationService.forEachDecorationAtCell(Ne,L,void 0,(it=>{$e=!0}));let Ms=je.getChars()||w.WHITESPACE_CELL_CHAR;if(Ms===" "&&(je.isUnderline()||je.isOverline())&&(Ms=""),pe=lt*$-Q.get(Ms,je.isBold(),je.isItalic()),W){if(P&&(_s&&ce||!_s&&!ce&&je.bg===ve)&&(_s&&ce&&F.selectionForeground||je.fg===be)&&je.extended.ext===Te&&pi===B&&pe===ie&&!ft&&!Xe&&!$e){ae+=Ms,P++;continue}P&&(W.textContent=ae),W=this._document.createElement("span"),P=0,ae=""}else W=this._document.createElement("span");if(ve=je.bg,be=je.fg,Te=je.extended.ext,B=pi,ie=pe,ce=_s,Xe&&V>=Ne&&V<=ji&&(V=Ne),!this._coreService.isCursorHidden&&ft){if(Oe.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&Oe.push("xterm-cursor-blink"),Oe.push(M==="bar"?"xterm-cursor-bar":M==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(U)switch(U){case"outline":Oe.push("xterm-cursor-outline");break;case"block":Oe.push("xterm-cursor-block");break;case"bar":Oe.push("xterm-cursor-bar");break;case"underline":Oe.push("xterm-cursor-underline")}}if(je.isBold()&&Oe.push("xterm-bold"),je.isItalic()&&Oe.push("xterm-italic"),je.isDim()&&Oe.push("xterm-dim"),ae=je.isInvisible()?w.WHITESPACE_CELL_CHAR:je.getChars()||w.WHITESPACE_CELL_CHAR,je.isUnderline()&&(Oe.push(`xterm-underline-${je.extended.underlineStyle}`),ae===" "&&(ae=""),!je.isUnderlineColorDefault()))if(je.isUnderlineColorRGB())W.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(je.getUnderlineColor()).join(",")})`;else{let it=je.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&je.isBold()&&it<8&&(it+=8),W.style.textDecorationColor=F.ansi[it].css}je.isOverline()&&(Oe.push("xterm-overline"),ae===" "&&(ae="")),je.isStrikethrough()&&Oe.push("xterm-strikethrough"),pi&&(W.style.textDecoration="underline");let ii=je.getFgColor(),yt=je.getFgColorMode(),Mt=je.getBgColor(),Bi=je.getBgColorMode();const Vs=!!je.isInverse();if(Vs){const it=ii;ii=Mt,Mt=it;const Ji=yt;yt=Bi,Bi=Ji}let si,fr,ni,ms=!1;switch(this._decorationService.forEachDecorationAtCell(Ne,L,void 0,(it=>{it.options.layer!=="top"&&ms||(it.backgroundColorRGB&&(Bi=50331648,Mt=it.backgroundColorRGB.rgba>>8&16777215,si=it.backgroundColorRGB),it.foregroundColorRGB&&(yt=50331648,ii=it.foregroundColorRGB.rgba>>8&16777215,fr=it.foregroundColorRGB),ms=it.options.layer==="top")})),!ms&&_s&&(si=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,Mt=si.rgba>>8&16777215,Bi=50331648,ms=!0,F.selectionForeground&&(yt=50331648,ii=F.selectionForeground.rgba>>8&16777215,fr=F.selectionForeground)),ms&&Oe.push("xterm-decoration-top"),Bi){case 16777216:case 33554432:ni=F.ansi[Mt],Oe.push(`xterm-bg-${Mt}`);break;case 50331648:ni=C.rgba.toColor(Mt>>16,Mt>>8&255,255&Mt),this._addStyle(W,`background-color:#${y((Mt>>>0).toString(16),"0",6)}`);break;default:Vs?(ni=F.foreground,Oe.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):ni=F.background}switch(si||je.isDim()&&(si=C.color.multiplyOpacity(ni,.5)),yt){case 16777216:case 33554432:je.isBold()&&ii<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ii+=8),this._applyMinimumContrast(W,ni,F.ansi[ii],je,si,void 0)||Oe.push(`xterm-fg-${ii}`);break;case 50331648:const it=C.rgba.toColor(ii>>16&255,ii>>8&255,255&ii);this._applyMinimumContrast(W,ni,it,je,si,fr)||this._addStyle(W,`color:#${y(ii.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(W,ni,F.foreground,je,si,void 0)||Vs&&Oe.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}Oe.length&&(W.className=Oe.join(" "),Oe.length=0),ft||Xe||$e?W.textContent=ae:P++,pe!==this.defaultSpacing&&(W.style.letterSpacing=`${pe}px`),J.push(W),Ne=ji}return W&&P&&(W.textContent=ae),J}_applyMinimumContrast(R,L,b,M,U,V){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.excludeFromContrastRatioDemands)(M.getCode()))return!1;const I=this._getContrastCache(M);let $;if(U||V||($=I.getColor(L.rgba,b.rgba)),$===void 0){const Q=this._optionsService.rawOptions.minimumContrastRatio/(M.isDim()?2:1);$=C.color.ensureContrastRatio(U||L,V||b,Q),I.setColor((U||L).rgba,(V||b).rgba,$??null)}return!!$&&(this._addStyle(R,`color:${$.css}`),!0)}_getContrastCache(R){return R.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(R,L){R.setAttribute("style",`${R.getAttribute("style")||""}${L};`)}_isCellInSelection(R,L){const b=this._selectionStart,M=this._selectionEnd;return!(!b||!M)&&(this._columnSelectMode?b[0]<=M[0]?R>=b[0]&&L>=b[1]&&R<M[0]&&L<=M[1]:R<b[0]&&L>=b[1]&&R>=M[0]&&L<=M[1]:L>b[1]&&L<M[1]||b[1]===M[1]&&L===b[1]&&R>=b[0]&&R<M[0]||b[1]<M[1]&&L===M[1]&&R<M[0]||b[1]<M[1]&&L===b[1]&&R>=b[0])}};function y(R,L,b){for(;R.length<b;)R=L+R;return R}h.DomRendererRowFactory=g=m([x(1,a.ICharacterJoinerService),x(2,k.IOptionsService),x(3,a.ICoreBrowserService),x(4,k.ICoreService),x(5,k.IDecorationService),x(6,a.IThemeService)],g)},2550:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WidthCache=void 0,h.WidthCache=class{constructor(d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=d.createElement("span"),x=d.createElement("span");x.style.fontWeight="bold";const p=d.createElement("span");p.style.fontStyle="italic";const w=d.createElement("span");w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[m,x,p,w],this._container.appendChild(m),this._container.appendChild(x),this._container.appendChild(p),this._container.appendChild(w),d.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,m,x,p){d===this._font&&m===this._fontSize&&x===this._weight&&p===this._weightBold||(this._font=d,this._fontSize=m,this._weight=x,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${x}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${x}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(d,m,x){let p=0;if(!m&&!x&&d.length===1&&(p=d.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(d,0);let w=d;m&&(w+="B"),x&&(w+="I");let T=this._holey.get(w);if(T===void 0){let k=0;m&&(k|=1),x&&(k|=2),T=this._measure(d,k),this._holey.set(w,T)}return T}_measure(d,m){const x=this._measureElements[m];return x.textContent=d.repeat(32),x.offsetWidth/32}}},2223:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TEXT_BASELINE=h.DIM_OPACITY=h.INVERTED_DEFAULT_COLOR=void 0;const m=d(6114);h.INVERTED_DEFAULT_COLOR=257,h.DIM_OPACITY=.5,h.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(q,h)=>{function d(m){return 57508<=m&&m<=57558}Object.defineProperty(h,"__esModule",{value:!0}),h.createRenderDimensions=h.excludeFromContrastRatioDemands=h.isRestrictedPowerlineGlyph=h.isPowerlineGlyph=h.throwIfFalsy=void 0,h.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},h.isPowerlineGlyph=d,h.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},h.excludeFromContrastRatioDemands=function(m){return d(m)||(function(x){return 9472<=x&&x<=9631})(m)},h.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionModel=void 0,h.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,m=this.selectionEnd;return!(!d||!m)&&(d[1]>m[1]||d[1]===m[1]&&d[0]>m[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(q,h,d){var m=this&&this.__decorate||function(a,u,l,o){var g,y=arguments.length,R=y<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,u,l,o);else for(var L=a.length-1;L>=0;L--)(g=a[L])&&(R=(y<3?g(R):y>3?g(u,l,R):g(u,l))||R);return y>3&&R&&Object.defineProperty(u,l,R),R},x=this&&this.__param||function(a,u){return function(l,o){u(l,o,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharSizeService=void 0;const p=d(2585),w=d(8460),T=d(844);let k=h.CharSizeService=class extends T.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,u,l){super(),this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=this.register(new w.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new C(a,u,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};h.CharSizeService=k=m([x(2,p.IOptionsService)],k);class C{constructor(u,l,o){this._document=u,this._parentElement=l,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const u={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return u.width!==0&&u.height!==0&&(this._result.width=u.width/32,this._result.height=Math.ceil(u.height)),this._result}}},4269:function(q,h,d){var m=this&&this.__decorate||function(u,l,o,g){var y,R=arguments.length,L=R<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,o):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,l,o,g);else for(var b=u.length-1;b>=0;b--)(y=u[b])&&(L=(R<3?y(L):R>3?y(l,o,L):y(l,o))||L);return R>3&&L&&Object.defineProperty(l,o,L),L},x=this&&this.__param||function(u,l){return function(o,g){l(o,g,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharacterJoinerService=h.JoinedCellData=void 0;const p=d(3734),w=d(643),T=d(511),k=d(2585);class C extends p.AttributeData{constructor(l,o,g){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=o,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}h.JoinedCellData=C;let a=h.CharacterJoinerService=class xm{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new T.CellData}register(l){const o={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(o),o.id}deregister(l){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===l)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(l);if(!o||o.length===0)return[];const g=[],y=o.translateToString(!0);let R=0,L=0,b=0,M=o.getFg(0),U=o.getBg(0);for(let V=0;V<o.getTrimmedLength();V++)if(o.loadCell(V,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==U){if(V-R>1){const I=this._getJoinedRanges(y,b,L,o,R);for(let $=0;$<I.length;$++)g.push(I[$])}R=V,b=L,M=this._workCell.fg,U=this._workCell.bg}L+=this._workCell.getChars().length||w.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-R>1){const V=this._getJoinedRanges(y,b,L,o,R);for(let I=0;I<V.length;I++)g.push(V[I])}return g}_getJoinedRanges(l,o,g,y,R){const L=l.substring(o,g);let b=[];try{b=this._characterJoiners[0].handler(L)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const U=this._characterJoiners[M].handler(L);for(let V=0;V<U.length;V++)xm._mergeRanges(b,U[V])}catch(U){console.error(U)}return this._stringRangesToCellRanges(b,y,R),b}_stringRangesToCellRanges(l,o,g){let y=0,R=!1,L=0,b=l[y];if(b){for(let M=g;M<this._bufferService.cols;M++){const U=o.getWidth(M),V=o.getString(M).length||w.WHITESPACE_CELL_CHAR.length;if(U!==0){if(!R&&b[0]<=L&&(b[0]=M,R=!0),b[1]<=L){if(b[1]=M,b=l[++y],!b)break;b[0]<=L?(b[0]=M,R=!0):R=!1}L+=V}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(l,o){let g=!1;for(let y=0;y<l.length;y++){const R=l[y];if(g){if(o[1]<=R[0])return l[y-1][1]=o[1],l;if(o[1]<=R[1])return l[y-1][1]=Math.max(o[1],R[1]),l.splice(y,1),l;l.splice(y,1),y--}else{if(o[1]<=R[0])return l.splice(y,0,o),l;if(o[1]<=R[1])return R[0]=Math.min(o[0],R[0]),l;o[0]<R[1]&&(R[0]=Math.min(o[0],R[0]),g=!0)}}return g?l[l.length-1][1]=o[1]:l.push(o),l}};h.CharacterJoinerService=a=m([x(0,k.IBufferService)],a)},5114:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CoreBrowserService=void 0,h.CoreBrowserService=class{constructor(d,m){this._textarea=d,this.window=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(q,h,d){var m=this&&this.__decorate||function(k,C,a,u){var l,o=arguments.length,g=o<3?C:u===null?u=Object.getOwnPropertyDescriptor(C,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(k,C,a,u);else for(var y=k.length-1;y>=0;y--)(l=k[y])&&(g=(o<3?l(g):o>3?l(C,a,g):l(C,a))||g);return o>3&&g&&Object.defineProperty(C,a,g),g},x=this&&this.__param||function(k,C){return function(a,u){C(a,u,k)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseService=void 0;const p=d(4725),w=d(9806);let T=h.MouseService=class{constructor(k,C){this._renderService=k,this._charSizeService=C}getCoords(k,C,a,u,l){return(0,w.getCoords)(window,k,C,a,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(k,C){const a=(0,w.getCoordsRelativeToElement)(window,k,C);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};h.MouseService=T=m([x(0,p.IRenderService),x(1,p.ICharSizeService)],T)},3230:function(q,h,d){var m=this&&this.__decorate||function(g,y,R,L){var b,M=arguments.length,U=M<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,R):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(g,y,R,L);else for(var V=g.length-1;V>=0;V--)(b=g[V])&&(U=(M<3?b(U):M>3?b(y,R,U):b(y,R))||U);return M>3&&U&&Object.defineProperty(y,R,U),U},x=this&&this.__param||function(g,y){return function(R,L){y(R,L,g)}};Object.defineProperty(h,"__esModule",{value:!0}),h.RenderService=void 0;const p=d(3656),w=d(6193),T=d(5596),k=d(4725),C=d(8460),a=d(844),u=d(7226),l=d(2585);let o=h.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,y,R,L,b,M,U,V){if(super(),this._rowCount=g,this._charSizeService=L,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new C.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new C.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new C.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new C.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new w.RenderDebouncer(U.window,((I,$)=>this._renderRows(I,$))),this.register(this._renderDebouncer),this._screenDprMonitor=new T.ScreenDprMonitor(U.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(M.onResize((()=>this._fullRefresh()))),this.register(M.buffers.onBufferActivate((()=>{var I;return(I=this._renderer.value)===null||I===void 0?void 0:I.clear()}))),this.register(R.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(b.onDecorationRegistered((()=>this._fullRefresh()))),this.register(b.onDecorationRemoved((()=>this._fullRefresh()))),this.register(R.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(M.cols,M.rows),this._fullRefresh()}))),this.register(R.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(M.buffer.y,M.buffer.y,!0)))),this.register((0,p.addDisposableDomListener)(U.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(V.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in U.window){const I=new U.window.IntersectionObserver(($=>this._handleIntersectionChange($[$.length-1])),{threshold:0});I.observe(y),this.register({dispose:()=>I.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,y,R=!1){this._isPaused?this._needsFullRefresh=!0:(R||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,y,this._rowCount))}_renderRows(g,y){this._renderer.value&&(g=Math.min(g,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(g,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:y}),this._onRender.fire({start:g,end:y}),this._isNextRenderRedrawOnly=!0)}resize(g,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw((y=>this.refreshRows(y.start,y.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,y;this._renderer.value&&((y=(g=this._renderer.value).clearTextureAtlas)===null||y===void 0||y.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(g,y))):this._renderer.value.handleResize(g,y),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,y,R){var L;this._selectionState.start=g,this._selectionState.end=y,this._selectionState.columnSelectMode=R,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(g,y,R)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};h.RenderService=o=m([x(2,l.IOptionsService),x(3,k.ICharSizeService),x(4,l.IDecorationService),x(5,l.IBufferService),x(6,k.ICoreBrowserService),x(7,k.IThemeService)],o)},9312:function(q,h,d){var m=this&&this.__decorate||function(b,M,U,V){var I,$=arguments.length,Q=$<3?M:V===null?V=Object.getOwnPropertyDescriptor(M,U):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(b,M,U,V);else for(var se=b.length-1;se>=0;se--)(I=b[se])&&(Q=($<3?I(Q):$>3?I(M,U,Q):I(M,U))||Q);return $>3&&Q&&Object.defineProperty(M,U,Q),Q},x=this&&this.__param||function(b,M){return function(U,V){M(U,V,b)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionService=void 0;const p=d(9806),w=d(9504),T=d(456),k=d(4725),C=d(8460),a=d(844),u=d(6114),l=d(4841),o=d(511),g=d(2585),y="",R=new RegExp(y,"g");let L=h.SelectionService=class extends a.Disposable{constructor(b,M,U,V,I,$,Q,se,K){super(),this._element=b,this._screenElement=M,this._linkifier=U,this._bufferService=V,this._coreService=I,this._mouseService=$,this._optionsService=Q,this._renderService=se,this._coreBrowserService=K,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new C.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new C.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new C.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((J=>this._handleTrim(J))),this.register(this._bufferService.buffers.onBufferActivate((J=>this._handleBufferActivate(J)))),this.enable(),this._model=new T.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!b||!M||b[0]===M[0]&&b[1]===M[1])}get selectionText(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;if(!b||!M)return"";const U=this._bufferService.buffer,V=[];if(this._activeSelectionMode===3){if(b[0]===M[0])return"";const I=b[0]<M[0]?b[0]:M[0],$=b[0]<M[0]?M[0]:b[0];for(let Q=b[1];Q<=M[1];Q++){const se=U.translateBufferLineToString(Q,!0,I,$);V.push(se)}}else{const I=b[1]===M[1]?M[0]:void 0;V.push(U.translateBufferLineToString(b[1],!0,b[0],I));for(let $=b[1]+1;$<=M[1]-1;$++){const Q=U.lines.get($),se=U.translateBufferLineToString($,!0);Q?.isWrapped?V[V.length-1]+=se:V.push(se)}if(b[1]!==M[1]){const $=U.lines.get(M[1]),Q=U.translateBufferLineToString(M[1],!0,0,M[0]);$&&$.isWrapped?V[V.length-1]+=Q:V.push(Q)}}return V.map((I=>I.replace(R," "))).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),u.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const M=this._getMouseBufferCoords(b),U=this._model.finalSelectionStart,V=this._model.finalSelectionEnd;return!!(U&&V&&M)&&this._areCoordsInSelection(M,U,V)}isCellInSelection(b,M){const U=this._model.finalSelectionStart,V=this._model.finalSelectionEnd;return!(!U||!V)&&this._areCoordsInSelection([b,M],U,V)}_areCoordsInSelection(b,M,U){return b[1]>M[1]&&b[1]<U[1]||M[1]===U[1]&&b[1]===M[1]&&b[0]>=M[0]&&b[0]<U[0]||M[1]<U[1]&&b[1]===U[1]&&b[0]<U[0]||M[1]<U[1]&&b[1]===M[1]&&b[0]>=M[0]}_selectWordAtCursor(b,M){var U,V;const I=(V=(U=this._linkifier.currentLink)===null||U===void 0?void 0:U.link)===null||V===void 0?void 0:V.range;if(I)return this._model.selectionStart=[I.start.x-1,I.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(I,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const $=this._getMouseBufferCoords(b);return!!$&&(this._selectWordAt($,M),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,M){this._model.clearSelection(),b=Math.max(b,0),M=Math.min(M,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,M],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const M=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(M)return M[0]--,M[1]--,M[1]+=this._bufferService.buffer.ydisp,M}_getMouseEventScrollAmount(b){let M=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const U=this._renderService.dimensions.css.canvas.height;return M>=0&&M<=U?0:(M>U&&(M-=U),M=Math.min(Math.max(M,-50),50),M/=50,M/Math.abs(M)+Math.round(14*M))}shouldForceSelection(b){return u.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const M=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);M&&M.length!==this._model.selectionStart[0]&&M.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const M=this._getMouseBufferCoords(b);M&&(this._activeSelectionMode=2,this._selectLineAt(M[1]))}shouldColumnSelect(b){return b.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const M=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const U=this._bufferService.buffer;if(this._model.selectionEnd[1]<U.lines.length){const V=U.lines.get(this._model.selectionEnd[1]);V&&V.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}M&&M[0]===this._model.selectionEnd[0]&&M[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const M=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&M<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const U=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(U&&U[0]!==void 0&&U[1]!==void 0){const V=(0,w.moveToCellSequence)(U[0]-1,U[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(V,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd,U=!(!b||!M||b[0]===M[0]&&b[1]===M[1]);U?b&&M&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&M[0]===this._oldSelectionEnd[0]&&M[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,M,U)):this._oldHasSelection&&this._fireOnSelectionChange(b,M,U)}_fireOnSelectionChange(b,M,U){this._oldSelectionStart=b,this._oldSelectionEnd=M,this._oldHasSelection=U,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim((M=>this._handleTrim(M)))}_convertViewportColToCharacterIndex(b,M){let U=M;for(let V=0;M>=V;V++){const I=b.loadCell(V,this._workCell).getChars().length;this._workCell.getWidth()===0?U--:I>1&&M!==V&&(U+=I-1)}return U}setSelection(b,M,U){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,M],this._model.selectionStartLength=U,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,M,U=!0,V=!0){if(b[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,$=I.lines.get(b[1]);if(!$)return;const Q=I.translateBufferLineToString(b[1],!1);let se=this._convertViewportColToCharacterIndex($,b[0]),K=se;const J=b[0]-se;let j=0,F=0,W=0,O=0;if(Q.charAt(se)===" "){for(;se>0&&Q.charAt(se-1)===" ";)se--;for(;K<Q.length&&Q.charAt(K+1)===" ";)K++}else{let ve=b[0],be=b[0];$.getWidth(ve)===0&&(j++,ve--),$.getWidth(be)===2&&(F++,be++);const Te=$.getString(be).length;for(Te>1&&(O+=Te-1,K+=Te-1);ve>0&&se>0&&!this._isCharWordSeparator($.loadCell(ve-1,this._workCell));){$.loadCell(ve-1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===0?(j++,ve--):B>1&&(W+=B-1,se-=B-1),se--,ve--}for(;be<$.length&&K+1<Q.length&&!this._isCharWordSeparator($.loadCell(be+1,this._workCell));){$.loadCell(be+1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,be++):B>1&&(O+=B-1,K+=B-1),K++,be++}}K++;let P=se+J-j+W,ae=Math.min(this._bufferService.cols,K-se+j+F-W-O);if(M||Q.slice(se,K).trim()!==""){if(U&&P===0&&$.getCodePoint(0)!==32){const ve=I.lines.get(b[1]-1);if(ve&&$.isWrapped&&ve.getCodePoint(this._bufferService.cols-1)!==32){const be=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(be){const Te=this._bufferService.cols-be.start;P-=Te,ae+=Te}}}if(V&&P+ae===this._bufferService.cols&&$.getCodePoint(this._bufferService.cols-1)!==32){const ve=I.lines.get(b[1]+1);if(ve?.isWrapped&&ve.getCodePoint(0)!==32){const be=this._getWordAt([0,b[1]+1],!1,!1,!0);be&&(ae+=be.length)}}return{start:P,length:ae}}}_selectWordAt(b,M){const U=this._getWordAt(b,M);if(U){for(;U.start<0;)U.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[U.start,b[1]],this._model.selectionStartLength=U.length}}_selectToWordAt(b){const M=this._getWordAt(b,!0);if(M){let U=b[1];for(;M.start<0;)M.start+=this._bufferService.cols,U--;if(!this._model.areSelectionValuesReversed())for(;M.start+M.length>this._bufferService.cols;)M.length-=this._bufferService.cols,U++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?M.start:M.start+M.length,U]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const M=this._bufferService.buffer.getWrappedRangeForLine(b),U={start:{x:0,y:M.first},end:{x:this._bufferService.cols-1,y:M.last}};this._model.selectionStart=[0,M.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(U,this._bufferService.cols)}};h.SelectionService=L=m([x(3,g.IBufferService),x(4,g.ICoreService),x(5,k.IMouseService),x(6,g.IOptionsService),x(7,k.IRenderService),x(8,k.ICoreBrowserService)],L)},4725:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IThemeService=h.ICharacterJoinerService=h.ISelectionService=h.IRenderService=h.IMouseService=h.ICoreBrowserService=h.ICharSizeService=void 0;const m=d(8343);h.ICharSizeService=(0,m.createDecorator)("CharSizeService"),h.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),h.IMouseService=(0,m.createDecorator)("MouseService"),h.IRenderService=(0,m.createDecorator)("RenderService"),h.ISelectionService=(0,m.createDecorator)("SelectionService"),h.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),h.IThemeService=(0,m.createDecorator)("ThemeService")},6731:function(q,h,d){var m=this&&this.__decorate||function(L,b,M,U){var V,I=arguments.length,$=I<3?b:U===null?U=Object.getOwnPropertyDescriptor(b,M):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(L,b,M,U);else for(var Q=L.length-1;Q>=0;Q--)(V=L[Q])&&($=(I<3?V($):I>3?V(b,M,$):V(b,M))||$);return I>3&&$&&Object.defineProperty(b,M,$),$},x=this&&this.__param||function(L,b){return function(M,U){b(M,U,L)}};Object.defineProperty(h,"__esModule",{value:!0}),h.ThemeService=h.DEFAULT_ANSI_COLORS=void 0;const p=d(7239),w=d(8055),T=d(8460),k=d(844),C=d(2585),a=w.css.toColor("#ffffff"),u=w.css.toColor("#000000"),l=w.css.toColor("#ffffff"),o=w.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};h.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[w.css.toColor("#2e3436"),w.css.toColor("#cc0000"),w.css.toColor("#4e9a06"),w.css.toColor("#c4a000"),w.css.toColor("#3465a4"),w.css.toColor("#75507b"),w.css.toColor("#06989a"),w.css.toColor("#d3d7cf"),w.css.toColor("#555753"),w.css.toColor("#ef2929"),w.css.toColor("#8ae234"),w.css.toColor("#fce94f"),w.css.toColor("#729fcf"),w.css.toColor("#ad7fa8"),w.css.toColor("#34e2e2"),w.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let M=0;M<216;M++){const U=b[M/36%6|0],V=b[M/6%6|0],I=b[M%6];L.push({css:w.channels.toCss(U,V,I),rgba:w.channels.toRgba(U,V,I)})}for(let M=0;M<24;M++){const U=8+10*M;L.push({css:w.channels.toCss(U,U,U),rgba:w.channels.toRgba(U,U,U)})}return L})());let y=h.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new T.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:u,cursor:l,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:w.color.blend(u,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:w.color.blend(u,g),ansi:h.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(L={}){const b=this._colors;if(b.foreground=R(L.foreground,a),b.background=R(L.background,u),b.cursor=R(L.cursor,l),b.cursorAccent=R(L.cursorAccent,o),b.selectionBackgroundTransparent=R(L.selectionBackground,g),b.selectionBackgroundOpaque=w.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=R(L.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=w.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=L.selectionForeground?R(L.selectionForeground,w.NULL_COLOR):void 0,b.selectionForeground===w.NULL_COLOR&&(b.selectionForeground=void 0),w.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=w.color.opacity(b.selectionBackgroundTransparent,.3)),w.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=w.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=h.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=R(L.black,h.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=R(L.red,h.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=R(L.green,h.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=R(L.yellow,h.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=R(L.blue,h.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=R(L.magenta,h.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=R(L.cyan,h.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=R(L.white,h.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=R(L.brightBlack,h.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=R(L.brightRed,h.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=R(L.brightGreen,h.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=R(L.brightYellow,h.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=R(L.brightBlue,h.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=R(L.brightMagenta,h.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=R(L.brightCyan,h.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=R(L.brightWhite,h.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const M=Math.min(b.ansi.length-16,L.extendedAnsi.length);for(let U=0;U<M;U++)b.ansi[U+16]=R(L.extendedAnsi[U],h.DEFAULT_ANSI_COLORS[U+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function R(L,b){if(L!==void 0)try{return w.css.toColor(L)}catch{}return b}h.ThemeService=y=m([x(0,C.IOptionsService)],y)},6349:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CircularList=void 0;const m=d(8460),x=d(844);class p extends x.Disposable{constructor(T){super(),this._maxLength=T,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(T){if(this._maxLength===T)return;const k=new Array(T);for(let C=0;C<Math.min(T,this.length);C++)k[C]=this._array[this._getCyclicIndex(C)];this._array=k,this._maxLength=T,this._startIndex=0}get length(){return this._length}set length(T){if(T>this._length)for(let k=this._length;k<T;k++)this._array[k]=void 0;this._length=T}get(T){return this._array[this._getCyclicIndex(T)]}set(T,k){this._array[this._getCyclicIndex(T)]=k}push(T){this._array[this._getCyclicIndex(this._length)]=T,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(T,k,...C){if(k){for(let a=T;a<this._length-k;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+k)];this._length-=k,this.onDeleteEmitter.fire({index:T,amount:k})}for(let a=this._length-1;a>=T;a--)this._array[this._getCyclicIndex(a+C.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<C.length;a++)this._array[this._getCyclicIndex(T+a)]=C[a];if(C.length&&this.onInsertEmitter.fire({index:T,amount:C.length}),this._length+C.length>this._maxLength){const a=this._length+C.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=C.length}trimStart(T){T>this._length&&(T=this._length),this._startIndex+=T,this._length-=T,this.onTrimEmitter.fire(T)}shiftElements(T,k,C){if(!(k<=0)){if(T<0||T>=this._length)throw new Error("start argument out of range");if(T+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(let u=k-1;u>=0;u--)this.set(T+u+C,this.get(T+u));const a=T+k+C-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<k;a++)this.set(T+a+C,this.get(T+a))}}_getCyclicIndex(T){return(this._startIndex+T)%this._maxLength}}h.CircularList=p},1439:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.clone=void 0,h.clone=function d(m,x=5){if(typeof m!="object")return m;const p=Array.isArray(m)?[]:{};for(const w in m)p[w]=x<=1?m[w]:m[w]&&d(m[w],x-1);return p}},8055:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.contrastRatio=h.toPaddedHex=h.rgba=h.rgb=h.css=h.color=h.channels=h.NULL_COLOR=void 0;const m=d(6114);let x=0,p=0,w=0,T=0;var k,C,a,u,l;function o(y){const R=y.toString(16);return R.length<2?"0"+R:R}function g(y,R){return y<R?(R+.05)/(y+.05):(y+.05)/(R+.05)}h.NULL_COLOR={css:"#00000000",rgba:0},(function(y){y.toCss=function(R,L,b,M){return M!==void 0?`#${o(R)}${o(L)}${o(b)}${o(M)}`:`#${o(R)}${o(L)}${o(b)}`},y.toRgba=function(R,L,b,M=255){return(R<<24|L<<16|b<<8|M)>>>0}})(k||(h.channels=k={})),(function(y){function R(L,b){return T=Math.round(255*b),[x,p,w]=l.toChannels(L.rgba),{css:k.toCss(x,p,w,T),rgba:k.toRgba(x,p,w,T)}}y.blend=function(L,b){if(T=(255&b.rgba)/255,T===1)return{css:b.css,rgba:b.rgba};const M=b.rgba>>24&255,U=b.rgba>>16&255,V=b.rgba>>8&255,I=L.rgba>>24&255,$=L.rgba>>16&255,Q=L.rgba>>8&255;return x=I+Math.round((M-I)*T),p=$+Math.round((U-$)*T),w=Q+Math.round((V-Q)*T),{css:k.toCss(x,p,w),rgba:k.toRgba(x,p,w)}},y.isOpaque=function(L){return(255&L.rgba)==255},y.ensureContrastRatio=function(L,b,M){const U=l.ensureContrastRatio(L.rgba,b.rgba,M);if(U)return l.toColor(U>>24&255,U>>16&255,U>>8&255)},y.opaque=function(L){const b=(255|L.rgba)>>>0;return[x,p,w]=l.toChannels(b),{css:k.toCss(x,p,w),rgba:b}},y.opacity=R,y.multiplyOpacity=function(L,b){return T=255&L.rgba,R(L,T*b/255)},y.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}})(C||(h.color=C={})),(function(y){let R,L;if(!m.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const M=b.getContext("2d",{willReadFrequently:!0});M&&(R=M,R.globalCompositeOperation="copy",L=R.createLinearGradient(0,0,1,1))}y.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return x=parseInt(b.slice(1,2).repeat(2),16),p=parseInt(b.slice(2,3).repeat(2),16),w=parseInt(b.slice(3,4).repeat(2),16),l.toColor(x,p,w);case 5:return x=parseInt(b.slice(1,2).repeat(2),16),p=parseInt(b.slice(2,3).repeat(2),16),w=parseInt(b.slice(3,4).repeat(2),16),T=parseInt(b.slice(4,5).repeat(2),16),l.toColor(x,p,w,T);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const M=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return x=parseInt(M[1]),p=parseInt(M[2]),w=parseInt(M[3]),T=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),l.toColor(x,p,w,T);if(!R||!L)throw new Error("css.toColor: Unsupported css format");if(R.fillStyle=L,R.fillStyle=b,typeof R.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(R.fillRect(0,0,1,1),[x,p,w,T]=R.getImageData(0,0,1,1).data,T!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:k.toRgba(x,p,w,T),css:b}}})(a||(h.css=a={})),(function(y){function R(L,b,M){const U=L/255,V=b/255,I=M/255;return .2126*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.0722*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))}y.relativeLuminance=function(L){return R(L>>16&255,L>>8&255,255&L)},y.relativeLuminance2=R})(u||(h.rgb=u={})),(function(y){function R(b,M,U){const V=b>>24&255,I=b>>16&255,$=b>>8&255;let Q=M>>24&255,se=M>>16&255,K=M>>8&255,J=g(u.relativeLuminance2(Q,se,K),u.relativeLuminance2(V,I,$));for(;J<U&&(Q>0||se>0||K>0);)Q-=Math.max(0,Math.ceil(.1*Q)),se-=Math.max(0,Math.ceil(.1*se)),K-=Math.max(0,Math.ceil(.1*K)),J=g(u.relativeLuminance2(Q,se,K),u.relativeLuminance2(V,I,$));return(Q<<24|se<<16|K<<8|255)>>>0}function L(b,M,U){const V=b>>24&255,I=b>>16&255,$=b>>8&255;let Q=M>>24&255,se=M>>16&255,K=M>>8&255,J=g(u.relativeLuminance2(Q,se,K),u.relativeLuminance2(V,I,$));for(;J<U&&(Q<255||se<255||K<255);)Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),se=Math.min(255,se+Math.ceil(.1*(255-se))),K=Math.min(255,K+Math.ceil(.1*(255-K))),J=g(u.relativeLuminance2(Q,se,K),u.relativeLuminance2(V,I,$));return(Q<<24|se<<16|K<<8|255)>>>0}y.ensureContrastRatio=function(b,M,U){const V=u.relativeLuminance(b>>8),I=u.relativeLuminance(M>>8);if(g(V,I)<U){if(I<V){const se=R(b,M,U),K=g(V,u.relativeLuminance(se>>8));if(K<U){const J=L(b,M,U);return K>g(V,u.relativeLuminance(J>>8))?se:J}return se}const $=L(b,M,U),Q=g(V,u.relativeLuminance($>>8));if(Q<U){const se=R(b,M,U);return Q>g(V,u.relativeLuminance(se>>8))?$:se}return $}},y.reduceLuminance=R,y.increaseLuminance=L,y.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},y.toColor=function(b,M,U,V){return{css:k.toCss(b,M,U,V),rgba:k.toRgba(b,M,U,V)}}})(l||(h.rgba=l={})),h.toPaddedHex=o,h.contrastRatio=g},8969:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CoreTerminal=void 0;const m=d(844),x=d(2585),p=d(4348),w=d(7866),T=d(744),k=d(7302),C=d(6975),a=d(8460),u=d(1753),l=d(1480),o=d(7994),g=d(9282),y=d(5435),R=d(5981),L=d(2660);let b=!1;class M extends m.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event((V=>{var I;(I=this._onScrollApi)===null||I===void 0||I.fire(V.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(V){for(const I in V)this.optionsService.options[I]=V[I]}constructor(V){super(),this._windowsWrappingHeuristics=this.register(new m.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new k.OptionsService(V)),this._instantiationService.setService(x.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(T.BufferService)),this._instantiationService.setService(x.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(w.LogService)),this._instantiationService.setService(x.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(C.CoreService)),this._instantiationService.setService(x.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(x.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(x.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(x.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(x.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new R.WriteBuffer(((I,$)=>this._inputHandler.parse(I,$)))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(V,I){this._writeBuffer.write(V,I)}writeSync(V,I){this._logService.logLevel<=x.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(V,I)}resize(V,I){isNaN(V)||isNaN(I)||(V=Math.max(V,T.MINIMUM_COLS),I=Math.max(I,T.MINIMUM_ROWS),this._bufferService.resize(V,I))}scroll(V,I=!1){this._bufferService.scroll(V,I)}scrollLines(V,I,$){this._bufferService.scrollLines(V,I,$)}scrollPages(V){this.scrollLines(V*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(V){const I=V-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(V,I){return this._inputHandler.registerEscHandler(V,I)}registerDcsHandler(V,I){return this._inputHandler.registerDcsHandler(V,I)}registerCsiHandler(V,I){return this._inputHandler.registerCsiHandler(V,I)}registerOscHandler(V,I){return this._inputHandler.registerOscHandler(V,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let V=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?V=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(V=!0),V?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const V=[];V.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),V.push(this.registerCsiHandler({final:"H"},(()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,m.toDisposable)((()=>{for(const I of V)I.dispose()}))}}}h.CoreTerminal=M},8460:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.forwardEvent=h.EventEmitter=void 0,h.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===d)return void this._listeners.splice(m,1)}}})),this._event}fire(d,m){const x=[];for(let p=0;p<this._listeners.length;p++)x.push(this._listeners[p]);for(let p=0;p<x.length;p++)x[p].call(void 0,d,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},h.forwardEvent=function(d,m){return d((x=>m.fire(x)))}},5435:function(q,h,d){var m=this&&this.__decorate||function(J,j,F,W){var O,P=arguments.length,ae=P<3?j:W===null?W=Object.getOwnPropertyDescriptor(j,F):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(J,j,F,W);else for(var ve=J.length-1;ve>=0;ve--)(O=J[ve])&&(ae=(P<3?O(ae):P>3?O(j,F,ae):O(j,F))||ae);return P>3&&ae&&Object.defineProperty(j,F,ae),ae},x=this&&this.__param||function(J,j){return function(F,W){j(F,W,J)}};Object.defineProperty(h,"__esModule",{value:!0}),h.InputHandler=h.WindowsOptionsReportType=void 0;const p=d(2584),w=d(7116),T=d(2015),k=d(844),C=d(482),a=d(8437),u=d(8460),l=d(643),o=d(511),g=d(3734),y=d(2585),R=d(6242),L=d(6351),b=d(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},U=131072;function V(J,j){if(J>24)return j.setWinLines||!1;switch(J){case 1:return!!j.restoreWin;case 2:return!!j.minimizeWin;case 3:return!!j.setWinPosition;case 4:return!!j.setWinSizePixels;case 5:return!!j.raiseWin;case 6:return!!j.lowerWin;case 7:return!!j.refreshWin;case 8:return!!j.setWinSizeChars;case 9:return!!j.maximizeWin;case 10:return!!j.fullscreenWin;case 11:return!!j.getWinState;case 13:return!!j.getWinPosition;case 14:return!!j.getWinSizePixels;case 15:return!!j.getScreenSizePixels;case 16:return!!j.getCellSizePixels;case 18:return!!j.getWinSizeChars;case 19:return!!j.getScreenSizeChars;case 20:return!!j.getIconTitle;case 21:return!!j.getWinTitle;case 22:return!!j.pushTitle;case 23:return!!j.popTitle;case 24:return!!j.setWinLines}return!1}var I;(function(J){J[J.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",J[J.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(h.WindowsOptionsReportType=I={}));let $=0;class Q extends k.Disposable{getAttrData(){return this._curAttrData}constructor(j,F,W,O,P,ae,ve,be,Te=new T.EscapeSequenceParser){super(),this._bufferService=j,this._charsetService=F,this._coreService=W,this._logService=O,this._optionsService=P,this._oscLinkService=ae,this._coreMouseService=ve,this._unicodeService=be,this._parser=Te,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new C.StringToUtf32,this._utf8Decoder=new C.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new se(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._parser.setCsiHandlerFallback(((B,ie)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:ie.toArray()})})),this._parser.setEscHandlerFallback((B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})})),this._parser.setExecuteHandlerFallback((B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})})),this._parser.setOscHandlerFallback(((B,ie,ce)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:ie,data:ce})})),this._parser.setDcsHandlerFallback(((B,ie,ce)=>{ie==="HOOK"&&(ce=ce.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:ie,payload:ce})})),this._parser.setPrintHandler(((B,ie,ce)=>this.print(B,ie,ce))),this._parser.registerCsiHandler({final:"@"},(B=>this.insertChars(B))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(B=>this.scrollLeft(B))),this._parser.registerCsiHandler({final:"A"},(B=>this.cursorUp(B))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(B=>this.scrollRight(B))),this._parser.registerCsiHandler({final:"B"},(B=>this.cursorDown(B))),this._parser.registerCsiHandler({final:"C"},(B=>this.cursorForward(B))),this._parser.registerCsiHandler({final:"D"},(B=>this.cursorBackward(B))),this._parser.registerCsiHandler({final:"E"},(B=>this.cursorNextLine(B))),this._parser.registerCsiHandler({final:"F"},(B=>this.cursorPrecedingLine(B))),this._parser.registerCsiHandler({final:"G"},(B=>this.cursorCharAbsolute(B))),this._parser.registerCsiHandler({final:"H"},(B=>this.cursorPosition(B))),this._parser.registerCsiHandler({final:"I"},(B=>this.cursorForwardTab(B))),this._parser.registerCsiHandler({final:"J"},(B=>this.eraseInDisplay(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(B=>this.eraseInDisplay(B,!0))),this._parser.registerCsiHandler({final:"K"},(B=>this.eraseInLine(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(B=>this.eraseInLine(B,!0))),this._parser.registerCsiHandler({final:"L"},(B=>this.insertLines(B))),this._parser.registerCsiHandler({final:"M"},(B=>this.deleteLines(B))),this._parser.registerCsiHandler({final:"P"},(B=>this.deleteChars(B))),this._parser.registerCsiHandler({final:"S"},(B=>this.scrollUp(B))),this._parser.registerCsiHandler({final:"T"},(B=>this.scrollDown(B))),this._parser.registerCsiHandler({final:"X"},(B=>this.eraseChars(B))),this._parser.registerCsiHandler({final:"Z"},(B=>this.cursorBackwardTab(B))),this._parser.registerCsiHandler({final:"`"},(B=>this.charPosAbsolute(B))),this._parser.registerCsiHandler({final:"a"},(B=>this.hPositionRelative(B))),this._parser.registerCsiHandler({final:"b"},(B=>this.repeatPrecedingCharacter(B))),this._parser.registerCsiHandler({final:"c"},(B=>this.sendDeviceAttributesPrimary(B))),this._parser.registerCsiHandler({prefix:">",final:"c"},(B=>this.sendDeviceAttributesSecondary(B))),this._parser.registerCsiHandler({final:"d"},(B=>this.linePosAbsolute(B))),this._parser.registerCsiHandler({final:"e"},(B=>this.vPositionRelative(B))),this._parser.registerCsiHandler({final:"f"},(B=>this.hVPosition(B))),this._parser.registerCsiHandler({final:"g"},(B=>this.tabClear(B))),this._parser.registerCsiHandler({final:"h"},(B=>this.setMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(B=>this.setModePrivate(B))),this._parser.registerCsiHandler({final:"l"},(B=>this.resetMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(B=>this.resetModePrivate(B))),this._parser.registerCsiHandler({final:"m"},(B=>this.charAttributes(B))),this._parser.registerCsiHandler({final:"n"},(B=>this.deviceStatus(B))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(B=>this.deviceStatusPrivate(B))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(B=>this.softReset(B))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(B=>this.setCursorStyle(B))),this._parser.registerCsiHandler({final:"r"},(B=>this.setScrollRegion(B))),this._parser.registerCsiHandler({final:"s"},(B=>this.saveCursor(B))),this._parser.registerCsiHandler({final:"t"},(B=>this.windowOptions(B))),this._parser.registerCsiHandler({final:"u"},(B=>this.restoreCursor(B))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(B=>this.insertColumns(B))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(B=>this.deleteColumns(B))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(B=>this.selectProtected(B))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(B=>this.requestMode(B,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(B=>this.requestMode(B,!1))),this._parser.setExecuteHandler(p.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(p.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(p.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(p.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(p.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(p.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(p.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(p.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(p.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(p.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(p.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(p.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new R.OscHandler((B=>(this.setTitle(B),this.setIconName(B),!0)))),this._parser.registerOscHandler(1,new R.OscHandler((B=>this.setIconName(B)))),this._parser.registerOscHandler(2,new R.OscHandler((B=>this.setTitle(B)))),this._parser.registerOscHandler(4,new R.OscHandler((B=>this.setOrReportIndexedColor(B)))),this._parser.registerOscHandler(8,new R.OscHandler((B=>this.setHyperlink(B)))),this._parser.registerOscHandler(10,new R.OscHandler((B=>this.setOrReportFgColor(B)))),this._parser.registerOscHandler(11,new R.OscHandler((B=>this.setOrReportBgColor(B)))),this._parser.registerOscHandler(12,new R.OscHandler((B=>this.setOrReportCursorColor(B)))),this._parser.registerOscHandler(104,new R.OscHandler((B=>this.restoreIndexedColor(B)))),this._parser.registerOscHandler(110,new R.OscHandler((B=>this.restoreFgColor(B)))),this._parser.registerOscHandler(111,new R.OscHandler((B=>this.restoreBgColor(B)))),this._parser.registerOscHandler(112,new R.OscHandler((B=>this.restoreCursorColor(B)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const B in w.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},(()=>this.selectCharset("("+B))),this._parser.registerEscHandler({intermediates:")",final:B},(()=>this.selectCharset(")"+B))),this._parser.registerEscHandler({intermediates:"*",final:B},(()=>this.selectCharset("*"+B))),this._parser.registerEscHandler({intermediates:"+",final:B},(()=>this.selectCharset("+"+B))),this._parser.registerEscHandler({intermediates:"-",final:B},(()=>this.selectCharset("-"+B))),this._parser.registerEscHandler({intermediates:".",final:B},(()=>this.selectCharset("."+B))),this._parser.registerEscHandler({intermediates:"/",final:B},(()=>this.selectCharset("/"+B)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((B=>(this._logService.error("Parsing error: ",B),B))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler(((B,ie)=>this.requestStatusString(B,ie))))}_preserveStack(j,F,W,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=j,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=W,this._parseStack.position=O}_logSlowResolvingAsync(j){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([j,new Promise(((F,W)=>setTimeout((()=>W("#SLOW_TIMEOUT")),5e3)))]).catch((F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(j,F){let W,O=this._activeBuffer.x,P=this._activeBuffer.y,ae=0;const ve=this._parseStack.paused;if(ve){if(W=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(W),W;O=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,j.length>U&&(ae=this._parseStack.position+U)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof j=="string"?` "${j}"`:` "${Array.prototype.map.call(j,(be=>String.fromCharCode(be))).join("")}"`),typeof j=="string"?j.split("").map((be=>be.charCodeAt(0))):j),this._parseBuffer.length<j.length&&this._parseBuffer.length<U&&(this._parseBuffer=new Uint32Array(Math.min(j.length,U))),ve||this._dirtyRowTracker.clearRange(),j.length>U)for(let be=ae;be<j.length;be+=U){const Te=be+U<j.length?be+U:j.length,B=typeof j=="string"?this._stringDecoder.decode(j.substring(be,Te),this._parseBuffer):this._utf8Decoder.decode(j.subarray(be,Te),this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,B))return this._preserveStack(O,P,B,be),this._logSlowResolvingAsync(W),W}else if(!ve){const be=typeof j=="string"?this._stringDecoder.decode(j,this._parseBuffer):this._utf8Decoder.decode(j,this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,be))return this._preserveStack(O,P,be,0),this._logSlowResolvingAsync(W),W}this._activeBuffer.x===O&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(j,F,W){let O,P;const ae=this._charsetService.charset,ve=this._optionsService.rawOptions.screenReaderMode,be=this._bufferService.cols,Te=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,ie=this._curAttrData;let ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&W-F>0&&ce.getWidth(this._activeBuffer.x-1)===2&&ce.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ie.fg,ie.bg,ie.extended);for(let pe=F;pe<W;++pe){if(O=j[pe],P=this._unicodeService.wcwidth(O),O<127&&ae){const Oe=ae[String.fromCharCode(O)];Oe&&(O=Oe.charCodeAt(0))}if(ve&&this._onA11yChar.fire((0,C.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=be){if(Te){for(;this._activeBuffer.x<be;)ce.setCellFromCodePoint(this._activeBuffer.x++,0,1,ie.fg,ie.bg,ie.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=be-1,P===2)continue}if(B&&(ce.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(ie),ie),ce.getWidth(be-1)===2&&ce.setCellFromCodePoint(be-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,ie.fg,ie.bg,ie.extended)),ce.setCellFromCodePoint(this._activeBuffer.x++,O,P,ie.fg,ie.bg,ie.extended),P>0)for(;--P;)ce.setCellFromCodePoint(this._activeBuffer.x++,0,0,ie.fg,ie.bg,ie.extended)}else ce.getWidth(this._activeBuffer.x-1)?ce.addCodepointToCell(this._activeBuffer.x-1,O):ce.addCodepointToCell(this._activeBuffer.x-2,O)}W-F>0&&(ce.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<be&&W-F>0&&ce.getWidth(this._activeBuffer.x)===0&&!ce.hasContent(this._activeBuffer.x)&&ce.setCellFromCodePoint(this._activeBuffer.x,0,1,ie.fg,ie.bg,ie.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(j,F){return j.final!=="t"||j.prefix||j.intermediates?this._parser.registerCsiHandler(j,F):this._parser.registerCsiHandler(j,(W=>!V(W.params[0],this._optionsService.rawOptions.windowOptions)||F(W)))}registerDcsHandler(j,F){return this._parser.registerDcsHandler(j,new L.DcsHandler(F))}registerEscHandler(j,F){return this._parser.registerEscHandler(j,F)}registerOscHandler(j,F){return this._parser.registerOscHandler(j,new R.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var j;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||j===void 0)&&j.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const j=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-j),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(j=this._bufferService.cols-1){this._activeBuffer.x=Math.min(j,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(j,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=j,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=j,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(j,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+j,this._activeBuffer.y+F)}cursorUp(j){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,j.params[0]||1)):this._moveCursor(0,-(j.params[0]||1)),!0}cursorDown(j){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,j.params[0]||1)):this._moveCursor(0,j.params[0]||1),!0}cursorForward(j){return this._moveCursor(j.params[0]||1,0),!0}cursorBackward(j){return this._moveCursor(-(j.params[0]||1),0),!0}cursorNextLine(j){return this.cursorDown(j),this._activeBuffer.x=0,!0}cursorPrecedingLine(j){return this.cursorUp(j),this._activeBuffer.x=0,!0}cursorCharAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(j){return this._setCursor(j.length>=2?(j.params[1]||1)-1:0,(j.params[0]||1)-1),!0}charPosAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(j){return this._moveCursor(j.params[0]||1,0),!0}linePosAbsolute(j){return this._setCursor(this._activeBuffer.x,(j.params[0]||1)-1),!0}vPositionRelative(j){return this._moveCursor(0,j.params[0]||1),!0}hVPosition(j){return this.cursorPosition(j),!0}tabClear(j){const F=j.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=j.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=j.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(j){const F=j.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(j,F,W,O=!1,P=!1){const ae=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);ae.replaceCells(F,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),O&&(ae.isWrapped=!1)}_resetBufferLine(j,F=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);W&&(W.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+j),W.isWrapped=!1)}eraseInDisplay(j,F=!1){let W;switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);W<this._bufferService.rows;W++)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(W);break;case 1:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(W+1).isWrapped=!1);W--;)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(W=this._bufferService.rows,this._dirtyRowTracker.markDirty(W-1);W--;)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(j,F=!1){switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(j){this._restrictCursor();let F=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;F--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(j){this._restrictCursor();let F=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;F--;)this._activeBuffer.lines.splice(W,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(j){let F=j.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(j){let F=j.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);O.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);O.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);O.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);O.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(j.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(j){if(!this._parser.precedingCodepoint)return!0;const F=j.params[0]||1,W=new Uint32Array(F);for(let O=0;O<F;++O)W[O]=this._parser.precedingCodepoint;return this.print(W,0,W.length),!0}sendDeviceAttributesPrimary(j){return j.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(j){return j.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(j.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(j){return(this._optionsService.rawOptions.termName+"").indexOf(j)===0}setMode(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),this._charsetService.setgCharset(1,w.DEFAULT_CHARSET),this._charsetService.setgCharset(2,w.DEFAULT_CHARSET),this._charsetService.setgCharset(3,w.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),j.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(j,F){const W=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:P}=this._coreMouseService,ae=this._coreService,{buffers:ve,cols:be}=this._bufferService,{active:Te,alt:B}=ve,ie=this._optionsService.rawOptions,ce=Ne=>Ne?1:2,pe=j.params[0];return Oe=pe,Ee=F?pe===2?4:pe===4?ce(ae.modes.insertMode):pe===12?3:pe===20?ce(ie.convertEol):0:pe===1?ce(W.applicationCursorKeys):pe===3?ie.windowOptions.setWinLines?be===80?2:be===132?1:0:0:pe===6?ce(W.origin):pe===7?ce(W.wraparound):pe===8?3:pe===9?ce(O==="X10"):pe===12?ce(ie.cursorBlink):pe===25?ce(!ae.isCursorHidden):pe===45?ce(W.reverseWraparound):pe===66?ce(W.applicationKeypad):pe===67?4:pe===1e3?ce(O==="VT200"):pe===1002?ce(O==="DRAG"):pe===1003?ce(O==="ANY"):pe===1004?ce(W.sendFocus):pe===1005?4:pe===1006?ce(P==="SGR"):pe===1015?4:pe===1016?ce(P==="SGR_PIXELS"):pe===1048?1:pe===47||pe===1047||pe===1049?ce(Te===B):pe===2004?ce(W.bracketedPasteMode):0,ae.triggerDataEvent(`${p.C0.ESC}[${F?"":"?"}${Oe};${Ee}$y`),!0;var Oe,Ee}_updateAttrColor(j,F,W,O,P){return F===2?(j|=50331648,j&=-16777216,j|=g.AttributeData.fromColorRGB([W,O,P])):F===5&&(j&=-50331904,j|=33554432|255&W),j}_extractColor(j,F,W){const O=[0,0,-1,0,0,0];let P=0,ae=0;do{if(O[ae+P]=j.params[F+ae],j.hasSubParams(F+ae)){const ve=j.getSubParams(F+ae);let be=0;do O[1]===5&&(P=1),O[ae+be+1+P]=ve[be];while(++be<ve.length&&be+ae+1+P<O.length);break}if(O[1]===5&&ae+P>=2||O[1]===2&&ae+P>=5)break;O[1]&&(P=1)}while(++ae+F<j.length&&ae+P<O.length);for(let ve=2;ve<O.length;++ve)O[ve]===-1&&(O[ve]=0);switch(O[0]){case 38:W.fg=this._updateAttrColor(W.fg,O[1],O[3],O[4],O[5]);break;case 48:W.bg=this._updateAttrColor(W.bg,O[1],O[3],O[4],O[5]);break;case 58:W.extended=W.extended.clone(),W.extended.underlineColor=this._updateAttrColor(W.extended.underlineColor,O[1],O[3],O[4],O[5])}return ae}_processUnderline(j,F){F.extended=F.extended.clone(),(!~j||j>5)&&(j=1),F.extended.underlineStyle=j,F.fg|=268435456,j===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(j){j.fg=a.DEFAULT_ATTR_DATA.fg,j.bg=a.DEFAULT_ATTR_DATA.bg,j.extended=j.extended.clone(),j.extended.underlineStyle=0,j.extended.underlineColor&=-67108864,j.updateExtended()}charAttributes(j){if(j.length===1&&j.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=j.length;let W;const O=this._curAttrData;for(let P=0;P<F;P++)W=j.params[P],W>=30&&W<=37?(O.fg&=-50331904,O.fg|=16777216|W-30):W>=40&&W<=47?(O.bg&=-50331904,O.bg|=16777216|W-40):W>=90&&W<=97?(O.fg&=-50331904,O.fg|=16777224|W-90):W>=100&&W<=107?(O.bg&=-50331904,O.bg|=16777224|W-100):W===0?this._processSGR0(O):W===1?O.fg|=134217728:W===3?O.bg|=67108864:W===4?(O.fg|=268435456,this._processUnderline(j.hasSubParams(P)?j.getSubParams(P)[0]:1,O)):W===5?O.fg|=536870912:W===7?O.fg|=67108864:W===8?O.fg|=1073741824:W===9?O.fg|=2147483648:W===2?O.bg|=134217728:W===21?this._processUnderline(2,O):W===22?(O.fg&=-134217729,O.bg&=-134217729):W===23?O.bg&=-67108865:W===24?(O.fg&=-268435457,this._processUnderline(0,O)):W===25?O.fg&=-536870913:W===27?O.fg&=-67108865:W===28?O.fg&=-1073741825:W===29?O.fg&=2147483647:W===39?(O.fg&=-67108864,O.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):W===49?(O.bg&=-67108864,O.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):W===38||W===48||W===58?P+=this._extractColor(j,P,O):W===53?O.bg|=1073741824:W===55?O.bg&=-1073741825:W===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):W===100?(O.fg&=-67108864,O.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",W);return!0}deviceStatus(j){switch(j.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${F};${W}R`)}return!0}deviceStatusPrivate(j){if(j.params[0]===6){const F=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${F};${W}R`)}return!0}softReset(j){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(j){const F=j.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const W=F%2==1;return this._optionsService.options.cursorBlink=W,!0}setScrollRegion(j){const F=j.params[0]||1;let W;return(j.length<2||(W=j.params[1])>this._bufferService.rows||W===0)&&(W=this._bufferService.rows),W>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=W-1,this._setCursor(0,0)),!0}windowOptions(j){if(!V(j.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=j.length>1?j.params[1]:0;switch(j.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(j){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(j){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(j){return this._windowTitle=j,this._onTitleChange.fire(j),!0}setIconName(j){return this._iconName=j,!0}setOrReportIndexedColor(j){const F=[],W=j.split(";");for(;W.length>1;){const O=W.shift(),P=W.shift();if(/^\d+$/.exec(O)){const ae=parseInt(O);if(K(ae))if(P==="?")F.push({type:0,index:ae});else{const ve=(0,b.parseColor)(P);ve&&F.push({type:1,index:ae,color:ve})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(j){const F=j.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(j,F){this._getCurrentLinkId()&&this._finishHyperlink();const W=j.split(":");let O;const P=W.findIndex((ae=>ae.startsWith("id=")));return P!==-1&&(O=W[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(j,F){const W=j.split(";");for(let O=0;O<W.length&&!(F>=this._specialColors.length);++O,++F)if(W[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const P=(0,b.parseColor)(W[O]);P&&this._onColor.fire([{type:1,index:this._specialColors[F],color:P}])}return!0}setOrReportFgColor(j){return this._setOrReportSpecialColor(j,0)}setOrReportBgColor(j){return this._setOrReportSpecialColor(j,1)}setOrReportCursorColor(j){return this._setOrReportSpecialColor(j,2)}restoreIndexedColor(j){if(!j)return this._onColor.fire([{type:2}]),!0;const F=[],W=j.split(";");for(let O=0;O<W.length;++O)if(/^\d+$/.exec(W[O])){const P=parseInt(W[O]);K(P)&&F.push({type:2,index:P})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(j){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(j){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(j){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),!0}selectCharset(j){return j.length!==2?(this.selectDefaultCharset(),!0):(j[0]==="/"||this._charsetService.setgCharset(M[j[0]],w.CHARSETS[j[1]]||w.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const j=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,j,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(j){return this._charsetService.setgLevel(j),!0}screenAlignmentPattern(){const j=new o.CellData;j.content=4194373,j.fg=this._curAttrData.fg,j.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const W=this._activeBuffer.ybase+this._activeBuffer.y+F,O=this._activeBuffer.lines.get(W);O&&(O.fill(j),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(j,F){const W=this._bufferService.buffer,O=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${P}${p.C0.ESC}\\`),!0))(j==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:j==='"p'?'P1$r61;1"p':j==="r"?`P1$r${W.scrollTop+1};${W.scrollBottom+1}r`:j==="m"?"P1$r0m":j===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(j,F){this._dirtyRowTracker.markRangeDirty(j,F)}}h.InputHandler=Q;let se=class{constructor(J){this._bufferService=J,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(J){J<this.start?this.start=J:J>this.end&&(this.end=J)}markRangeDirty(J,j){J>j&&($=J,J=j,j=$),J<this.start&&(this.start=J),j>this.end&&(this.end=j)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function K(J){return 0<=J&&J<256}se=m([x(0,y.IBufferService)],se)},844:(q,h)=>{function d(m){for(const x of m)x.dispose();m.length=0}Object.defineProperty(h,"__esModule",{value:!0}),h.getDisposeArrayDisposable=h.disposeArray=h.toDisposable=h.MutableDisposable=h.Disposable=void 0,h.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const x=this._disposables.indexOf(m);x!==-1&&this._disposables.splice(x,1)}},h.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var x;this._isDisposed||m===this._value||((x=this._value)===null||x===void 0||x.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)===null||m===void 0||m.dispose(),this._value=void 0}},h.toDisposable=function(m){return{dispose:m}},h.disposeArray=d,h.getDisposeArrayDisposable=function(m){return{dispose:()=>d(m)}}},1505:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FourKeyMap=h.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(x,p,w){this._data[x]||(this._data[x]={}),this._data[x][p]=w}get(x,p){return this._data[x]?this._data[x][p]:void 0}clear(){this._data={}}}h.TwoKeyMap=d,h.FourKeyMap=class{constructor(){this._data=new d}set(m,x,p,w,T){this._data.get(m,x)||this._data.set(m,x,new d),this._data.get(m,x).set(p,w,T)}get(m,x,p,w){var T;return(T=this._data.get(m,x))===null||T===void 0?void 0:T.get(p,w)}clear(){this._data.clear()}}},6114:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isChromeOS=h.isLinux=h.isWindows=h.isIphone=h.isIpad=h.isMac=h.getSafariVersion=h.isSafari=h.isLegacyEdge=h.isFirefox=h.isNode=void 0,h.isNode=typeof navigator>"u";const d=h.isNode?"node":navigator.userAgent,m=h.isNode?"node":navigator.platform;h.isFirefox=d.includes("Firefox"),h.isLegacyEdge=d.includes("Edge"),h.isSafari=/^((?!chrome|android).)*safari/i.test(d),h.getSafariVersion=function(){if(!h.isSafari)return 0;const x=d.match(/Version\/(\d+)/);return x===null||x.length<2?0:parseInt(x[1])},h.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),h.isIpad=m==="iPad",h.isIphone=m==="iPhone",h.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),h.isLinux=m.indexOf("Linux")>=0,h.isChromeOS=/\bCrOS\b/.test(d)},6106:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SortedList=void 0;let d=0;h.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(d=this._search(this._getKey(m)),this._array.splice(d,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;const x=this._getKey(m);if(x===void 0||(d=this._search(x),d===-1)||this._getKey(this._array[d])!==x)return!1;do if(this._array[d]===m)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===x);return!1}*getKeyIterator(m){if(this._array.length!==0&&(d=this._search(m),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===m))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===m)}forEachByKey(m,x){if(this._array.length!==0&&(d=this._search(m),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===m))do x(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===m)}values(){return[...this._array].values()}_search(m){let x=0,p=this._array.length-1;for(;p>=x;){let w=x+p>>1;const T=this._getKey(this._array[w]);if(T>m)p=w-1;else{if(!(T<m)){for(;w>0&&this._getKey(this._array[w-1])===m;)w--;return w}x=w+1}}return x}}},7226:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DebouncedIdleTask=h.IdleTaskQueue=h.PriorityTaskQueue=void 0;const m=d(6114);class x{constructor(){this._tasks=[],this._i=0}enqueue(T){this._tasks.push(T),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(T){this._idleCallback=void 0;let k=0,C=0,a=T.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),C=Math.max(k,C),u=T.timeRemaining(),1.5*C>u)return a-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-k))}ms`),void this._start();a=u}this.clear()}}class p extends x{_requestCallback(T){return setTimeout((()=>T(this._createDeadline(16))))}_cancelCallback(T){clearTimeout(T)}_createDeadline(T){const k=Date.now()+T;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}h.PriorityTaskQueue=p,h.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends x{_requestCallback(w){return requestIdleCallback(w)}_cancelCallback(w){cancelIdleCallback(w)}}:p,h.DebouncedIdleTask=class{constructor(){this._queue=new h.IdleTaskQueue}set(w){this._queue.clear(),this._queue.enqueue(w)}flush(){this._queue.flush()}}},9282:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.updateWindowsModeWrappedState=void 0;const m=d(643);h.updateWindowsModeWrappedState=function(x){const p=x.buffer.lines.get(x.buffer.ybase+x.buffer.y-1),w=p?.get(x.cols-1),T=x.buffer.lines.get(x.buffer.ybase+x.buffer.y);T&&w&&(T.isWrapped=w[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&w[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ExtendedAttrs=h.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new d;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}h.AttributeData=d;class m{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,w=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=w}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}h.ExtendedAttrs=m},9092:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Buffer=h.MAX_BUFFER_SIZE=void 0;const m=d(6349),x=d(7226),p=d(3734),w=d(8437),T=d(4634),k=d(511),C=d(643),a=d(4863),u=d(7116);h.MAX_BUFFER_SIZE=4294967295,h.Buffer=class{constructor(l,o,g){this._hasScrollback=l,this._optionsService=o,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=w.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,C.NULL_CELL_CHAR,C.NULL_CELL_WIDTH,C.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,C.WHITESPACE_CELL_CHAR,C.WHITESPACE_CELL_WIDTH,C.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new x.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,o){return new w.BufferLine(this._bufferService.cols,this.getNullCell(l),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const o=l+this._optionsService.rawOptions.scrollback;return o>h.MAX_BUFFER_SIZE?h.MAX_BUFFER_SIZE:o}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=w.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,o){const g=this.getNullCell(w.DEFAULT_ATTR_DATA);let y=0;const R=this._getCorrectBufferLength(o);if(R>this.lines.maxLength&&(this.lines.maxLength=R),this.lines.length>0){if(this._cols<l)for(let b=0;b<this.lines.length;b++)y+=+this.lines.get(b).resize(l,g);let L=0;if(this._rows<o)for(let b=this._rows;b<o;b++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new w.BufferLine(l,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new w.BufferLine(l,g)));else for(let b=this._rows;b>o;b--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(R<this.lines.maxLength){const b=this.lines.length-R;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=R}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,o-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(l,o),this._cols>l))for(let L=0;L<this.lines.length;L++)y+=+this.lines.get(L).resize(l,g);this._cols=l,this._rows=o,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,o){this._cols!==l&&(l>this._cols?this._reflowLarger(l,o):this._reflowSmaller(l,o))}_reflowLarger(l,o){const g=(0,T.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(w.DEFAULT_ATTR_DATA));if(g.length>0){const y=(0,T.reflowLargerCreateNewLayout)(this.lines,g);(0,T.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(l,o,y.countRemoved)}}_reflowLargerAdjustViewport(l,o,g){const y=this.getNullCell(w.DEFAULT_ATTR_DATA);let R=g;for(;R-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new w.BufferLine(l,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(l,o){const g=this.getNullCell(w.DEFAULT_ATTR_DATA),y=[];let R=0;for(let L=this.lines.length-1;L>=0;L--){let b=this.lines.get(L);if(!b||!b.isWrapped&&b.getTrimmedLength()<=l)continue;const M=[b];for(;b.isWrapped&&L>0;)b=this.lines.get(--L),M.unshift(b);const U=this.ybase+this.y;if(U>=L&&U<L+M.length)continue;const V=M[M.length-1].getTrimmedLength(),I=(0,T.reflowSmallerGetNewLineLengths)(M,this._cols,l),$=I.length-M.length;let Q;Q=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+$):Math.max(0,this.lines.length-this.lines.maxLength+$);const se=[];for(let O=0;O<$;O++){const P=this.getBlankLine(w.DEFAULT_ATTR_DATA,!0);se.push(P)}se.length>0&&(y.push({start:L+M.length+R,newLines:se}),R+=se.length),M.push(...se);let K=I.length-1,J=I[K];J===0&&(K--,J=I[K]);let j=M.length-$-1,F=V;for(;j>=0;){const O=Math.min(F,J);if(M[K]===void 0)break;if(M[K].copyCellsFrom(M[j],F-O,J-O,O,!0),J-=O,J===0&&(K--,J=I[K]),F-=O,F===0){j--;const P=Math.max(j,0);F=(0,T.getWrappedLineTrimmedLength)(M,P,this._cols)}}for(let O=0;O<M.length;O++)I[O]<l&&M[O].setCell(I[O],g);let W=$-Q;for(;W-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+R)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+$,this.ybase+o-1)}if(y.length>0){const L=[],b=[];for(let K=0;K<this.lines.length;K++)b.push(this.lines.get(K));const M=this.lines.length;let U=M-1,V=0,I=y[V];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+R);let $=0;for(let K=Math.min(this.lines.maxLength-1,M+R-1);K>=0;K--)if(I&&I.start>U+$){for(let J=I.newLines.length-1;J>=0;J--)this.lines.set(K--,I.newLines[J]);K++,L.push({index:U+1,amount:I.newLines.length}),$+=I.newLines.length,I=y[++V]}else this.lines.set(K,b[U--]);let Q=0;for(let K=L.length-1;K>=0;K--)L[K].index+=Q,this.lines.onInsertEmitter.fire(L[K]),Q+=L[K].amount;const se=Math.max(0,M+R-this.lines.maxLength);se>0&&this.lines.onTrimEmitter.fire(se)}}translateBufferLineToString(l,o,g=0,y){const R=this.lines.get(l);return R?R.translateToString(o,g,y):""}getWrappedRangeForLine(l){let o=l,g=l;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:o,last:g}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===l&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const o=new a.Marker(l);return this.markers.push(o),o.register(this.lines.onTrim((g=>{o.line-=g,o.line<0&&o.dispose()}))),o.register(this.lines.onInsert((g=>{o.line>=g.index&&(o.line+=g.amount)}))),o.register(this.lines.onDelete((g=>{o.line>=g.index&&o.line<g.index+g.amount&&o.dispose(),o.line>g.index&&(o.line-=g.amount)}))),o.register(o.onDispose((()=>this._removeMarker(o)))),o}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLine=h.DEFAULT_ATTR_DATA=void 0;const m=d(3734),x=d(511),p=d(643),w=d(482);h.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);let T=0;class k{constructor(a,u,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);const o=u||x.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let g=0;g<a;++g)this.setCell(g,o);this.length=a}get(a){const u=this._data[3*a+0],l=2097151&u;return[this._data[3*a+1],2097152&u?this._combined[a]:l?(0,w.stringFromCodePoint)(l):"",u>>22,2097152&u?this._combined[a].charCodeAt(this._combined[a].length-1):l]}set(a,u){this._data[3*a+1]=u[p.CHAR_DATA_ATTR_INDEX],u[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=u[1],this._data[3*a+0]=2097152|a|u[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=u[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){const u=this._data[3*a+0];return 2097152&u?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&u}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){const u=this._data[3*a+0];return 2097152&u?this._combined[a]:2097151&u?(0,w.stringFromCodePoint)(2097151&u):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,u){return T=3*a,u.content=this._data[T+0],u.fg=this._data[T+1],u.bg=this._data[T+2],2097152&u.content&&(u.combinedData=this._combined[a]),268435456&u.bg&&(u.extended=this._extendedAttrs[a]),u}setCell(a,u){2097152&u.content&&(this._combined[a]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[a]=u.extended),this._data[3*a+0]=u.content,this._data[3*a+1]=u.fg,this._data[3*a+2]=u.bg}setCellFromCodePoint(a,u,l,o,g,y){268435456&g&&(this._extendedAttrs[a]=y),this._data[3*a+0]=u|l<<22,this._data[3*a+1]=o,this._data[3*a+2]=g}addCodepointToCell(a,u){let l=this._data[3*a+0];2097152&l?this._combined[a]+=(0,w.stringFromCodePoint)(u):(2097151&l?(this._combined[a]=(0,w.stringFromCodePoint)(2097151&l)+(0,w.stringFromCodePoint)(u),l&=-2097152,l|=2097152):l=u|4194304,this._data[3*a+0]=l)}insertCells(a,u,l,o){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs),u<this.length-a){const g=new x.CellData;for(let y=this.length-a-u-1;y>=0;--y)this.setCell(a+u+y,this.loadCell(a+y,g));for(let y=0;y<u;++y)this.setCell(a+y,l)}else for(let g=a;g<this.length;++g)this.setCell(g,l);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs)}deleteCells(a,u,l,o){if(a%=this.length,u<this.length-a){const g=new x.CellData;for(let y=0;y<this.length-a-u;++y)this.setCell(a+y,this.loadCell(a+u+y,g));for(let y=this.length-u;y<this.length;++y)this.setCell(y,l)}else for(let g=a;g<this.length;++g)this.setCell(g,l);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs)}replaceCells(a,u,l,o,g=!1){if(g)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodePoint(u,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs);a<u&&a<this.length;)this.isProtected(a)||this.setCell(a,l),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,o?.fg||0,o?.bg||0,o?.extended||new m.ExtendedAttrs);a<u&&a<this.length;)this.setCell(a++,l)}resize(a,u){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const o=new Uint32Array(l);o.set(this._data),this._data=o}for(let o=this.length;o<a;++o)this.setCell(o,u)}else{this._data=this._data.subarray(0,l);const o=Object.keys(this._combined);for(let y=0;y<o.length;y++){const R=parseInt(o[y],10);R>=a&&delete this._combined[R]}const g=Object.keys(this._extendedAttrs);for(let y=0;y<g.length;y++){const R=parseInt(g[y],10);R>=a&&delete this._extendedAttrs[R]}}return this.length=a,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,u=!1){if(u)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,a);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(const u in a._combined)this._combined[u]=a._combined[u];this._extendedAttrs={};for(const u in a._extendedAttrs)this._extendedAttrs[u]=a._extendedAttrs[u];this.isWrapped=a.isWrapped}clone(){const a=new k(0);a._data=new Uint32Array(this._data),a.length=this.length;for(const u in this._combined)a._combined[u]=this._combined[u];for(const u in this._extendedAttrs)a._extendedAttrs[u]=this._extendedAttrs[u];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,u,l,o,g){const y=a._data;if(g)for(let L=o-1;L>=0;L--){for(let b=0;b<3;b++)this._data[3*(l+L)+b]=y[3*(u+L)+b];268435456&y[3*(u+L)+2]&&(this._extendedAttrs[l+L]=a._extendedAttrs[u+L])}else for(let L=0;L<o;L++){for(let b=0;b<3;b++)this._data[3*(l+L)+b]=y[3*(u+L)+b];268435456&y[3*(u+L)+2]&&(this._extendedAttrs[l+L]=a._extendedAttrs[u+L])}const R=Object.keys(a._combined);for(let L=0;L<R.length;L++){const b=parseInt(R[L],10);b>=u&&(this._combined[b-u+l]=a._combined[b])}}translateToString(a=!1,u=0,l=this.length){a&&(l=Math.min(l,this.getTrimmedLength()));let o="";for(;u<l;){const g=this._data[3*u+0],y=2097151&g;o+=2097152&g?this._combined[u]:y?(0,w.stringFromCodePoint)(y):p.WHITESPACE_CELL_CHAR,u+=g>>22||1}return o}}h.BufferLine=k},4841:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getRangeLength=void 0,h.getRangeLength=function(d,m){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return m*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(q,h)=>{function d(m,x,p){if(x===m.length-1)return m[x].getTrimmedLength();const w=!m[x].hasContent(p-1)&&m[x].getWidth(p-1)===1,T=m[x+1].getWidth(0)===2;return w&&T?p-1:p}Object.defineProperty(h,"__esModule",{value:!0}),h.getWrappedLineTrimmedLength=h.reflowSmallerGetNewLineLengths=h.reflowLargerApplyNewLayout=h.reflowLargerCreateNewLayout=h.reflowLargerGetLinesToRemove=void 0,h.reflowLargerGetLinesToRemove=function(m,x,p,w,T){const k=[];for(let C=0;C<m.length-1;C++){let a=C,u=m.get(++a);if(!u.isWrapped)continue;const l=[m.get(C)];for(;a<m.length&&u.isWrapped;)l.push(u),u=m.get(++a);if(w>=C&&w<a){C+=l.length-1;continue}let o=0,g=d(l,o,x),y=1,R=0;for(;y<l.length;){const b=d(l,y,x),M=b-R,U=p-g,V=Math.min(M,U);l[o].copyCellsFrom(l[y],R,g,V,!1),g+=V,g===p&&(o++,g=0),R+=V,R===b&&(y++,R=0),g===0&&o!==0&&l[o-1].getWidth(p-1)===2&&(l[o].copyCellsFrom(l[o-1],p-1,g++,1,!1),l[o-1].setCell(p-1,T))}l[o].replaceCells(g,p,T);let L=0;for(let b=l.length-1;b>0&&(b>o||l[b].getTrimmedLength()===0);b--)L++;L>0&&(k.push(C+l.length-L),k.push(L)),C+=l.length-1}return k},h.reflowLargerCreateNewLayout=function(m,x){const p=[];let w=0,T=x[w],k=0;for(let C=0;C<m.length;C++)if(T===C){const a=x[++w];m.onDeleteEmitter.fire({index:C-k,amount:a}),C+=a-1,k+=a,T=x[++w]}else p.push(C);return{layout:p,countRemoved:k}},h.reflowLargerApplyNewLayout=function(m,x){const p=[];for(let w=0;w<x.length;w++)p.push(m.get(x[w]));for(let w=0;w<p.length;w++)m.set(w,p[w]);m.length=x.length},h.reflowSmallerGetNewLineLengths=function(m,x,p){const w=[],T=m.map(((u,l)=>d(m,l,x))).reduce(((u,l)=>u+l));let k=0,C=0,a=0;for(;a<T;){if(T-a<p){w.push(T-a);break}k+=p;const u=d(m,C,x);k>u&&(k-=u,C++);const l=m[C].getWidth(k-1)===2;l&&k--;const o=l?p-1:p;w.push(o),a+=o}return w},h.getWrappedLineTrimmedLength=d},5295:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferSet=void 0;const m=d(8460),x=d(844),p=d(9092);class w extends x.Disposable{constructor(k,C){super(),this._optionsService=k,this._bufferService=C,this._onBufferActivate=this.register(new m.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,C){this._normal.resize(k,C),this._alt.resize(k,C),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}h.BufferSet=w},511:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CellData=void 0;const m=d(482),x=d(643),p=d(3734);class w extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const C=new w;return C.setFromCharData(k),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[x.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(k[x.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(k[x.CHAR_DATA_CHAR_INDEX].length===2){const a=k[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){const u=k[x.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(a-55296)+u-56320+65536|k[x.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=k[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[x.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=k[x.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[x.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}h.CellData=w},643:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WHITESPACE_CELL_CODE=h.WHITESPACE_CELL_WIDTH=h.WHITESPACE_CELL_CHAR=h.NULL_CELL_CODE=h.NULL_CELL_WIDTH=h.NULL_CELL_CHAR=h.CHAR_DATA_CODE_INDEX=h.CHAR_DATA_WIDTH_INDEX=h.CHAR_DATA_CHAR_INDEX=h.CHAR_DATA_ATTR_INDEX=h.DEFAULT_EXT=h.DEFAULT_ATTR=h.DEFAULT_COLOR=void 0,h.DEFAULT_COLOR=0,h.DEFAULT_ATTR=256|h.DEFAULT_COLOR<<9,h.DEFAULT_EXT=0,h.CHAR_DATA_ATTR_INDEX=0,h.CHAR_DATA_CHAR_INDEX=1,h.CHAR_DATA_WIDTH_INDEX=2,h.CHAR_DATA_CODE_INDEX=3,h.NULL_CELL_CHAR="",h.NULL_CELL_WIDTH=1,h.NULL_CELL_CODE=0,h.WHITESPACE_CELL_CHAR=" ",h.WHITESPACE_CELL_WIDTH=1,h.WHITESPACE_CELL_CODE=32},4863:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Marker=void 0;const m=d(8460),x=d(844);class p{get id(){return this._id}constructor(T){this.line=T,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,x.disposeArray)(this._disposables),this._disposables.length=0)}register(T){return this._disposables.push(T),T}}h.Marker=p,p._nextId=1},7116:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DEFAULT_CHARSET=h.CHARSETS=void 0,h.CHARSETS={},h.DEFAULT_CHARSET=h.CHARSETS.B,h.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},h.CHARSETS.A={"#":""},h.CHARSETS.B=void 0,h.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},h.CHARSETS.C=h.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},h.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},h.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},h.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},h.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},h.CHARSETS.E=h.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},h.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},h.CHARSETS.H=h.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},h.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(q,h)=>{var d,m,x;Object.defineProperty(h,"__esModule",{value:!0}),h.C1_ESCAPED=h.C1=h.C0=void 0,(function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""})(d||(h.C0=d={})),(function(p){p.PAD="",p.HOP="",p.BPH="",p.NBH="",p.IND="",p.NEL="",p.SSA="",p.ESA="",p.HTS="",p.HTJ="",p.VTS="",p.PLD="",p.PLU="",p.RI="",p.SS2="",p.SS3="",p.DCS="",p.PU1="",p.PU2="",p.STS="",p.CCH="",p.MW="",p.SPA="",p.EPA="",p.SOS="",p.SGCI="",p.SCI="",p.CSI="",p.ST="",p.OSC="",p.PM="",p.APC=""})(m||(h.C1=m={})),(function(p){p.ST=`${d.ESC}\\`})(x||(h.C1_ESCAPED=x={}))},7399:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.evaluateKeyboardEvent=void 0;const m=d(2584),x={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};h.evaluateKeyboardEvent=function(p,w,T,k){const C={type:0,cancel:!1,key:void 0},a=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?C.key=w?m.C0.ESC+"OA":m.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?C.key=w?m.C0.ESC+"OD":m.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?C.key=w?m.C0.ESC+"OC":m.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(C.key=w?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:if(p.altKey){C.key=m.C0.ESC+m.C0.DEL;break}C.key=m.C0.DEL;break;case 9:if(p.shiftKey){C.key=m.C0.ESC+"[Z";break}C.key=m.C0.HT,C.cancel=!0;break;case 13:C.key=p.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,C.cancel=!0;break;case 27:C.key=m.C0.ESC,p.altKey&&(C.key=m.C0.ESC+m.C0.ESC),C.cancel=!0;break;case 37:if(p.metaKey)break;a?(C.key=m.C0.ESC+"[1;"+(a+1)+"D",C.key===m.C0.ESC+"[1;3D"&&(C.key=m.C0.ESC+(T?"b":"[1;5D"))):C.key=w?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(p.metaKey)break;a?(C.key=m.C0.ESC+"[1;"+(a+1)+"C",C.key===m.C0.ESC+"[1;3C"&&(C.key=m.C0.ESC+(T?"f":"[1;5C"))):C.key=w?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(p.metaKey)break;a?(C.key=m.C0.ESC+"[1;"+(a+1)+"A",T||C.key!==m.C0.ESC+"[1;3A"||(C.key=m.C0.ESC+"[1;5A")):C.key=w?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(p.metaKey)break;a?(C.key=m.C0.ESC+"[1;"+(a+1)+"B",T||C.key!==m.C0.ESC+"[1;3B"||(C.key=m.C0.ESC+"[1;5B")):C.key=w?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(C.key=m.C0.ESC+"[2~");break;case 46:C.key=a?m.C0.ESC+"[3;"+(a+1)+"~":m.C0.ESC+"[3~";break;case 36:C.key=a?m.C0.ESC+"[1;"+(a+1)+"H":w?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:C.key=a?m.C0.ESC+"[1;"+(a+1)+"F":w?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:p.shiftKey?C.type=2:p.ctrlKey?C.key=m.C0.ESC+"[5;"+(a+1)+"~":C.key=m.C0.ESC+"[5~";break;case 34:p.shiftKey?C.type=3:p.ctrlKey?C.key=m.C0.ESC+"[6;"+(a+1)+"~":C.key=m.C0.ESC+"[6~";break;case 112:C.key=a?m.C0.ESC+"[1;"+(a+1)+"P":m.C0.ESC+"OP";break;case 113:C.key=a?m.C0.ESC+"[1;"+(a+1)+"Q":m.C0.ESC+"OQ";break;case 114:C.key=a?m.C0.ESC+"[1;"+(a+1)+"R":m.C0.ESC+"OR";break;case 115:C.key=a?m.C0.ESC+"[1;"+(a+1)+"S":m.C0.ESC+"OS";break;case 116:C.key=a?m.C0.ESC+"[15;"+(a+1)+"~":m.C0.ESC+"[15~";break;case 117:C.key=a?m.C0.ESC+"[17;"+(a+1)+"~":m.C0.ESC+"[17~";break;case 118:C.key=a?m.C0.ESC+"[18;"+(a+1)+"~":m.C0.ESC+"[18~";break;case 119:C.key=a?m.C0.ESC+"[19;"+(a+1)+"~":m.C0.ESC+"[19~";break;case 120:C.key=a?m.C0.ESC+"[20;"+(a+1)+"~":m.C0.ESC+"[20~";break;case 121:C.key=a?m.C0.ESC+"[21;"+(a+1)+"~":m.C0.ESC+"[21~";break;case 122:C.key=a?m.C0.ESC+"[23;"+(a+1)+"~":m.C0.ESC+"[23~";break;case 123:C.key=a?m.C0.ESC+"[24;"+(a+1)+"~":m.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(T&&!k||!p.altKey||p.metaKey)!T||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?C.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(C.key=m.C0.US),p.key==="@"&&(C.key=m.C0.NUL)):p.keyCode===65&&(C.type=1);else{const u=x[p.keyCode],l=u?.[p.shiftKey?1:0];if(l)C.key=m.C0.ESC+l;else if(p.keyCode>=65&&p.keyCode<=90){const o=p.ctrlKey?p.keyCode-64:p.keyCode+32;let g=String.fromCharCode(o);p.shiftKey&&(g=g.toUpperCase()),C.key=m.C0.ESC+g}else if(p.keyCode===32)C.key=m.C0.ESC+(p.ctrlKey?m.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let o=p.code.slice(3,4);p.shiftKey||(o=o.toLowerCase()),C.key=m.C0.ESC+o,C.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?C.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?C.key=m.C0.NUL:p.keyCode>=51&&p.keyCode<=55?C.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?C.key=m.C0.DEL:p.keyCode===219?C.key=m.C0.ESC:p.keyCode===220?C.key=m.C0.FS:p.keyCode===221&&(C.key=m.C0.GS)}return C}},482:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Utf8ToUtf32=h.StringToUtf32=h.utf32ToString=h.stringFromCodePoint=void 0,h.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},h.utf32ToString=function(d,m=0,x=d.length){let p="";for(let w=m;w<x;++w){let T=d[w];T>65535?(T-=65536,p+=String.fromCharCode(55296+(T>>10))+String.fromCharCode(T%1024+56320)):p+=String.fromCharCode(T)}return p},h.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,m){const x=d.length;if(!x)return 0;let p=0,w=0;if(this._interim){const T=d.charCodeAt(w++);56320<=T&&T<=57343?m[p++]=1024*(this._interim-55296)+T-56320+65536:(m[p++]=this._interim,m[p++]=T),this._interim=0}for(let T=w;T<x;++T){const k=d.charCodeAt(T);if(55296<=k&&k<=56319){if(++T>=x)return this._interim=k,p;const C=d.charCodeAt(T);56320<=C&&C<=57343?m[p++]=1024*(k-55296)+C-56320+65536:(m[p++]=k,m[p++]=C)}else k!==65279&&(m[p++]=k)}return p}},h.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,m){const x=d.length;if(!x)return 0;let p,w,T,k,C=0,a=0,u=0;if(this.interim[0]){let g=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let R,L=0;for(;(R=63&this.interim[++L])&&L<4;)y<<=6,y|=R;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=b-L;for(;u<M;){if(u>=x)return 0;if(R=d[u++],(192&R)!=128){u--,g=!0;break}this.interim[L++]=R,y<<=6,y|=63&R}g||(b===2?y<128?u--:m[C++]=y:b===3?y<2048||y>=55296&&y<=57343||y===65279||(m[C++]=y):y<65536||y>1114111||(m[C++]=y)),this.interim.fill(0)}const l=x-4;let o=u;for(;o<x;){for(;!(!(o<l)||128&(p=d[o])||128&(w=d[o+1])||128&(T=d[o+2])||128&(k=d[o+3]));)m[C++]=p,m[C++]=w,m[C++]=T,m[C++]=k,o+=4;if(p=d[o++],p<128)m[C++]=p;else if((224&p)==192){if(o>=x)return this.interim[0]=p,C;if(w=d[o++],(192&w)!=128){o--;continue}if(a=(31&p)<<6|63&w,a<128){o--;continue}m[C++]=a}else if((240&p)==224){if(o>=x)return this.interim[0]=p,C;if(w=d[o++],(192&w)!=128){o--;continue}if(o>=x)return this.interim[0]=p,this.interim[1]=w,C;if(T=d[o++],(192&T)!=128){o--;continue}if(a=(15&p)<<12|(63&w)<<6|63&T,a<2048||a>=55296&&a<=57343||a===65279)continue;m[C++]=a}else if((248&p)==240){if(o>=x)return this.interim[0]=p,C;if(w=d[o++],(192&w)!=128){o--;continue}if(o>=x)return this.interim[0]=p,this.interim[1]=w,C;if(T=d[o++],(192&T)!=128){o--;continue}if(o>=x)return this.interim[0]=p,this.interim[1]=w,this.interim[2]=T,C;if(k=d[o++],(192&k)!=128){o--;continue}if(a=(7&p)<<18|(63&w)<<12|(63&T)<<6|63&k,a<65536||a>1114111)continue;m[C++]=a}}return C}}},225:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeV6=void 0;const d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let x;h.UnicodeV6=class{constructor(){if(this.version="6",!x){x=new Uint8Array(65536),x.fill(1),x[0]=0,x.fill(0,1,32),x.fill(0,127,160),x.fill(2,4352,4448),x[9001]=2,x[9002]=2,x.fill(2,11904,42192),x[12351]=1,x.fill(2,44032,55204),x.fill(2,63744,64256),x.fill(2,65040,65050),x.fill(2,65072,65136),x.fill(2,65280,65377),x.fill(2,65504,65511);for(let p=0;p<d.length;++p)x.fill(0,d[p][0],d[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?x[p]:(function(w,T){let k,C=0,a=T.length-1;if(w<T[0][0]||w>T[a][1])return!1;for(;a>=C;)if(k=C+a>>1,w>T[k][1])C=k+1;else{if(!(w<T[k][0]))return!0;a=k-1}return!1})(p,m)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WriteBuffer=void 0;const m=d(8460),x=d(844);class p extends x.Disposable{constructor(T){super(),this._action=T,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(T,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let C;for(this._isSyncWriting=!0;C=this._writeBuffer.shift();){this._action(C);const a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(T,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(k),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(k)}_innerWrite(T=0,k=!0){const C=T||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const a=this._writeBuffer[this._bufferOffset],u=this._action(a,k);if(u){const o=g=>Date.now()-C>=12?setTimeout((()=>this._innerWrite(0,g))):this._innerWrite(C,g);return void u.catch((g=>(queueMicrotask((()=>{throw g})),Promise.resolve(!1)))).then(o)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}h.WriteBuffer=p},5941:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.toRgbString=h.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function x(p,w){const T=p.toString(16),k=T.length<2?"0"+T:T;switch(w){case 4:return T[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}h.parseColor=function(p){if(!p)return;let w=p.toLowerCase();if(w.indexOf("rgb:")===0){w=w.slice(4);const T=d.exec(w);if(T){const k=T[1]?15:T[4]?255:T[7]?4095:65535;return[Math.round(parseInt(T[1]||T[4]||T[7]||T[10],16)/k*255),Math.round(parseInt(T[2]||T[5]||T[8]||T[11],16)/k*255),Math.round(parseInt(T[3]||T[6]||T[9]||T[12],16)/k*255)]}}else if(w.indexOf("#")===0&&(w=w.slice(1),m.exec(w)&&[3,6,9,12].includes(w.length))){const T=w.length/3,k=[0,0,0];for(let C=0;C<3;++C){const a=parseInt(w.slice(T*C,T*C+T),16);k[C]=T===1?a<<4:T===2?a:T===3?a>>4:a>>8}return k}},h.toRgbString=function(p,w=16){const[T,k,C]=p;return`rgb:${x(T,w)}/${x(k,w)}/${x(C,w)}`}},5770:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PAYLOAD_LIMIT=void 0,h.PAYLOAD_LIMIT=1e7},6351:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DcsHandler=h.DcsParser=void 0;const m=d(482),x=d(8742),p=d(5770),w=[];h.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=w,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=w}registerHandler(k,C){this._handlers[k]===void 0&&(this._handlers[k]=[]);const a=this._handlers[k];return a.push(C),{dispose:()=>{const u=a.indexOf(C);u!==-1&&a.splice(u,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=w,this._ident=0}hook(k,C){if(this.reset(),this._ident=k,this._active=this._handlers[k]||w,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(C);else this._handlerFb(this._ident,"HOOK",C)}put(k,C,a){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(k,C,a);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(k,C,a))}unhook(k,C=!0){if(this._active.length){let a=!1,u=this._active.length-1,l=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,a=C,l=this._stack.fallThrough,this._stack.paused=!1),!l&&a===!1){for(;u>=0&&(a=this._active[u].unhook(k),a!==!0);u--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,a;u--}for(;u>=0;u--)if(a=this._active[u].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",k);this._active=w,this._ident=0}};const T=new x.Params;T.addParam(0),h.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=T,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():T,this._data="",this._hitLimit=!1}put(k,C,a){this._hitLimit||(this._data+=(0,m.utf32ToString)(k,C,a),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let C=!1;if(this._hitLimit)C=!1;else if(k&&(C=this._handler(this._data,this._params),C instanceof Promise))return C.then((a=>(this._params=T,this._data="",this._hitLimit=!1,a)));return this._params=T,this._data="",this._hitLimit=!1,C}}},2015:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.EscapeSequenceParser=h.VT500_TRANSITION_TABLE=h.TransitionTable=void 0;const m=d(844),x=d(8742),p=d(6242),w=d(6351);class T{constructor(u){this.table=new Uint8Array(u)}setDefault(u,l){this.table.fill(u<<4|l)}add(u,l,o,g){this.table[l<<8|u]=o<<4|g}addMany(u,l,o,g){for(let y=0;y<u.length;y++)this.table[l<<8|u[y]]=o<<4|g}}h.TransitionTable=T;const k=160;h.VT500_TRANSITION_TABLE=(function(){const a=new T(4095),u=Array.apply(null,Array(256)).map(((L,b)=>b)),l=(L,b)=>u.slice(L,b),o=l(32,127),g=l(0,24);g.push(25),g.push.apply(g,l(28,32));const y=l(0,14);let R;for(R in a.setDefault(1,0),a.addMany(o,0,2,0),y)a.addMany([24,26,153,154],R,3,0),a.addMany(l(128,144),R,3,0),a.addMany(l(144,152),R,3,0),a.add(156,R,0,0),a.add(27,R,11,1),a.add(157,R,4,8),a.addMany([152,158,159],R,0,7),a.add(155,R,11,3),a.add(144,R,11,9);return a.addMany(g,0,3,0),a.addMany(g,1,3,1),a.add(127,1,0,1),a.addMany(g,8,0,8),a.addMany(g,3,3,3),a.add(127,3,0,3),a.addMany(g,4,3,4),a.add(127,4,0,4),a.addMany(g,6,3,6),a.addMany(g,5,3,5),a.add(127,5,0,5),a.addMany(g,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(o,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(l(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(o,7,0,7),a.addMany(g,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(l(64,127),3,7,0),a.addMany(l(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(l(48,60),4,8,4),a.addMany(l(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(l(32,64),6,0,6),a.add(127,6,0,6),a.addMany(l(64,127),6,0,0),a.addMany(l(32,48),3,9,5),a.addMany(l(32,48),5,9,5),a.addMany(l(48,64),5,0,6),a.addMany(l(64,127),5,7,0),a.addMany(l(32,48),4,9,5),a.addMany(l(32,48),1,9,2),a.addMany(l(32,48),2,9,2),a.addMany(l(48,127),2,10,0),a.addMany(l(48,80),1,10,0),a.addMany(l(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(l(96,127),1,10,0),a.add(80,1,11,9),a.addMany(g,9,0,9),a.add(127,9,0,9),a.addMany(l(28,32),9,0,9),a.addMany(l(32,48),9,9,12),a.addMany(l(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(g,11,0,11),a.addMany(l(32,128),11,0,11),a.addMany(l(28,32),11,0,11),a.addMany(g,10,0,10),a.add(127,10,0,10),a.addMany(l(28,32),10,0,10),a.addMany(l(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(l(32,48),10,9,12),a.addMany(g,12,0,12),a.add(127,12,0,12),a.addMany(l(28,32),12,0,12),a.addMany(l(32,48),12,9,12),a.addMany(l(48,64),12,0,11),a.addMany(l(64,127),12,12,13),a.addMany(l(64,127),10,12,13),a.addMany(l(64,127),9,12,13),a.addMany(g,13,13,13),a.addMany(o,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(k,0,2,0),a.add(k,8,5,8),a.add(k,6,0,6),a.add(k,11,0,11),a.add(k,13,13,13),a})();class C extends m.Disposable{constructor(u=h.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new x.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(l,o,g)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,o)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new w.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(u,l=[64,126]){let o=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=u.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<u.intermediates.length;++y){const R=u.intermediates.charCodeAt(y);if(32>R||R>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=R}}if(u.final.length!==1)throw new Error("final must be a single byte");const g=u.final.charCodeAt(0);if(l[0]>g||g>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return o<<=8,o|=g,o}identToString(u){const l=[];for(;u;)l.push(String.fromCharCode(255&u)),u>>=8;return l.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,l){const o=this._identifier(u,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const g=this._escHandlers[o];return g.push(l),{dispose:()=>{const y=g.indexOf(l);y!==-1&&g.splice(y,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,l){this._executeHandlers[u.charCodeAt(0)]=l}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,l){const o=this._identifier(u);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const g=this._csiHandlers[o];return g.push(l),{dispose:()=>{const y=g.indexOf(l);y!==-1&&g.splice(y,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,l){return this._dcsParser.registerHandler(this._identifier(u),l)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,l){return this._oscParser.registerHandler(u,l)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,l,o,g,y){this._parseStack.state=u,this._parseStack.handlers=l,this._parseStack.handlerPos=o,this._parseStack.transition=g,this._parseStack.chunkPos=y}parse(u,l,o){let g,y=0,R=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let M=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&M>-1){for(;M>=0&&(g=b[M](this._params),g!==!0);M--)if(g instanceof Promise)return this._parseStack.handlerPos=M,g}this._parseStack.handlers=[];break;case 4:if(o===!1&&M>-1){for(;M>=0&&(g=b[M](),g!==!0);M--)if(g instanceof Promise)return this._parseStack.handlerPos=M,g}this._parseStack.handlers=[];break;case 6:if(y=u[this._parseStack.chunkPos],g=this._dcsParser.unhook(y!==24&&y!==26,o),g)return g;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=u[this._parseStack.chunkPos],g=this._oscParser.end(y!==24&&y!==26,o),g)return g;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=L;b<l;++b){switch(y=u[b],R=this._transitions.table[this.currentState<<8|(y<160?y:k)],R>>4){case 2:for(let $=b+1;;++$){if($>=l||(y=u[$])<32||y>126&&y<k){this._printHandler(u,b,$),b=$-1;break}if(++$>=l||(y=u[$])<32||y>126&&y<k){this._printHandler(u,b,$),b=$-1;break}if(++$>=l||(y=u[$])<32||y>126&&y<k){this._printHandler(u,b,$),b=$-1;break}if(++$>=l||(y=u[$])<32||y>126&&y<k){this._printHandler(u,b,$),b=$-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const M=this._csiHandlers[this._collect<<8|y];let U=M?M.length-1:-1;for(;U>=0&&(g=M[U](this._params),g!==!0);U--)if(g instanceof Promise)return this._preserveStack(3,M,U,R,b),g;U<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++b<l&&(y=u[b])>47&&y<60);b--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:const V=this._escHandlers[this._collect<<8|y];let I=V?V.length-1:-1;for(;I>=0&&(g=V[I](),g!==!0);I--)if(g instanceof Promise)return this._preserveStack(4,V,I,R,b),g;I<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let $=b+1;;++$)if($>=l||(y=u[$])===24||y===26||y===27||y>127&&y<k){this._dcsParser.put(u,b,$),b=$-1;break}break;case 14:if(g=this._dcsParser.unhook(y!==24&&y!==26),g)return this._preserveStack(6,[],0,R,b),g;y===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let $=b+1;;$++)if($>=l||(y=u[$])<32||y>127&&y<k){this._oscParser.put(u,b,$),b=$-1;break}break;case 6:if(g=this._oscParser.end(y!==24&&y!==26),g)return this._preserveStack(5,[],0,R,b),g;y===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&R}}}h.EscapeSequenceParser=C},6242:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OscHandler=h.OscParser=void 0;const m=d(5770),x=d(482),p=[];h.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(w,T){this._handlers[w]===void 0&&(this._handlers[w]=[]);const k=this._handlers[w];return k.push(T),{dispose:()=>{const C=k.indexOf(T);C!==-1&&k.splice(C,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].start();else this._handlerFb(this._id,"START")}_put(w,T,k){if(this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].put(w,T,k);else this._handlerFb(this._id,"PUT",(0,x.utf32ToString)(w,T,k))}start(){this.reset(),this._state=1}put(w,T,k){if(this._state!==3){if(this._state===1)for(;T<k;){const C=w[T++];if(C===59){this._state=2,this._start();break}if(C<48||57<C)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+C-48}this._state===2&&k-T>0&&this._put(w,T,k)}}end(w,T=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,C=this._active.length-1,a=!1;if(this._stack.paused&&(C=this._stack.loopPosition-1,k=T,a=this._stack.fallThrough,this._stack.paused=!1),!a&&k===!1){for(;C>=0&&(k=this._active[C].end(w),k!==!0);C--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!1,k;C--}for(;C>=0;C--)if(k=this._active[C].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",w);this._active=p,this._id=-1,this._state=0}}},h.OscHandler=class{constructor(w){this._handler=w,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(w,T,k){this._hitLimit||(this._data+=(0,x.utf32ToString)(w,T,k),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(w){let T=!1;if(this._hitLimit)T=!1;else if(w&&(T=this._handler(this._data),T instanceof Promise))return T.then((k=>(this._data="",this._hitLimit=!1,k)));return this._data="",this._hitLimit=!1,T}}},8742:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Params=void 0;const d=2147483647;class m{static fromArray(p){const w=new m;if(!p.length)return w;for(let T=Array.isArray(p[0])?1:0;T<p.length;++T){const k=p[T];if(Array.isArray(k))for(let C=0;C<k.length;++C)w.addSubParam(k[C]);else w.addParam(k)}return w}constructor(p=32,w=32){if(this.maxLength=p,this.maxSubParamsLength=w,w>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(w),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new m(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let w=0;w<this.length;++w){p.push(this.params[w]);const T=this._subParamsIdx[w]>>8,k=255&this._subParamsIdx[w];k-T>0&&p.push(Array.prototype.slice.call(this._subParams,T,k))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>d?d:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>d?d:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const w=this._subParamsIdx[p]>>8,T=255&this._subParamsIdx[p];return T-w>0?this._subParams.subarray(w,T):null}getSubParamsAll(){const p={};for(let w=0;w<this.length;++w){const T=this._subParamsIdx[w]>>8,k=255&this._subParamsIdx[w];k-T>0&&(p[w]=this._subParams.slice(T,k))}return p}addDigit(p){let w;if(this._rejectDigits||!(w=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const T=this._digitIsSub?this._subParams:this.params,k=T[w-1];T[w-1]=~k?Math.min(10*k+p,d):p}}h.Params=m},5741:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AddonManager=void 0,h.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,m){const x={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(x),m.dispose=()=>this._wrappedAddonDispose(x),m.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let m=-1;for(let x=0;x<this._addons.length;x++)if(this._addons[x]===d){m=x;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(m,1)}}},8771:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferApiView=void 0;const m=d(3785),x=d(511);h.BufferApiView=class{constructor(p,w){this._buffer=p,this.type=w}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const w=this._buffer.lines.get(p);if(w)return new m.BufferLineApiView(w)}getNullCell(){return new x.CellData}}},3785:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLineApiView=void 0;const m=d(511);h.BufferLineApiView=class{constructor(x){this._line=x}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(x,p){if(!(x<0||x>=this._line.length))return p?(this._line.loadCell(x,p),p):this._line.loadCell(x,new m.CellData)}translateToString(x,p,w){return this._line.translateToString(x,p,w)}}},8285:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferNamespaceApi=void 0;const m=d(8771),x=d(8460),p=d(844);class w extends p.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new x.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}h.BufferNamespaceApi=w},7975:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ParserApi=void 0,h.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,m){return this._core.registerCsiHandler(d,(x=>m(x.toArray())))}addCsiHandler(d,m){return this.registerCsiHandler(d,m)}registerDcsHandler(d,m){return this._core.registerDcsHandler(d,((x,p)=>m(x,p.toArray())))}addDcsHandler(d,m){return this.registerDcsHandler(d,m)}registerEscHandler(d,m){return this._core.registerEscHandler(d,m)}addEscHandler(d,m){return this.registerEscHandler(d,m)}registerOscHandler(d,m){return this._core.registerOscHandler(d,m)}addOscHandler(d,m){return this.registerOscHandler(d,m)}}},7090:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeApi=void 0,h.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(q,h,d){var m=this&&this.__decorate||function(a,u,l,o){var g,y=arguments.length,R=y<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,u,l,o);else for(var L=a.length-1;L>=0;L--)(g=a[L])&&(R=(y<3?g(R):y>3?g(u,l,R):g(u,l))||R);return y>3&&R&&Object.defineProperty(u,l,R),R},x=this&&this.__param||function(a,u){return function(l,o){u(l,o,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.BufferService=h.MINIMUM_ROWS=h.MINIMUM_COLS=void 0;const p=d(8460),w=d(844),T=d(5295),k=d(2585);h.MINIMUM_COLS=2,h.MINIMUM_ROWS=1;let C=h.BufferService=class extends w.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,h.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,h.MINIMUM_ROWS),this.buffers=this.register(new T.BufferSet(a,this))}resize(a,u){this.cols=a,this.rows=u,this.buffers.resize(a,u),this._onResize.fire({cols:a,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,u=!1){const l=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===a.fg&&o.getBg(0)===a.bg||(o=l.getBlankLine(a,u),this._cachedBlankLine=o),o.isWrapped=u;const g=l.ybase+l.scrollTop,y=l.ybase+l.scrollBottom;if(l.scrollTop===0){const R=l.lines.isFull;y===l.lines.length-1?R?l.lines.recycle().copyFrom(o):l.lines.push(o.clone()):l.lines.splice(y+1,0,o.clone()),R?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const R=y-g+1;l.lines.shiftElements(g+1,R-1,-1),l.lines.set(y,o.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(a,u,l){const o=this.buffer;if(a<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else a+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const g=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+a,o.ybase),0),g!==o.ydisp&&(u||this._onScroll.fire(o.ydisp))}};h.BufferService=C=m([x(0,k.IOptionsService)],C)},7994:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CharsetService=void 0,h.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,m){this._charsets[d]=m,this.glevel===d&&(this.charset=m)}}},1753:function(q,h,d){var m=this&&this.__decorate||function(o,g,y,R){var L,b=arguments.length,M=b<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,y):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(o,g,y,R);else for(var U=o.length-1;U>=0;U--)(L=o[U])&&(M=(b<3?L(M):b>3?L(g,y,M):L(g,y))||M);return b>3&&M&&Object.defineProperty(g,y,M),M},x=this&&this.__param||function(o,g){return function(y,R){g(y,R,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreMouseService=void 0;const p=d(2585),w=d(8460),T=d(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function C(o,g){let y=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(y|=64,y|=o.action):(y|=3&o.button,4&o.button&&(y|=64),8&o.button&&(y|=128),o.action===32?y|=32:o.action!==0||g||(y|=3)),y}const a=String.fromCharCode,u={DEFAULT:o=>{const g=[C(o,!1)+32,o.col+32,o.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${a(g[0])}${a(g[1])}${a(g[2])}`},SGR:o=>{const g=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${C(o,!0)};${o.col};${o.row}${g}`},SGR_PIXELS:o=>{const g=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${C(o,!0)};${o.x};${o.y}${g}`}};let l=h.CoreMouseService=class extends T.Disposable{constructor(o,g){super(),this._bufferService=o,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new w.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const y of Object.keys(k))this.addProtocol(y,k[y]);for(const y of Object.keys(u))this.addEncoding(y,u[y]);this.reset()}addProtocol(o,g){this._protocols[o]=g}addEncoding(o,g){this._encodings[o]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const g=this._encodings[this._activeEncoding](o);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,g,y){if(y){if(o.x!==g.x||o.y!==g.y)return!1}else if(o.col!==g.col||o.row!==g.row)return!1;return o.button===g.button&&o.action===g.action&&o.ctrl===g.ctrl&&o.alt===g.alt&&o.shift===g.shift}};h.CoreMouseService=l=m([x(0,p.IBufferService),x(1,p.ICoreService)],l)},6975:function(q,h,d){var m=this&&this.__decorate||function(l,o,g,y){var R,L=arguments.length,b=L<3?o:y===null?y=Object.getOwnPropertyDescriptor(o,g):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,o,g,y);else for(var M=l.length-1;M>=0;M--)(R=l[M])&&(b=(L<3?R(b):L>3?R(o,g,b):R(o,g))||b);return L>3&&b&&Object.defineProperty(o,g,b),b},x=this&&this.__param||function(l,o){return function(g,y){o(g,y,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreService=void 0;const p=d(1439),w=d(8460),T=d(844),k=d(2585),C=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=h.CoreService=class extends T.Disposable{constructor(l,o,g){super(),this._bufferService=l,this._logService=o,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new w.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new w.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new w.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new w.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(C),this.decPrivateModes=(0,p.clone)(a)}reset(){this.modes=(0,p.clone)(C),this.decPrivateModes=(0,p.clone)(a)}triggerDataEvent(l,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,(()=>l.split("").map((y=>y.charCodeAt(0))))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,(()=>l.split("").map((o=>o.charCodeAt(0))))),this._onBinary.fire(l))}};h.CoreService=u=m([x(0,k.IBufferService),x(1,k.ILogService),x(2,k.IOptionsService)],u)},9074:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DecorationService=void 0;const m=d(8055),x=d(8460),p=d(844),w=d(6106);let T=0,k=0;class C extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new w.SortedList((l=>l?.marker.line)),this._onDecorationRegistered=this.register(new x.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new x.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)((()=>this.reset())))}registerDecoration(l){if(l.marker.isDisposed)return;const o=new a(l);if(o){const g=o.marker.onDispose((()=>o.dispose()));o.onDispose((()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),g.dispose())})),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,o,g){var y,R,L;let b=0,M=0;for(const U of this._decorations.getKeyIterator(o))b=(y=U.options.x)!==null&&y!==void 0?y:0,M=b+((R=U.options.width)!==null&&R!==void 0?R:1),l>=b&&l<M&&(!g||((L=U.options.layer)!==null&&L!==void 0?L:"bottom")===g)&&(yield U)}forEachDecorationAtCell(l,o,g,y){this._decorations.forEachByKey(o,(R=>{var L,b,M;T=(L=R.options.x)!==null&&L!==void 0?L:0,k=T+((b=R.options.width)!==null&&b!==void 0?b:1),l>=T&&l<k&&(!g||((M=R.options.layer)!==null&&M!==void 0?M:"bottom")===g)&&y(R)}))}}h.DecorationService=C;class a extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new x.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new x.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.InstantiationService=h.ServiceCollection=void 0;const m=d(2585),x=d(8343);class p{constructor(...T){this._entries=new Map;for(const[k,C]of T)this.set(k,C)}set(T,k){const C=this._entries.get(T);return this._entries.set(T,k),C}forEach(T){for(const[k,C]of this._entries.entries())T(k,C)}has(T){return this._entries.has(T)}get(T){return this._entries.get(T)}}h.ServiceCollection=p,h.InstantiationService=class{constructor(){this._services=new p,this._services.set(m.IInstantiationService,this)}setService(w,T){this._services.set(w,T)}getService(w){return this._services.get(w)}createInstance(w,...T){const k=(0,x.getServiceDependencies)(w).sort(((u,l)=>u.index-l.index)),C=[];for(const u of k){const l=this._services.get(u.id);if(!l)throw new Error(`[createInstance] ${w.name} depends on UNKNOWN service ${u.id}.`);C.push(l)}const a=k.length>0?k[0].index:T.length;if(T.length!==a)throw new Error(`[createInstance] First service dependency of ${w.name} at position ${a+1} conflicts with ${T.length} static arguments`);return new w(...T,...C)}}},7866:function(q,h,d){var m=this&&this.__decorate||function(a,u,l,o){var g,y=arguments.length,R=y<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,u,l,o);else for(var L=a.length-1;L>=0;L--)(g=a[L])&&(R=(y<3?g(R):y>3?g(u,l,R):g(u,l))||R);return y>3&&R&&Object.defineProperty(u,l,R),R},x=this&&this.__param||function(a,u){return function(l,o){u(l,o,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.traceCall=h.setTraceLogger=h.LogService=void 0;const p=d(844),w=d(2585),T={trace:w.LogLevelEnum.TRACE,debug:w.LogLevelEnum.DEBUG,info:w.LogLevelEnum.INFO,warn:w.LogLevelEnum.WARN,error:w.LogLevelEnum.ERROR,off:w.LogLevelEnum.OFF};let k,C=h.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=w.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),k=this}_updateLogLevel(){this._logLevel=T[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let u=0;u<a.length;u++)typeof a[u]=="function"&&(a[u]=a[u]())}_log(a,u,l){this._evalLazyOptionalParams(l),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...l)}trace(a,...u){var l,o;this._logLevel<=w.LogLevelEnum.TRACE&&this._log((o=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.trace.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,a,u)}debug(a,...u){var l,o;this._logLevel<=w.LogLevelEnum.DEBUG&&this._log((o=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.debug.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,a,u)}info(a,...u){var l,o;this._logLevel<=w.LogLevelEnum.INFO&&this._log((o=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.info.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.info,a,u)}warn(a,...u){var l,o;this._logLevel<=w.LogLevelEnum.WARN&&this._log((o=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.warn.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.warn,a,u)}error(a,...u){var l,o;this._logLevel<=w.LogLevelEnum.ERROR&&this._log((o=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.error.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.error,a,u)}};h.LogService=C=m([x(0,w.IOptionsService)],C),h.setTraceLogger=function(a){k=a},h.traceCall=function(a,u,l){if(typeof l.value!="function")throw new Error("not supported");const o=l.value;l.value=function(...g){if(k.logLevel!==w.LogLevelEnum.TRACE)return o.apply(this,g);k.trace(`GlyphRenderer#${o.name}(${g.map((R=>JSON.stringify(R))).join(", ")})`);const y=o.apply(this,g);return k.trace(`GlyphRenderer#${o.name} return`,y),y}}},7302:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OptionsService=h.DEFAULT_OPTIONS=void 0;const m=d(8460),x=d(844),p=d(6114);h.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const w=["normal","bold","100","200","300","400","500","600","700","800","900"];class T extends x.Disposable{constructor(C){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;const a=Object.assign({},h.DEFAULT_OPTIONS);for(const u in C)if(u in a)try{const l=C[u];a[u]=this._sanitizeAndValidateOption(u,l)}catch(l){console.error(l)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(C,a){return this.onOptionChange((u=>{u===C&&a(this.rawOptions[C])}))}onMultipleOptionChange(C,a){return this.onOptionChange((u=>{C.indexOf(u)!==-1&&a()}))}_setupOptions(){const C=u=>{if(!(u in h.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},a=(u,l)=>{if(!(u in h.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);l=this._sanitizeAndValidateOption(u,l),this.rawOptions[u]!==l&&(this.rawOptions[u]=l,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const l={get:C.bind(this,u),set:a.bind(this,u)};Object.defineProperty(this.options,u,l)}}_sanitizeAndValidateOption(C,a){switch(C){case"cursorStyle":if(a||(a=h.DEFAULT_OPTIONS[C]),!(function(u){return u==="block"||u==="underline"||u==="bar"})(a))throw new Error(`"${a}" is not a valid value for ${C}`);break;case"wordSeparator":a||(a=h.DEFAULT_OPTIONS[C]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=w.includes(a)?a:h.DEFAULT_OPTIONS[C];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${C} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${C} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${C} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${C} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}h.OptionsService=T},2660:function(q,h,d){var m=this&&this.__decorate||function(T,k,C,a){var u,l=arguments.length,o=l<3?k:a===null?a=Object.getOwnPropertyDescriptor(k,C):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(T,k,C,a);else for(var g=T.length-1;g>=0;g--)(u=T[g])&&(o=(l<3?u(o):l>3?u(k,C,o):u(k,C))||o);return l>3&&o&&Object.defineProperty(k,C,o),o},x=this&&this.__param||function(T,k){return function(C,a){k(C,a,T)}};Object.defineProperty(h,"__esModule",{value:!0}),h.OscLinkService=void 0;const p=d(2585);let w=h.OscLinkService=class{constructor(T){this._bufferService=T,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(T){const k=this._bufferService.buffer;if(T.id===void 0){const g=k.addMarker(k.ybase+k.y),y={data:T,id:this._nextId++,lines:[g]};return g.onDispose((()=>this._removeMarkerFromLink(y,g))),this._dataByLinkId.set(y.id,y),y.id}const C=T,a=this._getEntryIdKey(C),u=this._entriesWithId.get(a);if(u)return this.addLineToLink(u.id,k.ybase+k.y),u.id;const l=k.addMarker(k.ybase+k.y),o={id:this._nextId++,key:this._getEntryIdKey(C),data:C,lines:[l]};return l.onDispose((()=>this._removeMarkerFromLink(o,l))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(T,k){const C=this._dataByLinkId.get(T);if(C&&C.lines.every((a=>a.line!==k))){const a=this._bufferService.buffer.addMarker(k);C.lines.push(a),a.onDispose((()=>this._removeMarkerFromLink(C,a)))}}getLinkData(T){var k;return(k=this._dataByLinkId.get(T))===null||k===void 0?void 0:k.data}_getEntryIdKey(T){return`${T.id};;${T.uri}`}_removeMarkerFromLink(T,k){const C=T.lines.indexOf(k);C!==-1&&(T.lines.splice(C,1),T.lines.length===0&&(T.data.id!==void 0&&this._entriesWithId.delete(T.key),this._dataByLinkId.delete(T.id)))}};h.OscLinkService=w=m([x(0,p.IBufferService)],w)},8343:(q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.createDecorator=h.getServiceDependencies=h.serviceRegistry=void 0;const d="di$target",m="di$dependencies";h.serviceRegistry=new Map,h.getServiceDependencies=function(x){return x[m]||[]},h.createDecorator=function(x){if(h.serviceRegistry.has(x))return h.serviceRegistry.get(x);const p=function(w,T,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,a,u){a[d]===a?a[m].push({id:C,index:u}):(a[m]=[{id:C,index:u}],a[d]=a)})(p,w,k)};return p.toString=()=>x,h.serviceRegistry.set(x,p),p}},2585:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IDecorationService=h.IUnicodeService=h.IOscLinkService=h.IOptionsService=h.ILogService=h.LogLevelEnum=h.IInstantiationService=h.ICharsetService=h.ICoreService=h.ICoreMouseService=h.IBufferService=void 0;const m=d(8343);var x;h.IBufferService=(0,m.createDecorator)("BufferService"),h.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),h.ICoreService=(0,m.createDecorator)("CoreService"),h.ICharsetService=(0,m.createDecorator)("CharsetService"),h.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"})(x||(h.LogLevelEnum=x={})),h.ILogService=(0,m.createDecorator)("LogService"),h.IOptionsService=(0,m.createDecorator)("OptionsService"),h.IOscLinkService=(0,m.createDecorator)("OscLinkService"),h.IUnicodeService=(0,m.createDecorator)("UnicodeService"),h.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeService=void 0;const m=d(8460),x=d(225);h.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;const p=new x.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let w=0;const T=p.length;for(let k=0;k<T;++k){let C=p.charCodeAt(k);if(55296<=C&&C<=56319){if(++k>=T)return w+this.wcwidth(C);const a=p.charCodeAt(k);56320<=a&&a<=57343?C=1024*(C-55296)+a-56320+65536:w+=this.wcwidth(a)}w+=this.wcwidth(C)}return w}}}},E={};function X(q){var h=E[q];if(h!==void 0)return h.exports;var d=E[q]={exports:{}};return D[q].call(d.exports,d,d.exports,X),d.exports}var te={};return(()=>{var q=te;Object.defineProperty(q,"__esModule",{value:!0}),q.Terminal=void 0;const h=X(9042),d=X(3236),m=X(844),x=X(5741),p=X(8285),w=X(7975),T=X(7090),k=["cols","rows"];class C extends m.Disposable{constructor(u){super(),this._core=this.register(new d.Terminal(u)),this._addonManager=this.register(new x.AddonManager),this._publicOptions=Object.assign({},this._core.options);const l=g=>this._core.options[g],o=(g,y)=>{this._checkReadonlyOptions(g),this._core.options[g]=y};for(const g in this._core.options){const y={get:l.bind(this,g),set:o.bind(this,g)};Object.defineProperty(this._publicOptions,g,y)}}_checkReadonlyOptions(u){if(k.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new w.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new T.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const l in u)this._publicOptions[l]=u[l]}blur(){this._core.blur()}focus(){this._core.focus()}resize(u,l){this._verifyIntegers(u,l),this._core.resize(u,l)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){var l,o,g;return this._checkProposedApi(),this._verifyPositiveIntegers((l=u.x)!==null&&l!==void 0?l:0,(o=u.width)!==null&&o!==void 0?o:0,(g=u.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,l,o){this._verifyIntegers(u,l,o),this._core.select(u,l,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,l){this._verifyIntegers(u,l),this._core.selectLines(u,l)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,l){this._core.write(u,l)}writeln(u,l){this._core.write(u),this._core.write(`\r
`,l)}paste(u){this._core.paste(u)}refresh(u,l){this._verifyIntegers(u,l),this._core.refresh(u,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return h}_verifyIntegers(...u){for(const l of u)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const l of u)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}q.Terminal=C})(),te})()))})(vh)),vh.exports}var Sg=yg(),gh={exports:{}},$_;function wg(){return $_||($_=1,(function(f,_){(function(D,E){f.exports=E()})(self,(()=>(()=>{var D={};return(()=>{var E=D;Object.defineProperty(E,"__esModule",{value:!0}),E.FitAddon=void 0,E.FitAddon=class{activate(X){this._terminal=X}dispose(){}fit(){const X=this.proposeDimensions();if(!X||!this._terminal||isNaN(X.cols)||isNaN(X.rows))return;const te=this._terminal._core;this._terminal.rows===X.rows&&this._terminal.cols===X.cols||(te._renderService.clear(),this._terminal.resize(X.cols,X.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const X=this._terminal._core,te=X._renderService.dimensions;if(te.css.cell.width===0||te.css.cell.height===0)return;const q=this._terminal.options.scrollback===0?0:X.viewport.scrollBarWidth,h=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(h.getPropertyValue("height")),m=Math.max(0,parseInt(h.getPropertyValue("width"))),x=window.getComputedStyle(this._terminal.element),p=d-(parseInt(x.getPropertyValue("padding-top"))+parseInt(x.getPropertyValue("padding-bottom"))),w=m-(parseInt(x.getPropertyValue("padding-right"))+parseInt(x.getPropertyValue("padding-left")))-q;return{cols:Math.max(2,Math.floor(w/te.css.cell.width)),rows:Math.max(1,Math.floor(p/te.css.cell.height))}}}})(),D})()))})(gh)),gh.exports}var xg=wg();const Cg=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Eg=f=>f.replace(/^([A-Z])|[\s-_]+(\w)/g,(_,D,E)=>E?E.toUpperCase():D.toLowerCase()),V_=f=>{const _=Eg(f);return _.charAt(0).toUpperCase()+_.slice(1)},Cm=(...f)=>f.filter((_,D,E)=>!!_&&_.trim()!==""&&E.indexOf(_)===D).join(" ").trim(),kg=f=>{for(const _ in f)if(_.startsWith("aria-")||_==="role"||_==="title")return!0};var Ag={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Dg=z.forwardRef(({color:f="currentColor",size:_=24,strokeWidth:D=2,absoluteStrokeWidth:E,className:X="",children:te,iconNode:q,...h},d)=>z.createElement("svg",{ref:d,...Ag,width:_,height:_,stroke:f,strokeWidth:E?Number(D)*24/Number(_):D,className:Cm("lucide",X),...!te&&!kg(h)&&{"aria-hidden":"true"},...h},[...q.map(([m,x])=>z.createElement(m,x)),...Array.isArray(te)?te:[te]]));const bt=(f,_)=>{const D=z.forwardRef(({className:E,...X},te)=>z.createElement(Dg,{ref:te,iconNode:_,className:Cm(`lucide-${Cg(V_(f))}`,`lucide-${f}`,E),...X}));return D.displayName=V_(f),D};const Tg=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rg=bt("arrow-left",Tg);const Mg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Og=bt("arrow-right",Mg);const Lg=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],jg=bt("arrow-up",Lg);const Bg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ng=bt("bell",Bg);const Hg=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wa=bt("chevron-down",Hg);const zg=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ug=bt("chevron-left",zg);const Pg=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rs=bt("chevron-right",Pg);const Fg=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],Ig=bt("file-code",Fg);const qg=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Wg=bt("file-json",qg);const Kg=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Em=bt("file-text",Kg);const Gg=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],km=bt("folder-open",Gg);const Yg=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Am=bt("folder",Yg);const $g=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Vg=bt("git-branch",$g);const Xg=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Qg=bt("palette",Xg);const Zg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bh=bt("plus",Zg);const Jg=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],e0=bt("rotate-cw",Jg);const t0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],i0=bt("save",t0);const s0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ah=bt("search",s0);const n0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dm=bt("settings",n0);const r0=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],a0=bt("star",r0);const l0=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],o0=bt("terminal",l0);const c0=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],u0=bt("thumbs-down",c0);const h0=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],d0=bt("thumbs-up",h0);const f0=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],_0=bt("wand-sparkles",f0);const m0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dh=bt("x",m0);class Tm{constructor(..._){this.type="Logical",_.length===1?"Logical"in _[0]?(this.width=_[0].Logical.width,this.height=_[0].Logical.height):(this.width=_[0].width,this.height=_[0].height):(this.width=_[0],this.height=_[1])}toPhysical(_){return new $a(this.width*_,this.height*_)}[fs](){return{width:this.width,height:this.height}}toJSON(){return this[fs]()}}class $a{constructor(..._){this.type="Physical",_.length===1?"Physical"in _[0]?(this.width=_[0].Physical.width,this.height=_[0].Physical.height):(this.width=_[0].width,this.height=_[0].height):(this.width=_[0],this.height=_[1])}toLogical(_){return new Tm(this.width/_,this.height/_)}[fs](){return{width:this.width,height:this.height}}toJSON(){return this[fs]()}}class hr{constructor(_){this.size=_}toLogical(_){return this.size instanceof Tm?this.size:this.size.toLogical(_)}toPhysical(_){return this.size instanceof $a?this.size:this.size.toPhysical(_)}[fs](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[fs]()}}class Rm{constructor(..._){this.type="Logical",_.length===1?"Logical"in _[0]?(this.x=_[0].Logical.x,this.y=_[0].Logical.y):(this.x=_[0].x,this.y=_[0].y):(this.x=_[0],this.y=_[1])}toPhysical(_){return new ds(this.x*_,this.y*_)}[fs](){return{x:this.x,y:this.y}}toJSON(){return this[fs]()}}class ds{constructor(..._){this.type="Physical",_.length===1?"Physical"in _[0]?(this.x=_[0].Physical.x,this.y=_[0].Physical.y):(this.x=_[0].x,this.y=_[0].y):(this.x=_[0],this.y=_[1])}toLogical(_){return new Rm(this.x/_,this.y/_)}[fs](){return{x:this.x,y:this.y}}toJSON(){return this[fs]()}}class Ga{constructor(_){this.position=_}toLogical(_){return this.position instanceof Rm?this.position:this.position.toLogical(_)}toPhysical(_){return this.position instanceof ds?this.position:this.position.toPhysical(_)}[fs](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[fs]()}}class Zl extends bg{constructor(_){super(_)}static async new(_,D,E){return fe("plugin:image|new",{rgba:xc(_),width:D,height:E}).then(X=>new Zl(X))}static async fromBytes(_){return fe("plugin:image|from_bytes",{bytes:xc(_)}).then(D=>new Zl(D))}static async fromPath(_){return fe("plugin:image|from_path",{path:_}).then(D=>new Zl(D))}async rgba(){return fe("plugin:image|rgba",{rid:this.rid}).then(_=>new Uint8Array(_))}async size(){return fe("plugin:image|size",{rid:this.rid})}}function xc(f){return f==null?null:typeof f=="string"?f:f instanceof Zl?f.rid:f}var Th;(function(f){f[f.Critical=1]="Critical",f[f.Informational=2]="Informational"})(Th||(Th={}));class p0{constructor(_){this._preventDefault=!1,this.event=_.event,this.id=_.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var X_;(function(f){f.None="none",f.Normal="normal",f.Indeterminate="indeterminate",f.Paused="paused",f.Error="error"})(X_||(X_={}));function jh(){return new Ec(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function yh(){return fe("plugin:window|get_all_windows").then(f=>f.map(_=>new Ec(_,{skip:!0})))}const Sh=["tauri://created","tauri://error"];class Ec{constructor(_,D={}){var E;this.label=_,this.listeners=Object.create(null),D?.skip||fe("plugin:window|create",{options:{...D,parent:typeof D.parent=="string"?D.parent:(E=D.parent)===null||E===void 0?void 0:E.label,label:_}}).then(async()=>this.emit("tauri://created")).catch(async X=>this.emit("tauri://error",X))}static async getByLabel(_){var D;return(D=(await yh()).find(E=>E.label===_))!==null&&D!==void 0?D:null}static getCurrent(){return jh()}static async getAll(){return yh()}static async getFocusedWindow(){for(const _ of await yh())if(await _.isFocused())return _;return null}async listen(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:io(_,D,{target:{kind:"Window",label:this.label}})}async once(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:Lh(_,D,{target:{kind:"Window",label:this.label}})}async emit(_,D){if(Sh.includes(_)){for(const E of this.listeners[_]||[])E({event:_,id:-1,payload:D});return}return Sm(_,D)}async emitTo(_,D,E){if(Sh.includes(D)){for(const X of this.listeners[D]||[])X({event:D,id:-1,payload:E});return}return wm(_,D,E)}_handleTauriEvent(_,D){return Sh.includes(_)?(_ in this.listeners?this.listeners[_].push(D):this.listeners[_]=[D],!0):!1}async scaleFactor(){return fe("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return fe("plugin:window|inner_position",{label:this.label}).then(_=>new ds(_))}async outerPosition(){return fe("plugin:window|outer_position",{label:this.label}).then(_=>new ds(_))}async innerSize(){return fe("plugin:window|inner_size",{label:this.label}).then(_=>new $a(_))}async outerSize(){return fe("plugin:window|outer_size",{label:this.label}).then(_=>new $a(_))}async isFullscreen(){return fe("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return fe("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return fe("plugin:window|is_maximized",{label:this.label})}async isFocused(){return fe("plugin:window|is_focused",{label:this.label})}async isDecorated(){return fe("plugin:window|is_decorated",{label:this.label})}async isResizable(){return fe("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return fe("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return fe("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return fe("plugin:window|is_closable",{label:this.label})}async isVisible(){return fe("plugin:window|is_visible",{label:this.label})}async title(){return fe("plugin:window|title",{label:this.label})}async theme(){return fe("plugin:window|theme",{label:this.label})}async isAlwaysOnTop(){return fe("plugin:window|is_always_on_top",{label:this.label})}async center(){return fe("plugin:window|center",{label:this.label})}async requestUserAttention(_){let D=null;return _&&(_===Th.Critical?D={type:"Critical"}:D={type:"Informational"}),fe("plugin:window|request_user_attention",{label:this.label,value:D})}async setResizable(_){return fe("plugin:window|set_resizable",{label:this.label,value:_})}async setEnabled(_){return fe("plugin:window|set_enabled",{label:this.label,value:_})}async isEnabled(){return fe("plugin:window|is_enabled",{label:this.label})}async setMaximizable(_){return fe("plugin:window|set_maximizable",{label:this.label,value:_})}async setMinimizable(_){return fe("plugin:window|set_minimizable",{label:this.label,value:_})}async setClosable(_){return fe("plugin:window|set_closable",{label:this.label,value:_})}async setTitle(_){return fe("plugin:window|set_title",{label:this.label,value:_})}async maximize(){return fe("plugin:window|maximize",{label:this.label})}async unmaximize(){return fe("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return fe("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return fe("plugin:window|minimize",{label:this.label})}async unminimize(){return fe("plugin:window|unminimize",{label:this.label})}async show(){return fe("plugin:window|show",{label:this.label})}async hide(){return fe("plugin:window|hide",{label:this.label})}async close(){return fe("plugin:window|close",{label:this.label})}async destroy(){return fe("plugin:window|destroy",{label:this.label})}async setDecorations(_){return fe("plugin:window|set_decorations",{label:this.label,value:_})}async setShadow(_){return fe("plugin:window|set_shadow",{label:this.label,value:_})}async setEffects(_){return fe("plugin:window|set_effects",{label:this.label,value:_})}async clearEffects(){return fe("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(_){return fe("plugin:window|set_always_on_top",{label:this.label,value:_})}async setAlwaysOnBottom(_){return fe("plugin:window|set_always_on_bottom",{label:this.label,value:_})}async setContentProtected(_){return fe("plugin:window|set_content_protected",{label:this.label,value:_})}async setSize(_){return fe("plugin:window|set_size",{label:this.label,value:_ instanceof hr?_:new hr(_)})}async setMinSize(_){return fe("plugin:window|set_min_size",{label:this.label,value:_ instanceof hr?_:_?new hr(_):null})}async setMaxSize(_){return fe("plugin:window|set_max_size",{label:this.label,value:_ instanceof hr?_:_?new hr(_):null})}async setSizeConstraints(_){function D(E){return E?{Logical:E}:null}return fe("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:D(_?.minWidth),minHeight:D(_?.minHeight),maxWidth:D(_?.maxWidth),maxHeight:D(_?.maxHeight)}})}async setPosition(_){return fe("plugin:window|set_position",{label:this.label,value:_ instanceof Ga?_:new Ga(_)})}async setFullscreen(_){return fe("plugin:window|set_fullscreen",{label:this.label,value:_})}async setSimpleFullscreen(_){return fe("plugin:window|set_simple_fullscreen",{label:this.label,value:_})}async setFocus(){return fe("plugin:window|set_focus",{label:this.label})}async setFocusable(_){return fe("plugin:window|set_focusable",{label:this.label,value:_})}async setIcon(_){return fe("plugin:window|set_icon",{label:this.label,value:xc(_)})}async setSkipTaskbar(_){return fe("plugin:window|set_skip_taskbar",{label:this.label,value:_})}async setCursorGrab(_){return fe("plugin:window|set_cursor_grab",{label:this.label,value:_})}async setCursorVisible(_){return fe("plugin:window|set_cursor_visible",{label:this.label,value:_})}async setCursorIcon(_){return fe("plugin:window|set_cursor_icon",{label:this.label,value:_})}async setBackgroundColor(_){return fe("plugin:window|set_background_color",{color:_})}async setCursorPosition(_){return fe("plugin:window|set_cursor_position",{label:this.label,value:_ instanceof Ga?_:new Ga(_)})}async setIgnoreCursorEvents(_){return fe("plugin:window|set_ignore_cursor_events",{label:this.label,value:_})}async startDragging(){return fe("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(_){return fe("plugin:window|start_resize_dragging",{label:this.label,value:_})}async setBadgeCount(_){return fe("plugin:window|set_badge_count",{label:this.label,value:_})}async setBadgeLabel(_){return fe("plugin:window|set_badge_label",{label:this.label,value:_})}async setOverlayIcon(_){return fe("plugin:window|set_overlay_icon",{label:this.label,value:_?xc(_):void 0})}async setProgressBar(_){return fe("plugin:window|set_progress_bar",{label:this.label,value:_})}async setVisibleOnAllWorkspaces(_){return fe("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:_})}async setTitleBarStyle(_){return fe("plugin:window|set_title_bar_style",{label:this.label,value:_})}async setTheme(_){return fe("plugin:window|set_theme",{label:this.label,value:_})}async onResized(_){return this.listen(ti.WINDOW_RESIZED,D=>{D.payload=new $a(D.payload),_(D)})}async onMoved(_){return this.listen(ti.WINDOW_MOVED,D=>{D.payload=new ds(D.payload),_(D)})}async onCloseRequested(_){return this.listen(ti.WINDOW_CLOSE_REQUESTED,async D=>{const E=new p0(D);await _(E),E.isPreventDefault()||await this.destroy()})}async onDragDropEvent(_){const D=await this.listen(ti.DRAG_ENTER,q=>{_({...q,payload:{type:"enter",paths:q.payload.paths,position:new ds(q.payload.position)}})}),E=await this.listen(ti.DRAG_OVER,q=>{_({...q,payload:{type:"over",position:new ds(q.payload.position)}})}),X=await this.listen(ti.DRAG_DROP,q=>{_({...q,payload:{type:"drop",paths:q.payload.paths,position:new ds(q.payload.position)}})}),te=await this.listen(ti.DRAG_LEAVE,q=>{_({...q,payload:{type:"leave"}})});return()=>{D(),X(),E(),te()}}async onFocusChanged(_){const D=await this.listen(ti.WINDOW_FOCUS,X=>{_({...X,payload:!0})}),E=await this.listen(ti.WINDOW_BLUR,X=>{_({...X,payload:!1})});return()=>{D(),E()}}async onScaleChanged(_){return this.listen(ti.WINDOW_SCALE_FACTOR_CHANGED,_)}async onThemeChanged(_){return this.listen(ti.WINDOW_THEME_CHANGED,_)}}var Q_;(function(f){f.Disabled="disabled",f.Throttle="throttle",f.Suspend="suspend"})(Q_||(Q_={}));var Z_;(function(f){f.Default="default",f.FluentOverlay="fluentOverlay"})(Z_||(Z_={}));var J_;(function(f){f.AppearanceBased="appearanceBased",f.Light="light",f.Dark="dark",f.MediumLight="mediumLight",f.UltraDark="ultraDark",f.Titlebar="titlebar",f.Selection="selection",f.Menu="menu",f.Popover="popover",f.Sidebar="sidebar",f.HeaderView="headerView",f.Sheet="sheet",f.WindowBackground="windowBackground",f.HudWindow="hudWindow",f.FullScreenUI="fullScreenUI",f.Tooltip="tooltip",f.ContentBackground="contentBackground",f.UnderWindowBackground="underWindowBackground",f.UnderPageBackground="underPageBackground",f.Mica="mica",f.Blur="blur",f.Acrylic="acrylic",f.Tabbed="tabbed",f.TabbedDark="tabbedDark",f.TabbedLight="tabbedLight"})(J_||(J_={}));var em;(function(f){f.FollowsWindowActiveState="followsWindowActiveState",f.Active="active",f.Inactive="inactive"})(em||(em={}));function Mm(){return new Bh(jh(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function tm(){return fe("plugin:webview|get_all_webviews").then(f=>f.map(_=>new Bh(new Ec(_.windowLabel,{skip:!0}),_.label,{skip:!0})))}const wh=["tauri://created","tauri://error"];class Bh{constructor(_,D,E){this.window=_,this.label=D,this.listeners=Object.create(null),E?.skip||fe("plugin:webview|create_webview",{windowLabel:_.label,options:{...E,label:D}}).then(async()=>this.emit("tauri://created")).catch(async X=>this.emit("tauri://error",X))}static async getByLabel(_){var D;return(D=(await tm()).find(E=>E.label===_))!==null&&D!==void 0?D:null}static getCurrent(){return Mm()}static async getAll(){return tm()}async listen(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:io(_,D,{target:{kind:"Webview",label:this.label}})}async once(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:Lh(_,D,{target:{kind:"Webview",label:this.label}})}async emit(_,D){if(wh.includes(_)){for(const E of this.listeners[_]||[])E({event:_,id:-1,payload:D});return}return Sm(_,D)}async emitTo(_,D,E){if(wh.includes(D)){for(const X of this.listeners[D]||[])X({event:D,id:-1,payload:E});return}return wm(_,D,E)}_handleTauriEvent(_,D){return wh.includes(_)?(_ in this.listeners?this.listeners[_].push(D):this.listeners[_]=[D],!0):!1}async position(){return fe("plugin:webview|webview_position",{label:this.label}).then(_=>new ds(_))}async size(){return fe("plugin:webview|webview_size",{label:this.label}).then(_=>new $a(_))}async close(){return fe("plugin:webview|webview_close",{label:this.label})}async setSize(_){return fe("plugin:webview|set_webview_size",{label:this.label,value:_ instanceof hr?_:new hr(_)})}async setPosition(_){return fe("plugin:webview|set_webview_position",{label:this.label,value:_ instanceof Ga?_:new Ga(_)})}async setFocus(){return fe("plugin:webview|set_webview_focus",{label:this.label})}async setAutoResize(_){return fe("plugin:webview|set_webview_auto_resize",{label:this.label,value:_})}async hide(){return fe("plugin:webview|webview_hide",{label:this.label})}async show(){return fe("plugin:webview|webview_show",{label:this.label})}async setZoom(_){return fe("plugin:webview|set_webview_zoom",{label:this.label,value:_})}async reparent(_){return fe("plugin:webview|reparent",{label:this.label,window:typeof _=="string"?_:_.label})}async clearAllBrowsingData(){return fe("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(_){return fe("plugin:webview|set_webview_background_color",{color:_})}async onDragDropEvent(_){const D=await this.listen(ti.DRAG_ENTER,q=>{_({...q,payload:{type:"enter",paths:q.payload.paths,position:new ds(q.payload.position)}})}),E=await this.listen(ti.DRAG_OVER,q=>{_({...q,payload:{type:"over",position:new ds(q.payload.position)}})}),X=await this.listen(ti.DRAG_DROP,q=>{_({...q,payload:{type:"drop",paths:q.payload.paths,position:new ds(q.payload.position)}})}),te=await this.listen(ti.DRAG_LEAVE,q=>{_({...q,payload:{type:"leave"}})});return()=>{D(),X(),E(),te()}}}function v0(){const f=Mm();return new Va(f.label,{skip:!0})}async function im(){return fe("plugin:window|get_all_windows").then(f=>f.map(_=>new Va(_,{skip:!0})))}class Va{constructor(_,D={}){var E;this.label=_,this.listeners=Object.create(null),D?.skip||fe("plugin:webview|create_webview_window",{options:{...D,parent:typeof D.parent=="string"?D.parent:(E=D.parent)===null||E===void 0?void 0:E.label,label:_}}).then(async()=>this.emit("tauri://created")).catch(async X=>this.emit("tauri://error",X))}static async getByLabel(_){var D;const E=(D=(await im()).find(X=>X.label===_))!==null&&D!==void 0?D:null;return E?new Va(E.label,{skip:!0}):null}static getCurrent(){return v0()}static async getAll(){return im()}async listen(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:io(_,D,{target:{kind:"WebviewWindow",label:this.label}})}async once(_,D){return this._handleTauriEvent(_,D)?()=>{const E=this.listeners[_];E.splice(E.indexOf(D),1)}:Lh(_,D,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(_){return fe("plugin:window|set_background_color",{color:_}).then(()=>fe("plugin:webview|set_webview_background_color",{color:_}))}}g0(Va,[Ec,Bh]);function g0(f,_){(Array.isArray(_)?_:[_]).forEach(D=>{Object.getOwnPropertyNames(D.prototype).forEach(E=>{var X;typeof f.prototype=="object"&&f.prototype&&E in f.prototype||Object.defineProperty(f.prototype,E,(X=Object.getOwnPropertyDescriptor(D.prototype,E))!==null&&X!==void 0?X:Object.create(null))})})}async function Sc(f,_){await fe("plugin:opener|open_url",{url:f,with:_})}async function b0(){return fe("settings_get")}async function Pa(f){await fe("settings_set",{next:f})}async function $s(f){return fe("provider_key_status",{provider:f})}async function y0(f){await fe("provider_key_set",{provider:f.provider,apiKey:f.apiKey,encryptionPassword:f.encryptionPassword??null})}async function S0(f){return fe("ai_chat",{messages:f.messages,encryptionPassword:f.encryptionPassword??null,thinking:f.thinking??null})}async function w0(f){return fe("provider_key_clear",{provider:f})}async function x0(){return fe("auth_begin_login")}async function xh(f){return fe("auth_wait_login",{state:f})}async function C0(){return fe("auth_get_profile")}async function E0(){return fe("auth_logout")}async function Fa(){return fe("auth_get_credits")}async function k0(f){return fe("debug_gemini_end_to_end",{apiKey:f})}async function A0(){return fe("workspace_get")}async function sm(){return fe("workspace_pick_folder")}async function D0(){return fe("workspace_pick_file")}async function Ia(f){return fe("workspace_set",{root:f})}async function T0(f){return fe("workspace_list_dir",{relDir:f??null})}async function R0(f){return fe("workspace_list_files",{maxFiles:f})}async function qa(f){return fe("workspace_read_file",{relPath:f})}async function hs(f,_){await fe("workspace_write_file",{relPath:f,contents:_})}async function M0(f){await fe("workspace_create_dir",{relPath:f})}async function Ch(f){await fe("workspace_delete",{relPath:f})}async function nm(f,_){await fe("workspace_rename",{fromRel:f,toRel:_})}async function O0(f,_){return fe("workspace_search",{query:f,maxResults:_})}async function L0(f){return fe("terminal_start",{cols:f.cols,rows:f.rows,cwd:f.cwd??null})}async function rm(f){await fe("terminal_write",{id:f.id,data:f.data})}async function j0(f){await fe("terminal_resize",{id:f.id,cols:f.cols,rows:f.rows})}async function B0(f){await fe("terminal_kill",{id:f.id})}function gc(f,_,D){return Math.max(_,Math.min(D,f))}function N0(f){const _=Math.max(0,Date.now()-f),D=Math.floor(_/1e3);if(D<60)return"now";const E=Math.floor(D/60);if(E<60)return`${E}m`;const X=Math.floor(E/60);if(X<24)return`${X}h`;const te=Math.floor(X/24);if(te<7)return`${te}d`;const q=Math.floor(te/7);if(q<4)return`${q}w`;const h=Math.floor(te/30);return h<12?`${h}mo`:`${Math.floor(te/365)}y`}function H0(f){const D=(f.split(`
`)[0]?.trim()??"").replace(/\s+/g," ").replace(/[\[\]{}<>`]/g,"").trim();return D?D.length>34?`${D.slice(0,34).trim()}`:D:"Chat"}function z0(f){return f.role==="user"||f.role==="assistant"}function am(f){const _=f.trim();return _?!!(_.length>800||_.includes("<!DOCTYPE html")||_.includes("<html")||_.includes("</div>")||_.includes("function ")||_.includes("```")||_.startsWith("{")&&_.includes('"edits"')):!1}function U0(f){const _=[],D=/(^|[\s"'`(\[])([A-Za-z0-9_./-]+\.[A-Za-z0-9]{1,8})(?=$|[\s"'`),.:;!?\]])/g,E=new Set;let X;for(;X=D.exec(f);){const te=(X[2]??"").trim();if(!te||te.includes("://"))continue;const q=te.replace(/^\.\//,"");q.includes(".")&&(q.length>140||E.has(q)||(E.add(q),_.push(q)))}return _}function P0(f){const _=f.trim().toLowerCase();return _?!!(/\brm\b/.test(_)&&/\s-\w*r\w*f\b/.test(_)||/\bmkfs\b/.test(_)||/\bdd\b/.test(_)&&/\bif=\b/.test(_)||/\bshutdown\b|\breboot\b|\bpoweroff\b/.test(_)||_.includes(":(){")&&_.includes("};:")):!1}function eo(f){return f.replace(/\r\n/g,`
`).split(`
`)}function lm(f){return f.replace(/\x1b\[[0-9;?]*[ -/]*[@-~]/g,"").replace(/\x1b\][^\x07]*(?:\x07|\x1b\\)/g,"").replace(/\r/g,"")}function F0(f){const _=eo(f),D=[];let E=0;const X=te=>{const q=te.match(/^(\d+)(?:,(\d+))?$/);return q?{start:Number(q[1]),count:q[2]?Number(q[2]):1}:{start:0,count:0}};for(;E<_.length;){const q=_[E].match(/^@@\s+-(\d+(?:,\d+)?)\s+\+(\d+(?:,\d+)?)\s+@@/);if(!q){E++;continue}const h=X(q[1]),d=X(q[2]),m={oldStart:h.start,oldCount:h.count,newStart:d.start,newCount:d.count,lines:[]};for(E++;E<_.length;){const x=_[E];if(x.startsWith("@@ "))break;if(x.startsWith("--- ")||x.startsWith("+++ ")||x.startsWith("diff ")){E++;continue}const p=x[0],w=x.slice(1);p===" "?m.lines.push({kind:"ctx",text:w}):p==="+"?m.lines.push({kind:"add",text:w}):p==="-"?m.lines.push({kind:"del",text:w}):x==="\\ No newline at end of file"||m.lines.push({kind:"ctx",text:x}),E++}D.push(m)}return D}function I0(f,_,D,E){if(!_.length)return Math.max(D,Math.min(E,f.length));const X=f.length-_.length;if(D>X)return null;let te=null,q=1/0;for(let h=D;h<=X;h++){let d=!0;for(let x=0;x<_.length;x++)if(f[h+x]!==_[x]){d=!1;break}if(!d)continue;const m=Math.abs(h-E);if(m<q&&(q=m,te=h,m===0))break}return te}function om(f,_){const D=F0(_);if(!D.length)return{ok:!1,error:"Patch has no hunks"};const E=eo(f),X=[];let te=0;for(const q of D){const h=Math.max(0,q.oldStart-1),d=q.lines.filter(x=>x.kind==="ctx"||x.kind==="del").map(x=>x.text),m=I0(E,d,te,h);if(m===null)return{ok:!1,error:`Failed to locate hunk context in file (starting near line ${h+1}).`};if(m<te)return{ok:!1,error:"Patch hunk overlaps previous hunk"};X.push(...E.slice(te,m)),te=m;for(const x of q.lines)if(x.kind==="ctx"){if(E[te]!==x.text)return{ok:!1,error:`Context mismatch at line ${te+1}: expected '${x.text}', got '${E[te]??"<eof>"}'`};X.push(E[te]),te++}else if(x.kind==="del"){if(E[te]!==x.text)return{ok:!1,error:`Delete mismatch at line ${te+1}: expected '${x.text}', got '${E[te]??"<eof>"}'`};te++}else x.kind==="add"&&X.push(x.text)}return X.push(...E.slice(te)),{ok:!0,text:X.join(`
`)}}function bc(f){const _=f.trim();return _==="/dev/null"?_:_.startsWith("a/")||_.startsWith("b/")?_.slice(2):_}function cm(f){const _=eo(f),D=[];let E=[];for(const te of _){if(te.startsWith("diff --git ")){E.length&&D.push(E),E=[te];continue}E.length&&E.push(te)}E.length&&D.push(E);const X=[];for(const te of D){const q=te.join(`
`);let h=null,d=null,m=null,x=null;for(const k of te)k.startsWith("rename from ")&&(h=bc(k.slice(12))),k.startsWith("rename to ")&&(d=bc(k.slice(10))),k.startsWith("--- ")&&(m=bc(k.slice(4))),k.startsWith("+++ ")&&(x=bc(k.slice(4)));const p=x==="/dev/null"||te.some(k=>k.startsWith("deleted file mode")),w=m==="/dev/null"||te.some(k=>k.startsWith("new file mode"));if(h&&d){X.push({op:"rename",from:h,to:d}),q.includes("@@ ")&&X.push({op:"patch",path:d,content:q});continue}const T=(x&&x!=="/dev/null"?x:m&&m!=="/dev/null"?m:null)??null;if(T){if(p){X.push({op:"delete",path:T});continue}q.includes("@@ ")?X.push({op:"patch",path:T,content:q}):w&&X.push({op:"write",path:T,content:""})}}return X}function q0(f,_){const D=(q,h)=>{let d=String(q??"").trim();if(!d)return d;for(d=d.replace(/\\/g,"/");d.startsWith("./");)d=d.slice(2);const m=(h??"").replace(/\\/g,"/").replace(/\/$/,"");return m&&(d===m||d.startsWith(m+"/"))&&(d=d.slice(m.length),d.startsWith("/")&&(d=d.slice(1))),(d.startsWith("/")||/^[A-Za-z]:\//.test(d)||d.includes(".."))&&(d=Li(d)),d.startsWith("/")&&(d=d.slice(1)),d};let E=!1;const X=q=>{if((q.op||"").toLowerCase()==="rename"){const d=typeof q.from=="string"?q.from:"",m=typeof q.to=="string"?q.to:"",x=typeof q.from=="string"?D(q.from,_):q.from,p=typeof q.to=="string"?D(q.to,_):q.to;return d&&x&&d!==x&&(E=!0),m&&p&&m!==p&&(E=!0),{...q,from:x,to:p}}if(typeof q.path=="string"){const d=q.path,m=D(d,_);return d!==m&&(E=!0),{...q,path:m}}return q},te=[];for(const q of f){if((q.op||"").toLowerCase()==="patch"){const d=String(q.content??""),m=d.includes("diff --git ")&&d.includes("@@ ");if((!q.path||!String(q.path).trim())&&m){for(const p of cm(d))te.push(X(p));continue}if(m&&d.includes(`
diff --git `)){for(const p of cm(d))te.push(X(p));continue}}te.push(X(q))}return{edits:te,didSanitize:E}}function W0(f,_){const D=eo(f),E=eo(_),X=D.length,te=E.length,q=X+te,h=new Map;h.set(1,0);const d=[];for(let m=0;m<=q;m++){const x=new Map;for(let p=-m;p<=m;p+=2){let w;p===-m||p!==m&&(h.get(p-1)??0)<(h.get(p+1)??0)?w=h.get(p+1)??0:w=(h.get(p-1)??0)+1;let T=w-p;for(;w<X&&T<te&&D[w]===E[T];)w++,T++;if(x.set(p,w),w>=X&&T>=te){d.push(x);const k=[];let C=X,a=te;for(let u=d.length-1;u>=0;u--){const l=d[u],o=C-a;let g;o===-u||o!==u&&(l.get(o-1)??0)<(l.get(o+1)??0)?g=o+1:g=o-1;const y=l.get(g)??0,R=y-g;for(;C>y&&a>R;)k.push({type:"ctx",line:D[C-1]}),C--,a--;if(u===0)break;C===y?(k.push({type:"add",line:E[a-1]}),a--):(k.push({type:"del",line:D[C-1]}),C--)}return k.reverse(),k}}d.push(x),h.clear();for(const[p,w]of x.entries())h.set(p,w)}return[]}function Eh(f){let _=0,D=0;for(const E of f){const X=E.before??"",te=E.after??"",q=W0(X,te);for(const h of q)h.type==="add"&&_++,h.type==="del"&&D++}return{files:f.length,added:_,removed:D}}function K0(f){const _=f.trim();if(!_)return null;const D=h=>{try{return JSON.parse(h)}catch{return null}},X=D(_)??(()=>{let h=0,d=-1,m=!1,x=!1;for(let p=0;p<_.length;p++){const w=_[p];if(m){if(x){x=!1;continue}if(w==="\\"){x=!0;continue}w==='"'&&(m=!1);continue}if(w==='"'){m=!0;continue}if(w==="{"){h===0&&(d=p),h++;continue}if(w==="}"&&(h--,h===0&&d>=0))return D(_.slice(d,p+1))}return null})(),te=h=>{const d=h.indexOf('"edits"');if(d<0)return null;const m=h.slice(d),x=m.indexOf("[");if(x<0)return null;const p=m.slice(x);let w=0,T=!1,k=!1;for(let C=0;C<p.length;C++){const a=p[C];if(T){if(k){k=!1;continue}if(a==="\\"){k=!0;continue}a==='"'&&(T=!1);continue}if(a==='"'){T=!0;continue}if(a==="["){w++;continue}if(a==="]"&&(w--,w===0)){const u=p.slice(0,C+1),l=D(u);return Array.isArray(l)?l:null}}return null};if(X&&typeof X=="object"){const h=X;if(Array.isArray(h.edits)){const d=h.edits,m=(typeof h.assistant_message=="string"?h.assistant_message:null)??(typeof h.summary=="string"?h.summary:null)??"Proposed changes are ready.";return{message:String(m).trim(),edits:d}}}const q=te(_);return q&&q.length?{message:"Proposed changes are ready.",edits:q}:null}function Je(){return c.jsx("div",{className:"my-1 h-px bg-border"})}function et(f){return f.checked?c.jsx("span",{className:"text-[11px] text-muted",children:""}):null}function ue(f){return c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs text-text hover:bg-bg",onClick:()=>{f.onClick?.(),f.keepOpen||window.dispatchEvent(new Event("pompora:menubar-close"))},onMouseEnter:f.onMouseEnter,onMouseLeave:f.onMouseLeave,children:[c.jsx("span",{className:"flex min-w-0 items-center gap-2",children:c.jsx("span",{className:"truncate",children:f.label})}),c.jsxs("span",{className:"flex items-center gap-2 text-[11px] text-muted",children:[f.shortcut?c.jsx("span",{className:"whitespace-nowrap",children:f.shortcut}):null,f.right??null]})]})}function Li(f){const D=f.replace(/\\/g,"/").split("/").filter(Boolean);return D[D.length-1]??f}function um(f){const _=f.replace(/\\/g,"/"),D=_.lastIndexOf("/");return D<=0?"/":_.slice(0,D)}function Vl(f){const _=f.toLowerCase(),D=_.includes(".")?_.split(".").pop()??"":"";return D==="ts"||D==="tsx"?"typescript":D==="js"||D==="jsx"?"javascript":D==="json"?"json":D==="css"?"css":D==="html"?"html":D==="md"?"markdown":D==="rs"?"rust":D==="toml"?"toml":D==="yaml"||D==="yml"?"yaml":"plaintext"}function G0(f){const _=f.toLowerCase();return _.endsWith(".json")?Wg:_.endsWith(".ts")||_.endsWith(".tsx")||_.endsWith(".js")||_.endsWith(".jsx")?Ig:Em}function Y0(){const f="pompora.chat_sessions.v1",_="pompora.terminal_run_policy.v1",[D,E]=z.useState("explorer"),[X,te]=z.useState(!1),[q,h]=z.useState(""),[d,m]=z.useState(0),[x,p]=z.useState(!1),[w,T]=z.useState(""),[k,C]=z.useState(0),[a,u]=z.useState(null),[l,o]=z.useState([]),[g,y]=z.useState(!1),[R,L]=z.useState(!1),[b,M]=z.useState(""),[U,V]=z.useState(()=>{try{return window.localStorage.getItem(_)==="always"?"always":"ask"}catch{return"ask"}}),[I,$]=z.useState(null);z.useEffect(()=>{try{window.localStorage.setItem(_,U)}catch{}},[_,U]),z.useEffect(()=>{if(!I)return;const v=A=>{const H=A.target;H&&(H.closest("[data-run-menu-root]")||$(null))};return window.addEventListener("mousedown",v),()=>window.removeEventListener("mousedown",v)},[I]);const[Q,se]=z.useState({theme:"dark",offline_mode:!1,active_provider:null,pompora_thinking:null,workspace_root:null,recent_workspaces:[]}),[K,J]=z.useState(!1),[j,F]=z.useState(!1),[W,O]=z.useState(!1),[P,ae]=z.useState({root:null,recent:[]}),[ve,be]=z.useState(!1),[Te,B]=z.useState(!1),[ie,ce]=z.useState(!1),[pe,Oe]=z.useState(!1),[Ee,Ne]=z.useState(!1),[lt,Xe]=z.useState(!1),[ji,je]=z.useState(!1),[_s,ft]=z.useState(null),[pi,$e]=z.useState(null),[Ms,ii]=z.useState(!1),yt=z.useCallback(()=>{be(!1),B(!1),ce(!1),Oe(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null)},[]),Mt=ve||ie||pe||Ee||lt||ji;z.useEffect(()=>{const v=()=>yt();return window.addEventListener("pompora:menubar-close",v),()=>window.removeEventListener("pompora:menubar-close",v)},[yt]);const[Bi,Vs]=z.useState([]),[si,fr]=z.useState(1),[ni,ms]=z.useState({}),[it,Ji]=z.useState(new Set),[st,ri]=z.useState(null),[mt,ot]=z.useState([]),[vi,Ct]=z.useState(null),[An,Pr]=z.useState(""),[_r,es]=z.useState([]),[Fr,Dn]=z.useState(!1),[Ir,qr]=z.useState(null),[Os,Xt]=z.useState(null),[Tn,so]=z.useState(""),[mr,no]=z.useState(""),[Xa,gi]=z.useState(null),[pr,ro]=z.useState({}),[Ls,St]=z.useState(!1),[Kt,js]=z.useState(!1),[Qa,Za]=z.useState(!1),[kc,Wr]=z.useState(null),[nt,Rn]=z.useState(null),[Ni,Hi]=z.useState(null),[ts,zi]=z.useState(!1),[Dt,ps]=z.useState(!1),Ja=z.useRef(`${Date.now()}-${Math.random().toString(16).slice(2)}`),[Bs,Xs]=z.useState(""),[Qt,Qs]=z.useState(()=>{try{const A=localStorage.getItem(f);if(A){const H=JSON.parse(A);if(Array.isArray(H)){const Y=Date.now(),oe=H.filter(de=>de&&typeof de.id=="string").map(de=>({id:String(de.id),title:typeof de.title=="string"?de.title:"Chat",createdAt:typeof de.createdAt=="number"?de.createdAt:Y,updatedAt:typeof de.updatedAt=="number"?de.updatedAt:Y,messages:Array.isArray(de.messages)?de.messages:[],draft:typeof de.draft=="string"?de.draft:"",changeSet:de.changeSet??null})).slice(0,200);if(oe.length)return oe}}}catch{}const v=Date.now();return[{id:Ja.current,title:"Chat 1",createdAt:v,updatedAt:v,messages:[],draft:"",changeSet:null}]}),[Zt,Kr]=z.useState(()=>Qt[0]?.id??Ja.current),[vr,Mn]=z.useState(!1),[ai,Ft]=z.useState(!1),[On,gr]=z.useState(!1),Gr="pompora.splash_skip.v1",[Ln,jn]=z.useState(!1),[el,di]=z.useState(!1),[Yr,$r]=z.useState(!1),[tl,Ns]=z.useState(!1),[il,Zs]=z.useState(!1),[Hs,Ac]=z.useState(340),[Vr,ao]=z.useState(300),[Js,Xr]=z.useState(!1),[sl,Qr]=z.useState(240),[li,en]=z.useState("terminal"),[br,zs]=z.useState(!1),[vs,Us]=z.useState(!1),Bn=z.useCallback(v=>{if(v instanceof Error)return v.message||String(v);if(typeof v=="string")return v;if(v===null)return"<null>";if(v===void 0)return"<undefined>";try{const A=JSON.stringify(v);return A&&A!=="{}"?A:String(v)}catch{return String(v)}},[]),nl=z.useMemo(()=>Qt.some(v=>v.messages.some(A=>A.role==="user")),[Qt]),Nn=z.useRef(!1);z.useEffect(()=>{if(Nn.current)return;Nn.current=!0;const v=Date.now(),A=`${v}-${Math.random().toString(16).slice(2)}`;Qs(H=>[...H,{id:A,title:"Chat",createdAt:v,updatedAt:v,messages:[],draft:"",changeSet:null}]),Kr(A)},[]),z.useEffect(()=>{Qt.length&&(Qt.some(v=>v.id===Zt)||Kr(Qt[0].id))},[Zt,Qt]),z.useEffect(()=>{const v=window.setTimeout(()=>{try{localStorage.setItem(f,JSON.stringify(Qt))}catch{}},250);return()=>window.clearTimeout(v)},[Qt]);const oi=z.useRef(null),Zr=z.useRef(null),Ui=z.useCallback(()=>{di(!0),$r(!1),oi.current&&window.clearTimeout(oi.current),oi.current=window.setTimeout(()=>{jn(!1),di(!1),oi.current=null},520)},[]);z.useEffect(()=>()=>{oi.current&&window.clearTimeout(oi.current)},[]),z.useEffect(()=>{try{localStorage.getItem(Gr)!=="1"&&jn(!0)}catch{jn(!0)}},[]),z.useEffect(()=>{if(!Ln)return;Ns(!1),Zs(!1);const v=Zr.current;if(!v)return;try{v.load();const H=v.play();H&&typeof H.catch=="function"&&H.catch(()=>{Zs(!0)})}catch{Zs(!0)}const A=window.setTimeout(()=>{try{v.readyState>=2&&v.videoWidth>0&&v.videoHeight>0||Zs(!0)}catch{Zs(!0)}},1200);return()=>window.clearTimeout(A)},[Ln]),z.useEffect(()=>{if(!Ln||el)return;const v=window.setTimeout(()=>{Ui()},12e3);return()=>window.clearTimeout(v)},[Ui,el,Ln]);const gs=z.useCallback(()=>{Ui()},[Ui]),rl=z.useCallback(()=>{try{localStorage.setItem(Gr,"1")}catch{}Ui()},[Ui]),[yr]=z.useState([]),ze=z.useMemo(()=>Qt.find(A=>A.id===Zt)??Qt[0],[Zt,Qt]),is=z.useRef([]),Sr=z.useRef(null),Jr=z.useRef(null),Et=z.useRef(null),ss=z.useRef(null),tn=z.useRef(null),Ps=z.useRef(null),wr=z.useRef(null),ea=z.useRef(null),sn=z.useRef(null),Hn=z.useRef([]),Fs=z.useRef(null),al=z.useRef(""),ns=z.useRef(null),bi=z.useRef(null),ta=z.useRef(null),Is=z.useRef(null),nn=z.useRef(null),rn=z.useRef(null),zn=z.useRef(null),ia=z.useRef(null),Dc=z.useMemo(()=>{const v=["52px",`minmax(220px, ${Vr}px)`,"minmax(520px, 1fr)"];return On&&v.push(`minmax(280px, ${Hs}px)`),v.join(" ")},[Hs,Vr,On]),lo=z.useMemo(()=>{const v=Qt.map(H=>{const Y=H.title.match(/\bChat\s+(\d+)\b/i);return Y?Number(Y[1]):null}).filter(H=>typeof H=="number"&&Number.isFinite(H));return`Chat ${(v.length?Math.max(...v):0)+1}`},[Qt]),oo=z.useCallback(v=>{Qs(A=>A.map(H=>H.id===Zt?{...H,title:v,updatedAt:Date.now()}:H))},[Zt]),xr=z.useCallback(v=>{Qs(A=>A.map(H=>H.id===Zt?{...H,draft:v}:H))},[Zt]),Ve=z.useCallback(v=>{Qs(A=>A.map(H=>{if(H.id!==Zt)return H;const Y=typeof v=="function"?v(H.messages):v;return{...H,messages:Y,updatedAt:Date.now()}}))},[Zt]),ll=z.useCallback(v=>{const A=v.trim();A&&al.current!==A&&(al.current=A,Hn.current.push(A),!Fs.current&&(Fs.current=window.setInterval(()=>{const H=Hn.current.shift();if(!H){Fs.current&&window.clearInterval(Fs.current),Fs.current=null;return}Ve(Y=>[...Y,{role:"meta",content:H}])},120)))},[Ve]),sa=z.useCallback(async v=>{const A=(is.current??[]).find(we=>we.id===v);if(!A?.run)return;const H=A.run.cmd,Y=Array.isArray(A.run.tail)?A.run.tail.join(`
`):"",oe=(A.run.error??"").trim(),de=`The following terminal command failed:

${H}

`+(oe?`Error summary:
${oe}

`:"")+(Y?`Terminal output (tail):
${Y}

`:"")+"Fix the issue and propose the minimal next terminal commands to resolve it. Return JSON edits.";xr(de),window.setTimeout(()=>{ea.current?.()},0)},[xr]),yi=z.useCallback(v=>{Qs(A=>A.map(H=>H.id===Zt?{...H,changeSet:v,updatedAt:Date.now()}:H))},[Zt]);z.useEffect(()=>{const v=H=>{if(ss.current){const{startX:Y,startW:oe}=ss.current,de=Math.max(280,Math.min(620,Math.floor(window.innerWidth*.6))),we=gc(oe+(Y-H.clientX),280,de);Ac(we)}if(tn.current){const{startX:Y,startW:oe}=tn.current,de=Math.max(280,Math.min(520,Math.floor(window.innerWidth*.45))),we=gc(oe+(H.clientX-Y),220,de);ao(we)}if(Ps.current){const{startY:Y,startH:oe}=Ps.current,de=Math.max(160,Math.min(520,Math.floor(window.innerHeight*.7))),we=gc(oe+(Y-H.clientY),160,de);Qr(we)}},A=()=>{ss.current=null,tn.current=null,Ps.current=null};return window.addEventListener("mousemove",v),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",A)}},[]);const qs=z.useCallback(async()=>{if(bi.current&&ns.current)return;if(zn.current)return zn.current;const v=(async()=>{const A=Is.current;if(!A)return;A.innerHTML="";const H=new Sg.Terminal({fontSize:12,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',cursorBlink:!0,cursorStyle:"bar",cursorWidth:2,lineHeight:1.15,scrollback:8e3,convertEol:!0,theme:{background:"rgb(12, 12, 12)",foreground:"rgb(244, 244, 245)",cursor:"rgb(244, 244, 245)",selectionBackground:"rgba(112, 163, 255, 0.25)"}}),Y=new xg.FitAddon;if(H.loadAddon(Y),H.open(A),Y.fit(),bi.current=H,ta.current=Y,nn.current){try{nn.current()}catch{}nn.current=null}const{cols:oe,rows:de}=H,we=P.root??Q.workspace_root??null,Ae=await L0({cols:oe,rows:de,cwd:we});ns.current=Ae,ia.current=we,H.onData(Re=>{const Se=ns.current;Se&&rm({id:Se,data:Re})}),nn.current=await io("terminal:data",Re=>{const Se=ns.current;if(!Se||Re.payload.id!==Se)return;bi.current?.write(Re.payload.data);const Ce=rn.current;if(!Ce||Ce.id!==Se)return;const xe=Date.now();if(Ce.lastDataAt=xe,Ce.buffer+=Re.payload.data,xe-Ce.lastFlushAt<220)return;Ce.lastFlushAt=xe;const Fe=Ce.buffer.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);Ce.buffer=Fe.pop()??"";for(const _t of Fe){if(Ce.emitted>=Ce.maxEmitted)break;const Ie=lm(_t).trimEnd();Ie.trim()&&(Ce.emitted+=1,Ce.emit(Ie))}})})();return zn.current=v.catch(A=>{try{bi.current?.dispose()}catch{}bi.current=null,ta.current=null,ns.current=null;const H=Is.current;throw H&&(H.innerHTML=""),A}).finally(()=>{zn.current=null}),zn.current},[Q.workspace_root,P.root]),Ws=z.useCallback(()=>{const v=bi.current,A=ns.current,H=ta.current;!v||!A||!H||(H.fit(),j0({id:A,cols:v.cols,rows:v.rows}))},[]);z.useEffect(()=>{if(!Js||li!=="terminal")return;qs();const v=Is.current;if(!v)return;const A=new ResizeObserver(()=>Ws());return A.observe(v),()=>A.disconnect()},[qs,Js,li,Ws,sl]);const an=z.useCallback(async()=>{Xr(!1);const v=ns.current;if(ns.current=null,ia.current=null,zn.current=null,rn.current=null,nn.current){try{nn.current()}catch{}nn.current=null}try{v&&await B0({id:v})}catch{}try{bi.current?.dispose()}catch{}bi.current=null,ta.current=null;const A=Is.current;A&&(A.innerHTML="")},[]),na=z.useCallback(()=>{if(Js){an();return}en("terminal"),Xr(!0),window.setTimeout(()=>{qs().then(()=>{Ws(),bi.current?.focus()})},0)},[an,qs,Js,Ws]),co=z.useCallback(async(v,A)=>{const H=v.trim();if(!H||P0(H)&&!window.confirm(`The app is about to run a potentially dangerous command:

${H}

Run anyway?`))return;en("terminal"),Xr(!0);const Y=P.root??Q.workspace_root??null;ns.current&&ia.current&&Y&&ia.current!==Y&&(await an(),en("terminal"),Xr(!0));for(let Se=0;Se<30&&!Is.current;Se++)await new Promise(Ce=>window.setTimeout(Ce,50));await qs(),Ws(),window.setTimeout(()=>{try{bi.current?.focus()}catch{}},0);const oe=ns.current;if(!oe)throw new Error("Terminal not available");A?.(`run ${H}`),rn.current={id:oe,startedAt:Date.now(),lastDataAt:Date.now(),lastFlushAt:0,buffer:"",emitted:0,maxEmitted:28,emit:Se=>A?.(`terminal ${Se}`)},await rm({id:oe,data:H+"\r"});const de=Date.now(),we=15e3,Ae=650,Re=350;await new Promise(Se=>{const Ce=window.setInterval(()=>{const xe=Date.now();if(xe-de>we){window.clearInterval(Ce),rn.current=null,Se();return}const Fe=rn.current;if(!Fe||Fe.id!==oe){xe-de>=Re&&(window.clearInterval(Ce),rn.current=null,Se());return}xe-de<Re||xe-Fe.lastDataAt>=Ae&&(window.clearInterval(Ce),rn.current=null,Se())},120)})},[an,qs,Ws,Q.workspace_root,P.root]),uo=z.useCallback(async()=>{u(null),o([]),await sn.current?.(void 0);const v=Array.from(it);for(const A of v)await sn.current?.(A)},[it]),Un=z.useCallback((v,A)=>{const H=`${Date.now()}-${Math.random().toString(16).slice(2)}`;Ve(Y=>[...Y,{id:H,role:"assistant",content:"",kind:"run_request",run:{cmd:v,status:"pending",remaining:A,error:null,tail:null,autoFixRequested:!1}}])},[Ve]),Pn=z.useCallback(async(v,A)=>{A==="always"&&V("always");const H=(is.current??[]).find(Re=>Re.id===v);if(!H?.run||H.kind!=="run_request")return;const Y=H.run.cmd,oe=Array.isArray(H.run.remaining)?H.run.remaining:[];Ve(Re=>Re.map(Se=>Se.id===v?{...Se,run:Se.run?{...Se.run,status:"running"}:Se.run}:Se));const de=[],we=Re=>{const Se=Re.trim();if(Se&&Se.startsWith("terminal ")){const Ce=lm(Se.slice(9));if(!Ce.trim()||/^[]+$/.test(Ce.trim()))return;ll(Ce),de.push(Ce),de.length>80&&de.splice(0,de.length-80);return}};try{await co(Y,we),await uo();const Re=de.join(`
`),Se=/\bnpm\s+err!/i.test(Re)||/\berror\s+enoent\b/i.test(Re)||/\bcommand failed\b/i.test(Re)||/\b(exit code|code)\b\s*[:=]?\s*[1-9]/i.test(Re);if(Ve(Ce=>Ce.map(xe=>xe.id===v?{...xe,run:xe.run?{...xe.run,status:"done"}:xe.run}:xe)),Se){const Ce=de.slice(-20).join(`
`);Ve(_t=>_t.map(Ie=>Ie.id===v?{...Ie,run:Ie.run?{...Ie.run,error:Ce||"Command appears to have failed.",tail:de.slice(-80)}:Ie.run}:Ie)),Ve(_t=>[..._t,{role:"meta",content:"Run failed. Click Fix to ask AI to resolve it."}]),(is.current??[]).find(_t=>_t.id===v)?.run?.autoFixRequested||(Ve(_t=>_t.map(Ie=>Ie.id===v?{...Ie,run:Ie.run?{...Ie.run,autoFixRequested:!0}:Ie.run}:Ie)),window.setTimeout(()=>{sa(v)},250))}else Ve(Ce=>Ce.map(xe=>xe.id===v?{...xe,run:xe.run?{...xe.run,tail:de.slice(-80)}:xe.run}:xe))}catch(Re){ll(`Command failed: ${String(Re)}`),Ve(Se=>Se.map(Ce=>Ce.id===v?{...Ce,run:Ce.run?{...Ce.run,status:"canceled"}:Ce.run}:Ce));return}const Ae=A==="always"||U==="always";if(oe.length){const Re=oe[0],Se=oe.slice(1);Ae?(Un(Re,Se),window.setTimeout(()=>{const Ce=(is.current??[]).slice().reverse().find(xe=>xe.kind==="run_request"&&xe.run?.cmd===Re);Ce?.id&&Pn(Ce.id,"once")},0)):Un(Re,Se)}},[ll,Un,uo,U,co,Ve]),Tc=z.useCallback(v=>{Ve(A=>A.map(H=>H.id===v?{...H,run:H.run?{...H.run,status:"canceled",remaining:[]}:H.run}:H))},[Ve]),ra=z.useCallback(async(v,A,H)=>{if(!v.length)return;if(!P.root)throw new Error("No workspace is open");const Y=[],oe=async Se=>{Se&&await new Promise(Ce=>window.setTimeout(Ce,Se))},de=Se=>{const Ce=Se.match(/\S+\s*/g),xe=Ce?Ce.length:Math.max(1,Math.ceil(Se.length/6)),Fe=Se.length>2e4?18:10,_t=Math.ceil(xe/Fe);return gc(_t*28,240,2400)},we=v.filter(Se=>{const Ce=(Se.op||"").toLowerCase();return(Ce==="write"||Ce==="patch")&&typeof Se.path=="string"});we.length&&we.map(Se=>Se.path).filter(Se=>mt.some(Ce=>Ce.path===Se&&Ce.isDirty));const Ae=new Set,Re=new Set;for(const Se of v){const Ce=(Se.op||"").toLowerCase();if(Ce==="write"){const xe=Se.path?.trim();if(!xe)throw new Error("AI edit op 'write' missing path");A?.(`editing ${xe}`),H?.previewFile&&await H.previewFile(xe),H?.pace&&await oe(de(String(Se.content??"")));let Fe=null;try{Fe=await qa(xe)}catch{Fe=null}Fe&&Fe.length>2e3&&(Se.content??"").length<Fe.length*.3,await hs(xe,Se.content??"");const _t=xe.includes("/")?xe.split("/").slice(0,-1).join("/"):"";Ae.add(_t),u(null),o([]),ot(Ie=>Ie.map(_i=>_i.path===xe?{..._i,content:Se.content??"",isDirty:!1}:_i)),A?.(`write ${xe}`),H?.pace&&await oe(120)}else if(Ce==="patch"){const xe=Se.path?.trim();if(!xe)throw new Error("AI edit op 'patch' missing path");const Fe=String(Se.content??"");let _t="";try{const qt=await qa(xe);_t=typeof qt=="string"?qt:qt.content??""}catch{_t=""}const Ie=om(_t,Fe);if(!Ie.ok)throw new Error(`Failed to apply patch to ${xe}: ${Ie.error}`);A?.(`editing ${xe}`),H?.previewFile&&await H.previewFile(xe),H?.pace&&await oe(de(Ie.text)),await hs(xe,Ie.text);const _i=xe.includes("/")?xe.split("/").slice(0,-1).join("/"):"";Ae.add(_i),u(null),o([]),ot(qt=>qt.map(Nt=>Nt.path===xe?{...Nt,content:Ie.text,isDirty:!1}:Nt)),A?.(`patch ${xe}`),H?.pace&&await oe(120)}else if(Ce==="delete"){const xe=Se.path?.trim();if(!xe)throw new Error("AI edit op 'delete' missing path");await Ch(xe);const Fe=xe.includes("/")?xe.split("/").slice(0,-1).join("/"):"";Ae.add(Fe),u(null),o([]),ot(_t=>_t.filter(Ie=>Ie.path!==xe)),vi===xe&&Ct(null),A?.(`delete ${xe}`),H?.pace&&await oe(160)}else if(Ce==="rename"){const xe=Se.from?.trim(),Fe=Se.to?.trim();if(!xe||!Fe)throw new Error("AI edit op 'rename' missing from/to");await nm(xe,Fe);const _t=xe.includes("/")?xe.split("/").slice(0,-1).join("/"):"",Ie=Fe.includes("/")?Fe.split("/").slice(0,-1).join("/"):"";Ae.add(_t),Ae.add(Ie),u(null),o([]),ot(_i=>_i.map(qt=>qt.path===xe?{...qt,path:Fe,name:Li(Fe),language:Vl(Fe)}:qt)),vi===xe&&Ct(Fe),A?.(`rename ${xe}  ${Fe}`),H?.pace&&await oe(160)}else if(Ce==="run"){const xe=String(Se.content??"").trim();if(!xe)throw new Error("AI edit op 'run' missing command in content");Re.has(xe)||(Re.add(xe),Y.push(xe))}else throw new Error(`Unsupported AI edit op: ${Se.op}`)}await sn.current?.(void 0);for(const Se of Ae)await sn.current?.(Se||void 0);Y.length&&(U==="always"?(Un(Y[0],Y.slice(1)),window.setTimeout(()=>{const Se=(is.current??[]).slice().reverse().find(Ce=>Ce.kind==="run_request"&&Ce.run?.cmd===Y[0]);Se?.id&&Pn(Se.id,"once")},0)):Un(Y[0],Y.slice(1)))},[vi,Un,Pn,U,mt,P.root]),ho=z.useCallback(async v=>{const A=[],H=new Set,Y=async de=>{const we=mt.find(Ae=>Ae.path===de);if(we)return we.content;try{const Ae=await qa(de);return typeof Ae=="string"?Ae:Ae.content??""}catch{return null}};for(const de of v){const we=(de.op||"").toLowerCase();if(we!=="run"){if(we==="write"){const Ae=de.path?.trim();if(!Ae||H.has(`w:${Ae}`))continue;H.add(`w:${Ae}`);const Re=await Y(Ae),Se=typeof de.content=="string"?de.content:"";A.push({kind:"write",path:Ae,before:Re,after:Se})}else if(we==="patch"){const Ae=de.path?.trim();if(!Ae||H.has(`p:${Ae}`))continue;H.add(`p:${Ae}`);const Re=await Y(Ae)??"",Se=String(de.content??""),Ce=om(Re,Se);if(!Ce.ok)throw new Error(`Failed to build changeset patch for ${Ae}: ${Ce.error}`);A.push({kind:"write",path:Ae,before:Re,after:Ce.text})}else if(we==="delete"){const Ae=de.path?.trim();if(!Ae||H.has(`d:${Ae}`))continue;H.add(`d:${Ae}`);const Re=await Y(Ae);A.push({kind:"delete",path:Ae,before:Re,after:null})}else if(we==="rename"){const Ae=de.from?.trim(),Re=de.to?.trim();if(!Ae||!Re||H.has(`r:${Ae}->${Re}`))continue;H.add(`r:${Ae}->${Re}`);const Se=await Y(Ae),Ce=Se;A.push({kind:"rename",path:`${Ae}  ${Re}`,before:Se,after:Ce})}}}const oe=Eh(A);return{id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,edits:v,files:A,stats:oe,applied:!0}},[mt]),_e=z.useCallback(v=>{if(v.kind!=="error")return;const A=`${v.title}: ${v.message}`.trim();A&&Ve(H=>[...H,{role:"meta",content:A}])},[Ve]);z.useEffect(()=>{wr.current=_e},[_e]);const aa=z.useCallback(v=>{const A=v.trim();if(A.includes("Insufficient Balance")||A.includes("status 402")||A.includes("Payment Required"))return{title:"DeepSeek: Payment required",message:"Your DeepSeek API key has insufficient balance. Add credits / enable billing in DeepSeek or switch to another provider."};const H=A.match(/status\s+(\d+)/i),Y=H?Number(H[1]):null;return Y===401||Y===403?{title:"AI: Authorization failed",message:"Your API key is invalid or missing permissions. Re-check the key for the selected provider."}:Y===429?{title:"AI: Rate limited",message:"You are being rate limited. Wait a bit and try again."}:{title:"AI request failed",message:A}},[]),[Si,la]=z.useState(null),bs=z.useRef(null),Cr=z.useRef(null),[oa,Er]=z.useState(null),ke=z.useMemo(()=>vi?mt.find(v=>v.path===vi)??null:null,[vi,mt]),Pi=z.useMemo(()=>{if(!ke)return null;const v=ze.changeSet;return v?v.files.find(H=>H.kind==="write"&&H.path===ke.path)??null:null},[ze.changeSet,ke]),[fo,ca]=z.useState(null),Gt=z.useRef(null),ua=z.useRef("");z.useEffect(()=>()=>{Gt.current&&window.clearInterval(Gt.current),Gt.current=null},[]),z.useEffect(()=>{const v=ze.changeSet?.id??"",A=ke?.path??"",H=typeof Pi?.after=="string"?Pi.after:null;if(!v||!A||H===null){ca(null),ua.current="",Gt.current&&window.clearInterval(Gt.current),Gt.current=null;return}const Y=`${v}:${A}:${H.length}:${H.slice(0,32)}`;if(ua.current===Y)return;if(ua.current=Y,H.length<140){ca(null),Gt.current&&window.clearInterval(Gt.current),Gt.current=null;return}Gt.current&&window.clearInterval(Gt.current),Gt.current=null,ca("");const oe=H.match(/\S+\s*/g)??[H],de=H.length>2e4?18:10;let we=0;Gt.current=window.setInterval(()=>{we=Math.min(oe.length,we+de),ca(oe.slice(0,we).join("")),we>=oe.length&&(Gt.current&&window.clearInterval(Gt.current),Gt.current=null)},28)},[ze.changeSet?.id,ke?.path,Pi?.after]),z.useEffect(()=>{try{const v=window.localStorage.getItem("pompora.recentFiles");if(!v)return;const A=JSON.parse(v);Array.isArray(A)&&Vs(A.filter(H=>typeof H=="string").slice(0,20))}catch{}},[]);const ln=z.useCallback(v=>{const A=v.replace(/\\/g,"/");Vs(H=>{const Y=[A,...H.filter(oe=>oe!==A)].slice(0,20);try{window.localStorage.setItem("pompora.recentFiles",JSON.stringify(Y))}catch{}return Y})},[]),Fi=z.useCallback(()=>{const v=si;fr(Y=>Y+1);const A=`untitled:${Date.now()}:${v}`,H={path:A,name:`Untitled-${v}`,language:"plaintext",content:"",isDirty:!0};ot(Y=>[...Y,H]),Ct(A)},[si]),on=z.useCallback(()=>{try{const v=`main-${Date.now()}`;new Va(v,{title:"Pompora",width:1280,height:800})}catch(v){console.error("New window failed",v),window.alert(`Failed to open new window: ${String(v)}`)}},[]);z.useEffect(()=>{const v=document.documentElement;Q.theme==="light"?v.setAttribute("data-theme","light"):v.removeAttribute("data-theme")},[Q.theme]),z.useEffect(()=>{let v=!1;return Promise.all([b0(),A0()]).then(([A,H])=>{if(v)return;const Y=A.active_provider==="openrouter"?"openai":A.active_provider;se(oe=>({...oe,...A,pompora_thinking:A.pompora_thinking??oe.pompora_thinking??null,workspace_root:A.workspace_root??null,recent_workspaces:A.recent_workspaces??[],active_provider:Y??null})),ae(H)}).catch(()=>{}).finally(()=>{v||J(!0)}),()=>{v=!0}},[]),z.useEffect(()=>{let v=!1;if(gi(null),Xt(null),!!K&&Q.active_provider)return $s(Q.active_provider).then(A=>{v||Xt(A)}).catch(A=>{v||gi(String(A))}),()=>{v=!0}},[K,Q.active_provider]),z.useEffect(()=>{let v=!1;return C0().then(A=>{v||Rn(A)}).catch(()=>{}),()=>{v=!0}},[]),z.useEffect(()=>{if(!nt){Hi(null);return}let v=!1;return Fa().then(A=>{v||Hi(A)}).catch(()=>{}),()=>{v=!0}},[nt]),z.useEffect(()=>{if(!Dt)return;const v=A=>{const H=A.target;H&&(H.closest("[data-account-menu-root]")||ps(!1))};return window.addEventListener("mousedown",v),()=>window.removeEventListener("mousedown",v)},[Dt]);const Rc=z.useMemo(()=>{const v=(nt?.first_name??"").trim(),A=(nt?.last_name??"").trim();if(v&&A)return`${v[0].toUpperCase()}${A[0].toUpperCase()}`;if(v)return v[0].toUpperCase();const H=(nt?.email??"").trim();return H?H[0].toUpperCase():"U"},[nt?.email,nt?.first_name,nt?.last_name]),cn=z.useCallback(async v=>{try{const A=Sc(v);if(await Promise.race([A.then(()=>"ok").catch(()=>"err"),new Promise(Y=>window.setTimeout(()=>Y("timeout"),1500))])==="ok")return!0}catch{}try{return window.open(v,"_blank","noopener,noreferrer"),!0}catch{}return!1},[]),_o=z.useCallback(async()=>{if(!ts){zi(!0);try{await E0(),Rn(null),Hi(null),ps(!1);try{Q.active_provider==="pompora"&&Xt(await $s("pompora"))}catch{}}catch(v){_e({kind:"error",title:"Logout failed",message:String(v)})}finally{zi(!1)}}},[ts,_e,Q.active_provider]),kr=z.useCallback(async v=>{if(!ts){zi(!0);try{const[A,H]=await x0();let Y=A;try{const de=new URL(A),we=de.searchParams.get("redirect")??"",Ae=de.searchParams.get("state")??H,Re=`/desktop/login?redirect=${we}&state=${Ae}`;Y=`https://pompora.dev/${v}?next=${encodeURIComponent(Re)}`}catch{}if(_e({kind:"info",title:"Sign in",message:"Opening browser"}),!await cn(Y)){_e({kind:"error",title:"Could not open browser",message:"Copy the URL and open it manually."});try{window.prompt("Open this URL in your browser:",Y)}catch{}zi(!1),xh(H).then(async de=>{Rn(de);try{const we=await Fa();Hi(we)}catch{}try{Q.active_provider==="pompora"&&Xt(await $s("pompora"))}catch{}_e({kind:"info",title:"Signed in",message:"Connected to your Pompora account."})}).catch(de=>{_e({kind:"error",title:"Sign in failed",message:String(de)})});return}zi(!1),xh(H).then(async de=>{Rn(de);try{const we=await Fa();Hi(we)}catch{}try{Q.active_provider==="pompora"&&Xt(await $s("pompora"))}catch{}_e({kind:"info",title:"Signed in",message:"Connected to your Pompora account."})}).catch(de=>{_e({kind:"error",title:"Sign in failed",message:String(de)})})}catch(A){_e({kind:"error",title:"Sign in failed",message:String(A)})}finally{zi(!1)}}},[Fa,xh,ts,_e,cn,Q.active_provider]);z.useEffect(()=>{Kt&&Q.active_provider&&$s(Q.active_provider).then(v=>{Xt(v)}).catch(v=>{gi(String(v))})},[Kt,Q.active_provider]);const Ii=z.useMemo(()=>[{id:"pompora",label:"Pompora",api:!1},{id:"openai",label:"GPT-4o mini",api:!0},{id:"anthropic",label:"Claude 3.5 Sonnet",api:!0},{id:"gemini",label:"Gemini Flash",api:!0},{id:"deepseek",label:"DeepSeek Chat",api:!0},{id:"groq",label:"Groq Llama",api:!0},{id:"ollama",label:"Ollama",api:!1},{id:"lmstudio",label:"LM Studio",api:!1},{id:"custom",label:"Custom",api:!0}],[]),ha=z.useMemo(()=>{const v=Q.active_provider;if(!v)return"Not configured";if(v==="pompora"){const H=String(Q.pompora_thinking??"slow").toLowerCase();return`Pompora ${H==="reasoning"?"Reasoning":H==="fast"?"Fast":"Slow"}`}return Ii.find(H=>H.id===v)?.label??v},[Ii,Q.active_provider]),mo=z.useMemo(()=>{const v=Q.active_provider;return!v||!Ii.find(Y=>Y.id===v)?.api?!1:pr[v]?.is_configured!==!0},[Ii,pr,Q.active_provider]),Fn=z.useMemo(()=>{const v=Q.active_provider;return v?v==="pompora"?!1:!["ollama","lmstudio"].includes(v):!0},[Q.active_provider]),wi=z.useMemo(()=>{if(Q.offline_mode)return"Offline mode is enabled";const v=Q.active_provider;return v?v==="pompora"?nt?Os?.is_configured!==!0?"Finish signing in to Pompora":null:"Log in to use Pompora AI":Fn&&Os?.is_configured!==!0?"Add an API key in Settings (Ctrl+,)":null:"Pick an AI provider from the model dropdown"},[nt,Os?.is_configured,Fn,Q.active_provider,Q.offline_mode]),ol=z.useMemo(()=>{const v=Ni?.plan||nt?.plan||"starter",A=String(v).toLowerCase().trim();return A==="pro_plus"||A==="proplus"||A==="pro+"?"pro":A==="free"?"starter":A==="starter"||A==="plus"||A==="pro"?A:"starter"},[Ni?.plan,nt?.plan]),po=z.useMemo(()=>ol==="pro"?["slow","fast","reasoning"]:ol==="plus"?["slow","fast"]:["slow"],[ol]),Mc=z.useMemo(()=>new Set(po),[po]),Oc=z.useCallback(async()=>{const v=[...Ii.filter(H=>H.api).map(H=>H.id),"pompora"];if(!v.length)return;const A={};await Promise.all(v.map(async H=>{try{A[H]=await $s(H)}catch{A[H]=null}})),ro(A)},[Ii]),da=z.useMemo(()=>({used:0,total:0,pct:0}),[]),Yt="pompora:settings",qi=z.useCallback(()=>{ot(v=>v.some(A=>A.path===Yt)?v:[...v,{path:Yt,name:"Settings",language:"plaintext",content:"",isDirty:!1}]),Ct(Yt)},[]),[Ks,cl]=z.useState(null),un=z.useCallback((v,A,H="tr")=>{const Y=v.getBoundingClientRect(),oe=10,de=H==="tr"&&Y.right<280?"tl":H,we=Y.top<44?"below":"above",Ae=de==="tr"?Y.right:Y.left,Re=we==="above"?Y.top:Y.bottom,Se=Math.min(window.innerWidth-oe,Math.max(oe,Ae)),Ce=Math.min(window.innerHeight-oe,Math.max(oe,Re));cl({text:A,x:Se,y:Ce,align:de,placement:we})},[]),hn=z.useCallback(()=>cl(null),[]);z.useEffect(()=>{if(!vs)return;const v=A=>{const H=A.target;H&&(H.closest("[data-model-picker-root]")||Us(!1))};return window.addEventListener("mousedown",v),()=>window.removeEventListener("mousedown",v)},[vs]),z.useEffect(()=>{gi(null)},[Q.active_provider]);const ul=z.useMemo(()=>{const v=P.root??Q.workspace_root;return v?Li(v):"No folder"},[Q.workspace_root,P.root]),Lc=z.useMemo(()=>P.root??Q.workspace_root??"",[Q.workspace_root,P.root]),ys=z.useMemo(()=>wi===null,[wi]),Ot=z.useCallback(async v=>{const A=v??"",H=await T0(v),Y=new Set,oe=H.filter(de=>{const we=String(de?.path||"");return!we||Y.has(we)?!1:(Y.add(we),!0)});ms(de=>({...de,[A]:oe}))},[]);z.useEffect(()=>{sn.current=Ot},[Ot]);const In=z.useCallback(v=>{const A=v.includes("/")?v.split("/").slice(0,-1).join("/"):"",H=ni[A];return H?H.find(Y=>Y.path===v)??null:null},[ni]),qn=z.useCallback(v=>v?In(v)?.is_dir?v:v.includes("/")?v.split("/").slice(0,-1).join("/"):"":"",[In]),Bt=z.useCallback(async()=>{ms({}),Ji(new Set),ri(null),P.root&&await Ot(void 0)},[Ot,P.root]),dn=z.useCallback(async()=>{const v=await sm();if(!v)return;window.alert("Multi-root workspace is not implemented yet. Opening the selected folder instead.");const A=await Ia(v);ae(A),se(H=>({...H,workspace_root:A.root,recent_workspaces:A.recent})),ot([]),Ct(null),await Bt()},[Bt]);z.useEffect(()=>{Bt()},[Bt]),z.useEffect(()=>{u(null),o([])},[P.root]),z.useEffect(()=>{is.current=ze.messages},[ze.messages]),z.useEffect(()=>{const v=Sr.current;v&&(v.scrollTop=v.scrollHeight)},[ze.messages.length,vr]),z.useEffect(()=>()=>{Et.current&&window.clearInterval(Et.current)},[]);const fn=z.useCallback((v,A)=>{Ve(H=>{const Y=H.slice(),oe=Y[v];if(!oe||oe.role!=="assistant")return H;const de=oe.rating===A?null:A;return Y[v]={...oe,rating:de},Y})},[Ve]),Ar=z.useCallback((v,A)=>{Et.current&&window.clearInterval(Et.current);const H=A.match(/\S+\s*/g)??[A],Y=A.length>2400?6:A.length>900?4:2,oe=A.length>2400?36:30;let de=0,we="";Et.current=window.setInterval(()=>{de=Math.min(H.length,de+Y);const Ae=H.slice(0,de).join("");Ae!==we&&(we=Ae,Ve(Re=>Re.map(Se=>Se.id===v?{...Se,content:Ae}:Se))),de>=H.length&&(Et.current&&window.clearInterval(Et.current),Et.current=null)},oe)},[Ve]);z.useEffect(()=>{if(!On)return;const v=window.setTimeout(()=>Jr.current?.focus(),0);return()=>window.clearTimeout(v)},[Zt,On]);const kt=z.useCallback(async()=>{try{const v=await sm();if(!v){window.alert("No folder was selected.");return}const A=await Ia(v);ae(A),se(H=>({...H,workspace_root:A.root,recent_workspaces:A.recent})),ot([]),Ct(null),await Bt()}catch(v){console.error("Open folder failed",v),window.alert(`Failed to open folder: ${String(v)}`)}},[Bt]),Wi=z.useCallback(async v=>{const A=await Ia(v);ae(A),se(H=>({...H,workspace_root:A.root,recent_workspaces:A.recent})),ot([]),Ct(null),await Bt()},[Bt]),wt=z.useCallback(async v=>{if(mt.find(oe=>oe.path===v)){Ct(v);return}let H="";try{H=await qa(v)}catch{H=""}const Y={path:v,name:Li(v),language:Vl(v),content:H,isDirty:!1};if(ot(oe=>[...oe,Y]),Ct(v),P.root){const oe=`${P.root.replace(/\\/g,"/").replace(/\/$/,"")}/${v}`;ln(oe)}},[ln,mt,P.root]),$t=z.useMemo(()=>{const v=ze.changeSet;return v?v.files.filter(A=>A.kind==="write"&&typeof A.path=="string"):[]},[ze.changeSet]),[At,ci]=z.useState(null),[vo,go]=z.useState(!1),hl=z.useRef(null);z.useEffect(()=>{const v=ze.changeSet?.id??null;v!==hl.current&&(hl.current=v,go(!1))},[ze.changeSet?.id]),z.useEffect(()=>{if(!ze.changeSet){ci(null);return}if(!$t.length||At&&$t.some(H=>H.path===At))return;const A=$t[0].path;ci(A),wt(A)},[ze.changeSet,$t,wt,At]);const bo=z.useCallback(()=>{ze.changeSet&&(yi(null),ci(null),Ve(v=>[...v,{role:"meta",content:"Accepted all changes."}]))},[ze.changeSet,yi,Ve]),dl=z.useCallback(async()=>{const v=ze.changeSet;if(v){if(!P.root){wr.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}Ft(!0);try{const A=[];for(let H=v.files.length-1;H>=0;H--){const Y=v.files[H];if(Y.kind==="write")Y.before===null?A.push({op:"delete",path:Y.path}):A.push({op:"write",path:Y.path,content:Y.before});else if(Y.kind==="delete")Y.before!==null&&A.push({op:"write",path:Y.path,content:Y.before});else if(Y.kind==="rename"){const oe=Y.path.split("  ");oe.length===2&&A.push({op:"rename",from:oe[1],to:oe[0]})}}await ra(A),yi(null),ci(null),Ve(H=>[...H,{role:"meta",content:"Reverted all changes."}])}catch(A){wr.current?.({kind:"error",title:"Revert failed",message:String(A)})}finally{Ft(!1)}}},[ze.changeSet,ra,yi,Ve,P.root]),xi=z.useCallback(v=>{const A=ze.changeSet;if(!A)return;const H=A.files.filter(oe=>!(oe.kind==="write"&&oe.path===v));if(!H.length){yi(null),ci(null);return}const Y={...A,files:H,stats:Eh(H)};if(yi(Y),!H.some(oe=>oe.kind==="write"&&oe.path===At)){const oe=H.find(de=>de.kind==="write");oe?.kind==="write"&&(ci(oe.path),wt(oe.path))}},[ze.changeSet,wt,At,yi]),Dr=z.useCallback(async v=>{const A=ze.changeSet;if(!A)return;const H=A.files.find(Y=>Y.kind==="write"&&Y.path===v);if(!(!H||H.kind!=="write")){if(!P.root){wr.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}Ft(!0);try{H.before===null?(await Ch(v),ot(de=>de.filter(we=>we.path!==v)),vi===v&&Ct(null)):(await hs(v,H.before),ot(de=>de.map(we=>we.path===v?{...we,content:H.before??"",isDirty:!1}:we)));const Y=A.files.filter(de=>!(de.kind==="write"&&de.path===v));if(!Y.length){yi(null),ci(null);return}const oe={...A,files:Y,stats:Eh(Y)};if(yi(oe),!Y.some(de=>de.kind==="write"&&de.path===At)){const de=Y.find(we=>we.kind==="write");de?.kind==="write"&&(ci(de.path),wt(de.path))}}catch(Y){wr.current?.({kind:"error",title:"Reject failed",message:String(Y)})}finally{Ft(!1)}}},[ze.changeSet,vi,wt,At,yi,P.root]),fi=z.useCallback(async()=>{if(P.root&&!g&&!(a===P.root&&l.length)){y(!0);try{const v=await R0(2e4),A=new Set,H=v.filter(Y=>{const oe=String(Y||"");return!oe||A.has(oe)?!1:(A.add(oe),!0)});o(H),u(P.root)}finally{y(!1)}}},[l.length,a,g,P.root]),Ss=z.useCallback(async()=>{if(!P.root){await kt();return}p(!0),T(""),C(0),fi()},[fi,kt,P.root]),_n=z.useCallback(async()=>{try{const v=await D0();if(!v){window.alert("No file was selected.");return}const A=um(v),H=await Ia(A);ae(H),se(Y=>({...Y,workspace_root:H.root,recent_workspaces:H.recent})),ot([]),Ct(null),await Bt(),await wt(Li(v)),ln(v)}catch(v){console.error("Open file failed",v),window.alert(`Failed to open file: ${String(v)}`)}},[wt,Bt,ln]);z.useEffect(()=>{if(!Ms||!ke||!ke.isDirty||ke.path.startsWith("untitled:"))return;const v=window.setTimeout(()=>{(async()=>{try{await hs(ke.path,ke.content),ot(A=>A.map(H=>H.path===ke.path?{...H,isDirty:!1}:H))}catch(A){console.error("Auto save failed",A)}})()},600);return()=>window.clearTimeout(v)},[ke,Ms]);const fa=z.useCallback(v=>{if(!ke)return;const A=bs.current;if(A){const H=A.getModel(),Y=H?Math.max(1,Math.min(v,H.getLineCount())):Math.max(1,v);A.revealLineInCenter(Y),A.setPosition({lineNumber:Y,column:1}),A.focus();return}qr({path:ke.path,line:Math.max(1,v)})},[ke]),mn=z.useCallback(()=>{ke&&(L(!0),M(""))},[ke]);z.useEffect(()=>{if(!Ir||!ke||ke.path!==Ir.path)return;const v=bs.current;if(!v)return;const A=v.getModel();if(!A)return;const H=Math.max(1,Math.min(Ir.line,A.getLineCount()));v.revealLineInCenter(H),v.setPosition({lineNumber:H,column:1}),v.focus(),qr(null)},[ke,Ir]);const _a=z.useCallback(async()=>{if(!P.root){await kt();return}const v=qn(st),A=window.prompt("New file name");if(!A)return;const H=v?`${v}/${A}`:A;await hs(H,""),await Ot(v||void 0),ri(H),await wt(H)},[qn,wt,kt,Ot,st,P.root]),rs=z.useCallback(async()=>{if(!P.root){await kt();return}const v=qn(st),A=window.prompt("New folder name");if(!A)return;const H=v?`${v}/${A}`:A;await M0(H),await Ot(v||void 0),ri(H)},[qn,kt,Ot,st,P.root]),ma=z.useCallback(async()=>{if(!st)return;const v=Li(st),A=window.prompt("Rename to",v);if(!A||A===v)return;const H=st.includes("/")?st.split("/").slice(0,-1).join("/"):"",Y=H?`${H}/${A}`:A,oe=st;await nm(oe,Y),ot(de=>de.map(we=>{if(we.path===oe)return{...we,path:Y,name:Li(Y)};const Ae=oe.endsWith("/")?oe:`${oe}/`;if(we.path.startsWith(Ae)){const Re=we.path.slice(Ae.length),Se=`${Y}/${Re}`;return{...we,path:Se,name:Li(Se)}}return we})),Ct(de=>{if(!de)return de;if(de===oe)return Y;const we=oe.endsWith("/")?oe:`${oe}/`;if(de.startsWith(we)){const Ae=de.slice(we.length);return`${Y}/${Ae}`}return de}),ri(Y),await Bt()},[Bt,st]),Wn=z.useCallback(async()=>{if(!st||!window.confirm(`Delete '${Li(st)}'?`))return;const A=st;await Ch(A),ot(H=>H.filter(Y=>{if(Y.path===A)return!1;const oe=A.endsWith("/")?A:`${A}/`;return!Y.path.startsWith(oe)})),Ct(H=>{if(!H)return H;if(H===A)return null;const Y=A.endsWith("/")?A:`${A}/`;return H.startsWith(Y)?null:H}),ri(null),await Bt()},[Bt,st]);z.useEffect(()=>{let v=!1;const A=An.trim();if(!A){es([]);return}if(!P.root){es([]);return}Dn(!0);const H=window.setTimeout(()=>{O0(A,200).then(Y=>{v||es(Y)}).catch(()=>{v||es([])}).finally(()=>{v||Dn(!1)})},180);return()=>{v=!0,window.clearTimeout(H)}},[An,P.root]);const ui=z.useCallback(v=>{let A=vi;ot(H=>{const Y=H.find(de=>de.path===v);if(Y?.isDirty&&!window.confirm(`Close '${Y.name}' without saving?`))return H;const oe=H.filter(de=>de.path!==v);return vi===v&&(A=oe.length?oe[oe.length-1].path:null),oe}),Ct(A)},[vi]),Tr=z.useCallback(async()=>{if(ke){if(ke.path.startsWith("untitled:")){if(!P.root&&(await kt(),!P.root))return;const v=window.prompt("Save As (relative path)",ke.name);if(!v)return;const A=v.trim().replace(/\\/g,"/");if(!A)return;await hs(A,ke.content),ot(H=>H.map(Y=>Y.path===ke.path?{...Y,path:A,name:Li(A),language:Vl(A),isDirty:!1}:Y)),Ct(A);return}await hs(ke.path,ke.content),ot(v=>v.map(A=>A.path===ke.path?{...A,isDirty:!1}:A)),await Ot(ke.path.includes("/")?ke.path.split("/").slice(0,-1).join("/"):void 0)}},[ke,kt,Ot,P.root]),It=z.useCallback(async()=>{const v=mt.filter(A=>A.isDirty);for(const A of v){if(A.path.startsWith("untitled:")){Ct(A.path);const H=window.prompt("Save As (relative path)",A.name);if(!H)continue;const Y=H.trim().replace(/\\/g,"/");if(!Y)continue;await hs(Y,A.content),ot(oe=>oe.map(de=>de.path===A.path?{...de,path:Y,name:Li(Y),language:Vl(Y),isDirty:!1}:de)),Ct(Y);continue}await hs(A.path,A.content),ot(H=>H.map(Y=>Y.path===A.path?{...Y,isDirty:!1}:Y))}},[mt]),Rr=z.useCallback(async()=>{if(!ke||!P.root&&(await kt(),!P.root))return;const v=window.prompt("Save As (relative path)",ke.name);if(!v)return;const A=v.trim().replace(/\\/g,"/");A&&(await hs(A,ke.content),ot(H=>{const Y=H.filter(de=>de.path!==ke.path),oe={path:A,name:Li(A),language:Vl(A),content:ke.content,isDirty:!1};return[...Y,oe]}),Ct(A),await Ot(A.includes("/")?A.split("/").slice(0,-1).join("/"):void 0))},[ke,kt,Ot,P.root]),ws=z.useCallback(async()=>{if(!ke)return;if(ke.path.startsWith("untitled:")){if(!window.confirm("Revert will close this untitled file. Continue?"))return;ui(ke.path);return}const v=await qa(ke.path);ot(A=>A.map(H=>H.path===ke.path?{...H,content:v,isDirty:!1}:H))},[ke,ui]),yo=z.useCallback(async()=>{if(!P.root){window.alert("No folder is open. Open a folder first.");return}const v=window.prompt("Save Workspace As (file name)","pompora-workspace.json");if(!v)return;const A=v.trim().replace(/\\/g,"/");if(!A)return;const H=JSON.stringify({folders:[P.root]},null,2);await hs(A,H),await Ot(A.includes("/")?A.split("/").slice(0,-1).join("/"):void 0)},[Ot,P.root]),pa=z.useCallback(async()=>{if(!P.root){window.alert("No folder is open. Open a folder first.");return}const v=window.prompt("Duplicate Workspace As (file name)","pompora-workspace-copy.json");if(!v)return;const A=v.trim().replace(/\\/g,"/");if(!A)return;const H=JSON.stringify({folders:[P.root]},null,2);await hs(A,H),await Ot(A.includes("/")?A.split("/").slice(0,-1).join("/"):void 0)},[Ot,P.root]),xs=z.useCallback(async v=>{const A=v.replace(/\\/g,"/"),H=um(A),Y=await Ia(H);ae(Y),se(oe=>({...oe,workspace_root:Y.root,recent_workspaces:Y.recent})),ot([]),Ct(null),await Bt(),await wt(Li(A)),ln(A)},[wt,Bt,ln]),va=z.useCallback(async()=>{if(!window.confirm("Close folder?"))return;const A=await Ia(null);ae(A),se(H=>({...H,workspace_root:A.root,recent_workspaces:A.recent})),ot([]),Ct(null),ms({}),Ji(new Set),ri(null)},[]),fl=z.useCallback(()=>{try{jh().close()}catch{window.close()}},[]),_l=z.useCallback(()=>{se(v=>{const A={...v,theme:v.theme==="dark"?"light":"dark"};return Pa(A).catch(H=>console.error("Failed to save theme",H)),A})},[]),ml=z.useCallback(async v=>{Xt(null),js(!1),Za(!1);const A={...Q,active_provider:v};se(A);try{await Pa(A),v&&Xt(await $s(v))}catch(H){console.error("Failed to save provider selection",H),gi(String(H))}},[Q]),Ci=z.useCallback(async()=>{if(!j){F(!0);try{await Pa(Q)}catch(v){console.error("Failed to save settings",v),_e({kind:"error",title:"Settings",message:"Failed to save settings"})}finally{F(!1)}}},[j,_e,Q]),Kn=z.useCallback(async()=>{if(W)return;O(!0);const v={...Q,offline_mode:!Q.offline_mode};se(v);try{await Pa(v)}catch(A){console.error("Failed to toggle offline mode",A),_e({kind:"error",title:"Settings",message:"Failed to toggle offline mode"}),se(Q)}finally{O(!1)}},[W,_e,Q]),Gn=z.useCallback(async v=>{const A={...Q,pompora_thinking:v};se(A);try{await Pa(A)}catch(H){console.error("Failed to save pompora thinking",H),_e({kind:"error",title:"Settings",message:`Failed to save thinking mode: ${Bn(H)}`}),se(Q)}},[Bn,_e,Q]),ga=z.useCallback(async v=>{const A=Q,H={...Q,active_provider:"pompora",pompora_thinking:v};se(H);try{await Pa(H);try{Xt(await $s("pompora"))}catch{}}catch(Y){console.error("Failed to select pompora mode",Y),_e({kind:"error",title:"Settings",message:`Failed to save thinking mode: ${Bn(Y)}`}),se(A)}},[Bn,_e,Q]),Mr=z.useCallback(async()=>{if(Q.active_provider&&Q.active_provider!=="pompora"&&Tn.trim()){St(!0),gi(null);try{await y0({provider:Q.active_provider,apiKey:Tn.trim(),encryptionPassword:mr?mr.trim():void 0}),js(!0),setTimeout(()=>js(!1),2e3),Xt(await $s(Q.active_provider))}catch(v){console.error(v),gi(String(v))}finally{St(!1)}}},[Tn,mr,Q.active_provider]),Ei=z.useCallback(async()=>{if(Q.active_provider&&Q.active_provider!=="pompora"){St(!0),gi(null);try{await w0(Q.active_provider),Za(!0),setTimeout(()=>Za(!1),2e3),Xt(await $s(Q.active_provider))}catch(v){console.error(v),gi(String(v))}finally{St(!1)}}},[Q.active_provider]),ki=z.useCallback(async()=>{if(Q.active_provider){St(!0),gi(null),Wr("Running debug test...");try{const v=await k0(Tn.trim());Wr(v)}catch(v){Wr(String(v))}finally{St(!1)}}},[Tn,Q.active_provider]),Ki=z.useCallback(async()=>{const v=ze.draft.trim();if(!v||!Q.active_provider||Q.offline_mode)return;if(wi){_e({kind:"info",title:"Action required",message:wi}),Q.active_provider?qi():Us(!0);return}ze.messages.length===0&&/^Chat\s+\d+$/i.test(ze.title)&&oo(H0(v)),Mn(!0);let A;if(Fn&&Os?.storage==="encryptedfile"){const H=window.prompt("Enter encryption password to use your stored provider key");if(!H){Mn(!1);return}A=H}try{const Y=[...is.current.filter(qe=>qe.role==="user"||qe.role==="assistant"),{role:"user",content:v}];xr(""),Ve([...Y,{role:"meta",content:"Thinking"}]);const oe=P.root?U0(v).slice(0,4):[],de=[],we=[],Ae=qe=>{const pt={role:"meta",content:qe};we.push(pt),Ve(Gi=>[...Gi,pt])};for(const qe of oe)try{const pt=await qa(qe),Gi=12e3,Es=pt.length>Gi;de.push({path:qe,content:Es?pt.slice(0,Gi):pt,truncated:Es}),Ae(`Read ${qe}`)}catch{Ae(`Read ${qe} (failed)`)}const Re=[{role:"system",content:"You are an agentic coding assistant inside an IDE. Before making ANY changes, you must describe what you will do in a short step-by-step plan for the user (2-6 steps). Then return structured edits in JSON with fields: { message: string, edits: AiEditOp[] }. Prefer modern stacks (React + TypeScript + Tailwind/shadcn) unless the user explicitly requests plain HTML/CSS. IMPORTANT: Prefer op='patch' with a unified diff in the 'content' field and keep patches minimal (do NOT replace whole files unless required). Never invent the previous content of a file; only patch lines that exist in the provided file context. You can run terminal commands by returning an edit op: { op: 'run', content: '<command>' }. Use 'run' for scaffolding/install/build/test commands. Avoid destructive commands. Use op='write' only for new files when patching isn't feasible."},...de.length?[{role:"system",content:`Workspace file context (use this exact content for patches; if truncated, request a read of the full file):

`+de.map(qe=>`FILE: ${qe.path}${qe.truncated?" (TRUNCATED)":""}
---
${qe.content}
---`).join(`

`)}]:[],...Y.filter(z0).map(qe=>({role:qe.role,content:qe.content}))],Se=async()=>{const qe=Q.active_provider==="pompora"?Q.pompora_thinking??"slow":null;return await S0({messages:Re,encryptionPassword:A,thinking:qe})};let Ce;try{Ce=await Se()}catch(qe){const pt=String(qe);if(/No content found in (API|Gemini API) response/i.test(pt))Ve(Gi=>[...Gi,{role:"meta",content:"AI returned an empty response. Retrying once"}]),Ce=await Se();else throw qe}const xe=Ce.edits,Fe=String(Ce.output??"");if(!(Array.isArray(xe)&&xe.length>0)&&Fe.trim().length===0)throw new Error("No content found in API response: <empty assistant output>");const Ie=K0(String(Ce.output??"")),_i=Array.isArray(xe)&&xe.length?xe:Ie?.edits??null,qt=String(Ce.output??""),Nt=(Ie?.message??qt.trim()).trim();if(_i&&_i.length){Ft(!0);const qe=Nt&&!am(Nt),pt=`${Date.now()}-${Math.random().toString(16).slice(2)}`;Ve([...Y,...we,...qe?[{role:"assistant",content:"",id:pt,rating:null}]:[]]),qe&&Ar(pt,Nt);const Gi=Es=>{const ks={role:"meta",content:Es};Ve(ls=>[...ls,ks])};try{const Es=q0(_i,P.root),ks=Es.edits;Es.didSanitize&&Gi("Note: AI returned paths outside this workspace; using workspace-relative filenames instead.");const ls=await ho(ks);gr(!0),yi(ls);const As=ls.files.find(vt=>vt.kind==="write"&&typeof vt.path=="string");As?.kind==="write"&&(ci(As.path),await wt(As.path)),await ra(ks,Gi,{pace:!0,previewFile:async vt=>{ci(vt),await wt(vt)}}),Ve(vt=>[...vt,{role:"meta",content:`Applied ${ls.stats.files} files (+${ls.stats.added} ${ls.stats.removed}).`}])}finally{Ft(!1)}}else{const qe=Nt.length?am(Nt)?"Im readytell me what you want to change and Ill guide you step by step.":Nt:"Ready.",pt=`${Date.now()}-${Math.random().toString(16).slice(2)}`;Ve([...Y,...we,{role:"assistant",content:"",id:pt,rating:null}]),Ar(pt,qe)}if(Q.active_provider==="pompora")try{const qe=await Fa();Hi(qe)}catch{}}catch(H){const Y=aa(String(H));_e({kind:"error",title:Y.title,message:Y.message})}finally{Mn(!1)}},[ze.draft,ze.messages.length,ze.title,wi,nt,ra,ho,aa,Os?.storage,_e,qi,wt,Fn,Us,yi,xr,Ve,oo,ci,Fa,Q.active_provider,Q.offline_mode,Ar,P.root]),as=z.useMemo(()=>Ii.filter(v=>v.id!=="pompora"),[Ii]);z.useEffect(()=>{ea.current=Ki},[Ki]);const Ai=z.useMemo(()=>{const v=[{id:"file.openFolder",label:"File: Open Folder...",shortcut:"Ctrl+K Ctrl+O",run:()=>{kt()}},{id:"file.openFile",label:"File: Open File...",shortcut:"Ctrl+O",run:()=>{_n()}},{id:"file.quickOpen",label:"File: Quick Open...",shortcut:"Ctrl+P",run:()=>{Ss()}},{id:"editor.gotoLine",label:"Go: Go to Line...",shortcut:"Ctrl+G",run:()=>mn()},{id:"file.newFile",label:"File: New File",shortcut:"Ctrl+N",run:()=>Fi()},{id:"file.newFolder",label:"File: New Folder...",run:()=>{rs()}},{id:"file.rename",label:"File: Rename...",run:()=>{ma()}},{id:"file.delete",label:"File: Delete",run:()=>{Wn()}},{id:"file.save",label:"File: Save",shortcut:"Ctrl+S",run:()=>{Tr()}},{id:"file.saveAll",label:"File: Save All",shortcut:"Ctrl+K S",run:()=>{It()}},{id:"view.commandPalette",label:"View: Show Command Palette",shortcut:"Ctrl+Shift+P",run:()=>te(!0)},{id:"workbench.findInFiles",label:"Search: Find in Files",shortcut:"Ctrl+Shift+F",run:()=>E("search")},{id:"view.toggleTheme",label:"Preferences: Toggle Theme",run:()=>_l()},{id:"view.settings",label:"Preferences: Open Settings",shortcut:"Ctrl+,",run:()=>qi()},{id:"workbench.focusExplorer",label:"View: Focus Explorer",run:()=>E("explorer")}];return ke&&v.push({id:"file.closeActive",label:"File: Close Active Editor",shortcut:"Ctrl+W",run:()=>ui(ke.path)}),v},[ke,ui,rs,Wn,Fi,kt,mn,Ss,ma,Tr,It]),Cs=z.useMemo(()=>{const v=q.trim().toLowerCase();return v?Ai.filter(A=>A.label.toLowerCase().includes(v)):Ai},[Ai,q]);z.useEffect(()=>{const v=A=>{if(A.ctrlKey&&A.key.toLowerCase()==="l"){A.preventDefault(),gr(Y=>!Y);return}if(A.ctrlKey&&(A.key==="`"||A.code==="Backquote")){A.preventDefault(),na();return}if(A.ctrlKey&&A.shiftKey&&A.key.toLowerCase()==="p"){A.preventDefault(),te(!0);return}if(A.ctrlKey&&A.key==="F4"){ke&&(A.preventDefault(),ui(ke.path));return}if(A.ctrlKey&&!A.shiftKey&&A.key.toLowerCase()==="f"){const Y=bs.current;Y&&(A.preventDefault(),Y.getAction("actions.find")?.run());return}if(A.ctrlKey&&!A.shiftKey&&A.key.toLowerCase()==="p"){A.preventDefault(),Ss();return}if(A.ctrlKey&&!A.shiftKey&&A.key.toLowerCase()==="g"){A.preventDefault(),mn();return}if(A.ctrlKey&&!A.shiftKey&&A.key.toLowerCase()==="h"){const Y=bs.current;Y&&(A.preventDefault(),Y.getAction("editor.action.startFindReplaceAction")?.run());return}if(A.ctrlKey&&A.shiftKey&&A.key.toLowerCase()==="f"){A.preventDefault(),E("search");return}if(A.ctrlKey&&A.key===","){A.preventDefault(),qi();return}if(A.ctrlKey&&A.key.toLowerCase()==="k"){A.preventDefault(),window.__pomporaChord={started:Date.now()};return}const H=window.__pomporaChord;if(H&&Date.now()-H.started<1500){if(A.ctrlKey&&A.key.toLowerCase()==="o"){A.preventDefault(),window.__pomporaChord=null,kt();return}if(A.key.toLowerCase()==="s"){A.preventDefault(),window.__pomporaChord=null,It();return}}if(window.__pomporaChord&&(window.__pomporaChord=null),A.ctrlKey&&A.shiftKey&&A.key.toLowerCase()==="s"){A.preventDefault(),Rr();return}if(A.ctrlKey&&A.key.toLowerCase()==="s"){A.preventDefault(),Tr();return}if(A.ctrlKey&&A.shiftKey&&A.key.toLowerCase()==="n"){A.preventDefault(),on();return}if(A.ctrlKey&&A.altKey&&A.metaKey&&A.key.toLowerCase()==="n"){A.preventDefault(),Fi();return}if(A.ctrlKey&&A.key.toLowerCase()==="n"){A.preventDefault(),Fi();return}if(A.ctrlKey&&A.key==="w"){ke&&(A.preventDefault(),ui(ke.path));return}A.key==="Escape"&&(te(!1),p(!1),L(!1),la(null),be(!1),B(!1))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[ke,va,ui,Fi,kt,mn,on,Ss,_n,Tr,It,Rr,na]),z.useEffect(()=>{if(!Si)return;const v=()=>la(null);return window.addEventListener("mousedown",v),()=>window.removeEventListener("mousedown",v)},[Si]),z.useEffect(()=>{if(!Mt)return;const v=A=>{const H=A.target;H&&(H.closest("[data-menubar-root]")||yt())};return window.addEventListener("mousedown",v),()=>window.removeEventListener("mousedown",v)},[Mt,yt]);const pl=z.useCallback(async v=>{try{await navigator.clipboard.writeText(v)}catch{window.prompt("Copy to clipboard:",v)}},[]);z.useEffect(()=>{X||(h(""),m(0))},[X]),z.useEffect(()=>{x||(T(""),C(0))},[x]),z.useEffect(()=>{m(0)},[q]);const ba=Q.theme==="light"?"vs":"vs-dark";return c.jsxs("div",{className:"h-full w-full bg-bg text-text",children:[Ln?c.jsxs("div",{className:`fixed inset-0 z-[100] bg-black transition-opacity duration-500 ${el?"pointer-events-none opacity-0":"opacity-100"}`,onMouseDown:()=>$r(!1),children:[c.jsxs("video",{className:"h-full w-full object-cover",ref:Zr,autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",poster:"/logo_transparent_bigger.png",onLoadedData:()=>Ns(!0),onCanPlay:()=>Ns(!0),onError:()=>Zs(!0),onEnded:()=>{Ui()},children:[c.jsx("source",{src:"/loading-screen.mp4",type:"video/mp4"}),c.jsx("source",{src:"/loading_screen.mp4",type:"video/mp4"})]}),!tl&&!il?c.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-end justify-start p-4",children:c.jsx("div",{className:"rounded-md border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white/80 backdrop-blur",children:"Loading"})}):null,il?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"max-w-[520px] rounded-xl border border-white/10 bg-black/50 p-5 text-center text-white backdrop-blur",children:[c.jsx("div",{className:"text-sm font-medium",children:"Your system cant play this video format."}),c.jsx("div",{className:"mt-1 text-[12px] text-white/70",children:"Re-encode to H.264/AAC (MP4) for best compatibility."})]})}):null,c.jsx("div",{className:"absolute bottom-4 right-4",onMouseDown:v=>v.stopPropagation(),children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"inline-flex overflow-hidden rounded-md border border-white/10 bg-black/40 text-[12px] text-white backdrop-blur",children:[c.jsx("button",{type:"button",className:"px-4 py-1.5 hover:bg-black/55",onClick:gs,children:"Skip"}),c.jsxs("button",{type:"button",className:"flex items-center px-2 py-1.5 hover:bg-black/55",onClick:()=>$r(v=>!v),"aria-label":"Skip options",children:[c.jsx("span",{className:"mx-1 h-4 w-px bg-white/10"}),c.jsx(Wa,{className:`h-4 w-4 transition-transform ${Yr?"rotate-180":""}`})]})]}),Yr?c.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-44 overflow-auto rounded-lg border border-white/10 bg-black/70 text-[12px] text-white shadow-xl backdrop-blur max-h-[320px]",children:[c.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left hover:bg-white/10",onClick:gs,children:"Skip one time"}),c.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left hover:bg-white/10",onClick:rl,children:"Always skip"})]}):null]})})]}):null,c.jsxs("div",{className:"grid h-full grid-rows-[36px_1fr_26px]",children:[c.jsx("header",{className:"border-b border-border bg-panel",children:c.jsxs("div",{className:"grid h-9 grid-cols-[1fr_auto_1fr] items-center px-2","data-menubar-root":!0,children:[c.jsxs("div",{className:"flex min-w-0 items-center gap-2 justify-self-start",children:[c.jsx("img",{src:"/logo.png",alt:"Pompora",className:"h-5 w-5 shrink-0"}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(be(!0),B(!1),ce(!1),Oe(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null))},onClick:()=>{be(v=>!v),B(!1),ce(!1),Oe(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null)},children:"File"}),ve?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-64 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"New Text File",shortcut:"Ctrl+N",onClick:()=>Fi()}),c.jsx(ue,{label:"New File",shortcut:"Ctrl+Alt+Win+N",onClick:()=>Fi()}),c.jsx(ue,{label:"New Window",shortcut:"Ctrl+Shift+N",onClick:()=>on()}),c.jsx(Je,{}),c.jsx(ue,{label:"Open File",shortcut:"Ctrl+O",onClick:()=>{_n()}}),c.jsx(ue,{label:"Open Folder",shortcut:"Ctrl+K Ctrl+O",onClick:()=>{kt()}}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Open Recent",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),onClick:()=>B(v=>!v)}),Te?c.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),children:[c.jsx("div",{className:"px-2 py-1 text-[11px] font-medium text-muted",children:"Folders"}),(P.recent.length?P.recent:Q.recent_workspaces).length?(P.recent.length?P.recent:Q.recent_workspaces).map(v=>c.jsx(ue,{label:v,onClick:()=>{Wi(v)}},v)):c.jsx("div",{className:"px-2 py-1 text-xs text-muted",children:"No recent folders"}),c.jsx(Je,{}),c.jsx("div",{className:"px-2 py-1 text-[11px] font-medium text-muted",children:"Files"}),Bi.length?Bi.map(v=>c.jsx(ue,{label:v,onClick:()=>{xs(v)}},v)):c.jsx("div",{className:"px-2 py-1 text-xs text-muted",children:"No recent files"})]}):null]}),c.jsx(Je,{}),c.jsx(ue,{label:"Add Folder to Workspace",onClick:()=>{dn()}}),c.jsx(ue,{label:"Save Workspace as",onClick:()=>{yo()}}),c.jsx(ue,{label:"Duplicate Workspace",onClick:()=>{pa()}}),c.jsx(Je,{}),c.jsx(ue,{label:"Save",shortcut:"Ctrl+S",onClick:()=>{Tr()}}),c.jsx(ue,{label:"Save As",shortcut:"Ctrl+Shift+S",onClick:()=>{Rr()}}),c.jsx(ue,{label:"Save All",shortcut:"Ctrl+K S",onClick:()=>{It()}}),c.jsx(Je,{}),c.jsx(ue,{label:Ms?"Auto Save: On":"Auto Save: Off",onClick:()=>ii(v=>!v)}),c.jsx(Je,{}),c.jsx(ue,{label:"Revert File",onClick:()=>{ws()}}),c.jsx(ue,{label:"Close Editor",shortcut:"Ctrl+F4",onClick:()=>ke?ui(ke.path):void 0}),c.jsx(ue,{label:"Close Folder",onClick:()=>{va()}}),c.jsx(ue,{label:"Close Window",shortcut:"Alt+F4",onClick:()=>fl()}),c.jsx(Je,{}),c.jsx(ue,{label:"Exit",onClick:()=>fl()})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(ce(!0),be(!1),B(!1),Oe(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null))},onClick:()=>{ce(v=>!v),be(!1),B(!1),Oe(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null)},children:"Edit"}),ie?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Undo",shortcut:"Ctrl+Z",onClick:()=>_e({kind:"info",title:"Undo",message:"Coming next."})}),c.jsx(ue,{label:"Redo",shortcut:"Ctrl+Y",onClick:()=>_e({kind:"info",title:"Redo",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Cut",shortcut:"Ctrl+X",onClick:()=>_e({kind:"info",title:"Cut",message:"Coming next."})}),c.jsx(ue,{label:"Copy",shortcut:"Ctrl+C",onClick:()=>_e({kind:"info",title:"Copy",message:"Coming next."})}),c.jsx(ue,{label:"Paste",shortcut:"Ctrl+V",onClick:()=>_e({kind:"info",title:"Paste",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Find",shortcut:"Ctrl+F",onClick:()=>{const v=bs.current;v&&v.getAction("actions.find")?.run()}}),c.jsx(ue,{label:"Replace",shortcut:"Ctrl+H",onClick:()=>{const v=bs.current;v&&v.getAction("editor.action.startFindReplaceAction")?.run()}}),c.jsx(Je,{}),c.jsx(ue,{label:"Find in Files",shortcut:"Ctrl+Shift+F",onClick:()=>E("search")}),c.jsx(ue,{label:"Replace in Files",shortcut:"Ctrl+Shift+H",onClick:()=>_e({kind:"info",title:"Replace in Files",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Toggle Line Comment",shortcut:"Ctrl+/",onClick:()=>_e({kind:"info",title:"Toggle Line Comment",message:"Coming next."})}),c.jsx(ue,{label:"Toggle Block Comment",shortcut:"Shift+Alt+A",onClick:()=>_e({kind:"info",title:"Toggle Block Comment",message:"Coming next."})}),c.jsx(ue,{label:"Emmet: Expand Abbreviation",shortcut:"Tab",onClick:()=>_e({kind:"info",title:"Emmet",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(Oe(!0),be(!1),B(!1),ce(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null))},onClick:()=>{Oe(v=>!v),be(!1),B(!1),ce(!1),Ne(!1),Xe(!1),je(!1),ft(null),$e(null)},children:"Selection"}),pe?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Select All",shortcut:"Ctrl+A",onClick:()=>_e({kind:"info",title:"Select All",message:"Coming next."})}),c.jsx(ue,{label:"Expand Selection",shortcut:"Shift+Alt+RightArrow",onClick:()=>_e({kind:"info",title:"Expand Selection",message:"Coming next."})}),c.jsx(ue,{label:"Shrink Selection",onClick:()=>_e({kind:"info",title:"Shrink Selection",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Copy Line Up",shortcut:"Shift+Alt+UpArrow",onClick:()=>_e({kind:"info",title:"Copy Line Up",message:"Coming next."})}),c.jsx(ue,{label:"Copy Line Down",shortcut:"Shift+Alt+DownArrow",onClick:()=>_e({kind:"info",title:"Copy Line Down",message:"Coming next."})}),c.jsx(ue,{label:"Move Line Up",shortcut:"Alt+UpArrow",onClick:()=>_e({kind:"info",title:"Move Line Up",message:"Coming next."})}),c.jsx(ue,{label:"Move Line Down",shortcut:"Alt+DownArrow",onClick:()=>_e({kind:"info",title:"Move Line Down",message:"Coming next."})}),c.jsx(ue,{label:"Duplicate Selection",onClick:()=>_e({kind:"info",title:"Duplicate Selection",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Add Cursor Above",shortcut:"Ctrl+Alt+UpArrow",onClick:()=>_e({kind:"info",title:"Add Cursor Above",message:"Coming next."})}),c.jsx(ue,{label:"Add Cursor Below",shortcut:"Ctrl+Alt+DownArrow",onClick:()=>_e({kind:"info",title:"Add Cursor Below",message:"Coming next."})}),c.jsx(ue,{label:"Add Cursors to Line End",shortcut:"Shift+Alt+I",onClick:()=>_e({kind:"info",title:"Add Cursors to Line End",message:"Coming next."})}),c.jsx(ue,{label:"Add Next Occurrence",shortcut:"Ctrl+D",onClick:()=>_e({kind:"info",title:"Add Next Occurrence",message:"Coming next."})}),c.jsx(ue,{label:"Add Previous Occurrence",onClick:()=>_e({kind:"info",title:"Add Previous Occurrence",message:"Coming next."})}),c.jsx(ue,{label:"Select All Occurrences",shortcut:"Ctrl+Shift+L",onClick:()=>_e({kind:"info",title:"Select All Occurrences",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Switch to Ctrl+Click for Multi-Cursor",onClick:()=>_e({kind:"info",title:"Multi-cursor",message:"Coming next."})}),c.jsx(ue,{label:"Column Selection Mode",onClick:()=>_e({kind:"info",title:"Column Selection Mode",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(Ne(!0),ft(null),$e(null),be(!1),B(!1),ce(!1),Oe(!1),Xe(!1),je(!1))},onClick:()=>{Ne(v=>!v),ft(null),$e(null),be(!1),B(!1),ce(!1),Oe(!1),Xe(!1),je(!1)},children:"View"}),Ee?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",onMouseLeave:()=>{ft(null),$e(null)},children:[c.jsx(ue,{label:"Command Palette",shortcut:"Ctrl+Shift+P",onClick:()=>te(!0)}),c.jsx(ue,{label:"Open View",onClick:()=>_e({kind:"info",title:"Open View",message:"Coming next."})}),c.jsx(Je,{}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Appearance",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>ft("appearance"),onClick:()=>ft(v=>v==="appearance"?null:"appearance")}),_s==="appearance"?c.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Full Screen",shortcut:"F11",onClick:()=>_e({kind:"info",title:"Full Screen",message:"Coming next."})}),c.jsx(ue,{label:"Zen Mode",shortcut:"Ctrl+K Z",onClick:()=>_e({kind:"info",title:"Zen Mode",message:"Coming next."})}),c.jsx(ue,{label:"Centered Layout",onClick:()=>_e({kind:"info",title:"Centered Layout",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Menu Bar",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Menu Bar",message:"Coming next."})}),c.jsx(ue,{label:"Primary Side Bar",shortcut:"Ctrl+B",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Primary Side Bar",message:"Coming next."})}),c.jsx(ue,{label:"Secondary Side Bar",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Secondary Side Bar",message:"Coming next."})}),c.jsx(ue,{label:"Status Bar",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Status Bar",message:"Coming next."})}),c.jsx(ue,{label:"Panel",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Panel",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Move Primary Side Bar Right",onClick:()=>_e({kind:"info",title:"Move Primary Side Bar Right",message:"Coming next."})}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Activity Bar Position",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("activityBarPosition"),onClick:()=>$e(v=>v==="activityBarPosition"?null:"activityBarPosition")}),pi==="activityBarPosition"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Default",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Top",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Bottom",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Hidden",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Activity Bar",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Secondary Activity Bar Position",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("secondaryActivityBarPosition"),onClick:()=>$e(v=>v==="secondaryActivityBarPosition"?null:"secondaryActivityBarPosition")}),pi==="secondaryActivityBarPosition"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Default",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Top",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Bottom",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),c.jsx(ue,{label:"Hidden",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Panel Position",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("panelPosition"),onClick:()=>$e(v=>v==="panelPosition"?null:"panelPosition")}),pi==="panelPosition"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Top",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Panel Position",message:"Coming next."})}),c.jsx(ue,{label:"Left",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Panel Position",message:"Coming next."})}),c.jsx(ue,{label:"Right",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Panel Position",message:"Coming next."})}),c.jsx(ue,{label:"Bottom",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Panel Position",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Align Panel",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("alignPanel"),onClick:()=>$e(v=>v==="alignPanel"?null:"alignPanel")}),pi==="alignPanel"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Center",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Align Panel",message:"Coming next."})}),c.jsx(ue,{label:"Justify",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Align Panel",message:"Coming next."})}),c.jsx(ue,{label:"Left",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Align Panel",message:"Coming next."})}),c.jsx(ue,{label:"Right",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Align Panel",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Tab Bar",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("tabBar"),onClick:()=>$e(v=>v==="tabBar"?null:"tabBar")}),pi==="tabBar"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Multiple Tabs",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Tab Bar",message:"Coming next."})}),c.jsx(ue,{label:"Single Tabs",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Tab Bar",message:"Coming next."})}),c.jsx(ue,{label:"Hidden",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Tab Bar",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Editor Actions Position",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>$e("editorActionsPosition"),onClick:()=>$e(v=>v==="editorActionsPosition"?null:"editorActionsPosition")}),pi==="editorActionsPosition"?c.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Tab Bar",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Editor Actions",message:"Coming next."})}),c.jsx(ue,{label:"Title Bar",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Editor Actions",message:"Coming next."})}),c.jsx(ue,{label:"Hidden",right:c.jsx(et,{}),onClick:()=>_e({kind:"info",title:"Editor Actions",message:"Coming next."})})]}):null]}),c.jsx(Je,{}),c.jsx(ue,{label:"Minimap",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Minimap",message:"Coming next."})}),c.jsx(ue,{label:"Breadcrumbs",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Breadcrumbs",message:"Coming next."})}),c.jsx(ue,{label:"Sticky Scroll",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Sticky Scroll",message:"Coming next."})}),c.jsx(ue,{label:"Render Whitespace",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Render Whitespace",message:"Coming next."})}),c.jsx(ue,{label:"Render Control Characters",right:c.jsx(et,{checked:!0}),onClick:()=>_e({kind:"info",title:"Render Control Characters",message:"Coming next."})})]}):null]}),c.jsx(Je,{}),c.jsx(ue,{label:"Zoom In",shortcut:"Ctrl+=",onClick:()=>_e({kind:"info",title:"Zoom In",message:"Coming next."})}),c.jsx(ue,{label:"Zoom Out",shortcut:"Ctrl+-",onClick:()=>_e({kind:"info",title:"Zoom Out",message:"Coming next."})}),c.jsx(ue,{label:"Reset Zoom",shortcut:"Ctrl+NumPad0",onClick:()=>_e({kind:"info",title:"Reset Zoom",message:"Coming next."})}),c.jsx(Je,{}),c.jsxs("div",{className:"relative",children:[c.jsx(ue,{label:"Editor Layout",right:c.jsx(Rs,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>ft("editorLayout"),onClick:()=>ft(v=>v==="editorLayout"?null:"editorLayout")}),_s==="editorLayout"?c.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-64 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsx(ue,{label:"Split Up",shortcut:"Ctrl+K Ctrl+\\\\",onClick:()=>_e({kind:"info",title:"Split Up",message:"Coming next."})}),c.jsx(ue,{label:"Split Down",onClick:()=>_e({kind:"info",title:"Split Down",message:"Coming next."})}),c.jsx(ue,{label:"Split Left",onClick:()=>_e({kind:"info",title:"Split Left",message:"Coming next."})}),c.jsx(ue,{label:"Split Right",onClick:()=>_e({kind:"info",title:"Split Right",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Split in Group",shortcut:"Ctrl+Shift+\\\\",onClick:()=>_e({kind:"info",title:"Split in Group",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Single",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Two Columns",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Three Columns",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Two Rows",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Three Rows",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Grid 2x2",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Two Rows Right",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(ue,{label:"Two Columns Bottom",onClick:()=>_e({kind:"info",title:"Layout",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Flip Layout",shortcut:"Shift+Alt+0",onClick:()=>_e({kind:"info",title:"Flip Layout",message:"Coming next."})})]}):null]}),c.jsx(Je,{}),c.jsx(ue,{label:"Explorer",shortcut:"Ctrl+Shift+E",onClick:()=>E("explorer")}),c.jsx(ue,{label:"Search",shortcut:"Ctrl+Shift+F",onClick:()=>E("search")}),c.jsx(ue,{label:"Source Control",shortcut:"Ctrl+Shift+G",onClick:()=>E("scm")}),c.jsx(ue,{label:"Run",shortcut:"Ctrl+Shift+D",onClick:()=>_e({kind:"info",title:"Run",message:"Coming next."})}),c.jsx(ue,{label:"Extensions",shortcut:"Ctrl+Shift+X",onClick:()=>_e({kind:"info",title:"Extensions",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Problems",shortcut:"Ctrl+Shift+M",onClick:()=>_e({kind:"info",title:"Problems",message:"Coming next."})}),c.jsx(ue,{label:"Output",shortcut:"Ctrl+Shift+U",onClick:()=>_e({kind:"info",title:"Output",message:"Coming next."})}),c.jsx(ue,{label:"Debug Console",shortcut:"Ctrl+Shift+Y",onClick:()=>_e({kind:"info",title:"Debug Console",message:"Coming next."})}),c.jsx(ue,{label:"Terminal",shortcut:"Ctrl+`",onClick:()=>{na()}}),c.jsx(Je,{}),c.jsx(ue,{label:"Word Wrap",shortcut:"Alt+Z",onClick:()=>_e({kind:"info",title:"Word Wrap",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(Xe(!0),be(!1),B(!1),ce(!1),Oe(!1),Ne(!1),je(!1),ft(null),$e(null))},onClick:()=>{Xe(v=>!v),be(!1),B(!1),ce(!1),Oe(!1),Ne(!1),je(!1),ft(null),$e(null)},children:"Run"}),lt?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-72 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[c.jsx(ue,{label:"Start Debugging",shortcut:"F5",onClick:()=>_e({kind:"info",title:"Start Debugging",message:"Coming next."})}),c.jsx(ue,{label:"Run Without Debugging",shortcut:"Ctrl+F5",onClick:()=>_e({kind:"info",title:"Run Without Debugging",message:"Coming next."})}),c.jsx(ue,{label:"Stop Debugging",shortcut:"Shift+F5",onClick:()=>_e({kind:"info",title:"Stop Debugging",message:"Coming next."})}),c.jsx(ue,{label:"Restart Debugging",shortcut:"Ctrl+Shift+F5",onClick:()=>_e({kind:"info",title:"Restart Debugging",message:"Coming next."})})]}):null]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{Mt&&(je(!0),be(!1),B(!1),ce(!1),Oe(!1),Ne(!1),Xe(!1),ft(null),$e(null))},onClick:()=>{je(v=>!v),be(!1),B(!1),ce(!1),Oe(!1),Ne(!1),Xe(!1),ft(null),$e(null)},children:"Terminal"}),ji?c.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-80 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[c.jsx(ue,{label:"New Terminal",shortcut:"Ctrl+Shift+`",onClick:()=>{an().finally(()=>{na()})}}),c.jsx(ue,{label:"Split Terminal",shortcut:"Ctrl+Shift+5",onClick:()=>_e({kind:"info",title:"Split Terminal",message:"Coming next."})}),c.jsx(ue,{label:"New Terminal Window",shortcut:"Ctrl+Shift+Alt+`",onClick:()=>_e({kind:"info",title:"New Terminal Window",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Run Task",onClick:()=>_e({kind:"info",title:"Run Task",message:"Coming next."})}),c.jsx(ue,{label:"Run Build Task",shortcut:"Ctrl+Shift+B",onClick:()=>_e({kind:"info",title:"Run Build Task",message:"Coming next."})}),c.jsx(ue,{label:"Run Active File",onClick:()=>_e({kind:"info",title:"Run Active File",message:"Coming next."})}),c.jsx(ue,{label:"Run Selected Text",onClick:()=>_e({kind:"info",title:"Run Selected Text",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Show Running Tasks",onClick:()=>_e({kind:"info",title:"Show Running Tasks",message:"Coming next."})}),c.jsx(ue,{label:"Restart Running Tasks",onClick:()=>_e({kind:"info",title:"Restart Running Tasks",message:"Coming next."})}),c.jsx(ue,{label:"Terminate Task",onClick:()=>_e({kind:"info",title:"Terminate Task",message:"Coming next."})}),c.jsx(Je,{}),c.jsx(ue,{label:"Configure Tasks",onClick:()=>_e({kind:"info",title:"Configure Tasks",message:"Coming next."})}),c.jsx(ue,{label:"Configure Default Build Task",onClick:()=>_e({kind:"info",title:"Configure Default Build Task",message:"Coming next."})})]}):null]})]})]}),c.jsx("div",{className:"mx-4 hidden min-w-0 items-center justify-self-center md:flex",children:c.jsxs("div",{className:"flex w-[520px] max-w-[42vw] items-center gap-1",children:[c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>_e({kind:"info",title:"Back",message:"Coming next."}),children:c.jsx(Rg,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>_e({kind:"info",title:"Forward",message:"Coming next."}),children:c.jsx(Og,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-input h-7 flex-1 cursor-pointer px-3 py-0 text-left text-[12px] text-muted",onClick:()=>te(!0),children:"Search or type a command"})]})}),c.jsxs("div",{className:"flex shrink-0 items-center gap-1 justify-self-end",children:[c.jsxs("div",{className:"relative","data-account-menu-root":!0,children:[c.jsx("button",{type:"button",className:"ws-icon-btn h-8 w-8 p-0",onClick:()=>{ps(v=>!v)},disabled:ts,"aria-label":nt?"Account":"Sign in",children:c.jsxs("div",{className:"relative h-6 w-6 overflow-hidden rounded-full bg-[rgb(var(--p-panel2))]",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] font-semibold leading-none text-text",children:Rc}),nt?.avatar_url?c.jsx("img",{src:nt.avatar_url,className:"absolute inset-0 block h-full w-full object-cover",alt:"Profile",onError:v=>{v.currentTarget.style.display="none"}}):null]})}),Dt?nt?c.jsxs("div",{className:"absolute right-0 top-full z-[80] mt-1 w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsxs("div",{className:"px-3 py-2",children:[c.jsx("div",{className:"text-xs font-semibold text-text",children:nt.email||"Account"}),c.jsxs("div",{className:"mt-0.5 text-[11px] text-muted",children:["Plan: ",Ni?.plan||nt.plan||"starter"]}),Ni?c.jsxs("div",{className:"mt-2 text-[11px] text-muted",children:["Slow credits: ",Ni.slow.remaining," / ",Ni.slow.limit]}):null]}),c.jsx(Je,{}),c.jsx(ue,{label:"Open Dashboard",onClick:()=>{ps(!1),cn("https://pompora.dev/dashboard")}}),c.jsx(ue,{label:"Manage Plan",onClick:()=>{ps(!1),cn("https://pompora.dev/pricing")}}),c.jsx(Je,{}),c.jsx(ue,{label:"Sign out",onClick:()=>{ps(!1),_o()}})]}):c.jsxs("div",{className:"absolute right-0 top-full z-[80] mt-1 w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[c.jsxs("div",{className:"px-3 py-2",children:[c.jsx("div",{className:"text-xs font-semibold text-text",children:"Not signed in"}),c.jsx("div",{className:"mt-0.5 text-[11px] text-muted",children:"Sign in to sync credits and use Pompora AI."})]}),c.jsx(Je,{}),c.jsx(ue,{label:"Log in",onClick:()=>{ps(!1),kr("login")}}),c.jsx(ue,{label:"Create account",onClick:()=>{ps(!1),kr("signup")}})]}):null]}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>qi(),children:c.jsx(Dm,{className:"h-4 w-4"})})]})]})}),c.jsxs("div",{className:"grid min-h-0 flex-1 overflow-x-auto",style:{gridTemplateColumns:Dc},children:[c.jsx("aside",{className:"min-w-0 border-r border-border bg-panel",children:c.jsxs("div",{className:"flex h-full flex-col items-center gap-2 py-2",children:[c.jsx(kh,{id:"explorer",active:D==="explorer",onClick:E,Icon:km}),c.jsx(kh,{id:"search",active:D==="search",onClick:E,Icon:Ah}),c.jsx(kh,{id:"scm",active:D==="scm",onClick:E,Icon:Vg}),c.jsx("div",{className:"flex-1"})]})}),c.jsxs("aside",{className:"relative min-h-0 min-w-0 border-r border-border bg-panel",children:[c.jsxs("div",{className:"group absolute right-0 top-0 z-30 h-full w-2 cursor-col-resize",onMouseDown:v=>{tn.current={startX:v.clientX,startW:Vr}},children:[c.jsx("div",{className:"absolute inset-y-0 left-1/2 w-px -translate-x-1/2 bg-accent/60 opacity-0 transition-opacity group-hover:opacity-100"}),c.jsx("div",{className:"absolute inset-y-0 left-0 right-0 opacity-0 transition-opacity group-hover:opacity-100",style:{boxShadow:"0 0 0 8px rgba(112, 163, 255, 0.06)"}})]}),D==="explorer"?c.jsx(Q0,{workspaceRoot:P.root,recent:P.recent,explorer:ni,expandedDirs:it,selectedPath:st,onContextMenu:v=>la(v),showTooltipForEl:un,hideTooltip:hn,onOpenFolder:()=>{kt()},onOpenRecent:v=>{Wi(v)},onToggleDir:async v=>{const A=new Set(it);if(A.has(v)){A.delete(v),Ji(A);return}A.add(v),Ji(A),ni[v]||await Ot(v)},onSelect:v=>ri(v),onOpenFile:v=>{wt(v)},onRefresh:()=>{Bt()},onCreateNewFile:()=>{_a()},onCreateNewFolder:()=>{rs()}}):D==="search"?c.jsx(Rh,{title:"Search",children:P.root?c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Find in files",value:An,onChange:v=>Pr(v.currentTarget.value),autoFocus:!0}),c.jsx("div",{className:"text-xs text-muted",children:Fr?"Searching...":`${_r.length} results`}),c.jsx("div",{className:"space-y-1",children:_r.map((v,A)=>c.jsxs("button",{type:"button",className:"w-full rounded border border-border bg-bg px-3 py-2 text-left text-sm text-muted hover:border-accent hover:text-text",onClick:async()=>{qr({path:v.path,line:v.line}),await wt(v.path)},children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("span",{className:"truncate text-text",children:v.path}),c.jsx("span",{className:"shrink-0 text-xs text-muted",children:v.line})]}),c.jsx("div",{className:"mt-1 truncate text-xs text-muted",children:v.text})]},`${v.path}:${v.line}:${A}`))})]}):c.jsx("div",{className:"text-sm text-muted",children:"Open a folder to search."})}):D==="scm"?c.jsx(Rh,{title:"Source Control",children:c.jsx("div",{className:"text-sm text-muted",children:"Git view is coming next."})}):null]}),c.jsx("main",{className:"min-h-0 min-w-0 bg-bg",children:c.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[c.jsxs("div",{className:"flex h-10 items-center gap-1 border-b border-border bg-panel px-2",children:[c.jsx("div",{className:"flex min-w-0 flex-1 items-stretch gap-1 overflow-auto",children:mt.map(v=>c.jsx(J0,{tab:v,active:v.path===vi,onActivate:()=>Ct(v.path),onClose:()=>ui(v.path)},v.path))}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{kt()},children:c.jsx(bh,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"min-h-0 flex-1 flex flex-col",children:P.root?ke?ke.path===Yt?c.jsx("div",{className:"min-h-0 flex-1 overflow-auto",children:c.jsx(tb,{settings:Q,authProfile:nt,isAuthBusy:ts,providerLabel:ha,keyStatus:Os,providerChoices:as,apiKeyDraft:Tn,encryptionPasswordDraft:mr,secretsError:Xa,isSavingSettings:j,isTogglingOffline:W,isKeyOperationInProgress:Ls,isSettingsLoaded:K,workspaceLabel:ul,recentWorkspaces:P.recent,onChangeTheme:v=>se(A=>({...A,theme:v})),onToggleOffline:Kn,onChangeProvider:v=>{ml(v)},onChangePomporaThinking:v=>{Gn(v)},onPickFolder:()=>{kt()},onOpenRecent:v=>{Wi(v)},onApiKeyDraft:so,onEncryptionPasswordDraft:no,onStoreKey:Mr,onClearKey:Ei,onLoginToPompora:()=>{kr("login")},onSignupToPompora:()=>{kr("signup")},onSaveSettings:Ci,showKeySaved:Kt,showKeyCleared:Qa,onDebugGemini:ki,debugResult:kc})}):c.jsx(c.Fragment,{children:c.jsx("div",{className:"min-h-0 flex-1 flex flex-col",children:c.jsxs("div",{className:"relative min-h-0 flex-1",children:[Pi?c.jsx(cg,{height:"100%",theme:ba,language:ke.language,original:Pi.before??"",modified:fo!==null?fo:Pi.after??ke.content,onMount:v=>{const A=v.getModifiedEditor();bs.current=A,Cr.current?.dispose(),Cr.current=A.onDidChangeCursorPosition(Y=>{const oe=Y.position;Er({line:oe.lineNumber,col:oe.column})});const H=A.getPosition();H&&Er({line:H.lineNumber,col:H.column}),A.focus()},options:{readOnly:!0,renderSideBySide:!1,fontSize:13,minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,padding:{top:8,bottom:8}}}):c.jsx(mg,{height:"100%",theme:ba,language:ke.language,value:ke.content,onChange:v=>{const A=v??"";ot(H=>H.map(Y=>Y.path===ke.path?{...Y,content:A,isDirty:!0}:Y))},onMount:v=>{bs.current=v,Cr.current?.dispose(),Cr.current=v.onDidChangeCursorPosition(H=>{const Y=H.position;Er({line:Y.lineNumber,col:Y.column})});const A=v.getPosition();A&&Er({line:A.lineNumber,col:A.column}),v.focus()},options:{fontSize:13,minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,padding:{top:8,bottom:8}}}),ze.changeSet&&$t.length?c.jsx("div",{className:"pointer-events-none absolute bottom-3 left-1/2 z-30 -translate-x-1/2",children:c.jsxs("div",{className:"pointer-events-auto flex items-center gap-2 ws-change-bar min-w-[373px] min-h-[35px]",children:[c.jsx("button",{type:"button",className:"ws-icon-btn",disabled:$t.findIndex(v=>v.path===(At??""))<=0,onClick:()=>{const v=$t.findIndex(H=>H.path===(At??"")),A=v>0?$t[v-1]:null;A?.kind==="write"&&(ci(A.path),wt(A.path))},children:c.jsx(Ug,{className:"h-4 w-4"})}),c.jsx("div",{className:"max-w-[42vw] truncate text-[11px] text-muted",children:(()=>{const v=$t.findIndex(H=>H.path===(At??""));return`${v>=0?v+1:1} of ${$t.length}  ${At??$t[0].path}`})()}),c.jsx("button",{type:"button",className:"ws-icon-btn",disabled:$t.findIndex(v=>v.path===(At??""))>=$t.length-1,onClick:()=>{const v=$t.findIndex(H=>H.path===(At??"")),A=v>=0?$t[v+1]:null;A?.kind==="write"&&(ci(A.path),wt(A.path))},children:c.jsx(Rs,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",disabled:ai||!At,className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{At&&Dr(At)},children:"Reject File"}),c.jsx("button",{type:"button",disabled:ai||!At,className:"ws-btn ws-btn-secondary h-7 px-5 bg-accent hover:opacity-90",onClick:()=>{At&&xi(At)},children:"Accept File"})]})}):null]})})}):c.jsx(Mh,{recentWorkspaces:P.recent,recentFiles:Bi,onOpenFolder:()=>{kt()},onOpenFile:()=>{_n()},onOpenRecentWorkspace:v=>{Wi(v)},onOpenRecentFile:v=>{xs(v)},onOpenChat:()=>gr(!0),onOpenCommandPalette:()=>te(!0),title:"POMPORA",subtitle:"Getting started with Pompora",hint:"Open a file from Explorer to start editing."}):c.jsx(Mh,{recentWorkspaces:P.recent,recentFiles:Bi,onOpenFolder:()=>{kt()},onOpenFile:()=>{_n()},onOpenRecentWorkspace:v=>{Wi(v)},onOpenRecentFile:v=>{xs(v)},onOpenChat:()=>gr(!0),onOpenCommandPalette:()=>te(!0)})}),Js?c.jsxs("div",{className:"relative border-t border-border bg-panel",style:{height:sl},children:[c.jsx("div",{className:"absolute left-0 top-0 z-20 h-1 w-full cursor-row-resize",onMouseDown:v=>{Ps.current={startY:v.clientY,startH:sl}}}),c.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-panel px-2 py-1.5",children:[c.jsx("div",{className:"flex min-w-0 items-center gap-1",children:[{id:"problems",label:"Problems"},{id:"output",label:"Output"},{id:"debug",label:"Debug Console"},{id:"terminal",label:"Terminal"},{id:"ports",label:"Ports"}].map(v=>c.jsx("button",{type:"button",className:`rounded-md px-2 py-1 text-[11px] ${li===v.id?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:()=>{en(v.id),v.id==="terminal"&&window.setTimeout(()=>{qs().then(()=>{Ws(),bi.current?.focus()})},0)},children:v.label},v.id))}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{en("terminal"),window.setTimeout(()=>{qs().then(()=>{Ws(),bi.current?.focus()})},0)},children:c.jsx(o0,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{an()},children:c.jsx(Dh,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"relative min-h-0 flex-1 bg-bg",children:[c.jsx("div",{className:li==="terminal"?"absolute inset-0":"absolute inset-0 hidden",children:c.jsx("div",{ref:Is,className:"h-full w-full"})}),li!=="terminal"?c.jsxs("div",{className:"absolute inset-0 p-3 text-xs text-muted",children:[li," is coming next."]}):null]})]})]}):null]})}),On?c.jsxs("aside",{className:"relative min-h-0 min-w-0 border-l border-border bg-panel",children:[c.jsx("div",{className:"absolute left-0 top-0 z-20 h-full w-1 cursor-col-resize",onMouseDown:v=>{ss.current={startX:v.clientX,startW:Hs}}}),c.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[c.jsx("div",{className:"border-b border-border bg-panel px-3 py-2",children:c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("div",{className:"min-w-0",children:c.jsx("div",{className:"truncate text-[13px] font-normal text-[#a39d9d]",children:ze.title})}),c.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[nl?c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{zs(v=>!v),br||Xs("")},children:c.jsx(Wa,{className:`h-4 w-4 ${br?"rotate-180":""}`})}):null,c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{const v=Date.now(),A=`${v}-${Math.random().toString(16).slice(2)}`;Qs(H=>[...H,{id:A,title:lo,createdAt:v,updatedAt:v,messages:[],draft:"",changeSet:null}]),Kr(A),zs(!1)},children:c.jsx(bh,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>gr(!1),children:c.jsx(Dh,{className:"h-4 w-4"})})]})]})}),nl&&br?c.jsx("div",{className:"border-b border-transparent bg-panel px-3 pb-2",children:c.jsxs("div",{className:"ws-panel2 overflow-hidden rounded-xl border border-border",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5",children:[c.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[c.jsx(Ah,{className:"h-4 w-4 text-muted"}),c.jsx("input",{className:"w-full bg-transparent text-sm text-text outline-none placeholder:text-muted",placeholder:"Search",value:Bs,onChange:v=>Xs(v.currentTarget.value),autoFocus:!0})]}),c.jsx("div",{className:"shrink-0 rounded-md bg-panel px-2 py-1 text-[11px] text-muted",children:"All Conversations"})]}),c.jsx("div",{className:"h-2"}),c.jsx("div",{className:"max-h-56 overflow-auto px-1 pb-1",children:Qt.slice().sort((v,A)=>A.updatedAt-v.updatedAt).filter(v=>v.messages.some(A=>A.role==="user")).filter(v=>{const A=Bs.trim().toLowerCase();return A?`${v.title}
${v.messages.filter(Y=>Y.role==="user").map(Y=>Y.content).join(`
`)}`.toLowerCase().includes(A):!0}).map(v=>c.jsxs("button",{type:"button",className:`flex w-full items-start justify-between gap-3 rounded-lg px-2 py-2 text-left focus-visible:outline-none hover:bg-panel ${v.id===Zt?"bg-panel":""}`,onClick:()=>{Kr(v.id),zs(!1),window.setTimeout(()=>Jr.current?.focus(),0)},children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"truncate text-sm text-text",children:v.title}),c.jsx("div",{className:"truncate text-[11px] text-muted",children:Lc})]}),c.jsx("div",{className:"shrink-0 pt-0.5 text-[11px] text-muted",children:N0(v.updatedAt)})]},v.id))})]})}):null,ze.changeSet?c.jsx("div",{className:"px-3 pt-2",children:c.jsxs("div",{className:"rounded-lg bg-[rgb(var(--p-panel2))] px-2 py-1",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("button",{type:"button",className:"flex min-w-0 items-center gap-2 rounded-md px-2 py-1 text-left hover:bg-[rgb(var(--p-panel))]",onClick:()=>go(v=>!v),children:[c.jsx(Wa,{className:`h-4 w-4 text-muted ${vo?"rotate-180":""}`}),c.jsxs("div",{className:"min-w-0 text-[11px] text-muted",children:[c.jsxs("span",{className:"text-text",children:[ze.changeSet.stats.files," files"]}),c.jsxs("span",{className:"ml-2 text-emerald-300",children:["+",ze.changeSet.stats.added]}),c.jsxs("span",{className:"ml-2 text-red-300",children:["-",ze.changeSet.stats.removed]})]})]}),c.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[c.jsx("button",{type:"button",disabled:ai,className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{dl()},children:"Reject all"}),c.jsx("button",{type:"button",disabled:ai,className:"ws-btn h-7 border border-accent bg-accent px-2 text-white hover:opacity-90 disabled:opacity-50",onClick:()=>bo(),children:"Accept all"})]})]}),vo?c.jsx("div",{className:"mt-2",children:c.jsx("div",{className:"max-h-56 overflow-auto",children:ze.changeSet.files.map((v,A)=>{const H=v.kind==="write",Y=H&&At===v.path,oe=v.kind==="write"?"M":v.kind==="delete"?"D":"R",de=v.kind==="write"?"bg-emerald-500/15 text-emerald-300":v.kind==="delete"?"bg-red-500/15 text-red-300":"bg-sky-500/15 text-sky-300";return c.jsxs("div",{className:`flex items-center justify-between gap-2 rounded-md px-2 py-1 ${Y?"bg-[rgb(var(--p-panel))]":"hover:bg-[rgb(var(--p-panel))]"}`,children:[c.jsxs("button",{type:"button",className:"flex min-w-0 flex-1 items-center gap-2 text-left",onClick:()=>{H&&(ci(v.path),wt(v.path))},children:[c.jsx("span",{className:`flex h-5 w-5 items-center justify-center rounded text-[11px] ${de}`,children:oe}),c.jsx("span",{className:`min-w-0 truncate text-[11px] ${H?"text-text":"text-muted"}`,children:v.path})]}),H?c.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[c.jsx("button",{type:"button",disabled:ai,className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>{Dr(v.path)},children:"Revert"}),c.jsx("button",{type:"button",disabled:ai,className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>xi(v.path),children:"Accept"})]}):null]},`${v.kind}:${v.path}:${A}`)})})}):null]})}):null,c.jsxs("div",{ref:Sr,className:`min-h-0 flex-1 overflow-auto px-3 py-3 ${ys&&!ze.messages.length?"flex items-center justify-center":""}`,children:[wi?c.jsx("div",{className:"mb-3 rounded-lg border border-border bg-bg p-3 text-sm text-muted",children:wi}):null,ze.messages.length?c.jsx("div",{className:"space-y-3",children:ze.messages.map((v,A)=>v.role==="meta"?c.jsx("div",{className:v.content==="Thinking"?"flex justify-center":"flex justify-start",children:v.content==="Thinking"?c.jsx("span",{className:"ws-thinking",children:c.jsxs("span",{children:["Thinking",c.jsxs("span",{className:"ws-thinking-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]})}):c.jsxs("div",{className:"ws-agent-step",children:[c.jsx("span",{className:"ws-agent-dot"}),c.jsx("span",{className:"whitespace-pre-wrap break-words",children:v.content})]})},A):c.jsx("div",{className:`flex ${v.role==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:"max-w-[92%]",children:[v.role==="assistant"&&v.kind==="run_request"&&v.run?c.jsxs("div",{className:"ws-msg ws-msg-anim ws-msg-assistant","data-run-menu-root":!0,children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-[11px] text-muted",children:"Run"}),c.jsx("div",{className:"mt-1 font-mono text-[12px] text-text",children:c.jsx("span",{className:"rounded border border-border bg-bg px-2 py-1",children:v.run.cmd})}),v.run.error?c.jsx("div",{className:"mt-2 rounded border border-red-500/30 bg-bg px-2 py-1 text-[11px] text-muted",children:v.run.error}):null]}),c.jsxs("div",{className:"shrink-0 text-right",children:[c.jsx("div",{className:"text-[10px] text-muted",children:"Status"}),c.jsx("div",{className:"mt-1 text-[11px] text-text",children:v.run.status})]})]}),c.jsxs("div",{className:"mt-2 flex items-center justify-end gap-2",children:[c.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-7 px-2",disabled:v.run.status!=="pending",onClick:()=>Tc(v.id??""),children:"Cancel"}),v.run.status==="done"&&v.run.error?c.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{sa(v.id??"")},children:"Fix"}):null,c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",className:"ws-btn ws-btn-primary h-7 px-3",disabled:v.run.status!=="pending",onClick:()=>{Pn(v.id??"","once")},children:"Run"}),c.jsx("button",{type:"button",className:"ml-1 ws-icon-btn h-7 w-7 rounded-lg border border-border bg-panel disabled:opacity-50",disabled:v.run.status!=="pending",onClick:()=>$(H=>H===(v.id??"")?null:v.id??""),children:c.jsx(Wa,{className:"h-3.5 w-3.5"})}),I===(v.id??"")?c.jsxs("div",{className:"absolute right-0 top-full z-50 mt-1 w-56 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[c.jsx(ue,{label:"Run once",onClick:()=>{$(null),Pn(v.id??"","once")}}),c.jsx(ue,{label:"Always allow & run",onClick:()=>{$(null),Pn(v.id??"","always")}})]}):null]})]}),Array.isArray(v.run.remaining)&&v.run.remaining.length?c.jsxs("div",{className:"mt-2 text-[11px] text-muted",children:["Next: ",c.jsx("span",{className:"font-mono",children:v.run.remaining[0]})]}):null]}):c.jsx("div",{className:`ws-msg ws-msg-anim ${v.role==="user"?"ws-msg-user":"ws-msg-assistant"}`,children:c.jsx("div",{className:"whitespace-pre-wrap break-words",children:v.content})}),v.role==="assistant"?c.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[c.jsx("button",{type:"button",className:`ws-icon-btn ${v.rating==="up"?"text-text":""}`,onClick:()=>fn(A,"up"),children:c.jsx(d0,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:`ws-icon-btn ${v.rating==="down"?"text-text":""}`,onClick:()=>fn(A,"down"),children:c.jsx(u0,{className:"h-4 w-4"})})]}):null]})},A))}):c.jsxs("div",{className:"flex min-h-[240px] flex-col items-center text-center",children:[c.jsx("img",{src:"/logo_transparent_bigger.png",alt:"Pompora",className:"h-47 w-47 opacity-90"}),c.jsx("div",{className:"mt-4 text-base font-semibold text-text",children:"Pompora Code"}),c.jsx("div",{className:"mt-1 max-w-[320px] text-sm text-muted",children:"Build and improve your codebase - privately."})]})]}),c.jsx("div",{className:"bg-panel px-3 py-2",children:c.jsxs("div",{className:"ws-panel2 rounded-md border border-border p-2",children:[c.jsx("textarea",{ref:Jr,className:"h-16 w-full resize-none bg-transparent px-2 py-1 text-sm font-normal text-muted outline-none placeholder:text-muted focus-visible:outline-none",placeholder:"Ask anything (Ctrl+L)",value:ze.draft,onChange:v=>xr(v.currentTarget.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),Ki())}}),c.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2 px-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>_e({kind:"info",title:"Add",message:"Coming next."}),children:c.jsx(bh,{className:"h-4 w-4"})}),c.jsxs("div",{className:"relative","data-model-picker-root":!0,children:[c.jsxs("button",{type:"button",className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-text hover:bg-[rgb(var(--p-panel2))] focus-visible:outline-none",onClick:()=>{Oc(),Us(v=>!v)},onMouseEnter:v=>{wi&&un(v.currentTarget,wi,"tr")},onMouseLeave:hn,children:[c.jsx("span",{className:`text-sm ${Q.active_provider==="pompora"?"text-text":mo?"text-muted":Fn?"text-text":"text-muted"}`,children:ha}),c.jsx(Wa,{className:`h-4 w-4 text-muted ${vs?"rotate-180":""}`})]}),vs?c.jsxs("div",{className:"absolute left-0 bottom-full z-50 mb-2 w-56 overflow-hidden rounded-xl border border-border bg-panel shadow",children:[c.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Pompora"}),["slow","fast","reasoning"].map(v=>{const A=pr.pompora,H=(Q.active_provider??"")==="pompora"&&String(Q.pompora_thinking??"slow")===v,Y=!nt,oe=nt?!Mc.has(v):!0,de=nt?A?.is_configured!==!0:!0,we=Y||oe||de,Ae=Y?"Log in":v==="reasoning"?"Pro":v==="fast"?"Plus":"Starter",Re=v==="reasoning"?"Pompora Reasoning":v==="fast"?"Pompora Fast":"Pompora Slow";return c.jsxs("button",{type:"button",className:`flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-[rgb(var(--p-panel2))] ${H?"bg-[rgb(var(--p-panel2))]":""} ${we?"text-muted opacity-60":"text-text"}`,onClick:()=>{if(we){qi(),Us(!1);return}ga(v),Us(!1)},onMouseEnter:Se=>{we&&un(Se.currentTarget,Y?"Log in to use Pompora AI":de?"Finish signing in to Pompora":"Upgrade your plan to unlock this mode","tr")},onMouseLeave:hn,children:[c.jsx("span",{children:Re}),c.jsx("span",{className:"text-xs text-muted",children:Ae})]},`pompora-${v}`)}),c.jsx("div",{className:"border-t border-border"}),c.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"BYOK"}),Ii.filter(v=>v.id!=="pompora").map(v=>{const A=pr[v.id],H=v.api?A?.is_configured!==!0:!1;return c.jsxs("button",{type:"button",className:`flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-[rgb(var(--p-panel2))] ${(Q.active_provider??"")===v.id?"bg-[rgb(var(--p-panel2))]":""} ${H?"text-muted opacity-60":"text-text"}`,onClick:()=>{ml(v.id),Us(!1)},onMouseEnter:Y=>{H&&un(Y.currentTarget,"Add an API key in Settings (Ctrl+,)","tr")},onMouseLeave:hn,children:[c.jsx("span",{className:v.api?"":"text-muted",children:v.label}),c.jsx("span",{className:"text-xs text-muted",children:v.api?H?"API key":"API":"Local"})]},v.id)})]}):null]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",className:"relative h-6 w-6 rounded-full focus-visible:outline-none",onMouseEnter:v=>un(v.currentTarget,`${Math.round(da.pct*100)}% (${da.used.toLocaleString()} / ${da.total.toLocaleString()}) context used`,"tr"),onMouseLeave:hn,style:{background:`conic-gradient(rgb(var(--p-muted)) ${Math.round(da.pct*360)}deg, rgb(var(--p-panel2)) 0deg)`},children:c.jsx("span",{className:"absolute inset-[2px] rounded-full bg-panel"})}),c.jsx("button",{type:"button",disabled:vr||!ze.draft.trim(),className:`ws-icon-btn ${ys?"":"cursor-not-allowed opacity-50"}`,onClick:()=>{if(!ys){qi();return}Ki()},onMouseEnter:v=>{!ys&&wi&&un(v.currentTarget,wi,"tr")},onMouseLeave:hn,children:c.jsx(jg,{className:"h-4 w-4"})})]})]})]})})]})]}):null]}),c.jsx("footer",{className:"flex items-center justify-end border-t border-border bg-panel px-3 text-[11px] text-muted",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:ke?ke.path:"No file"}),ke?c.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:ke.language}):null,ke?c.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:oa?`Ln ${oa.line}, Col ${oa.col}`:"Ln -, Col -"}):null,c.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:"Free plan"}),c.jsxs("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},"aria-label":"Notifications",children:[c.jsx(Ng,{className:"h-4 w-4"}),yr.length?c.jsx("span",{className:"text-[11px]",children:yr.length}):null]})]})})]}),X?c.jsx(eb,{query:q,setQuery:h,commands:Cs,index:d,setIndex:m,onClose:()=>te(!1),onRun:v=>{v.run(),te(!1)}}):null,x?c.jsx(V0,{query:w,setQuery:T,files:l,index:k,setIndex:C,isLoading:g,onClose:()=>p(!1),onPick:v=>{wt(v),p(!1)}}):null,R?c.jsx(X0,{value:b,setValue:M,onClose:()=>L(!1),onGo:v=>{fa(v),L(!1)}}):null,Si?c.jsx(Z0,{x:Si.x,y:Si.y,onClose:()=>la(null),items:[{id:"newFile",label:"New File...",onClick:()=>{_a()}},{id:"newFolder",label:"New Folder...",onClick:()=>{rs()}},{id:"rename",label:"Rename...",onClick:()=>{ma()}},{id:"delete",label:"Delete",onClick:()=>{Wn()}},{id:"copyPath",label:"Copy Relative Path",onClick:()=>{pl(Si.path)}},{id:"copyFullPath",label:"Copy Full Path",onClick:()=>{const v=(P.root??"").replace(/\\/g,"/").replace(/\/$/,""),A=Si.path.replace(/^\//,"");pl(v&&A?`${v}/${A}`:Si.path)}}]}):null,Ks?c.jsx("div",{className:"fixed z-[9999] pointer-events-none select-none ws-msg-anim max-w-[320px] rounded-md border border-border ws-panel2 px-2 py-1 text-[11px] text-text shadow-xl backdrop-blur-sm",style:{left:Ks.x,top:Ks.y,transform:Ks.placement==="above"?Ks.align==="tr"?"translate(-100%, -110%)":"translate(0, -110%)":Ks.align==="tr"?"translate(-100%, 10%)":"translate(0, 10%)"},children:Ks.text}):null]})}function $0(f,_){let D=0;for(let E=0;E<_.length&&D<f.length;E++)_[E]===f[D]&&D++;return D===f.length}function V0(f){const _=f.query.trim().toLowerCase(),D=z.useMemo(()=>{if(!f.files.length)return[];if(!_)return f.files.slice(0,60);const E=[];for(const X of f.files){const te=X.toLowerCase();if((te.includes(_)||$0(_,te))&&(E.push(X),E.length>=120))break}return E},[f.files,_]);return z.useEffect(()=>{const E=X=>{if(X.key==="ArrowDown"&&(X.preventDefault(),f.setIndex(Math.min(f.index+1,Math.max(0,D.length-1)))),X.key==="ArrowUp"&&(X.preventDefault(),f.setIndex(Math.max(0,f.index-1))),X.key==="Enter"){X.preventDefault();const te=D[f.index];te&&f.onPick(te)}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[D,f]),c.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:f.onClose,children:c.jsxs("div",{className:"mx-auto mt-20 w-[820px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:E=>E.stopPropagation(),children:[c.jsxs("div",{className:"border-b border-border p-3",children:[c.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Type to search files",autoFocus:!0,value:f.query,onChange:E=>f.setQuery(E.currentTarget.value)}),c.jsx("div",{className:"mt-2 text-xs text-muted",children:f.isLoading?"Indexing files...":`${f.files.length} files`})]}),c.jsx("div",{className:"max-h-[360px] overflow-auto p-2",children:D.length?D.map((E,X)=>c.jsx("button",{type:"button",className:`flex w-full items-center justify-between rounded px-3 py-2 text-left text-sm ${X===f.index?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onMouseEnter:()=>f.setIndex(X),onClick:()=>f.onPick(E),children:c.jsx("span",{className:"truncate",children:E})},E)):c.jsx("div",{className:"p-3 text-sm text-muted",children:"No matches"})})]})})}function X0(f){return z.useEffect(()=>{const _=D=>{if(D.key==="Enter"){D.preventDefault();const E=Number.parseInt(f.value.trim(),10);Number.isFinite(E)&&E>0&&f.onGo(E)}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[f]),c.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:f.onClose,children:c.jsxs("div",{className:"mx-auto mt-20 w-[520px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:_=>_.stopPropagation(),children:[c.jsxs("div",{className:"border-b border-border p-3",children:[c.jsx("div",{className:"mb-2 text-xs font-semibold text-muted",children:"Go to Line"}),c.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Line number",autoFocus:!0,value:f.value,onChange:_=>f.setValue(_.currentTarget.value)})]}),c.jsx("div",{className:"p-3",children:c.jsx("button",{type:"button",className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-muted hover:border-accent hover:text-text",onClick:()=>{const _=Number.parseInt(f.value.trim(),10);Number.isFinite(_)&&_>0&&f.onGo(_)},children:"Go"})})]})})}function kh(f){const{id:_,active:D,onClick:E,Icon:X}=f;return c.jsxs("button",{type:"button",className:`relative mx-auto flex h-9 w-9 items-center justify-center rounded-md ${D?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:()=>E(_),"aria-current":D?"page":void 0,children:[c.jsx("span",{"aria-hidden":!0,className:`absolute left-[-10px] top-1.5 h-6 w-0.5 rounded bg-accent transition-opacity ${D?"opacity-100":"opacity-0"}`}),c.jsx(X,{className:"h-5 w-5"})]})}function Rh(f){return c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsx("div",{className:"border-b border-border bg-panel px-3 py-2 text-xs font-normal text-muted",children:f.title}),c.jsx("div",{className:"min-h-0 flex-1 overflow-auto p-2",children:f.children})]})}function Q0(f){if(!f.workspaceRoot)return c.jsx(Rh,{title:"Explorer",children:c.jsx(Mh,{title:"No folder opened",subtitle:"Open a folder to browse files and start editing.",onOpenFolder:f.onOpenFolder,onOpenFile:void 0,recentWorkspaces:f.recent,recentFiles:[],onOpenRecentWorkspace:f.onOpenRecent,onOpenRecentFile:void 0,onOpenChat:void 0,onOpenCommandPalette:void 0,compact:!0})});const _=f.explorer[""]??[];return c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between border-border bg-panel px-3 py-2",children:[c.jsx("div",{className:"text-xs font-normal text-[#a39d9d]",children:"Explorer"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:f.onCreateNewFile,children:c.jsx(Em,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:f.onCreateNewFolder,children:c.jsx(Am,{className:"h-4 w-4"})}),c.jsx("button",{type:"button",className:"ws-icon-btn",onClick:f.onRefresh,children:c.jsx(e0,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"min-h-0 flex-1 overflow-auto p-1",children:c.jsx(Om,{prefix:"",entries:_,explorer:f.explorer,expandedDirs:f.expandedDirs,selectedPath:f.selectedPath,onContextMenu:f.onContextMenu,workspaceRoot:f.workspaceRoot,showTooltipForEl:f.showTooltipForEl,hideTooltip:f.hideTooltip,onToggleDir:f.onToggleDir,onSelect:f.onSelect,onOpenFile:f.onOpenFile})})]})}function Om(f){const _=z.useRef(null);return z.useEffect(()=>()=>{_.current&&window.clearTimeout(_.current),_.current=null},[]),c.jsx("div",{className:"space-y-0.5",children:f.entries.map(D=>{const E=f.selectedPath===D.path,X=E?"bg-panel text-text":"text-muted hover:bg-panel hover:text-text hover:translate-x-[1px] hover:-translate-y-[0.5px]",te=E?"bg-accent opacity-100":"opacity-0";if(D.is_dir){const h=f.expandedDirs.has(D.path),d=f.explorer[D.path]??[];return c.jsxs("div",{children:[c.jsxs("button",{type:"button",className:`group relative flex w-full items-center gap-2 rounded-md px-2 py-0.5 text-left text-[13px] transition-all duration-150 ${X}`,onClick:()=>{f.onSelect(D.path),f.onToggleDir(D.path)},onContextMenu:m=>{m.preventDefault(),f.onSelect(D.path),f.onContextMenu({x:m.clientX,y:m.clientY,path:D.path,isDir:!0})},children:[c.jsx("span",{"aria-hidden":!0,className:`absolute left-0 top-1.5 h-4 w-0.5 rounded ${te}`}),c.jsx(Rs,{className:`h-4 w-4 text-muted transition-transform duration-150 group-hover:text-text ${h?"rotate-90":""}`}),c.jsx(Am,{className:"h-4 w-4 text-muted transition-transform duration-150 group-hover:scale-[1.03] group-hover:text-text"}),c.jsx("span",{className:"truncate",children:D.name})]}),h?c.jsx("div",{className:"ml-4 border-l border-border/60 pl-2",children:c.jsx(Om,{prefix:D.path,entries:d,explorer:f.explorer,expandedDirs:f.expandedDirs,selectedPath:f.selectedPath,onContextMenu:f.onContextMenu,workspaceRoot:f.workspaceRoot,showTooltipForEl:f.showTooltipForEl,hideTooltip:f.hideTooltip,onToggleDir:f.onToggleDir,onSelect:f.onSelect,onOpenFile:f.onOpenFile})}):null]},D.path)}const q=G0(D.path);return c.jsxs("button",{type:"button",className:`group relative flex w-full items-center gap-2 rounded-md px-2 py-0.5 text-left text-[13px] transition-all duration-150 ${X}`,onMouseEnter:h=>{_.current&&window.clearTimeout(_.current),_.current=window.setTimeout(()=>{if(_.current=null,!f.workspaceRoot)return;const d=f.workspaceRoot.replace(/\\/g,"/").replace(/\/$/,""),m=D.path.replace(/^\//,"");f.showTooltipForEl(h.currentTarget,`${d}/${m}`,"tl")},350)},onMouseLeave:()=>{_.current&&window.clearTimeout(_.current),_.current=null,f.hideTooltip()},onMouseDown:()=>{_.current&&window.clearTimeout(_.current),_.current=null,f.hideTooltip()},onClick:()=>{f.onSelect(D.path),f.onOpenFile(D.path)},onContextMenu:h=>{h.preventDefault(),f.onSelect(D.path),f.onContextMenu({x:h.clientX,y:h.clientY,path:D.path,isDir:!1})},children:[c.jsx("span",{"aria-hidden":!0,className:`absolute left-0 top-1.5 h-4 w-0.5 rounded ${te}`}),c.jsx("span",{className:"inline-block w-4"}),c.jsx(q,{className:"h-4 w-4 text-muted transition-transform duration-150 group-hover:scale-[1.03] group-hover:text-text"}),c.jsx("span",{className:"truncate",children:D.name})]},D.path)})})}function Z0(f){return c.jsx("div",{className:"fixed inset-0 z-50",onMouseDown:f.onClose,children:c.jsx("div",{className:"absolute w-56 overflow-hidden rounded border border-border bg-panel shadow-2xl",style:{left:f.x,top:f.y},onMouseDown:_=>_.stopPropagation(),children:f.items.map(_=>c.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm text-muted hover:bg-bg hover:text-text",onClick:()=>{_.onClick(),f.onClose()},children:c.jsx("span",{children:_.label})},_.id))})})}function J0(f){return c.jsx("div",{className:"relative",children:c.jsxs("div",{className:`group relative flex h-8 max-w-[220px] items-center gap-2 rounded-md px-2 text-[13px] ${f.active?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:f.onActivate,role:"button",tabIndex:0,onKeyDown:_=>{_.key==="Enter"&&f.onActivate()},children:[c.jsx("span",{className:"min-w-0 flex-1 truncate",children:f.tab.name}),f.tab.isDirty?c.jsx("span",{className:"text-[10px] text-accent",children:""}):null,c.jsx("button",{type:"button",className:"ml-1 rounded p-0.5 text-muted opacity-0 hover:bg-panel hover:text-text group-hover:opacity-100",onClick:_=>{_.stopPropagation(),f.onClose()},children:c.jsx(Dh,{className:"h-3.5 w-3.5"})}),c.jsx("span",{"aria-hidden":!0,className:`absolute bottom-0 left-2 right-2 h-px rounded bg-accent transition-opacity ${f.active?"opacity-100":"opacity-0"}`})]})})}function Mh(f){const _=!!f.compact,D=f.title??"POMPORA",E=f.subtitle??"Getting started with Pompora",X=f.hint??"Open a folder, then open a file to begin.",te=(f.recentFiles??[]).filter(d=>typeof d=="string"),q=(f.recentWorkspaces??[]).filter(d=>typeof d=="string"),h=d=>{const m=d.replace(/\\/g,"/");return{name:Li(m),detail:m}};return c.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[_?null:c.jsxs("svg",{className:"pointer-events-none absolute inset-0 h-full w-full",viewBox:"0 0 1200 720",preserveAspectRatio:"none","aria-hidden":!0,children:[c.jsxs("defs",{children:[c.jsxs("radialGradient",{id:"pomporaDotsFade",cx:"62%",cy:"46%",r:"78%",children:[c.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"1"}),c.jsx("stop",{offset:"55%",stopColor:"white",stopOpacity:"0.35"}),c.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]}),c.jsx("mask",{id:"pomporaDotsMask",children:c.jsx("rect",{width:"1200",height:"720",fill:"url(#pomporaDotsFade)"})}),c.jsxs("pattern",{id:"pomporaDots",width:"180",height:"180",patternUnits:"userSpaceOnUse",children:[c.jsx("circle",{cx:"24",cy:"34",r:"1.2",fill:"rgb(var(--p-muted))",fillOpacity:"0.22"}),c.jsx("circle",{cx:"86",cy:"62",r:"1.6",fill:"rgb(var(--p-muted))",fillOpacity:"0.16"}),c.jsx("circle",{cx:"148",cy:"26",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.14"}),c.jsx("circle",{cx:"58",cy:"134",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.12"}),c.jsx("circle",{cx:"132",cy:"128",r:"1.8",fill:"rgb(var(--p-muted))",fillOpacity:"0.18"}),c.jsx("circle",{cx:"170",cy:"164",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),c.jsx("circle",{cx:"40",cy:"92",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),c.jsx("circle",{cx:"104",cy:"156",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),c.jsx("circle",{cx:"164",cy:"84",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"})]})]}),c.jsx("g",{mask:"url(#pomporaDotsMask)",children:c.jsx("rect",{width:"1200",height:"720",fill:"url(#pomporaDots)",opacity:"0.9"})})]}),c.jsx("div",{className:`relative z-10 flex h-full w-full flex-col items-center ${_?"justify-start":"justify-center"}`,children:c.jsx("div",{className:`w-full ${_?"px-2 py-2":"px-6 py-6"}`,children:c.jsxs("div",{className:`mx-auto w-full ${_?"max-w-none":"max-w-[760px]"}`,children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:`${_?"ws-brand-title text-2xl":"ws-brand-title text-5xl md:text-6xl"} font-normal text-text`,children:D}),c.jsx("div",{className:`${_?"mt-1 text-[11px]":"mt-2 text-sm"} text-muted`,children:E}),c.jsx("div",{className:`${_?"mt-1 text-[10px]":"mt-1 text-xs"} text-muted`,children:X})]}),c.jsxs("div",{className:`${_?"mt-4":"mt-7"} space-y-6`,children:[c.jsxs("section",{className:"text-left",children:[c.jsx("div",{className:"ws-welcome-section-title",children:"Quick actions"}),c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>f.onOpenChat?.(),disabled:!f.onOpenChat,children:[c.jsx("span",{className:"truncate",children:"Open Chat"}),c.jsx("span",{className:"ws-kbd",children:"Ctrl+L"})]}),c.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>f.onOpenCommandPalette?.(),disabled:!f.onOpenCommandPalette,children:[c.jsx("span",{className:"truncate",children:"Open Command Palette"}),c.jsx("span",{className:"ws-kbd",children:"Ctrl+Shift+P"})]})]})]}),q.length>0||te.length>0&&f.onOpenRecentFile?c.jsxs("section",{className:"text-left",children:[c.jsx("div",{className:"ws-welcome-section-title",children:"Recent"}),q.length?c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"ws-welcome-subtitle",children:"Workspaces"}),c.jsx("div",{className:"mt-2 space-y-2",children:q.slice(0,1).map(d=>c.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>f.onOpenRecentWorkspace(d),children:[c.jsx("span",{className:"truncate",children:d}),c.jsx("span",{className:"text-[11px] text-muted",children:"Open"})]},d))})]}):null,te.length&&f.onOpenRecentFile?c.jsxs("div",{className:`${q.length?"mt-6":"mt-3"}`,children:[c.jsx("div",{className:"ws-welcome-subtitle",children:"Files"}),c.jsx("div",{className:"mt-2 space-y-2",children:te.slice(0,3).map(d=>{const m=h(d);return c.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>f.onOpenRecentFile?.(d),children:[c.jsx("span",{className:"min-w-0 flex-1 truncate",children:m.name}),c.jsx("span",{className:"ml-3 max-w-[56%] truncate text-[11px] text-muted",children:m.detail})]},d)})})]}):null]}):null]})]})})})]})}function eb(f){const _=f.commands;return z.useEffect(()=>{const D=E=>{if(E.key==="ArrowDown"&&(E.preventDefault(),f.setIndex(Math.min(f.index+1,Math.max(0,_.length-1)))),E.key==="ArrowUp"&&(E.preventDefault(),f.setIndex(Math.max(0,f.index-1))),E.key==="Enter"){E.preventDefault();const X=_[f.index];X&&f.onRun(X)}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[_,f]),c.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:f.onClose,children:c.jsxs("div",{className:"mx-auto mt-20 w-[820px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:D=>D.stopPropagation(),children:[c.jsx("div",{className:"border-b border-border p-3",children:c.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Type a command",autoFocus:!0,value:f.query,onChange:D=>f.setQuery(D.currentTarget.value)})}),c.jsx("div",{className:"max-h-[360px] overflow-auto p-2",children:_.length?_.map((D,E)=>c.jsxs("button",{type:"button",className:`flex w-full items-center justify-between rounded px-3 py-2 text-left text-sm ${E===f.index?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onMouseEnter:()=>f.setIndex(E),onClick:()=>f.onRun(D),children:[c.jsx("span",{children:D.label}),c.jsx("span",{className:"text-xs text-muted",children:D.shortcut??""})]},D.id)):c.jsx("div",{className:"p-3 text-sm text-muted",children:"No commands"})})]})})}const tb=f=>{const[_,D]=z.useState(""),E=_.trim().toLowerCase(),X=z.useMemo(()=>[{id:"common",label:"Commonly Used",icon:a0},{id:"workspace",label:"Workspace",icon:km},{id:"appearance",label:"Appearance",icon:Qg},{id:"ai",label:"AI",icon:_0}],[]),te=f.keyStatus?.is_configured?"Configured":"Not configured",[q,h]=z.useState("workspace"),d=z.useMemo(()=>({common:{title:"Commonly Used",description:"Frequently changed settings"},workspace:{title:"Workspace",description:"Workspace folder and recent workspaces"},appearance:{title:"Appearance",description:"Theme"},ai:{title:"AI",description:"Provider and offline mode"}}),[]);z.useEffect(()=>{new Set(X.map(C=>C.id)).has(q)||h("workspace")},[q,X]);const m=z.useMemo(()=>new Set(["workspace.folder","appearance.theme","ai.offline"]),[]),x=k=>{const[C,a]=z.useState(!1),u=z.useRef(null),l=k.options.find(o=>o.value===k.value)??k.options[0];return z.useEffect(()=>{const o=g=>{if(!C)return;const y=g.target;y&&(u.current?.contains(y)||a(!1))};return window.addEventListener("mousedown",o),()=>window.removeEventListener("mousedown",o)},[C]),c.jsxs("div",{ref:u,className:`relative ${k.widthClassName??""}`.trim(),children:[c.jsxs("button",{type:"button",className:"ws-vscode-dropdown-btn",onClick:()=>a(o=>!o),"aria-expanded":C,children:[c.jsx("span",{className:"truncate",children:l?.label??""}),c.jsx(Wa,{className:`h-4 w-4 shrink-0 text-muted transition-transform ${C?"rotate-180":""}`})]}),C?c.jsx("div",{className:"ws-vscode-dropdown-menu",children:k.options.map(o=>c.jsx("button",{type:"button",className:`ws-vscode-dropdown-item ${o.value===k.value?"ws-vscode-dropdown-item-active":""}`,onClick:()=>{k.onChange(o.value),a(!1)},children:o.label},o.value))}):null]})},p=k=>c.jsx("button",{type:"button",className:`ws-vscode-switch ${k.disabled?"opacity-60":""}`,"data-checked":k.checked?"true":"false",onClick:()=>{k.disabled||k.onChange(!k.checked)},"aria-checked":k.checked,role:"switch",children:c.jsx("span",{className:"ws-vscode-switch-thumb"})}),w=z.useMemo(()=>[{id:"workspace.folder",section:"workspace",title:"Workspace Folder",description:"Choose the folder you want to work in.",keywords:"workspace folder open",renderControl:()=>c.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:f.onPickFolder,children:"Open Folder"})},{id:"appearance.theme",section:"appearance",title:"Theme",description:"Choose the color theme.",keywords:"theme dark light appearance",renderControl:()=>c.jsx(x,{value:f.settings.theme,options:[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],onChange:k=>f.onChangeTheme(k)})},{id:"ai.offline",section:"ai",title:"AI: Offline Mode",description:"Disable all network AI calls.",keywords:"offline ai network",renderControl:()=>c.jsx(p,{checked:f.settings.offline_mode,onChange:()=>f.onToggleOffline(),disabled:f.isTogglingOffline})},...f.settings.active_provider&&f.settings.active_provider!=="pompora"?[{id:"ai.apiKey",section:"ai",title:"AI: API Key",description:"Paste your API key for the selected provider.",keywords:"api key security",renderControl:()=>c.jsx("input",{className:"ws-vscode-input",placeholder:"Paste your API key",value:f.apiKeyDraft,autoComplete:"off",spellCheck:!1,onChange:k=>f.onApiKeyDraft(k.target.value)})}]:[],{id:"ai.encryption",section:"ai",title:"Encryption Password",description:"Optional extra protection for secrets storage.",keywords:"encryption password security",renderControl:()=>c.jsx("input",{className:"ws-vscode-input",placeholder:"Optional encryption password",type:f.encryptionPasswordDraft?"text":"password",value:f.encryptionPasswordDraft,autoComplete:"off",spellCheck:!1,onChange:k=>f.onEncryptionPasswordDraft(k.target.value)})}],[f]),T=z.useMemo(()=>{if(!E)return q==="common"?w.filter(C=>m.has(C.id)):w.filter(C=>C.section===q);const k=E.toLowerCase();return w.filter(C=>`${C.title} ${C.description} ${C.keywords??""}`.toLowerCase().includes(k))},[q,m,E,w]);return c.jsxs("div",{className:"flex h-full flex-col bg-bg",children:[c.jsx("div",{className:"border-b border-border bg-panel px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Dm,{className:"h-4 w-4 text-muted"}),c.jsx("div",{className:"text-sm font-semibold text-text",children:"Settings"})]}),c.jsxs("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-primary",onClick:f.onSaveSettings,disabled:!f.isSettingsLoaded||f.isSavingSettings,children:[c.jsx(i0,{className:"h-4 w-4"}),"Save Settings"]})]})}),c.jsx("div",{className:"min-h-0 flex-1 overflow-hidden",children:c.jsxs("div",{className:"grid h-full grid-cols-[260px_1fr]",children:[c.jsx("aside",{className:"min-w-0 border-r border-border bg-panel",children:c.jsx("div",{className:"flex h-full flex-col",children:c.jsxs("div",{className:"min-h-0 flex-1 overflow-auto px-2 pb-3 pt-4",children:[c.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"User"}),c.jsx("div",{className:"space-y-0.5",children:X.map(k=>{const C=!E&&k.id===q;return c.jsx("button",{type:"button",className:`ws-vscode-nav-item ${C?"ws-vscode-nav-item-active":""}`,onClick:()=>{h(k.id),D("")},children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(k.icon,{className:"h-4 w-4"}),c.jsx("span",{className:"truncate",children:k.label})]})},k.id)})})]})})}),c.jsx("main",{className:"min-w-0 overflow-auto bg-bg",children:c.jsxs("div",{className:"mx-auto w-full max-w-[980px] p-4",children:[c.jsx("div",{className:"mb-3",children:c.jsxs("div",{className:"relative",children:[c.jsx(Ah,{className:"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-muted"}),c.jsx("input",{className:"ws-vscode-search pl-9",placeholder:"Search settings",value:_,onChange:k=>D(k.currentTarget.value)})]})}),c.jsxs("div",{className:"mb-3",children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:E?"Search results":d[q].title}),c.jsx("div",{className:"mt-1 text-xs text-muted",children:E?`Showing ${T.length} setting(s)`:d[q].description})]}),c.jsx("div",{className:"ws-vscode-settings",children:T.length?T.map(k=>c.jsxs("div",{className:"ws-vscode-setting-row",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm text-text",children:k.title}),c.jsx("div",{className:"mt-0.5 text-xs text-muted",children:k.description})]}),c.jsx("div",{className:"ws-vscode-setting-control",children:k.renderControl()})]},k.id)):c.jsx("div",{className:"p-4 text-sm text-muted",children:"No settings found."})}),q==="workspace"&&!E?c.jsxs("div",{className:"mt-4",children:[c.jsx("div",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted",children:"Recent workspaces"}),f.recentWorkspaces.length?c.jsx("div",{className:"ws-vscode-settings",children:f.recentWorkspaces.slice(0,12).map(k=>c.jsx("button",{type:"button",className:"ws-vscode-list-row",onClick:()=>f.onOpenRecent(k),children:c.jsx("span",{className:"truncate",children:k})},k))}):c.jsx("div",{className:"text-sm text-muted",children:"No recent workspaces."})]}):null,q==="ai"&&!E?c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsxs("div",{className:"text-xs text-muted",children:["Status: ",te]}),f.settings.active_provider==="pompora"&&!f.authProfile?c.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:"Connect to Pompora"}),c.jsx("div",{className:"mt-1 text-xs text-muted",children:"Log in to sync your plan and credits across devices."}),c.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-primary",onClick:f.onLoginToPompora,disabled:f.isAuthBusy,children:"Log in"}),c.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:f.onSignupToPompora,disabled:f.isAuthBusy,children:"Create account"})]})]}):null,f.secretsError?c.jsx("div",{className:"ws-vscode-error",children:f.secretsError}):null,c.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.settings.active_provider&&f.settings.active_provider!=="pompora"?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:f.onStoreKey,disabled:!f.isSettingsLoaded||f.isKeyOperationInProgress||!f.apiKeyDraft.trim()||!f.settings.active_provider,children:"Save Key"}),c.jsx("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-ghost",onClick:f.onClearKey,disabled:!f.isSettingsLoaded||f.isKeyOperationInProgress||!f.settings.active_provider,children:"Clear Key"})]}):null,c.jsx("div",{className:"flex-1"}),c.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:f.onDebugGemini,children:"Test AI"})]}),f.debugResult?c.jsx("pre",{className:"ws-vscode-pre",children:f.debugResult}):null,f.settings.active_provider==="pompora"?c.jsxs("div",{className:"overflow-hidden rounded-xl border border-border bg-panel",children:[c.jsxs("div",{className:"border-b border-border px-4 py-3",children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:"Pompora AI Plans"}),c.jsxs("div",{className:"mt-1 text-xs text-muted",children:["Credits keep the service fast and fair. ",c.jsx("span",{className:"text-text",children:"2 credits = 1 request"}),"."]})]}),c.jsxs("div",{className:"grid gap-3 p-3 md:grid-cols-3",children:[c.jsxs("div",{className:"rounded-lg border border-border bg-bg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:"Starter"}),c.jsx("div",{className:"text-xs text-muted",children:"Free"})]}),c.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[c.jsx("div",{children:"25 Slow Credits (reset every 2 weeks)"}),c.jsx("div",{children:"Unlimited tab completions"}),c.jsx("div",{children:"Unlimited inline edits"}),c.jsx("div",{children:"Local AI (slow thinking)"}),c.jsx("div",{children:"BYOK support"})]}),c.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-[rgb(var(--p-panel2))] px-3 py-2 text-xs font-semibold text-text hover:opacity-90",onClick:()=>{Sc("https://pompora.dev/pricing")},children:"Start Free"})]}),c.jsxs("div",{className:"rounded-lg border border-border bg-gradient-to-b from-[rgba(255,255,255,0.06)] to-[rgba(255,255,255,0.02)] p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:"Plus"}),c.jsx("div",{className:"mt-0.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Most Popular"})]}),c.jsx("div",{className:"text-xs text-text",children:"$10 / month"})]}),c.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[c.jsx("div",{children:"150 Fast Credits / month (daily cap: 100)"}),c.jsx("div",{children:"50 Slow Credits (reset every 2 weeks)"}),c.jsx("div",{children:"Fast thinking enabled"}),c.jsx("div",{children:"Priority execution"}),c.jsx("div",{children:"BYOK support"})]}),c.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground hover:opacity-90",onClick:()=>{Sc("https://pompora.dev/pricing")},children:"Upgrade to Plus"})]}),c.jsxs("div",{className:"rounded-lg border border-border bg-bg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm font-semibold text-text",children:"Pro"}),c.jsx("div",{className:"text-xs text-text",children:"$20 / month"})]}),c.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[c.jsx("div",{children:"300 Fast Credits / month (daily cap: 150)"}),c.jsx("div",{children:"150 Slow Credits (reset every 2 weeks)"}),c.jsx("div",{children:"Reasoning + fast thinking"}),c.jsx("div",{children:"Highest priority"}),c.jsx("div",{children:"Advanced agents"}),c.jsx("div",{children:"BYOK support"})]}),c.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-[rgb(var(--p-panel2))] px-3 py-2 text-xs font-semibold text-text hover:opacity-90",onClick:()=>{Sc("https://pompora.dev/pricing")},children:"Go Pro"})]})]})]}):null]}):null,E?c.jsx("div",{className:"mt-3 text-xs text-muted",children:"Tip: click a category on the left to exit search."}):null]})})]})})]})};rv.createRoot(document.getElementById("root")).render(c.jsx(z.StrictMode,{children:c.jsx(Y0,{})}));
