(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const Y of document.querySelectorAll('link[rel="modulepreload"]'))E(Y);new MutationObserver(Y=>{for(const te of Y)if(te.type==="childList")for(const q of te.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&E(q)}).observe(document,{childList:!0,subtree:!0});function D(Y){const te={};return Y.integrity&&(te.integrity=Y.integrity),Y.referrerPolicy&&(te.referrerPolicy=Y.referrerPolicy),Y.crossOrigin==="use-credentials"?te.credentials="include":Y.crossOrigin==="anonymous"?te.credentials="omit":te.credentials="same-origin",te}function E(Y){if(Y.ep)return;Y.ep=!0;const te=D(Y);fetch(Y.href,te)}})();function Dm(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var kh={exports:{}},mo={};var Fp;function ov(){if(Fp)return mo;Fp=1;var p=Symbol.for("react.transitional.element"),f=Symbol.for("react.fragment");function D(E,Y,te){var q=null;if(te!==void 0&&(q=""+te),Y.key!==void 0&&(q=""+Y.key),"key"in Y){te={};for(var d in Y)d!=="key"&&(te[d]=Y[d])}else te=Y;return Y=te.ref,{$$typeof:p,type:E,key:q,ref:Y!==void 0?Y:null,props:te}}return mo.Fragment=f,mo.jsx=D,mo.jsxs=D,mo}var qp;function cv(){return qp||(qp=1,kh.exports=ov()),kh.exports}var r=cv(),Eh={exports:{}},Ue={};var Wp;function uv(){if(Wp)return Ue;Wp=1;var p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),q=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,l={};function u(j,Q,Z){this.props=j,this.context=Q,this.refs=l,this.updater=Z||A}u.prototype.isReactComponent={},u.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},u.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function o(){}o.prototype=u.prototype;function c(j,Q,Z){this.props=j,this.context=Q,this.refs=l,this.updater=Z||A}var g=c.prototype=new o;g.constructor=c,k(g,u.prototype),g.isPureReactComponent=!0;var S=Array.isArray;function R(){}var O={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function M(j,Q,Z){var _e=Z.ref;return{$$typeof:p,type:j,key:Q,ref:_e!==void 0?_e:null,props:Z}}function U(j,Q){return M(j.type,Q,j.props)}function X(j){return typeof j=="object"&&j!==null&&j.$$typeof===p}function F(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return Q[Z]})}var V=/\/+/g;function J(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):Q.toString(36)}function ae(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(R,R):(j.status="pending",j.then(function(Q){j.status==="pending"&&(j.status="fulfilled",j.value=Q)},function(Q){j.status==="pending"&&(j.status="rejected",j.reason=Q)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function $(j,Q,Z,_e,xe){var Ae=typeof j;(Ae==="undefined"||Ae==="boolean")&&(j=null);var B=!1;if(j===null)B=!0;else switch(Ae){case"bigint":case"string":case"number":B=!0;break;case"object":switch(j.$$typeof){case p:case f:B=!0;break;case C:return B=j._init,$(B(j._payload),Q,Z,_e,xe)}}if(B)return xe=xe(j),B=_e===""?"."+J(j,0):_e,S(xe)?(Z="",B!=null&&(Z=B.replace(V,"$&/")+"/"),$(xe,Q,Z,"",function(fe){return fe})):xe!=null&&(X(xe)&&(xe=U(xe,Z+(xe.key==null||j&&j.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+B)),Q.push(xe)),1;B=0;var ie=_e===""?".":_e+":";if(S(j))for(var de=0;de<j.length;de++)_e=j[de],Ae=ie+J(_e,de),B+=$(_e,Q,Z,Ae,xe);else if(de=T(j),typeof de=="function")for(j=de.call(j),de=0;!(_e=j.next()).done;)_e=_e.value,Ae=ie+J(_e,de++),B+=$(_e,Q,Z,Ae,xe);else if(Ae==="object"){if(typeof j.then=="function")return $(ae(j),Q,Z,_e,xe);throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return B}function se(j,Q,Z){if(j==null)return j;var _e=[],xe=0;return $(j,_e,"","",function(Ae){return Q.call(Z,Ae,xe++)}),_e}function L(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var I=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},W={map:se,forEach:function(j,Q,Z){se(j,function(){Q.apply(this,arguments)},Z)},count:function(j){var Q=0;return se(j,function(){Q++}),Q},toArray:function(j){return se(j,function(Q){return Q})||[]},only:function(j){if(!X(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ue.Activity=v,Ue.Children=W,Ue.Component=u,Ue.Fragment=D,Ue.Profiler=Y,Ue.PureComponent=c,Ue.StrictMode=E,Ue.Suspense=m,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},Ue.cache=function(j){return function(){return j.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(j,Q,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var _e=k({},j.props),xe=j.key;if(Q!=null)for(Ae in Q.key!==void 0&&(xe=""+Q.key),Q)!b.call(Q,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Q.ref===void 0||(_e[Ae]=Q[Ae]);var Ae=arguments.length-2;if(Ae===1)_e.children=Z;else if(1<Ae){for(var B=Array(Ae),ie=0;ie<Ae;ie++)B[ie]=arguments[ie+2];_e.children=B}return M(j.type,xe,_e)},Ue.createContext=function(j){return j={$$typeof:q,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:te,_context:j},j},Ue.createElement=function(j,Q,Z){var _e,xe={},Ae=null;if(Q!=null)for(_e in Q.key!==void 0&&(Ae=""+Q.key),Q)b.call(Q,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(xe[_e]=Q[_e]);var B=arguments.length-2;if(B===1)xe.children=Z;else if(1<B){for(var ie=Array(B),de=0;de<B;de++)ie[de]=arguments[de+2];xe.children=ie}if(j&&j.defaultProps)for(_e in B=j.defaultProps,B)xe[_e]===void 0&&(xe[_e]=B[_e]);return M(j,Ae,xe)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(j){return{$$typeof:d,render:j}},Ue.isValidElement=X,Ue.lazy=function(j){return{$$typeof:C,_payload:{_status:-1,_result:j},_init:L}},Ue.memo=function(j,Q){return{$$typeof:_,type:j,compare:Q===void 0?null:Q}},Ue.startTransition=function(j){var Q=O.T,Z={};O.T=Z;try{var _e=j(),xe=O.S;xe!==null&&xe(Z,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(R,I)}catch(Ae){I(Ae)}finally{Q!==null&&Z.types!==null&&(Q.types=Z.types),O.T=Q}},Ue.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ue.use=function(j){return O.H.use(j)},Ue.useActionState=function(j,Q,Z){return O.H.useActionState(j,Q,Z)},Ue.useCallback=function(j,Q){return O.H.useCallback(j,Q)},Ue.useContext=function(j){return O.H.useContext(j)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(j,Q){return O.H.useDeferredValue(j,Q)},Ue.useEffect=function(j,Q){return O.H.useEffect(j,Q)},Ue.useEffectEvent=function(j){return O.H.useEffectEvent(j)},Ue.useId=function(){return O.H.useId()},Ue.useImperativeHandle=function(j,Q,Z){return O.H.useImperativeHandle(j,Q,Z)},Ue.useInsertionEffect=function(j,Q){return O.H.useInsertionEffect(j,Q)},Ue.useLayoutEffect=function(j,Q){return O.H.useLayoutEffect(j,Q)},Ue.useMemo=function(j,Q){return O.H.useMemo(j,Q)},Ue.useOptimistic=function(j,Q){return O.H.useOptimistic(j,Q)},Ue.useReducer=function(j,Q,Z){return O.H.useReducer(j,Q,Z)},Ue.useRef=function(j){return O.H.useRef(j)},Ue.useState=function(j){return O.H.useState(j)},Ue.useSyncExternalStore=function(j,Q,Z){return O.H.useSyncExternalStore(j,Q,Z)},Ue.useTransition=function(){return O.H.useTransition()},Ue.version="19.2.3",Ue}var $p;function Xh(){return $p||($p=1,Eh.exports=uv()),Eh.exports}var z=Xh();const dl=Dm(z);var Ah={exports:{}},_o={},Dh={exports:{}},Th={};var Kp;function hv(){return Kp||(Kp=1,(function(p){function f($,se){var L=$.length;$.push(se);e:for(;0<L;){var I=L-1>>>1,W=$[I];if(0<Y(W,se))$[I]=se,$[L]=W,L=I;else break e}}function D($){return $.length===0?null:$[0]}function E($){if($.length===0)return null;var se=$[0],L=$.pop();if(L!==se){$[0]=L;e:for(var I=0,W=$.length,j=W>>>1;I<j;){var Q=2*(I+1)-1,Z=$[Q],_e=Q+1,xe=$[_e];if(0>Y(Z,L))_e<W&&0>Y(xe,Z)?($[I]=xe,$[_e]=L,I=_e):($[I]=Z,$[Q]=L,I=Q);else if(_e<W&&0>Y(xe,L))$[I]=xe,$[_e]=L,I=_e;else break e}}return se}function Y($,se){var L=$.sortIndex-se.sortIndex;return L!==0?L:$.id-se.id}if(p.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var te=performance;p.unstable_now=function(){return te.now()}}else{var q=Date,d=q.now();p.unstable_now=function(){return q.now()-d}}var m=[],_=[],C=1,v=null,x=3,T=!1,A=!1,k=!1,l=!1,u=typeof setTimeout=="function"?setTimeout:null,o=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;function g($){for(var se=D(_);se!==null;){if(se.callback===null)E(_);else if(se.startTime<=$)E(_),se.sortIndex=se.expirationTime,f(m,se);else break;se=D(_)}}function S($){if(k=!1,g($),!A)if(D(m)!==null)A=!0,R||(R=!0,F());else{var se=D(_);se!==null&&ae(S,se.startTime-$)}}var R=!1,O=-1,b=5,M=-1;function U(){return l?!0:!(p.unstable_now()-M<b)}function X(){if(l=!1,R){var $=p.unstable_now();M=$;var se=!0;try{e:{A=!1,k&&(k=!1,o(O),O=-1),T=!0;var L=x;try{t:{for(g($),v=D(m);v!==null&&!(v.expirationTime>$&&U());){var I=v.callback;if(typeof I=="function"){v.callback=null,x=v.priorityLevel;var W=I(v.expirationTime<=$);if($=p.unstable_now(),typeof W=="function"){v.callback=W,g($),se=!0;break t}v===D(m)&&E(m),g($)}else E(m);v=D(m)}if(v!==null)se=!0;else{var j=D(_);j!==null&&ae(S,j.startTime-$),se=!1}}break e}finally{v=null,x=L,T=!1}se=void 0}}finally{se?F():R=!1}}}var F;if(typeof c=="function")F=function(){c(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=X,F=function(){J.postMessage(null)}}else F=function(){u(X,0)};function ae($,se){O=u(function(){$(p.unstable_now())},se)}p.unstable_IdlePriority=5,p.unstable_ImmediatePriority=1,p.unstable_LowPriority=4,p.unstable_NormalPriority=3,p.unstable_Profiling=null,p.unstable_UserBlockingPriority=2,p.unstable_cancelCallback=function($){$.callback=null},p.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},p.unstable_getCurrentPriorityLevel=function(){return x},p.unstable_next=function($){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var L=x;x=se;try{return $()}finally{x=L}},p.unstable_requestPaint=function(){l=!0},p.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=x;x=$;try{return se()}finally{x=L}},p.unstable_scheduleCallback=function($,se,L){var I=p.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,$){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,$={id:C++,callback:se,priorityLevel:$,startTime:L,expirationTime:W,sortIndex:-1},L>I?($.sortIndex=L,f(_,$),D(m)===null&&$===D(_)&&(k?(o(O),O=-1):k=!0,ae(S,L-I))):($.sortIndex=W,f(m,$),A||T||(A=!0,R||(R=!0,F()))),$},p.unstable_shouldYield=U,p.unstable_wrapCallback=function($){var se=x;return function(){var L=x;x=se;try{return $.apply(this,arguments)}finally{x=L}}}})(Th)),Th}var Gp;function dv(){return Gp||(Gp=1,Dh.exports=hv()),Dh.exports}var Rh={exports:{}},pi={};var Yp;function fv(){if(Yp)return pi;Yp=1;var p=Xh();function f(m){var _="https://react.dev/errors/"+m;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(){}var E={d:{f:D,r:function(){throw Error(f(522))},D,C:D,L:D,m:D,X:D,S:D,M:D},p:0,findDOMNode:null},Y=Symbol.for("react.portal");function te(m,_,C){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:v==null?null:""+v,children:m,containerInfo:_,implementation:C}}var q=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,_){if(m==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,pi.createPortal=function(m,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(f(299));return te(m,_,null,C)},pi.flushSync=function(m){var _=q.T,C=E.p;try{if(q.T=null,E.p=2,m)return m()}finally{q.T=_,E.p=C,E.d.f()}},pi.preconnect=function(m,_){typeof m=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,E.d.C(m,_))},pi.prefetchDNS=function(m){typeof m=="string"&&E.d.D(m)},pi.preinit=function(m,_){if(typeof m=="string"&&_&&typeof _.as=="string"){var C=_.as,v=d(C,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,T=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;C==="style"?E.d.S(m,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):C==="script"&&E.d.X(m,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},pi.preinitModule=function(m,_){if(typeof m=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var C=d(_.as,_.crossOrigin);E.d.M(m,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&E.d.M(m)},pi.preload=function(m,_){if(typeof m=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var C=_.as,v=d(C,_.crossOrigin);E.d.L(m,C,{crossOrigin:v,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},pi.preloadModule=function(m,_){if(typeof m=="string")if(_){var C=d(_.as,_.crossOrigin);E.d.m(m,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else E.d.m(m)},pi.requestFormReset=function(m){E.d.r(m)},pi.unstable_batchedUpdates=function(m,_){return m(_)},pi.useFormState=function(m,_,C){return q.H.useFormState(m,_,C)},pi.useFormStatus=function(){return q.H.useHostTransitionStatus()},pi.version="19.2.3",pi}var Vp;function pv(){if(Vp)return Rh.exports;Vp=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(f){console.error(f)}}return p(),Rh.exports=fv(),Rh.exports}var Xp;function mv(){if(Xp)return _o;Xp=1;var p=dv(),f=Xh(),D=pv();function E(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function te(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function q(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(te(e)!==e)throw Error(E(188))}function _(e){var t=e.alternate;if(!t){if(t=te(e),t===null)throw Error(E(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){i=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===i)return m(n),e;if(a===s)return m(n),t;a=a.sibling}throw Error(E(188))}if(i.return!==s.return)i=n,s=a;else{for(var w=!1,H=n.child;H;){if(H===i){w=!0,i=n,s=a;break}if(H===s){w=!0,s=n,i=a;break}H=H.sibling}if(!w){for(H=a.child;H;){if(H===i){w=!0,i=a,s=n;break}if(H===s){w=!0,s=a,i=n;break}H=H.sibling}if(!w)throw Error(E(189))}}if(i.alternate!==s)throw Error(E(190))}if(i.tag!==3)throw Error(E(188));return i.stateNode.current===i?e:t}function C(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=C(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function J(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case u:return"Profiler";case l:return"StrictMode";case S:return"Suspense";case R:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case c:return e.displayName||"Context";case o:return(e._context.displayName||"Context")+".Consumer";case g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return t=e.displayName||null,t!==null?t:J(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return J(e(t))}catch{}}return null}var ae=Array.isArray,$=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=D.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},I=[],W=-1;function j(e){return{current:e}}function Q(e){0>W||(e.current=I[W],I[W]=null,W--)}function Z(e,t){W++,I[W]=e.current,e.current=t}var _e=j(null),xe=j(null),Ae=j(null),B=j(null);function ie(e,t){switch(Z(Ae,t),Z(xe,e),Z(_e,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hp(t),e=dp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(_e),Z(_e,e)}function de(){Q(_e),Q(xe),Q(Ae)}function fe(e){e.memoizedState!==null&&Z(B,e);var t=_e.current,i=dp(t,e.type);t!==i&&(Z(xe,e),Z(_e,i))}function ze(e){xe.current===e&&(Q(_e),Q(xe)),B.current===e&&(Q(B),uo._currentValue=L)}var ke,Ve;function qe(e){if(ke===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ke=t&&t[1]||"",Ve=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+e+Ve}var Nt=!1;function xt(e,t){if(!e||Nt)return"";Nt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(he){var ce=he}Reflect.construct(e,[],Se)}else{try{Se.call()}catch(he){ce=he}e.call(Se.prototype)}}else{try{throw Error()}catch(he){ce=he}(Se=e())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),w=a[0],H=a[1];if(w&&H){var G=w.split(`
`),oe=H.split(`
`);for(n=s=0;s<G.length&&!G[s].includes("DetermineComponentFrameRoot");)s++;for(;n<oe.length&&!oe[n].includes("DetermineComponentFrameRoot");)n++;if(s===G.length||n===oe.length)for(s=G.length-1,n=oe.length-1;1<=s&&0<=n&&G[s]!==oe[n];)n--;for(;1<=s&&0<=n;s--,n--)if(G[s]!==oe[n]){if(s!==1||n!==1)do if(s--,n--,0>n||G[s]!==oe[n]){var ge=`
`+G[s].replace(" at new "," at ");return e.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",e.displayName)),ge}while(1<=s&&0<=n);break}}}finally{Nt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?qe(i):""}function Pe(e,t){switch(e.tag){case 26:case 27:case 5:return qe(e.type);case 16:return qe("Lazy");case 13:return e.child!==t&&t!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return xt(e.type,!1);case 11:return xt(e.type.render,!1);case 1:return xt(e.type,!0);case 31:return qe("Activity");default:return""}}function Tt(e){try{var t="",i=null;do t+=Pe(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Is=Object.prototype.hasOwnProperty,gt=p.unstable_scheduleCallback,yi=p.unstable_cancelCallback,Qe=p.unstable_shouldYield,Qt=p.unstable_requestPaint,Bt=p.unstable_now,ri=p.unstable_getCurrentPriorityLevel,ai=p.unstable_ImmediatePriority,gs=p.unstable_UserBlockingPriority,di=p.unstable_NormalPriority,Qn=p.unstable_LowPriority,Li=p.unstable_IdlePriority,ns=p.log,ot=p.unstable_setDisableYieldValue,rs=null,Zt=null;function Ct(e){if(typeof ns=="function"&&ot(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(rs,e)}catch{}}var Ht=Math.clz32?Math.clz32:Si,bs=Math.log,ht=Math.LN2;function Si(e){return e>>>=0,e===0?32:31-(bs(e)/ht|0)|0}var bt=256,Zn=262144,_a=4194304;function Fs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function hn(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var H=s&134217727;return H!==0?(s=H&~a,s!==0?n=Fs(s):(w&=H,w!==0?n=Fs(w):i||(i=H&~e,i!==0&&(n=Fs(i))))):(H=s&~a,H!==0?n=Fs(H):w!==0?n=Fs(w):i||(i=s&~e,i!==0&&(n=Fs(i)))),n===0?0:t!==0&&t!==n&&(t&a)===0&&(a=n&-n,i=t&-t,a>=i||a===32&&(i&4194048)!==0)?t:n}function Ur(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ko(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(){var e=_a;return _a<<=1,(_a&62914560)===0&&(_a=4194304),e}function Ir(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function as(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ni(e,t,i,s,n,a){var w=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var H=e.entanglements,G=e.expirationTimes,oe=e.hiddenUpdates;for(i=w&~i;0<i;){var ge=31-Ht(i),Se=1<<ge;H[ge]=0,G[ge]=-1;var ce=oe[ge];if(ce!==null)for(oe[ge]=null,ge=0;ge<ce.length;ge++){var he=ce[ge];he!==null&&(he.lane&=-536870913)}i&=~Se}s!==0&&dn(e,s,0),a!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=a&~(w&~t))}function dn(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Ht(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function Eo(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Ht(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}function Fr(e,t){var i=t&-t;return i=(i&42)!==0?1:ml(i),(i&(e.suspendedLanes|t))!==0?0:i}function ml(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _l(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bi(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Np(e.type))}function qr(e,t){var i=se.p;try{return se.p=e,t()}finally{se.p=i}}var qs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+qs,zt="__reactProps$"+qs,Ws="__reactContainer$"+qs,Wr="__reactEvents$"+qs,Yc="__reactListeners$"+qs,vl="__reactHandles$"+qs,Ao="__reactResources$"+qs,fn="__reactMarker$"+qs;function mt(e){delete e[Gt],delete e[zt],delete e[Wr],delete e[Yc],delete e[vl]}function ys(e){var t=e[Gt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ws]||i[Gt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bp(e);e!==null;){if(i=e[Gt])return i;e=bp(e)}return t}e=i,i=e.parentNode}return null}function Hi(e){if(e=e[Gt]||e[Ws]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ls(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(E(33))}function zi(e){var t=e[Ao];return t||(t=e[Ao]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[fn]=!0}var va=new Set,Ss={};function $s(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(Ss[e]=t,e=0;e<t.length;e++)va.add(t[e])}var gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jt={},ws={};function Yt(e){return Is.call(ws,e)?!0:Is.call(Jt,e)?!1:gl.test(e)?ws[e]=!0:(Jt[e]=!0,!1)}function Ks(e,t,i){if(Yt(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function $r(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Ui(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Et(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pi(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Kr(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(w){i=""+w,a.call(this,w)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gs(e){if(!e._valueTracker){var t=Pi(e)?"checked":"value";e._valueTracker=Kr(e,t,""+e[t])}}function ga(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Pi(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Gr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vc=/[\n"\\]/g;function wi(e){return e.replace(Vc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ba(e,t,i,s,n,a,w,H){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),t!=null?w==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Et(t)):e.value!==""+Et(t)&&(e.value=""+Et(t)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),t!=null?Yr(e,w,Et(t)):i!=null?Yr(e,w,Et(i)):s!=null&&e.removeAttribute("value"),n==null&&a!=null&&(e.defaultChecked=!!a),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?e.name=""+Et(H):e.removeAttribute("name")}function Jn(e,t,i,s,n,a,w,H){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||i!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Gs(e);return}i=i!=null?""+Et(i):"",t=t!=null?""+Et(t):i,H||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=H?e.checked:!!s,e.defaultChecked=!!s,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),Gs(e)}function Yr(e,t,i){t==="number"&&Gr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ys(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Et(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function bl(e,t,i){if(t!=null&&(t=""+Et(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Et(i):""}function yl(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(E(92));if(ae(s)){if(1<s.length)throw Error(E(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Et(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Gs(e)}function Vs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ya(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||Xc.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Sl(e,t,i){if(t!=null&&typeof t!="object")throw Error(E(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&i[n]!==s&&ya(e,n,s)}else for(var a in t)t.hasOwnProperty(a)&&ya(e,a,t[a])}function Xs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vr(e){return Qc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xs(){}var mn=null;function er(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qs=null,tr=null;function _n(e){var t=Hi(e);if(t&&(e=t.stateNode)){var i=e[zt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ba(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+wi(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=s[zt]||null;if(!n)throw Error(E(90));ba(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&ga(s)}break e;case"textarea":bl(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ys(e,!!i.multiple,t,!1)}}}var vn=!1;function ir(e,t,i){if(vn)return e(t,i);vn=!0;try{var s=e(t);return s}finally{if(vn=!1,(Qs!==null||tr!==null)&&(dc(),Qs&&(t=Qs,e=tr,tr=Qs=null,_n(t),e)))for(t=0;t<e.length;t++)_n(e[t])}}function Cs(e,t){var i=e.stateNode;if(i===null)return null;var s=i[zt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(E(231,t,typeof i));return i}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(xi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){ks=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{ks=!1}var Es=null,sr=null,nr=null;function xl(){if(nr)return nr;var e,t=sr,i=t.length,s,n="value"in Es?Es.value:Es.textContent,a=n.length;for(e=0;e<i&&t[e]===n[e];e++);var w=i-e;for(s=1;s<=w&&t[i-s]===n[a-s];s++);return nr=n.slice(e,1<s?1-s:void 0)}function As(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xr(){return!0}function Js(){return!1}function li(e){function t(i,s,n,a,w){this._reactName=i,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=w,this.currentTarget=null;for(var H in e)e.hasOwnProperty(H)&&(i=e[H],this[H]=i?i(a):a[H]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Xr:Js,this.isPropagationStopped=Js,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),t}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qr=li(gn),Le=v({},gn,{view:0,detail:0}),bn=li(Le),Sa,Zr,Ci,yn=v({},Le,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(Sa=e.screenX-Ci.screenX,Zr=e.screenY-Ci.screenY):Zr=Sa=0,Ci=e),Sa)},movementY:function(e){return"movementY"in e?e.movementY:Zr}}),wa=li(yn),xa=v({},yn,{dataTransfer:0}),Sn=li(xa),Do=v({},Le,{relatedTarget:0}),wn=li(Do),To=v({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jr=li(To),Ro=v({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zc=li(Ro),Cl=v({},gn,{data:0}),Ii=li(Cl),ki={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rr[e])?!!t[e]:!1}function Ds(){return xn}var ar=v({},Le,{key:function(e){if(e.key){var t=ki[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ca[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ka=li(ar),Jc=v({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=li(Jc),Mo=v({},Le,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),ea=li(Mo),Ze=v({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),en=li(Ze),Ts=v({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eu=li(Ts),jo=v({},gn,{newState:0,oldState:0}),Oo=li(jo),lr=[9,13,27,32],El=xi&&"CompositionEvent"in window,os=null;xi&&"documentMode"in document&&(os=document.documentMode);var Ea=xi&&"TextEvent"in window&&!os,Al=xi&&(!El||os&&8<os&&11>=os),Aa=" ",Ut=!1;function Rs(e,t){switch(e){case"keyup":return lr.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ms(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function Da(e,t){switch(e){case"compositionend":return Ms(t);case"keypress":return t.which!==32?null:(Ut=!0,Aa);case"textInput":return e=t.data,e===Aa&&Ut?null:e;default:return null}}function Lo(e,t){if(Fi)return e==="compositionend"||!El&&Rs(e,t)?(e=xl(),nr=sr=Es=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Al&&t.locale!=="ko"?null:t.data;default:return null}}var No={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!No[e.type]:t==="textarea"}function kn(e,t,i,s){Qs?tr?tr.push(s):tr=[s]:Qs=s,t=bc(t,"onChange"),0<t.length&&(i=new Qr("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var ta=null,cs=null;function Bo(e){rp(e,0)}function ia(e){var t=ls(e);if(ga(t))return e}function Dl(e,t){if(e==="change")return t}var pe=!1;if(xi){var Ta;if(xi){var us="oninput"in document;if(!us){var sa=document.createElement("div");sa.setAttribute("oninput","return;"),us=typeof sa.oninput=="function"}Ta=us}else Ta=!1;pe=Ta&&(!document.documentMode||9<document.documentMode)}function js(){ta&&(ta.detachEvent("onpropertychange",na),cs=ta=null)}function na(e){if(e.propertyName==="value"&&ia(cs)){var t=[];kn(t,cs,e,er(e)),ir(Bo,t)}}function Tl(e,t,i){e==="focusin"?(js(),ta=t,cs=i,ta.attachEvent("onpropertychange",na)):e==="focusout"&&js()}function Ra(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ia(cs)}function Te(e,t){if(e==="click")return ia(t)}function or(e,t){if(e==="input"||e==="change")return ia(t)}function Ho(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ei=typeof Object.is=="function"?Object.is:Ho;function Rt(e,t){if(ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!Is.call(t,n)||!ei(e[n],t[n]))return!1}return!0}function Ma(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function En(e,t){var i=Ma(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ma(i)}}function tn(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tn(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ja(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Gr(e.document)}return t}function Rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Oa=xi&&"documentMode"in document&&11>=document.documentMode,cr=null,ur=null,mi=null,La=!1;function zo(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;La||cr==null||cr!==Gr(s)||(s=cr,"selectionStart"in s&&Rl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),mi&&Rt(mi,s)||(mi=s,s=bc(ur,"onSelect"),0<s.length&&(t=new Qr("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=cr)))}function qi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ti={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},ra={},Ml={};xi&&(Ml=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function An(e){if(ra[e])return ra[e];if(!ti[e])return e;var t=ti[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Ml)return ra[e]=t[i];return e}var Uo=An("animationend"),aa=An("animationiteration"),la=An("animationstart"),Dn=An("transitionrun"),Tn=An("transitionstart"),Po=An("transitioncancel"),Rn=An("transitionend"),Mn=new Map,jl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jl.push("scrollEnd");function Wi(e,t){Mn.set(e,t),$s(t,[e])}var jn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},lt=[],On=0,hr=0;function Mt(){for(var e=On,t=hr=On=0;t<e;){var i=lt[t];lt[t++]=null;var s=lt[t];lt[t++]=null;var n=lt[t];lt[t++]=null;var a=lt[t];if(lt[t++]=null,s!==null&&n!==null){var w=s.pending;w===null?n.next=n:(n.next=w.next,w.next=n),s.pending=n}a!==0&&At(i,n,a)}}function Na(e,t,i,s){lt[On++]=e,lt[On++]=t,lt[On++]=i,lt[On++]=s,hr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ba(e,t,i,s){return Na(e,t,i,s),sn(e)}function Ln(e,t){return Na(e,null,null,t),sn(e)}function At(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var n=!1,a=e.return;a!==null;)a.childLanes|=i,s=a.alternate,s!==null&&(s.childLanes|=i),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(n=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,n&&t!==null&&(n=31-Ht(i),e=a.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=i|536870912),a):null}function sn(e){if(50<so)throw so=0,Vu=null,Error(E(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var et={};function oi(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,t,i,s){return new oi(e,t,i,s)}function jt(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Os(e,t){var i=e.alternate;return i===null?(i=Xe(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ol(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ei(e,t,i,s,n,a){var w=0;if(s=e,typeof e=="function")jt(e)&&(w=1);else if(typeof e=="string")w=X_(e,i,_e.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case M:return e=Xe(31,i,t,n),e.elementType=M,e.lanes=a,e;case k:return Nn(i.children,n,a,t);case l:w=8,n|=24;break;case u:return e=Xe(12,i,t,n|2),e.elementType=u,e.lanes=a,e;case S:return e=Xe(13,i,t,n),e.elementType=S,e.lanes=a,e;case R:return e=Xe(19,i,t,n),e.elementType=R,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case c:w=10;break e;case o:w=9;break e;case g:w=11;break e;case O:w=14;break e;case b:w=16,s=null;break e}w=29,i=Error(E(130,e===null?"null":typeof e,"")),s=null}return t=Xe(w,i,t,n),t.elementType=e,t.type=s,t.lanes=a,t}function Nn(e,t,i,s){return e=Xe(7,e,s,t),e.lanes=i,e}function Ha(e,t,i){return e=Xe(6,e,null,t),e.lanes=i,e}function Ll(e){var t=Xe(18,null,null,0);return t.stateNode=e,t}function za(e,t,i){return t=Xe(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nl=new WeakMap;function _i(e,t){if(typeof e=="object"&&e!==null){var i=Nl.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Tt(t)},Nl.set(e,t),t)}return{value:e,source:t,stack:Tt(t)}}var nn=[],rn=0,oa=null,an=0,ii=[],Ai=0,$i=null,Ki=1,vi="";function Gi(e,t){nn[rn++]=an,nn[rn++]=oa,oa=e,an=t}function Ua(e,t,i){ii[Ai++]=Ki,ii[Ai++]=vi,ii[Ai++]=$i,$i=e;var s=Ki;e=vi;var n=32-Ht(s)-1;s&=~(1<<n),i+=1;var a=32-Ht(t)+n;if(30<a){var w=n-n%5;a=(s&(1<<w)-1).toString(32),s>>=w,n-=w,Ki=1<<32-Ht(t)+n|i<<n|s,vi=a+e}else Ki=1<<a|i<<n|s,vi=e}function Yi(e){e.return!==null&&(Gi(e,1),Ua(e,1,0))}function Bn(e){for(;e===oa;)oa=nn[--rn],nn[rn]=null,an=nn[--rn],nn[rn]=null;for(;e===$i;)$i=ii[--Ai],ii[Ai]=null,vi=ii[--Ai],ii[Ai]=null,Ki=ii[--Ai],ii[Ai]=null}function dr(e,t){ii[Ai++]=Ki,ii[Ai++]=vi,ii[Ai++]=$i,Ki=t.id,vi=t.overflow,$i=e}var Pt=null,_t=null,We=!1,ln=null,fi=!1,Pa=Error(E(519));function Ls(e){var t=Error(E(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ca(_i(t,e)),Pa}function Io(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[Gt]=e,t[zt]=s,i){case"dialog":Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":case"embed":Ke("load",t);break;case"video":case"audio":for(i=0;i<ro.length;i++)Ke(ro[i],t);break;case"source":Ke("error",t);break;case"img":case"image":case"link":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"input":Ke("invalid",t),Jn(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ke("invalid",t);break;case"textarea":Ke("invalid",t),yl(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||cp(t.textContent,i)?(s.popover!=null&&(Ke("beforetoggle",t),Ke("toggle",t)),s.onScroll!=null&&Ke("scroll",t),s.onScrollEnd!=null&&Ke("scrollend",t),s.onClick!=null&&(t.onclick=xs),t=!0):t=!1,t||Ls(e,!0)}function Bl(e){for(Pt=e.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:Pt=Pt.return}}function fr(e){if(e!==Pt)return!1;if(!We)return Bl(e),We=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||uh(e.type,e.memoizedProps)),i=!i),i&&_t&&Ls(e),Bl(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));_t=gp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));_t=gp(e)}else t===27?(t=_t,Mr(e.type)?(e=mh,mh=null,_t=e):_t=t):_t=Pt?fs(e.stateNode.nextSibling):null;return!0}function Hn(){_t=Pt=null,We=!1}function Hl(){var e=ln;return e!==null&&(Mi===null?Mi=e:Mi.push.apply(Mi,e),ln=null),e}function ca(e){ln===null?ln=[e]:ln.push(e)}var zl=j(null),zn=null,Ns=null;function Vi(e,t,i){Z(zl,t._currentValue),t._currentValue=i}function Bs(e){e._currentValue=zl.current,Q(zl)}function ua(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Ul(e,t,i,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var a=n.dependencies;if(a!==null){var w=n.child;a=a.firstContext;e:for(;a!==null;){var H=a;a=n;for(var G=0;G<t.length;G++)if(H.context===t[G]){a.lanes|=i,H=a.alternate,H!==null&&(H.lanes|=i),ua(a.return,i,e),s||(w=null);break e}a=H.next}}else if(n.tag===18){if(w=n.return,w===null)throw Error(E(341));w.lanes|=i,a=w.alternate,a!==null&&(a.lanes|=i),ua(w,i,e),w=null}else w=n.child;if(w!==null)w.return=n;else for(w=n;w!==null;){if(w===e){w=null;break}if(n=w.sibling,n!==null){n.return=w.return,w=n;break}w=w.return}n=w}}function Un(e,t,i,s){e=null;for(var n=t,a=!1;n!==null;){if(!a){if((n.flags&524288)!==0)a=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var w=n.alternate;if(w===null)throw Error(E(387));if(w=w.memoizedProps,w!==null){var H=n.type;ei(n.pendingProps.value,w.value)||(e!==null?e.push(H):e=[H])}}else if(n===B.current){if(w=n.alternate,w===null)throw Error(E(387));w.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(uo):e=[uo])}n=n.return}e!==null&&Ul(t,e,i,s),t.flags|=262144}function pr(e){for(e=e.firstContext;e!==null;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function h(e){zn=e,Ns=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function y(e){return P(zn,e)}function N(e,t){return zn===null&&h(e),P(e,t)}function P(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ns===null){if(e===null)throw Error(E(308));Ns=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ns=Ns.next=t;return i}var re=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},K=p.unstable_scheduleCallback,ye=p.unstable_NormalPriority,ve={$$typeof:c,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function De(){return{controller:new re,data:new Map,refCount:0}}function we(e){e.refCount--,e.refCount===0&&K(ye,function(){e.controller.abort()})}var Ee=null,Ce=0,Oe=0,Re=null;function Dt(e,t){if(Ee===null){var i=Ee=[];Ce=0,Oe=th(),Re={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Ce++,t.then(St,St),t}function St(){if(--Ce===0&&Ee!==null){Re!==null&&(Re.status="fulfilled");var e=Ee;Ee=null,Oe=0,Re=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function rt(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(n){i.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<i.length;n++)(0,i[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<i.length;n++)(0,i[n])(void 0)}),s}var mr=$.S;$.S=function(e,t){Of=Bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Dt(e,t),mr!==null&&mr(e,t)};var _r=j(null);function Xi(){var e=_r.current;return e!==null?e:vt.pooledCache}function vr(e,t){t===null?Z(_r,_r.current):Z(_r,t.pool)}function Fo(){var e=Xi();return e===null?null:{parent:ve._currentValue,pool:e}}var Hs=Error(E(460)),Be=Error(E(474)),qt=Error(E(542)),si={then:function(){}};function Qi(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gr(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(xs,xs),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ed(e),e;default:if(typeof t.status=="string")t.then(xs,xs);else{if(e=vt,e!==null&&100<e.shellSuspendCounter)throw Error(E(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ed(e),e}throw Vt=t,Hs}}function hs(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Vt=i,Hs):i}}var Vt=null;function Ia(){if(Vt===null)throw Error(E(459));var e=Vt;return Vt=null,e}function ed(e){if(e===Hs||e===qt)throw Error(E(483))}var Fa=null,Pl=0;function qo(e){var t=Pl;return Pl+=1,Fa===null&&(Fa=[]),gr(Fa,e,t)}function Il(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wo(e,t){throw t.$$typeof===x?Error(E(525)):(e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function td(e){function t(ne,ee){if(e){var le=ne.deletions;le===null?(ne.deletions=[ee],ne.flags|=16):le.push(ee)}}function i(ne,ee){if(!e)return null;for(;ee!==null;)t(ne,ee),ee=ee.sibling;return null}function s(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function n(ne,ee){return ne=Os(ne,ee),ne.index=0,ne.sibling=null,ne}function a(ne,ee,le){return ne.index=le,e?(le=ne.alternate,le!==null?(le=le.index,le<ee?(ne.flags|=67108866,ee):le):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function w(ne){return e&&ne.alternate===null&&(ne.flags|=67108866),ne}function H(ne,ee,le,be){return ee===null||ee.tag!==6?(ee=Ha(le,ne.mode,be),ee.return=ne,ee):(ee=n(ee,le),ee.return=ne,ee)}function G(ne,ee,le,be){var Ne=le.type;return Ne===k?ge(ne,ee,le.props.children,be,le.key):ee!==null&&(ee.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===b&&hs(Ne)===ee.type)?(ee=n(ee,le.props),Il(ee,le),ee.return=ne,ee):(ee=Ei(le.type,le.key,le.props,null,ne.mode,be),Il(ee,le),ee.return=ne,ee)}function oe(ne,ee,le,be){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=za(le,ne.mode,be),ee.return=ne,ee):(ee=n(ee,le.children||[]),ee.return=ne,ee)}function ge(ne,ee,le,be,Ne){return ee===null||ee.tag!==7?(ee=Nn(le,ne.mode,be,Ne),ee.return=ne,ee):(ee=n(ee,le),ee.return=ne,ee)}function Se(ne,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Ha(""+ee,ne.mode,le),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return le=Ei(ee.type,ee.key,ee.props,null,ne.mode,le),Il(le,ee),le.return=ne,le;case A:return ee=za(ee,ne.mode,le),ee.return=ne,ee;case b:return ee=hs(ee),Se(ne,ee,le)}if(ae(ee)||F(ee))return ee=Nn(ee,ne.mode,le,null),ee.return=ne,ee;if(typeof ee.then=="function")return Se(ne,qo(ee),le);if(ee.$$typeof===c)return Se(ne,N(ne,ee),le);Wo(ne,ee)}return null}function ce(ne,ee,le,be){var Ne=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ne!==null?null:H(ne,ee,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case T:return le.key===Ne?G(ne,ee,le,be):null;case A:return le.key===Ne?oe(ne,ee,le,be):null;case b:return le=hs(le),ce(ne,ee,le,be)}if(ae(le)||F(le))return Ne!==null?null:ge(ne,ee,le,be,null);if(typeof le.then=="function")return ce(ne,ee,qo(le),be);if(le.$$typeof===c)return ce(ne,ee,N(ne,le),be);Wo(ne,le)}return null}function he(ne,ee,le,be,Ne){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ne=ne.get(le)||null,H(ee,ne,""+be,Ne);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case T:return ne=ne.get(be.key===null?le:be.key)||null,G(ee,ne,be,Ne);case A:return ne=ne.get(be.key===null?le:be.key)||null,oe(ee,ne,be,Ne);case b:return be=hs(be),he(ne,ee,le,be,Ne)}if(ae(be)||F(be))return ne=ne.get(le)||null,ge(ee,ne,be,Ne,null);if(typeof be.then=="function")return he(ne,ee,le,qo(be),Ne);if(be.$$typeof===c)return he(ne,ee,le,N(ee,be),Ne);Wo(ee,be)}return null}function Me(ne,ee,le,be){for(var Ne=null,tt=null,je=ee,Fe=ee=0,Ye=null;je!==null&&Fe<le.length;Fe++){je.index>Fe?(Ye=je,je=null):Ye=je.sibling;var it=ce(ne,je,le[Fe],be);if(it===null){je===null&&(je=Ye);break}e&&je&&it.alternate===null&&t(ne,je),ee=a(it,ee,Fe),tt===null?Ne=it:tt.sibling=it,tt=it,je=Ye}if(Fe===le.length)return i(ne,je),We&&Gi(ne,Fe),Ne;if(je===null){for(;Fe<le.length;Fe++)je=Se(ne,le[Fe],be),je!==null&&(ee=a(je,ee,Fe),tt===null?Ne=je:tt.sibling=je,tt=je);return We&&Gi(ne,Fe),Ne}for(je=s(je);Fe<le.length;Fe++)Ye=he(je,ne,Fe,le[Fe],be),Ye!==null&&(e&&Ye.alternate!==null&&je.delete(Ye.key===null?Fe:Ye.key),ee=a(Ye,ee,Fe),tt===null?Ne=Ye:tt.sibling=Ye,tt=Ye);return e&&je.forEach(function(Br){return t(ne,Br)}),We&&Gi(ne,Fe),Ne}function He(ne,ee,le,be){if(le==null)throw Error(E(151));for(var Ne=null,tt=null,je=ee,Fe=ee=0,Ye=null,it=le.next();je!==null&&!it.done;Fe++,it=le.next()){je.index>Fe?(Ye=je,je=null):Ye=je.sibling;var Br=ce(ne,je,it.value,be);if(Br===null){je===null&&(je=Ye);break}e&&je&&Br.alternate===null&&t(ne,je),ee=a(Br,ee,Fe),tt===null?Ne=Br:tt.sibling=Br,tt=Br,je=Ye}if(it.done)return i(ne,je),We&&Gi(ne,Fe),Ne;if(je===null){for(;!it.done;Fe++,it=le.next())it=Se(ne,it.value,be),it!==null&&(ee=a(it,ee,Fe),tt===null?Ne=it:tt.sibling=it,tt=it);return We&&Gi(ne,Fe),Ne}for(je=s(je);!it.done;Fe++,it=le.next())it=he(je,ne,Fe,it.value,be),it!==null&&(e&&it.alternate!==null&&je.delete(it.key===null?Fe:it.key),ee=a(it,ee,Fe),tt===null?Ne=it:tt.sibling=it,tt=it);return e&&je.forEach(function(lv){return t(ne,lv)}),We&&Gi(ne,Fe),Ne}function pt(ne,ee,le,be){if(typeof le=="object"&&le!==null&&le.type===k&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case T:e:{for(var Ne=le.key;ee!==null;){if(ee.key===Ne){if(Ne=le.type,Ne===k){if(ee.tag===7){i(ne,ee.sibling),be=n(ee,le.props.children),be.return=ne,ne=be;break e}}else if(ee.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===b&&hs(Ne)===ee.type){i(ne,ee.sibling),be=n(ee,le.props),Il(be,le),be.return=ne,ne=be;break e}i(ne,ee);break}else t(ne,ee);ee=ee.sibling}le.type===k?(be=Nn(le.props.children,ne.mode,be,le.key),be.return=ne,ne=be):(be=Ei(le.type,le.key,le.props,null,ne.mode,be),Il(be,le),be.return=ne,ne=be)}return w(ne);case A:e:{for(Ne=le.key;ee!==null;){if(ee.key===Ne)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){i(ne,ee.sibling),be=n(ee,le.children||[]),be.return=ne,ne=be;break e}else{i(ne,ee);break}else t(ne,ee);ee=ee.sibling}be=za(le,ne.mode,be),be.return=ne,ne=be}return w(ne);case b:return le=hs(le),pt(ne,ee,le,be)}if(ae(le))return Me(ne,ee,le,be);if(F(le)){if(Ne=F(le),typeof Ne!="function")throw Error(E(150));return le=Ne.call(le),He(ne,ee,le,be)}if(typeof le.then=="function")return pt(ne,ee,qo(le),be);if(le.$$typeof===c)return pt(ne,ee,N(ne,le),be);Wo(ne,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ee!==null&&ee.tag===6?(i(ne,ee.sibling),be=n(ee,le),be.return=ne,ne=be):(i(ne,ee),be=Ha(le,ne.mode,be),be.return=ne,ne=be),w(ne)):i(ne,ee)}return function(ne,ee,le,be){try{Pl=0;var Ne=pt(ne,ee,le,be);return Fa=null,Ne}catch(je){if(je===Hs||je===qt)throw je;var tt=Xe(29,je,null,ne.mode);return tt.lanes=be,tt.return=ne,tt}}}var ha=td(!0),id=td(!1),br=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(at&2)!==0){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=sn(e),At(e,null,i),t}return Na(e,s,t,i),sn(e)}function Fl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Eo(e,i)}}function su(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var n=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};a===null?n=a=w:a=a.next=w,i=i.next}while(i!==null);a===null?n=a=t:a=a.next=t}else n=a=t;i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var nu=!1;function ql(){if(nu){var e=Re;if(e!==null)throw e}}function Wl(e,t,i,s){nu=!1;var n=e.updateQueue;br=!1;var a=n.firstBaseUpdate,w=n.lastBaseUpdate,H=n.shared.pending;if(H!==null){n.shared.pending=null;var G=H,oe=G.next;G.next=null,w===null?a=oe:w.next=oe,w=G;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,H=ge.lastBaseUpdate,H!==w&&(H===null?ge.firstBaseUpdate=oe:H.next=oe,ge.lastBaseUpdate=G))}if(a!==null){var Se=n.baseState;w=0,ge=oe=G=null,H=a;do{var ce=H.lane&-536870913,he=ce!==H.lane;if(he?(Ge&ce)===ce:(s&ce)===ce){ce!==0&&ce===Oe&&(nu=!0),ge!==null&&(ge=ge.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Me=e,He=H;ce=t;var pt=i;switch(He.tag){case 1:if(Me=He.payload,typeof Me=="function"){Se=Me.call(pt,Se,ce);break e}Se=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=He.payload,ce=typeof Me=="function"?Me.call(pt,Se,ce):Me,ce==null)break e;Se=v({},Se,ce);break e;case 2:br=!0}}ce=H.callback,ce!==null&&(e.flags|=64,he&&(e.flags|=8192),he=n.callbacks,he===null?n.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ge===null?(oe=ge=he,G=Se):ge=ge.next=he,w|=ce;if(H=H.next,H===null){if(H=n.shared.pending,H===null)break;he=H,H=he.next,he.next=null,n.lastBaseUpdate=he,n.shared.pending=null}}while(!0);ge===null&&(G=Se),n.baseState=G,n.firstBaseUpdate=oe,n.lastBaseUpdate=ge,a===null&&(n.shared.lanes=0),Er|=w,e.lanes=w,e.memoizedState=Se}}function sd(e,t){if(typeof e!="function")throw Error(E(191,e));e.call(t)}function nd(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)sd(i[e],t)}var qa=j(null),$o=j(0);function rd(e,t){e=Yn,Z($o,e),Z(qa,t),Yn=e|t.baseLanes}function ru(){Z($o,Yn),Z(qa,qa.current)}function au(){Yn=$o.current,Q(qa),Q($o)}var Zi=j(null),ds=null;function wr(e){var t=e.alternate;Z(It,It.current&1),Z(Zi,e),ds===null&&(t===null||qa.current!==null||t.memoizedState!==null)&&(ds=e)}function lu(e){Z(It,It.current),Z(Zi,e),ds===null&&(ds=e)}function ad(e){e.tag===22?(Z(It,It.current),Z(Zi,e),ds===null&&(ds=e)):xr()}function xr(){Z(It,It.current),Z(Zi,Zi.current)}function Ji(e){Q(Zi),ds===e&&(ds=null),Q(It)}var It=j(0);function Ko(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||fh(i)||ph(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pn=0,Ie=null,dt=null,Wt=null,Go=!1,Wa=!1,da=!1,Yo=0,$l=0,$a=null,Qm=0;function Ot(){throw Error(E(321))}function ou(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!ei(e[i],t[i]))return!1;return!0}function cu(e,t,i,s,n,a){return Pn=a,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?qd:Cu,da=!1,a=i(s,n),da=!1,Wa&&(a=od(t,i,s,n)),ld(e),a}function ld(e){$.H=Yl;var t=dt!==null&&dt.next!==null;if(Pn=0,Wt=dt=Ie=null,Go=!1,$l=0,$a=null,t)throw Error(E(300));e===null||$t||(e=e.dependencies,e!==null&&pr(e)&&($t=!0))}function od(e,t,i,s){Ie=e;var n=0;do{if(Wa&&($a=null),$l=0,Wa=!1,25<=n)throw Error(E(301));if(n+=1,Wt=dt=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}$.H=Wd,a=t(i,s)}while(Wa);return a}function Zm(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?Kl(t):t,e=e.useState()[0],(dt!==null?dt.memoizedState:null)!==e&&(Ie.flags|=1024),t}function uu(){var e=Yo!==0;return Yo=0,e}function hu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function du(e){if(Go){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Go=!1}Pn=0,Wt=dt=Ie=null,Wa=!1,$l=Yo=0,$a=null}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Ie.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Ft(){if(dt===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=Wt===null?Ie.memoizedState:Wt.next;if(t!==null)Wt=t,dt=e;else{if(e===null)throw Ie.alternate===null?Error(E(467)):Error(E(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Wt===null?Ie.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(e){var t=$l;return $l+=1,$a===null&&($a=[]),e=gr($a,e,t),t=Ie,(Wt===null?t.memoizedState:Wt.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?qd:Cu),e}function Xo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kl(e);if(e.$$typeof===c)return y(e)}throw Error(E(438,String(e)))}function fu(e){var t=null,i=Ie.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=Ie.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Vo(),Ie.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=U;return t.index++,i}function In(e,t){return typeof t=="function"?t(e):t}function Qo(e){var t=Ft();return pu(t,dt,e)}function pu(e,t,i){var s=e.queue;if(s===null)throw Error(E(311));s.lastRenderedReducer=i;var n=e.baseQueue,a=s.pending;if(a!==null){if(n!==null){var w=n.next;n.next=a.next,a.next=w}t.baseQueue=n=a,s.pending=null}if(a=e.baseState,n===null)e.memoizedState=a;else{t=n.next;var H=w=null,G=null,oe=t,ge=!1;do{var Se=oe.lane&-536870913;if(Se!==oe.lane?(Ge&Se)===Se:(Pn&Se)===Se){var ce=oe.revertLane;if(ce===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Se===Oe&&(ge=!0);else if((Pn&ce)===ce){oe=oe.next,ce===Oe&&(ge=!0);continue}else Se={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(H=G=Se,w=a):G=G.next=Se,Ie.lanes|=ce,Er|=ce;Se=oe.action,da&&i(a,Se),a=oe.hasEagerState?oe.eagerState:i(a,Se)}else ce={lane:Se,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(H=G=ce,w=a):G=G.next=ce,Ie.lanes|=Se,Er|=Se;oe=oe.next}while(oe!==null&&oe!==t);if(G===null?w=a:G.next=H,!ei(a,e.memoizedState)&&($t=!0,ge&&(i=Re,i!==null)))throw i;e.memoizedState=a,e.baseState=w,e.baseQueue=G,s.lastRenderedState=a}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function mu(e){var t=Ft(),i=t.queue;if(i===null)throw Error(E(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,a=t.memoizedState;if(n!==null){i.pending=null;var w=n=n.next;do a=e(a,w.action),w=w.next;while(w!==n);ei(a,t.memoizedState)||($t=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),i.lastRenderedState=a}return[a,s]}function cd(e,t,i){var s=Ie,n=Ft(),a=We;if(a){if(i===void 0)throw Error(E(407));i=i()}else i=t();var w=!ei((dt||n).memoizedState,i);if(w&&(n.memoizedState=i,$t=!0),n=n.queue,gu(dd.bind(null,s,n,e),[e]),n.getSnapshot!==t||w||Wt!==null&&Wt.memoizedState.tag&1){if(s.flags|=2048,Ka(9,{destroy:void 0},hd.bind(null,s,n,i,t),null),vt===null)throw Error(E(349));a||(Pn&127)!==0||ud(s,t,i)}return i}function ud(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t=Vo(),Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function hd(e,t,i,s){t.value=i,t.getSnapshot=s,fd(t)&&pd(e)}function dd(e,t,i){return i(function(){fd(t)&&pd(e)})}function fd(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!ei(e,i)}catch{return!0}}function pd(e){var t=Ln(e,2);t!==null&&ji(t,e,2)}function _u(e){var t=gi();if(typeof e=="function"){var i=e;if(e=i(),da){Ct(!0);try{i()}finally{Ct(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:e},t}function md(e,t,i,s){return e.baseState=i,pu(e,dt,typeof s=="function"?s:In)}function Jm(e,t,i,s,n){if(ec(e))throw Error(E(485));if(e=t.action,e!==null){var a={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){a.listeners.push(w)}};$.T!==null?i(!0):a.isTransition=!1,s(a),i=t.pending,i===null?(a.next=t.pending=a,_d(t,a)):(a.next=i.next,t.pending=i.next=a)}}function _d(e,t){var i=t.action,s=t.payload,n=e.state;if(t.isTransition){var a=$.T,w={};$.T=w;try{var H=i(n,s),G=$.S;G!==null&&G(w,H),vd(e,t,H)}catch(oe){vu(e,t,oe)}finally{a!==null&&w.types!==null&&(a.types=w.types),$.T=a}}else try{a=i(n,s),vd(e,t,a)}catch(oe){vu(e,t,oe)}}function vd(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){gd(e,t,s)},function(s){return vu(e,t,s)}):gd(e,t,i)}function gd(e,t,i){t.status="fulfilled",t.value=i,bd(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,_d(e,i)))}function vu(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,bd(t),t=t.next;while(t!==s)}e.action=null}function bd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function yd(e,t){return t}function Sd(e,t){if(We){var i=vt.formState;if(i!==null){e:{var s=Ie;if(We){if(_t){t:{for(var n=_t,a=fi;n.nodeType!==8;){if(!a){n=null;break t}if(n=fs(n.nextSibling),n===null){n=null;break t}}a=n.data,n=a==="F!"||a==="F"?n:null}if(n){_t=fs(n.nextSibling),s=n.data==="F!";break e}}Ls(s)}s=!1}s&&(t=i[0])}}return i=gi(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:t},i.queue=s,i=Pd.bind(null,Ie,s),s.dispatch=i,s=_u(!1),a=xu.bind(null,Ie,!1,s.queue),s=gi(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,i=Jm.bind(null,Ie,n,a,i),n.dispatch=i,s.memoizedState=e,[t,i,!1]}function wd(e){var t=Ft();return xd(t,dt,e)}function xd(e,t,i){if(t=pu(e,t,yd)[0],e=Qo(In)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Kl(t)}catch(w){throw w===Hs?qt:w}else s=t;t=Ft();var n=t.queue,a=n.dispatch;return i!==t.memoizedState&&(Ie.flags|=2048,Ka(9,{destroy:void 0},e_.bind(null,n,i),null)),[s,a,e]}function e_(e,t){e.action=t}function Cd(e){var t=Ft(),i=dt;if(i!==null)return xd(t,i,e);Ft(),t=t.memoizedState,i=Ft();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function Ka(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=Ie.updateQueue,t===null&&(t=Vo(),Ie.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function kd(){return Ft().memoizedState}function Zo(e,t,i,s){var n=gi();Ie.flags|=e,n.memoizedState=Ka(1|t,{destroy:void 0},i,s===void 0?null:s)}function Jo(e,t,i,s){var n=Ft();s=s===void 0?null:s;var a=n.memoizedState.inst;dt!==null&&s!==null&&ou(s,dt.memoizedState.deps)?n.memoizedState=Ka(t,a,i,s):(Ie.flags|=e,n.memoizedState=Ka(1|t,a,i,s))}function Ed(e,t){Zo(8390656,8,e,t)}function gu(e,t){Jo(2048,8,e,t)}function t_(e){Ie.flags|=4;var t=Ie.updateQueue;if(t===null)t=Vo(),Ie.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Ad(e){var t=Ft().memoizedState;return t_({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(E(440));return t.impl.apply(void 0,arguments)}}function Dd(e,t){return Jo(4,2,e,t)}function Td(e,t){return Jo(4,4,e,t)}function Rd(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Md(e,t,i){i=i!=null?i.concat([e]):null,Jo(4,4,Rd.bind(null,t,e),i)}function bu(){}function jd(e,t){var i=Ft();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&ou(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Od(e,t){var i=Ft();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&ou(t,s[1]))return s[0];if(s=e(),da){Ct(!0);try{e()}finally{Ct(!1)}}return i.memoizedState=[s,t],s}function yu(e,t,i){return i===void 0||(Pn&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Nf(),Ie.lanes|=e,Er|=e,i)}function Ld(e,t,i,s){return ei(i,t)?i:qa.current!==null?(e=yu(e,i,s),ei(e,t)||($t=!0),e):(Pn&42)===0||(Pn&1073741824)!==0&&(Ge&261930)===0?($t=!0,e.memoizedState=i):(e=Nf(),Ie.lanes|=e,Er|=e,t)}function Nd(e,t,i,s,n){var a=se.p;se.p=a!==0&&8>a?a:8;var w=$.T,H={};$.T=H,xu(e,!1,t,i);try{var G=n(),oe=$.S;if(oe!==null&&oe(H,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ge=rt(G,s);Gl(e,t,ge,is(e))}else Gl(e,t,s,is(e))}catch(Se){Gl(e,t,{then:function(){},status:"rejected",reason:Se},is())}finally{se.p=a,w!==null&&H.types!==null&&(w.types=H.types),$.T=w}}function i_(){}function Su(e,t,i,s){if(e.tag!==5)throw Error(E(476));var n=Bd(e).queue;Nd(e,n,t,L,i===null?i_:function(){return Hd(e),i(s)})}function Bd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:L},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hd(e){var t=Bd(e);t.next===null&&(t=e.alternate.memoizedState),Gl(e,t.next.queue,{},is())}function wu(){return y(uo)}function zd(){return Ft().memoizedState}function Ud(){return Ft().memoizedState}function s_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=is();e=yr(i);var s=Sr(t,e,i);s!==null&&(ji(s,t,i),Fl(s,t,i)),t={cache:De()},e.payload=t;return}t=t.return}}function n_(e,t,i){var s=is();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ec(e)?Id(t,i):(i=Ba(e,t,i,s),i!==null&&(ji(i,e,s),Fd(i,t,s)))}function Pd(e,t,i){var s=is();Gl(e,t,i,s)}function Gl(e,t,i,s){var n={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ec(e))Id(t,n);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var w=t.lastRenderedState,H=a(w,i);if(n.hasEagerState=!0,n.eagerState=H,ei(H,w))return Na(e,t,n,0),vt===null&&Mt(),!1}catch{}if(i=Ba(e,t,n,s),i!==null)return ji(i,e,s),Fd(i,t,s),!0}return!1}function xu(e,t,i,s){if(s={lane:2,revertLane:th(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ec(e)){if(t)throw Error(E(479))}else t=Ba(e,i,s,2),t!==null&&ji(t,e,2)}function ec(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Id(e,t){Wa=Go=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Fd(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Eo(e,i)}}var Yl={readContext:y,use:Xo,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Yl.useEffectEvent=Ot;var qd={readContext:y,use:Xo,useCallback:function(e,t){return gi().memoizedState=[e,t===void 0?null:t],e},useContext:y,useEffect:Ed,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Zo(4194308,4,Rd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){Zo(4,2,e,t)},useMemo:function(e,t){var i=gi();t=t===void 0?null:t;var s=e();if(da){Ct(!0);try{e()}finally{Ct(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=gi();if(i!==void 0){var n=i(t);if(da){Ct(!0);try{i(t)}finally{Ct(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=n_.bind(null,Ie,e),[s.memoizedState,e]},useRef:function(e){var t=gi();return e={current:e},t.memoizedState=e},useState:function(e){e=_u(e);var t=e.queue,i=Pd.bind(null,Ie,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:bu,useDeferredValue:function(e,t){var i=gi();return yu(i,e,t)},useTransition:function(){var e=_u(!1);return e=Nd.bind(null,Ie,e.queue,!0,!1),gi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=Ie,n=gi();if(We){if(i===void 0)throw Error(E(407));i=i()}else{if(i=t(),vt===null)throw Error(E(349));(Ge&127)!==0||ud(s,t,i)}n.memoizedState=i;var a={value:i,getSnapshot:t};return n.queue=a,Ed(dd.bind(null,s,a,e),[e]),s.flags|=2048,Ka(9,{destroy:void 0},hd.bind(null,s,a,i,t),null),i},useId:function(){var e=gi(),t=vt.identifierPrefix;if(We){var i=vi,s=Ki;i=(s&~(1<<32-Ht(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Yo++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Qm++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:wu,useFormState:Sd,useActionState:Sd,useOptimistic:function(e){var t=gi();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=xu.bind(null,Ie,!0,i),i.dispatch=t,[e,t]},useMemoCache:fu,useCacheRefresh:function(){return gi().memoizedState=s_.bind(null,Ie)},useEffectEvent:function(e){var t=gi(),i={impl:e};return t.memoizedState=i,function(){if((at&2)!==0)throw Error(E(440));return i.impl.apply(void 0,arguments)}}},Cu={readContext:y,use:Xo,useCallback:jd,useContext:y,useEffect:gu,useImperativeHandle:Md,useInsertionEffect:Dd,useLayoutEffect:Td,useMemo:Od,useReducer:Qo,useRef:kd,useState:function(){return Qo(In)},useDebugValue:bu,useDeferredValue:function(e,t){var i=Ft();return Ld(i,dt.memoizedState,e,t)},useTransition:function(){var e=Qo(In)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:cd,useId:zd,useHostTransitionStatus:wu,useFormState:wd,useActionState:wd,useOptimistic:function(e,t){var i=Ft();return md(i,dt,e,t)},useMemoCache:fu,useCacheRefresh:Ud};Cu.useEffectEvent=Ad;var Wd={readContext:y,use:Xo,useCallback:jd,useContext:y,useEffect:gu,useImperativeHandle:Md,useInsertionEffect:Dd,useLayoutEffect:Td,useMemo:Od,useReducer:mu,useRef:kd,useState:function(){return mu(In)},useDebugValue:bu,useDeferredValue:function(e,t){var i=Ft();return dt===null?yu(i,e,t):Ld(i,dt.memoizedState,e,t)},useTransition:function(){var e=mu(In)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:cd,useId:zd,useHostTransitionStatus:wu,useFormState:Cd,useActionState:Cd,useOptimistic:function(e,t){var i=Ft();return dt!==null?md(i,dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:fu,useCacheRefresh:Ud};Wd.useEffectEvent=Ad;function ku(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:v({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Eu={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=is(),n=yr(s);n.payload=t,i!=null&&(n.callback=i),t=Sr(e,n,s),t!==null&&(ji(t,e,s),Fl(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=is(),n=yr(s);n.tag=1,n.payload=t,i!=null&&(n.callback=i),t=Sr(e,n,s),t!==null&&(ji(t,e,s),Fl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=is(),s=yr(i);s.tag=2,t!=null&&(s.callback=t),t=Sr(e,s,i),t!==null&&(ji(t,e,i),Fl(t,e,i))}};function $d(e,t,i,s,n,a,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,w):t.prototype&&t.prototype.isPureReactComponent?!Rt(i,s)||!Rt(n,a):!0}function Kd(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Eu.enqueueReplaceState(t,t.state,null)}function fa(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=v({},i));for(var n in e)i[n]===void 0&&(i[n]=e[n])}return i}function Gd(e){jn(e)}function Yd(e){console.error(e)}function Vd(e){jn(e)}function tc(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Xd(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Au(e,t,i){return i=yr(i),i.tag=3,i.payload={element:null},i.callback=function(){tc(e,t)},i}function Qd(e){return e=yr(e),e.tag=3,e}function Zd(e,t,i,s){var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;e.payload=function(){return n(a)},e.callback=function(){Xd(t,i,s)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){Xd(t,i,s),typeof n!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var H=s.stack;this.componentDidCatch(s.value,{componentStack:H!==null?H:""})})}function r_(e,t,i,s,n){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&Un(t,i,n,!0),i=Zi.current,i!==null){switch(i.tag){case 31:case 13:return ds===null?fc():i.alternate===null&&Lt===0&&(Lt=3),i.flags&=-257,i.flags|=65536,i.lanes=n,s===si?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),Zu(e,s,n)),!1;case 22:return i.flags|=65536,s===si?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),Zu(e,s,n)),!1}throw Error(E(435,i.tag))}return Zu(e,s,n),fc(),!1}if(We)return t=Zi.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==Pa&&(e=Error(E(422),{cause:s}),ca(_i(e,i)))):(s!==Pa&&(t=Error(E(423),{cause:s}),ca(_i(t,i))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=_i(s,i),n=Au(e.stateNode,s,n),su(e,n),Lt!==4&&(Lt=2)),!1;var a=Error(E(520),{cause:s});if(a=_i(a,i),io===null?io=[a]:io.push(a),Lt!==4&&(Lt=2),t===null)return!0;s=_i(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,e=Au(i.stateNode,s,e),su(i,e),!1;case 1:if(t=i.type,a=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Ar===null||!Ar.has(a))))return i.flags|=65536,n&=-n,i.lanes|=n,n=Qd(n),Zd(n,e,i,s),su(i,n),!1}i=i.return}while(i!==null);return!1}var Du=Error(E(461)),$t=!1;function ci(e,t,i,s){t.child=e===null?id(t,null,i,s):ha(t,e.child,i,s)}function Jd(e,t,i,s,n){i=i.render;var a=t.ref;if("ref"in s){var w={};for(var H in s)H!=="ref"&&(w[H]=s[H])}else w=s;return h(t),s=cu(e,t,i,w,a,n),H=uu(),e!==null&&!$t?(hu(e,t,n),Fn(e,t,n)):(We&&H&&Yi(t),t.flags|=1,ci(e,t,s,n),t.child)}function ef(e,t,i,s,n){if(e===null){var a=i.type;return typeof a=="function"&&!jt(a)&&a.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=a,tf(e,t,a,s,n)):(e=Ei(i.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Bu(e,n)){var w=a.memoizedProps;if(i=i.compare,i=i!==null?i:Rt,i(w,s)&&e.ref===t.ref)return Fn(e,t,n)}return t.flags|=1,e=Os(a,s),e.ref=t.ref,e.return=t,t.child=e}function tf(e,t,i,s,n){if(e!==null){var a=e.memoizedProps;if(Rt(a,s)&&e.ref===t.ref)if($t=!1,t.pendingProps=s=a,Bu(e,n))(e.flags&131072)!==0&&($t=!0);else return t.lanes=e.lanes,Fn(e,t,n)}return Tu(e,t,i,s,n)}function sf(e,t,i,s){var n=s.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(a=a!==null?a.baseLanes|i:i,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~a}else s=0,t.child=null;return nf(e,t,a,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&vr(t,a!==null?a.cachePool:null),a!==null?rd(t,a):ru(),ad(t);else return s=t.lanes=536870912,nf(e,t,a!==null?a.baseLanes|i:i,i,s)}else a!==null?(vr(t,a.cachePool),rd(t,a),xr(),t.memoizedState=null):(e!==null&&vr(t,null),ru(),xr());return ci(e,t,n,i),t.child}function Vl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nf(e,t,i,s,n){var a=Xi();return a=a===null?null:{parent:ve._currentValue,pool:a},t.memoizedState={baseLanes:i,cachePool:a},e!==null&&vr(t,null),ru(),ad(t),e!==null&&Un(e,t,s,!0),t.childLanes=n,null}function ic(e,t){return t=nc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function rf(e,t,i){return ha(t,e.child,null,i),e=ic(t,t.pendingProps),e.flags|=2,Ji(t),t.memoizedState=null,e}function a_(e,t,i){var s=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(We){if(s.mode==="hidden")return e=ic(t,s),t.lanes=536870912,Vl(null,e);if(lu(t),(e=_t)?(e=vp(e,fi),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$i!==null?{id:Ki,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},i=Ll(e),i.return=t,t.child=i,Pt=t,_t=null)):e=null,e===null)throw Ls(t);return t.lanes=536870912,null}return ic(t,s)}var a=e.memoizedState;if(a!==null){var w=a.dehydrated;if(lu(t),n)if(t.flags&256)t.flags&=-257,t=rf(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(E(558));else if($t||Un(e,t,i,!1),n=(i&e.childLanes)!==0,$t||n){if(s=vt,s!==null&&(w=Fr(s,i),w!==0&&w!==a.retryLane))throw a.retryLane=w,Ln(e,w),ji(s,e,w),Du;fc(),t=rf(e,t,i)}else e=a.treeContext,_t=fs(w.nextSibling),Pt=t,We=!0,ln=null,fi=!1,e!==null&&dr(t,e),t=ic(t,s),t.flags|=4096;return t}return e=Os(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function sc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(E(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Tu(e,t,i,s,n){return h(t),i=cu(e,t,i,s,void 0,n),s=uu(),e!==null&&!$t?(hu(e,t,n),Fn(e,t,n)):(We&&s&&Yi(t),t.flags|=1,ci(e,t,i,n),t.child)}function af(e,t,i,s,n,a){return h(t),t.updateQueue=null,i=od(t,s,i,n),ld(e),s=uu(),e!==null&&!$t?(hu(e,t,a),Fn(e,t,a)):(We&&s&&Yi(t),t.flags|=1,ci(e,t,i,a),t.child)}function lf(e,t,i,s,n){if(h(t),t.stateNode===null){var a=et,w=i.contextType;typeof w=="object"&&w!==null&&(a=y(w)),a=new i(s,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Eu,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=s,a.state=t.memoizedState,a.refs={},tu(t),w=i.contextType,a.context=typeof w=="object"&&w!==null?y(w):et,a.state=t.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(ku(t,i,w,s),a.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(w=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),w!==a.state&&Eu.enqueueReplaceState(a,a.state,null),Wl(t,s,a,n),ql(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){a=t.stateNode;var H=t.memoizedProps,G=fa(i,H);a.props=G;var oe=a.context,ge=i.contextType;w=et,typeof ge=="object"&&ge!==null&&(w=y(ge));var Se=i.getDerivedStateFromProps;ge=typeof Se=="function"||typeof a.getSnapshotBeforeUpdate=="function",H=t.pendingProps!==H,ge||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(H||oe!==w)&&Kd(t,a,s,w),br=!1;var ce=t.memoizedState;a.state=ce,Wl(t,s,a,n),ql(),oe=t.memoizedState,H||ce!==oe||br?(typeof Se=="function"&&(ku(t,i,Se,s),oe=t.memoizedState),(G=br||$d(t,i,G,s,ce,oe,w))?(ge||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=oe),a.props=s,a.state=oe,a.context=w,s=G):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,iu(e,t),w=t.memoizedProps,ge=fa(i,w),a.props=ge,Se=t.pendingProps,ce=a.context,oe=i.contextType,G=et,typeof oe=="object"&&oe!==null&&(G=y(oe)),H=i.getDerivedStateFromProps,(oe=typeof H=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(w!==Se||ce!==G)&&Kd(t,a,s,G),br=!1,ce=t.memoizedState,a.state=ce,Wl(t,s,a,n),ql();var he=t.memoizedState;w!==Se||ce!==he||br||e!==null&&e.dependencies!==null&&pr(e.dependencies)?(typeof H=="function"&&(ku(t,i,H,s),he=t.memoizedState),(ge=br||$d(t,i,ge,s,ce,he,G)||e!==null&&e.dependencies!==null&&pr(e.dependencies))?(oe||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,he,G),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,he,G)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||w===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=he),a.props=s,a.state=he,a.context=G,s=ge):(typeof a.componentDidUpdate!="function"||w===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),s=!1)}return a=s,sc(e,t),s=(t.flags&128)!==0,a||s?(a=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&s?(t.child=ha(t,e.child,null,n),t.child=ha(t,null,i,n)):ci(e,t,i,n),t.memoizedState=a.state,e=t.child):e=Fn(e,t,n),e}function of(e,t,i,s){return Hn(),t.flags|=256,ci(e,t,i,s),t.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mu(e){return{baseLanes:e,cachePool:Fo()}}function ju(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=ts),e}function cf(e,t,i){var s=t.pendingProps,n=!1,a=(t.flags&128)!==0,w;if((w=a)||(w=e!==null&&e.memoizedState===null?!1:(It.current&2)!==0),w&&(n=!0,t.flags&=-129),w=(t.flags&32)!==0,t.flags&=-33,e===null){if(We){if(n?wr(t):xr(),(e=_t)?(e=vp(e,fi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$i!==null?{id:Ki,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},i=Ll(e),i.return=t,t.child=i,Pt=t,_t=null)):e=null,e===null)throw Ls(t);return ph(e)?t.lanes=32:t.lanes=536870912,null}var H=s.children;return s=s.fallback,n?(xr(),n=t.mode,H=nc({mode:"hidden",children:H},n),s=Nn(s,n,i,null),H.return=t,s.return=t,H.sibling=s,t.child=H,s=t.child,s.memoizedState=Mu(i),s.childLanes=ju(e,w,i),t.memoizedState=Ru,Vl(null,s)):(wr(t),Ou(t,H))}var G=e.memoizedState;if(G!==null&&(H=G.dehydrated,H!==null)){if(a)t.flags&256?(wr(t),t.flags&=-257,t=Lu(e,t,i)):t.memoizedState!==null?(xr(),t.child=e.child,t.flags|=128,t=null):(xr(),H=s.fallback,n=t.mode,s=nc({mode:"visible",children:s.children},n),H=Nn(H,n,i,null),H.flags|=2,s.return=t,H.return=t,s.sibling=H,t.child=s,ha(t,e.child,null,i),s=t.child,s.memoizedState=Mu(i),s.childLanes=ju(e,w,i),t.memoizedState=Ru,t=Vl(null,s));else if(wr(t),ph(H)){if(w=H.nextSibling&&H.nextSibling.dataset,w)var oe=w.dgst;w=oe,s=Error(E(419)),s.stack="",s.digest=w,ca({value:s,source:null,stack:null}),t=Lu(e,t,i)}else if($t||Un(e,t,i,!1),w=(i&e.childLanes)!==0,$t||w){if(w=vt,w!==null&&(s=Fr(w,i),s!==0&&s!==G.retryLane))throw G.retryLane=s,Ln(e,s),ji(w,e,s),Du;fh(H)||fc(),t=Lu(e,t,i)}else fh(H)?(t.flags|=192,t.child=e.child,t=null):(e=G.treeContext,_t=fs(H.nextSibling),Pt=t,We=!0,ln=null,fi=!1,e!==null&&dr(t,e),t=Ou(t,s.children),t.flags|=4096);return t}return n?(xr(),H=s.fallback,n=t.mode,G=e.child,oe=G.sibling,s=Os(G,{mode:"hidden",children:s.children}),s.subtreeFlags=G.subtreeFlags&65011712,oe!==null?H=Os(oe,H):(H=Nn(H,n,i,null),H.flags|=2),H.return=t,s.return=t,s.sibling=H,t.child=s,Vl(null,s),s=t.child,H=e.child.memoizedState,H===null?H=Mu(i):(n=H.cachePool,n!==null?(G=ve._currentValue,n=n.parent!==G?{parent:G,pool:G}:n):n=Fo(),H={baseLanes:H.baseLanes|i,cachePool:n}),s.memoizedState=H,s.childLanes=ju(e,w,i),t.memoizedState=Ru,Vl(e.child,s)):(wr(t),i=e.child,e=i.sibling,i=Os(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(w=t.deletions,w===null?(t.deletions=[e],t.flags|=16):w.push(e)),t.child=i,t.memoizedState=null,i)}function Ou(e,t){return t=nc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function nc(e,t){return e=Xe(22,e,null,t),e.lanes=0,e}function Lu(e,t,i){return ha(t,e.child,null,i),e=Ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uf(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ua(e.return,t,i)}function Nu(e,t,i,s,n,a){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n,treeForkCount:a}:(w.isBackwards=t,w.rendering=null,w.renderingStartTime=0,w.last=s,w.tail=i,w.tailMode=n,w.treeForkCount=a)}function hf(e,t,i){var s=t.pendingProps,n=s.revealOrder,a=s.tail;s=s.children;var w=It.current,H=(w&2)!==0;if(H?(w=w&1|2,t.flags|=128):w&=1,Z(It,w),ci(e,t,s,i),s=We?an:0,!H&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uf(e,i,t);else if(e.tag===19)uf(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Ko(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Nu(t,!1,n,i,a,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ko(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Nu(t,!0,i,null,a,s);break;case"together":Nu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Fn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Un(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,i=Os(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Os(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Bu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&pr(e)))}function l_(e,t,i){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),Vi(t,ve,e.memoizedState.cache),Hn();break;case 27:case 5:fe(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:Vi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,lu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(wr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?cf(e,t,i):(wr(t),e=Fn(e,t,i),e!==null?e.sibling:null);wr(t);break;case 19:var n=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(Un(e,t,i,!1),s=(i&t.childLanes)!==0),n){if(s)return hf(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Z(It,It.current),s)break;return null;case 22:return t.lanes=0,sf(e,t,i,t.pendingProps);case 24:Vi(t,ve,e.memoizedState.cache)}return Fn(e,t,i)}function df(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)$t=!0;else{if(!Bu(e,i)&&(t.flags&128)===0)return $t=!1,l_(e,t,i);$t=(e.flags&131072)!==0}else $t=!1,We&&(t.flags&1048576)!==0&&Ua(t,an,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=hs(t.elementType),t.type=e,typeof e=="function")jt(e)?(s=fa(e,s),t.tag=1,t=lf(null,t,e,s,i)):(t.tag=0,t=Tu(null,t,e,s,i));else{if(e!=null){var n=e.$$typeof;if(n===g){t.tag=11,t=Jd(null,t,e,s,i);break e}else if(n===O){t.tag=14,t=ef(null,t,e,s,i);break e}}throw t=J(e)||e,Error(E(306,t,""))}}return t;case 0:return Tu(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,n=fa(s,t.pendingProps),lf(e,t,s,n,i);case 3:e:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(E(387));s=t.pendingProps;var a=t.memoizedState;n=a.element,iu(e,t),Wl(t,s,null,i);var w=t.memoizedState;if(s=w.cache,Vi(t,ve,s),s!==a.cache&&Ul(t,[ve],i,!0),ql(),s=w.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:w.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=of(e,t,s,i);break e}else if(s!==n){n=_i(Error(E(424)),t),ca(n),t=of(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,_t=fs(e.firstChild),Pt=t,We=!0,ln=null,fi=!0,i=id(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Hn(),s===n){t=Fn(e,t,i);break e}ci(e,t,s,i)}t=t.child}return t;case 26:return sc(e,t),e===null?(i=xp(t.type,null,t.pendingProps,null))?t.memoizedState=i:We||(i=t.type,e=t.pendingProps,s=yc(Ae.current).createElement(i),s[Gt]=t,s[zt]=e,ui(s,i,e),yt(s),t.stateNode=s):t.memoizedState=xp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return fe(t),e===null&&We&&(s=t.stateNode=yp(t.type,t.pendingProps,Ae.current),Pt=t,fi=!0,n=_t,Mr(t.type)?(mh=n,_t=fs(s.firstChild)):_t=n),ci(e,t,t.pendingProps.children,i),sc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&We&&((n=s=_t)&&(s=H_(s,t.type,t.pendingProps,fi),s!==null?(t.stateNode=s,Pt=t,_t=fs(s.firstChild),fi=!1,n=!0):n=!1),n||Ls(t)),fe(t),n=t.type,a=t.pendingProps,w=e!==null?e.memoizedProps:null,s=a.children,uh(n,a)?s=null:w!==null&&uh(n,w)&&(t.flags|=32),t.memoizedState!==null&&(n=cu(e,t,Zm,null,null,i),uo._currentValue=n),sc(e,t),ci(e,t,s,i),t.child;case 6:return e===null&&We&&((e=i=_t)&&(i=z_(i,t.pendingProps,fi),i!==null?(t.stateNode=i,Pt=t,_t=null,e=!0):e=!1),e||Ls(t)),null;case 13:return cf(e,t,i);case 4:return ie(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ha(t,null,s,i):ci(e,t,s,i),t.child;case 11:return Jd(e,t,t.type,t.pendingProps,i);case 7:return ci(e,t,t.pendingProps,i),t.child;case 8:return ci(e,t,t.pendingProps.children,i),t.child;case 12:return ci(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,Vi(t,t.type,s.value),ci(e,t,s.children,i),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,h(t),n=y(n),s=s(n),t.flags|=1,ci(e,t,s,i),t.child;case 14:return ef(e,t,t.type,t.pendingProps,i);case 15:return tf(e,t,t.type,t.pendingProps,i);case 19:return hf(e,t,i);case 31:return a_(e,t,i);case 22:return sf(e,t,i,t.pendingProps);case 24:return h(t),s=y(ve),e===null?(n=Xi(),n===null&&(n=vt,a=De(),n.pooledCache=a,a.refCount++,a!==null&&(n.pooledCacheLanes|=i),n=a),t.memoizedState={parent:s,cache:n},tu(t),Vi(t,ve,n)):((e.lanes&i)!==0&&(iu(e,t),Wl(t,null,null,i),ql()),n=e.memoizedState,a=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Vi(t,ve,s)):(s=a.cache,Vi(t,ve,s),s!==n.cache&&Ul(t,[ve],i,!0))),ci(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(E(156,t.tag))}function qn(e){e.flags|=4}function Hu(e,t,i,s,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Uf())e.flags|=8192;else throw Vt=si,Be}else e.flags&=-16777217}function ff(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Dp(t))if(Uf())e.flags|=8192;else throw Vt=si,Be}function rc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pr():536870912,e.lanes|=t,Xa|=t)}function Xl(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function o_(e,t,i){var s=t.pendingProps;switch(Bn(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return wt(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Bs(ve),de(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fr(t)?qn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hl())),wt(t),null;case 26:var n=t.type,a=t.memoizedState;return e===null?(qn(t),a!==null?(wt(t),ff(t,a)):(wt(t),Hu(t,n,null,s,i))):a?a!==e.memoizedState?(qn(t),wt(t),ff(t,a)):(wt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&qn(t),wt(t),Hu(t,n,e,s,i)),null;case 27:if(ze(t),i=Ae.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&qn(t);else{if(!s){if(t.stateNode===null)throw Error(E(166));return wt(t),null}e=_e.current,fr(t)?Io(t):(e=yp(n,s,i),t.stateNode=e,qn(t))}return wt(t),null;case 5:if(ze(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&qn(t);else{if(!s){if(t.stateNode===null)throw Error(E(166));return wt(t),null}if(a=_e.current,fr(t))Io(t);else{var w=yc(Ae.current);switch(a){case 1:a=w.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:a=w.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":a=w.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":a=w.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":a=w.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof s.is=="string"?w.createElement("select",{is:s.is}):w.createElement("select"),s.multiple?a.multiple=!0:s.size&&(a.size=s.size);break;default:a=typeof s.is=="string"?w.createElement(n,{is:s.is}):w.createElement(n)}}a[Gt]=t,a[zt]=s;e:for(w=t.child;w!==null;){if(w.tag===5||w.tag===6)a.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}t.stateNode=a;e:switch(ui(a,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&qn(t)}}return wt(t),Hu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&qn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(E(166));if(e=Ae.current,fr(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,n=Pt,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Gt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||cp(e.nodeValue,i)),e||Ls(t,!0)}else e=yc(e).createTextNode(s),e[Gt]=t,t.stateNode=e}return wt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=fr(t),i!==null){if(e===null){if(!s)throw Error(E(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(557));e[Gt]=t}else Hn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),e=!1}else i=Hl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Ji(t),t):(Ji(t),null);if((t.flags&128)!==0)throw Error(E(558))}return wt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=fr(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(E(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(E(317));n[Gt]=t}else Hn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),n=!1}else n=Hl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Ji(t),t):(Ji(t),null)}return Ji(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==n&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),rc(t,t.updateQueue),wt(t),null);case 4:return de(),e===null&&rh(t.stateNode.containerInfo),wt(t),null;case 10:return Bs(t.type),wt(t),null;case 19:if(Q(It),s=t.memoizedState,s===null)return wt(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)Xl(s,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Ko(e),a!==null){for(t.flags|=128,Xl(s,!1),e=a.updateQueue,t.updateQueue=e,rc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Ol(i,e),i=i.sibling;return Z(It,It.current&1|2),We&&Gi(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Bt()>uc&&(t.flags|=128,n=!0,Xl(s,!1),t.lanes=4194304)}else{if(!n)if(e=Ko(a),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,rc(t,e),Xl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!We)return wt(t),null}else 2*Bt()-s.renderingStartTime>uc&&i!==536870912&&(t.flags|=128,n=!0,Xl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Bt(),e.sibling=null,i=It.current,Z(It,n?i&1|2:i&1),We&&Gi(t,s.treeForkCount),e):(wt(t),null);case 22:case 23:return Ji(t),au(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),i=t.updateQueue,i!==null&&rc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&Q(_r),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Bs(ve),wt(t),null;case 25:return null;case 30:return null}throw Error(E(156,t.tag))}function c_(e,t){switch(Bn(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bs(ve),de(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ze(t),null;case 31:if(t.memoizedState!==null){if(Ji(t),t.alternate===null)throw Error(E(340));Hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ji(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));Hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(It),null;case 4:return de(),null;case 10:return Bs(t.type),null;case 22:case 23:return Ji(t),au(),e!==null&&Q(_r),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Bs(ve),null;case 25:return null;default:return null}}function pf(e,t){switch(Bn(t),t.tag){case 3:Bs(ve),de();break;case 26:case 27:case 5:ze(t);break;case 4:de();break;case 31:t.memoizedState!==null&&Ji(t);break;case 13:Ji(t);break;case 19:Q(It);break;case 10:Bs(t.type);break;case 22:case 23:Ji(t),au(),e!==null&&Q(_r);break;case 24:Bs(ve)}}function Ql(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var n=s.next;i=n;do{if((i.tag&e)===e){s=void 0;var a=i.create,w=i.inst;s=a(),w.destroy=s}i=i.next}while(i!==n)}}catch(H){ut(t,t.return,H)}}function Cr(e,t,i){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var a=n.next;s=a;do{if((s.tag&e)===e){var w=s.inst,H=w.destroy;if(H!==void 0){w.destroy=void 0,n=t;var G=i,oe=H;try{oe()}catch(ge){ut(n,G,ge)}}}s=s.next}while(s!==a)}}catch(ge){ut(t,t.return,ge)}}function mf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{nd(t,i)}catch(s){ut(e,e.return,s)}}}function _f(e,t,i){i.props=fa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){ut(e,t,s)}}function Zl(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(n){ut(e,t,n)}}function on(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(n){ut(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(n){ut(e,t,n)}else i.current=null}function vf(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(n){ut(e,e.return,n)}}function zu(e,t,i){try{var s=e.stateNode;M_(s,e.type,i,t),s[zt]=t}catch(n){ut(e,e.return,n)}}function gf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mr(e.type)||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pu(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=xs));else if(s!==4&&(s===27&&Mr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Pu(e,t,i),e=e.sibling;e!==null;)Pu(e,t,i),e=e.sibling}function ac(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&Mr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ac(e,t,i),e=e.sibling;e!==null;)ac(e,t,i),e=e.sibling}function bf(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ui(t,s,i),t[Gt]=e,t[zt]=i}catch(a){ut(e,e.return,a)}}var Wn=!1,Kt=!1,Iu=!1,yf=typeof WeakSet=="function"?WeakSet:Set,ni=null;function u_(e,t){if(e=e.containerInfo,oh=Ac,e=ja(e),Rl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break e}var w=0,H=-1,G=-1,oe=0,ge=0,Se=e,ce=null;t:for(;;){for(var he;Se!==i||n!==0&&Se.nodeType!==3||(H=w+n),Se!==a||s!==0&&Se.nodeType!==3||(G=w+s),Se.nodeType===3&&(w+=Se.nodeValue.length),(he=Se.firstChild)!==null;)ce=Se,Se=he;for(;;){if(Se===e)break t;if(ce===i&&++oe===n&&(H=w),ce===a&&++ge===s&&(G=w),(he=Se.nextSibling)!==null)break;Se=ce,ce=Se.parentNode}Se=he}i=H===-1||G===-1?null:{start:H,end:G}}else i=null}i=i||{start:0,end:0}}else i=null;for(ch={focusedElem:e,selectionRange:i},Ac=!1,ni=t;ni!==null;)if(t=ni,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ni=e;else for(;ni!==null;){switch(t=ni,a=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)n=e[i],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&a!==null){e=void 0,i=t,n=a.memoizedProps,a=a.memoizedState,s=i.stateNode;try{var Me=fa(i.type,n);e=s.getSnapshotBeforeUpdate(Me,a),s.__reactInternalSnapshotBeforeUpdate=e}catch(He){ut(i,i.return,He)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)dh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(E(163))}if(e=t.sibling,e!==null){e.return=t.return,ni=e;break}ni=t.return}}function Sf(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Kn(e,i),s&4&&Ql(5,i);break;case 1:if(Kn(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(w){ut(i,i.return,w)}else{var n=fa(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(w){ut(i,i.return,w)}}s&64&&mf(i),s&512&&Zl(i,i.return);break;case 3:if(Kn(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{nd(e,t)}catch(w){ut(i,i.return,w)}}break;case 27:t===null&&s&4&&bf(i);case 26:case 5:Kn(e,i),t===null&&s&4&&vf(i),s&512&&Zl(i,i.return);break;case 12:Kn(e,i);break;case 31:Kn(e,i),s&4&&Cf(e,i);break;case 13:Kn(e,i),s&4&&kf(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=b_.bind(null,i),U_(e,i))));break;case 22:if(s=i.memoizedState!==null||Wn,!s){t=t!==null&&t.memoizedState!==null||Kt,n=Wn;var a=Kt;Wn=s,(Kt=t)&&!a?Gn(e,i,(i.subtreeFlags&8772)!==0):Kn(e,i),Wn=n,Kt=a}break;case 30:break;default:Kn(e,i)}}function wf(e){var t=e.alternate;t!==null&&(e.alternate=null,wf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kt=null,Di=!1;function $n(e,t,i){for(i=i.child;i!==null;)xf(e,t,i),i=i.sibling}function xf(e,t,i){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(rs,i)}catch{}switch(i.tag){case 26:Kt||on(i,t),$n(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Kt||on(i,t);var s=kt,n=Di;Mr(i.type)&&(kt=i.stateNode,Di=!1),$n(e,t,i),lo(i.stateNode),kt=s,Di=n;break;case 5:Kt||on(i,t);case 6:if(s=kt,n=Di,kt=null,$n(e,t,i),kt=s,Di=n,kt!==null)if(Di)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(i.stateNode)}catch(a){ut(i,t,a)}else try{kt.removeChild(i.stateNode)}catch(a){ut(i,t,a)}break;case 18:kt!==null&&(Di?(e=kt,mp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),nl(e)):mp(kt,i.stateNode));break;case 4:s=kt,n=Di,kt=i.stateNode.containerInfo,Di=!0,$n(e,t,i),kt=s,Di=n;break;case 0:case 11:case 14:case 15:Cr(2,i,t),Kt||Cr(4,i,t),$n(e,t,i);break;case 1:Kt||(on(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&_f(i,t,s)),$n(e,t,i);break;case 21:$n(e,t,i);break;case 22:Kt=(s=Kt)||i.memoizedState!==null,$n(e,t,i),Kt=s;break;default:$n(e,t,i)}}function Cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{nl(e)}catch(i){ut(t,t.return,i)}}}function kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nl(e)}catch(i){ut(t,t.return,i)}}function h_(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yf),t;default:throw Error(E(435,e.tag))}}function lc(e,t){var i=h_(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var n=y_.bind(null,e,s);s.then(n,n)}})}function Ti(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s],a=e,w=t,H=w;e:for(;H!==null;){switch(H.tag){case 27:if(Mr(H.type)){kt=H.stateNode,Di=!1;break e}break;case 5:kt=H.stateNode,Di=!1;break e;case 3:case 4:kt=H.stateNode.containerInfo,Di=!0;break e}H=H.return}if(kt===null)throw Error(E(160));xf(a,w,n),kt=null,Di=!1,a=n.alternate,a!==null&&(a.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ef(t,e),t=t.sibling}var zs=null;function Ef(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ti(t,e),Ri(e),s&4&&(Cr(3,e,e.return),Ql(3,e),Cr(5,e,e.return));break;case 1:Ti(t,e),Ri(e),s&512&&(Kt||i===null||on(i,i.return)),s&64&&Wn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var n=zs;if(Ti(t,e),Ri(e),s&512&&(Kt||i===null||on(i,i.return)),s&4){var a=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":a=n.getElementsByTagName("title")[0],(!a||a[fn]||a[Gt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=n.createElement(s),n.head.insertBefore(a,n.querySelector("head > title"))),ui(a,s,i),a[Gt]=e,yt(a),s=a;break e;case"link":var w=Ep("link","href",n).get(s+(i.href||""));if(w){for(var H=0;H<w.length;H++)if(a=w[H],a.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&a.getAttribute("rel")===(i.rel==null?null:i.rel)&&a.getAttribute("title")===(i.title==null?null:i.title)&&a.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(H,1);break t}}a=n.createElement(s),ui(a,s,i),n.head.appendChild(a);break;case"meta":if(w=Ep("meta","content",n).get(s+(i.content||""))){for(H=0;H<w.length;H++)if(a=w[H],a.getAttribute("content")===(i.content==null?null:""+i.content)&&a.getAttribute("name")===(i.name==null?null:i.name)&&a.getAttribute("property")===(i.property==null?null:i.property)&&a.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&a.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(H,1);break t}}a=n.createElement(s),ui(a,s,i),n.head.appendChild(a);break;default:throw Error(E(468,s))}a[Gt]=e,yt(a),s=a}e.stateNode=s}else Ap(n,e.type,e.stateNode);else e.stateNode=kp(n,s,e.memoizedProps);else a!==s?(a===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):a.count--,s===null?Ap(n,e.type,e.stateNode):kp(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&zu(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ti(t,e),Ri(e),s&512&&(Kt||i===null||on(i,i.return)),i!==null&&s&4&&zu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ti(t,e),Ri(e),s&512&&(Kt||i===null||on(i,i.return)),e.flags&32){n=e.stateNode;try{Vs(n,"")}catch(Me){ut(e,e.return,Me)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,zu(e,n,i!==null?i.memoizedProps:n)),s&1024&&(Iu=!0);break;case 6:if(Ti(t,e),Ri(e),s&4){if(e.stateNode===null)throw Error(E(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(Me){ut(e,e.return,Me)}}break;case 3:if(xc=null,n=zs,zs=Sc(t.containerInfo),Ti(t,e),zs=n,Ri(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{nl(t.containerInfo)}catch(Me){ut(e,e.return,Me)}Iu&&(Iu=!1,Af(e));break;case 4:s=zs,zs=Sc(e.stateNode.containerInfo),Ti(t,e),Ri(e),zs=s;break;case 12:Ti(t,e),Ri(e);break;case 31:Ti(t,e),Ri(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 13:Ti(t,e),Ri(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(cc=Bt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 22:n=e.memoizedState!==null;var G=i!==null&&i.memoizedState!==null,oe=Wn,ge=Kt;if(Wn=oe||n,Kt=ge||G,Ti(t,e),Kt=ge,Wn=oe,Ri(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(i===null||G||Wn||Kt||pa(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){G=i=t;try{if(a=G.stateNode,n)w=a.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{H=G.stateNode;var Se=G.memoizedProps.style,ce=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;H.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Me){ut(G,G.return,Me)}}}else if(t.tag===6){if(i===null){G=t;try{G.stateNode.nodeValue=n?"":G.memoizedProps}catch(Me){ut(G,G.return,Me)}}}else if(t.tag===18){if(i===null){G=t;try{var he=G.stateNode;n?_p(he,!0):_p(G.stateNode,!1)}catch(Me){ut(G,G.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,lc(e,i))));break;case 19:Ti(t,e),Ri(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 30:break;case 21:break;default:Ti(t,e),Ri(e)}}function Ri(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(gf(s)){i=s;break}s=s.return}if(i==null)throw Error(E(160));switch(i.tag){case 27:var n=i.stateNode,a=Uu(e);ac(e,a,n);break;case 5:var w=i.stateNode;i.flags&32&&(Vs(w,""),i.flags&=-33);var H=Uu(e);ac(e,H,w);break;case 3:case 4:var G=i.stateNode.containerInfo,oe=Uu(e);Pu(e,oe,G);break;default:throw Error(E(161))}}catch(ge){ut(e,e.return,ge)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Af(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Af(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Kn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sf(e,t.alternate,t),t=t.sibling}function pa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Cr(4,t,t.return),pa(t);break;case 1:on(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&_f(t,t.return,i),pa(t);break;case 27:lo(t.stateNode);case 26:case 5:on(t,t.return),pa(t);break;case 22:t.memoizedState===null&&pa(t);break;case 30:pa(t);break;default:pa(t)}e=e.sibling}}function Gn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,a=t,w=a.flags;switch(a.tag){case 0:case 11:case 15:Gn(n,a,i),Ql(4,a);break;case 1:if(Gn(n,a,i),s=a,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(oe){ut(s,s.return,oe)}if(s=a,n=s.updateQueue,n!==null){var H=s.stateNode;try{var G=n.shared.hiddenCallbacks;if(G!==null)for(n.shared.hiddenCallbacks=null,n=0;n<G.length;n++)sd(G[n],H)}catch(oe){ut(s,s.return,oe)}}i&&w&64&&mf(a),Zl(a,a.return);break;case 27:bf(a);case 26:case 5:Gn(n,a,i),i&&s===null&&w&4&&vf(a),Zl(a,a.return);break;case 12:Gn(n,a,i);break;case 31:Gn(n,a,i),i&&w&4&&Cf(n,a);break;case 13:Gn(n,a,i),i&&w&4&&kf(n,a);break;case 22:a.memoizedState===null&&Gn(n,a,i),Zl(a,a.return);break;case 30:break;default:Gn(n,a,i)}t=t.sibling}}function Fu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&we(i))}function qu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&we(e))}function Us(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Df(e,t,i,s),t=t.sibling}function Df(e,t,i,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Us(e,t,i,s),n&2048&&Ql(9,t);break;case 1:Us(e,t,i,s);break;case 3:Us(e,t,i,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&we(e)));break;case 12:if(n&2048){Us(e,t,i,s),e=t.stateNode;try{var a=t.memoizedProps,w=a.id,H=a.onPostCommit;typeof H=="function"&&H(w,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(G){ut(t,t.return,G)}}else Us(e,t,i,s);break;case 31:Us(e,t,i,s);break;case 13:Us(e,t,i,s);break;case 23:break;case 22:a=t.stateNode,w=t.alternate,t.memoizedState!==null?a._visibility&2?Us(e,t,i,s):Jl(e,t):a._visibility&2?Us(e,t,i,s):(a._visibility|=2,Ga(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),n&2048&&Fu(w,t);break;case 24:Us(e,t,i,s),n&2048&&qu(t.alternate,t);break;default:Us(e,t,i,s)}}function Ga(e,t,i,s,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,w=t,H=i,G=s,oe=w.flags;switch(w.tag){case 0:case 11:case 15:Ga(a,w,H,G,n),Ql(8,w);break;case 23:break;case 22:var ge=w.stateNode;w.memoizedState!==null?ge._visibility&2?Ga(a,w,H,G,n):Jl(a,w):(ge._visibility|=2,Ga(a,w,H,G,n)),n&&oe&2048&&Fu(w.alternate,w);break;case 24:Ga(a,w,H,G,n),n&&oe&2048&&qu(w.alternate,w);break;default:Ga(a,w,H,G,n)}t=t.sibling}}function Jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,n=s.flags;switch(s.tag){case 22:Jl(i,s),n&2048&&Fu(s.alternate,s);break;case 24:Jl(i,s),n&2048&&qu(s.alternate,s);break;default:Jl(i,s)}t=t.sibling}}var eo=8192;function Ya(e,t,i){if(e.subtreeFlags&eo)for(e=e.child;e!==null;)Tf(e,t,i),e=e.sibling}function Tf(e,t,i){switch(e.tag){case 26:Ya(e,t,i),e.flags&eo&&e.memoizedState!==null&&Q_(i,zs,e.memoizedState,e.memoizedProps);break;case 5:Ya(e,t,i);break;case 3:case 4:var s=zs;zs=Sc(e.stateNode.containerInfo),Ya(e,t,i),zs=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=eo,eo=16777216,Ya(e,t,i),eo=s):Ya(e,t,i));break;default:Ya(e,t,i)}}function Rf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function to(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];ni=s,jf(s,e)}Rf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mf(e),e=e.sibling}function Mf(e){switch(e.tag){case 0:case 11:case 15:to(e),e.flags&2048&&Cr(9,e,e.return);break;case 3:to(e);break;case 12:to(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oc(e)):to(e);break;default:to(e)}}function oc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];ni=s,jf(s,e)}Rf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Cr(8,t,t.return),oc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,oc(t));break;default:oc(t)}e=e.sibling}}function jf(e,t){for(;ni!==null;){var i=ni;switch(i.tag){case 0:case 11:case 15:Cr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:we(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,ni=s;else e:for(i=e;ni!==null;){s=ni;var n=s.sibling,a=s.return;if(wf(s),s===i){ni=null;break e}if(n!==null){n.return=a,ni=n;break e}ni=a}}}var d_={getCacheForType:function(e){var t=y(ve),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return y(ve).controller.signal}},f_=typeof WeakMap=="function"?WeakMap:Map,at=0,vt=null,$e=null,Ge=0,ct=0,es=null,kr=!1,Va=!1,Wu=!1,Yn=0,Lt=0,Er=0,ma=0,$u=0,ts=0,Xa=0,io=null,Mi=null,Ku=!1,cc=0,Of=0,uc=1/0,hc=null,Ar=null,Xt=0,Dr=null,Qa=null,Vn=0,Gu=0,Yu=null,Lf=null,so=0,Vu=null;function is(){return(at&2)!==0&&Ge!==0?Ge&-Ge:$.T!==null?th():Bi()}function Nf(){if(ts===0)if((Ge&536870912)===0||We){var e=Zn;Zn<<=1,(Zn&3932160)===0&&(Zn=262144),ts=e}else ts=536870912;return e=Zi.current,e!==null&&(e.flags|=32),ts}function ji(e,t,i){(e===vt&&(ct===2||ct===9)||e.cancelPendingCommit!==null)&&(Za(e,0),Tr(e,Ge,ts,!1)),as(e,i),((at&2)===0||e!==vt)&&(e===vt&&((at&2)===0&&(ma|=i),Lt===4&&Tr(e,Ge,ts,!1)),cn(e))}function Bf(e,t,i){if((at&6)!==0)throw Error(E(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ur(e,t),n=s?__(e,t):Qu(e,t,!0),a=s;do{if(n===0){Va&&!s&&Tr(e,t,0,!1);break}else{if(i=e.current.alternate,a&&!p_(i)){n=Qu(e,t,!1),a=!1;continue}if(n===2){if(a=t,e.errorRecoveryDisabledLanes&a)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){t=w;e:{var H=e;n=io;var G=H.current.memoizedState.isDehydrated;if(G&&(Za(H,w).flags|=256),w=Qu(H,w,!1),w!==2){if(Wu&&!G){H.errorRecoveryDisabledLanes|=a,ma|=a,n=4;break e}a=Mi,Mi=n,a!==null&&(Mi===null?Mi=a:Mi.push.apply(Mi,a))}n=w}if(a=!1,n!==2)continue}}if(n===1){Za(e,0),Tr(e,t,0,!0);break}e:{switch(s=e,a=n,a){case 0:case 1:throw Error(E(345));case 4:if((t&4194048)!==t)break;case 6:Tr(s,t,ts,!kr);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(E(329))}if((t&62914560)===t&&(n=cc+300-Bt(),10<n)){if(Tr(s,t,ts,!kr),hn(s,0,!0)!==0)break e;Vn=t,s.timeoutHandle=fp(Hf.bind(null,s,i,Mi,hc,Ku,t,ts,ma,Xa,kr,a,"Throttled",-0,0),n);break e}Hf(s,i,Mi,hc,Ku,t,ts,ma,Xa,kr,a,null,-0,0)}}break}while(!0);cn(e)}function Hf(e,t,i,s,n,a,w,H,G,oe,ge,Se,ce,he){if(e.timeoutHandle=-1,Se=t.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xs},Tf(t,a,Se);var Me=(a&62914560)===a?cc-Bt():(a&4194048)===a?Of-Bt():0;if(Me=Z_(Se,Me),Me!==null){Vn=a,e.cancelPendingCommit=Me($f.bind(null,e,t,a,i,s,n,w,H,G,ge,Se,null,ce,he)),Tr(e,a,w,!oe);return}}$f(e,t,a,i,s,n,w,H,G)}function p_(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var n=i[s],a=n.getSnapshot;n=n.value;try{if(!ei(a(),n))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tr(e,t,i,s){t&=~$u,t&=~ma,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var a=31-Ht(n),w=1<<a;s[a]=-1,n&=~w}i!==0&&dn(e,i,t)}function dc(){return(at&6)===0?(no(0),!1):!0}function Xu(){if($e!==null){if(ct===0)var e=$e.return;else e=$e,Ns=zn=null,du(e),Fa=null,Pl=0,e=$e;for(;e!==null;)pf(e.alternate,e),e=e.return;$e=null}}function Za(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,L_(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Vn=0,Xu(),vt=e,$e=i=Os(e.current,null),Ge=t,ct=0,es=null,kr=!1,Va=Ur(e,t),Wu=!1,Xa=ts=$u=ma=Er=Lt=0,Mi=io=null,Ku=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-Ht(s),a=1<<n;t|=e[n],s&=~a}return Yn=t,Mt(),i}function zf(e,t){Ie=null,$.H=Yl,t===Hs||t===qt?(t=Ia(),ct=3):t===Be?(t=Ia(),ct=4):ct=t===Du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,es=t,$e===null&&(Lt=1,tc(e,_i(t,e.current)))}function Uf(){var e=Zi.current;return e===null?!0:(Ge&4194048)===Ge?ds===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===ds:!1}function Pf(){var e=$.H;return $.H=Yl,e===null?Yl:e}function If(){var e=$.A;return $.A=d_,e}function fc(){Lt=4,kr||(Ge&4194048)!==Ge&&Zi.current!==null||(Va=!0),(Er&134217727)===0&&(ma&134217727)===0||vt===null||Tr(vt,Ge,ts,!1)}function Qu(e,t,i){var s=at;at|=2;var n=Pf(),a=If();(vt!==e||Ge!==t)&&(hc=null,Za(e,t)),t=!1;var w=Lt;e:do try{if(ct!==0&&$e!==null){var H=$e,G=es;switch(ct){case 8:Xu(),w=6;break e;case 3:case 2:case 9:case 6:Zi.current===null&&(t=!0);var oe=ct;if(ct=0,es=null,Ja(e,H,G,oe),i&&Va){w=0;break e}break;default:oe=ct,ct=0,es=null,Ja(e,H,G,oe)}}m_(),w=Lt;break}catch(ge){zf(e,ge)}while(!0);return t&&e.shellSuspendCounter++,Ns=zn=null,at=s,$.H=n,$.A=a,$e===null&&(vt=null,Ge=0,Mt()),w}function m_(){for(;$e!==null;)Ff($e)}function __(e,t){var i=at;at|=2;var s=Pf(),n=If();vt!==e||Ge!==t?(hc=null,uc=Bt()+500,Za(e,t)):Va=Ur(e,t);e:do try{if(ct!==0&&$e!==null){t=$e;var a=es;t:switch(ct){case 1:ct=0,es=null,Ja(e,t,a,1);break;case 2:case 9:if(Qi(a)){ct=0,es=null,qf(t);break}t=function(){ct!==2&&ct!==9||vt!==e||(ct=7),cn(e)},a.then(t,t);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Qi(a)?(ct=0,es=null,qf(t)):(ct=0,es=null,Ja(e,t,a,7));break;case 5:var w=null;switch($e.tag){case 26:w=$e.memoizedState;case 5:case 27:var H=$e;if(w?Dp(w):H.stateNode.complete){ct=0,es=null;var G=H.sibling;if(G!==null)$e=G;else{var oe=H.return;oe!==null?($e=oe,pc(oe)):$e=null}break t}}ct=0,es=null,Ja(e,t,a,5);break;case 6:ct=0,es=null,Ja(e,t,a,6);break;case 8:Xu(),Lt=6;break e;default:throw Error(E(462))}}v_();break}catch(ge){zf(e,ge)}while(!0);return Ns=zn=null,$.H=s,$.A=n,at=i,$e!==null?0:(vt=null,Ge=0,Mt(),Lt)}function v_(){for(;$e!==null&&!Qe();)Ff($e)}function Ff(e){var t=df(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?pc(e):$e=t}function qf(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=af(i,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=af(i,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:du(t);default:pf(i,t),t=$e=Ol(t,Yn),t=df(i,t,Yn)}e.memoizedProps=e.pendingProps,t===null?pc(e):$e=t}function Ja(e,t,i,s){Ns=zn=null,du(t),Fa=null,Pl=0;var n=t.return;try{if(r_(e,n,t,i,Ge)){Lt=1,tc(e,_i(i,e.current)),$e=null;return}}catch(a){if(n!==null)throw $e=n,a;Lt=1,tc(e,_i(i,e.current)),$e=null;return}t.flags&32768?(We||s===1?e=!0:Va||(Ge&536870912)!==0?e=!1:(kr=e=!0,(s===2||s===9||s===3||s===6)&&(s=Zi.current,s!==null&&s.tag===13&&(s.flags|=16384))),Wf(t,e)):pc(t)}function pc(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,kr);return}e=t.return;var i=o_(t.alternate,t,Yn);if(i!==null){$e=i;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Lt===0&&(Lt=5)}function Wf(e,t){do{var i=c_(e.alternate,e);if(i!==null){i.flags&=32767,$e=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){$e=e;return}$e=e=i}while(e!==null);Lt=6,$e=null}function $f(e,t,i,s,n,a,w,H,G){e.cancelPendingCommit=null;do mc();while(Xt!==0);if((at&6)!==0)throw Error(E(327));if(t!==null){if(t===e.current)throw Error(E(177));if(a=t.lanes|t.childLanes,a|=hr,Ni(e,i,a,w,H,G),e===vt&&($e=vt=null,Ge=0),Qa=t,Dr=e,Vn=i,Gu=a,Yu=n,Lf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,S_(di,function(){return Xf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=$.T,$.T=null,n=se.p,se.p=2,w=at,at|=4;try{u_(e,t,i)}finally{at=w,se.p=n,$.T=s}}Xt=1,Kf(),Gf(),Yf()}}function Kf(){if(Xt===1){Xt=0;var e=Dr,t=Qa,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var s=se.p;se.p=2;var n=at;at|=4;try{Ef(t,e);var a=ch,w=ja(e.containerInfo),H=a.focusedElem,G=a.selectionRange;if(w!==H&&H&&H.ownerDocument&&tn(H.ownerDocument.documentElement,H)){if(G!==null&&Rl(H)){var oe=G.start,ge=G.end;if(ge===void 0&&(ge=oe),"selectionStart"in H)H.selectionStart=oe,H.selectionEnd=Math.min(ge,H.value.length);else{var Se=H.ownerDocument||document,ce=Se&&Se.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Me=H.textContent.length,He=Math.min(G.start,Me),pt=G.end===void 0?He:Math.min(G.end,Me);!he.extend&&He>pt&&(w=pt,pt=He,He=w);var ne=En(H,He),ee=En(H,pt);if(ne&&ee&&(he.rangeCount!==1||he.anchorNode!==ne.node||he.anchorOffset!==ne.offset||he.focusNode!==ee.node||he.focusOffset!==ee.offset)){var le=Se.createRange();le.setStart(ne.node,ne.offset),he.removeAllRanges(),He>pt?(he.addRange(le),he.extend(ee.node,ee.offset)):(le.setEnd(ee.node,ee.offset),he.addRange(le))}}}}for(Se=[],he=H;he=he.parentNode;)he.nodeType===1&&Se.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Se.length;H++){var be=Se[H];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Ac=!!oh,ch=oh=null}finally{at=n,se.p=s,$.T=i}}e.current=t,Xt=2}}function Gf(){if(Xt===2){Xt=0;var e=Dr,t=Qa,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var s=se.p;se.p=2;var n=at;at|=4;try{Sf(e,t.alternate,t)}finally{at=n,se.p=s,$.T=i}}Xt=3}}function Yf(){if(Xt===4||Xt===3){Xt=0,Qt();var e=Dr,t=Qa,i=Vn,s=Lf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Xt=5:(Xt=0,Qa=Dr=null,Vf(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ar=null),_l(i),t=t.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(rs,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=$.T,n=se.p,se.p=2,$.T=null;try{for(var a=e.onRecoverableError,w=0;w<s.length;w++){var H=s[w];a(H.value,{componentStack:H.stack})}}finally{$.T=t,se.p=n}}(Vn&3)!==0&&mc(),cn(e),n=e.pendingLanes,(i&261930)!==0&&(n&42)!==0?e===Vu?so++:(so=0,Vu=e):so=0,no(0)}}function Vf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,we(t)))}function mc(){return Kf(),Gf(),Yf(),Xf()}function Xf(){if(Xt!==5)return!1;var e=Dr,t=Gu;Gu=0;var i=_l(Vn),s=$.T,n=se.p;try{se.p=32>i?32:i,$.T=null,i=Yu,Yu=null;var a=Dr,w=Vn;if(Xt=0,Qa=Dr=null,Vn=0,(at&6)!==0)throw Error(E(331));var H=at;if(at|=4,Mf(a.current),Df(a,a.current,w,i),at=H,no(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(rs,a)}catch{}return!0}finally{se.p=n,$.T=s,Vf(e,t)}}function Qf(e,t,i){t=_i(i,t),t=Au(e.stateNode,t,2),e=Sr(e,t,2),e!==null&&(as(e,2),cn(e))}function ut(e,t,i){if(e.tag===3)Qf(e,e,i);else for(;t!==null;){if(t.tag===3){Qf(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ar===null||!Ar.has(s))){e=_i(i,e),i=Qd(2),s=Sr(t,i,2),s!==null&&(Zd(i,s,t,e),as(s,2),cn(s));break}}t=t.return}}function Zu(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new f_;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(i)||(Wu=!0,n.add(i),e=g_.bind(null,e,t,i),t.then(e,e))}function g_(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,vt===e&&(Ge&i)===i&&(Lt===4||Lt===3&&(Ge&62914560)===Ge&&300>Bt()-cc?(at&2)===0&&Za(e,0):$u|=i,Xa===Ge&&(Xa=0)),cn(e)}function Zf(e,t){t===0&&(t=Pr()),e=Ln(e,t),e!==null&&(as(e,t),cn(e))}function b_(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Zf(e,i)}function y_(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(E(314))}s!==null&&s.delete(t),Zf(e,i)}function S_(e,t){return gt(e,t)}var _c=null,el=null,Ju=!1,vc=!1,eh=!1,Rr=0;function cn(e){e!==el&&e.next===null&&(el===null?_c=el=e:el=el.next=e),vc=!0,Ju||(Ju=!0,x_())}function no(e,t){if(!eh&&vc){eh=!0;do for(var i=!1,s=_c;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var a=0;else{var w=s.suspendedLanes,H=s.pingedLanes;a=(1<<31-Ht(42|e)+1)-1,a&=n&~(w&~H),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(i=!0,ip(s,a))}else a=Ge,a=hn(s,s===vt?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(a&3)===0||Ur(s,a)||(i=!0,ip(s,a));s=s.next}while(i);eh=!1}}function w_(){Jf()}function Jf(){vc=Ju=!1;var e=0;Rr!==0&&O_()&&(e=Rr);for(var t=Bt(),i=null,s=_c;s!==null;){var n=s.next,a=ep(s,t);a===0?(s.next=null,i===null?_c=n:i.next=n,n===null&&(el=i)):(i=s,(e!==0||(a&3)!==0)&&(vc=!0)),s=n}Xt!==0&&Xt!==5||no(e),Rr!==0&&(Rr=0)}function ep(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var w=31-Ht(a),H=1<<w,G=n[w];G===-1?((H&i)===0||(H&s)!==0)&&(n[w]=ko(H,t)):G<=t&&(e.expiredLanes|=H),a&=~H}if(t=vt,i=Ge,i=hn(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(ct===2||ct===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&yi(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ur(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&yi(s),_l(i)){case 2:case 8:i=gs;break;case 32:i=di;break;case 268435456:i=Li;break;default:i=di}return s=tp.bind(null,e),i=gt(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&yi(s),e.callbackPriority=2,e.callbackNode=null,2}function tp(e,t){if(Xt!==0&&Xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(mc()&&e.callbackNode!==i)return null;var s=Ge;return s=hn(e,e===vt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Bf(e,s,t),ep(e,Bt()),e.callbackNode!=null&&e.callbackNode===i?tp.bind(null,e):null)}function ip(e,t){if(mc())return null;Bf(e,t,!0)}function x_(){N_(function(){(at&6)!==0?gt(ai,w_):Jf()})}function th(){if(Rr===0){var e=Oe;e===0&&(e=bt,bt<<=1,(bt&261888)===0&&(bt=256)),Rr=e}return Rr}function sp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vr(""+e)}function np(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function C_(e,t,i,s,n){if(t==="submit"&&i&&i.stateNode===n){var a=sp((n[zt]||null).action),w=s.submitter;w&&(t=(t=w[zt]||null)?sp(t.formAction):w.getAttribute("formAction"),t!==null&&(a=t,w=null));var H=new Qr("action","action",null,s,n);e.push({event:H,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Rr!==0){var G=w?np(n,w):new FormData(n);Su(i,{pending:!0,data:G,method:n.method,action:a},null,G)}}else typeof a=="function"&&(H.preventDefault(),G=w?np(n,w):new FormData(n),Su(i,{pending:!0,data:G,method:n.method,action:a},a,G))},currentTarget:n}]})}}for(var ih=0;ih<jl.length;ih++){var sh=jl[ih],k_=sh.toLowerCase(),E_=sh[0].toUpperCase()+sh.slice(1);Wi(k_,"on"+E_)}Wi(Uo,"onAnimationEnd"),Wi(aa,"onAnimationIteration"),Wi(la,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(Dn,"onTransitionRun"),Wi(Tn,"onTransitionStart"),Wi(Po,"onTransitionCancel"),Wi(Rn,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ro));function rp(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var w=s.length-1;0<=w;w--){var H=s[w],G=H.instance,oe=H.currentTarget;if(H=H.listener,G!==a&&n.isPropagationStopped())break e;a=H,n.currentTarget=oe;try{a(n)}catch(ge){jn(ge)}n.currentTarget=null,a=G}else for(w=0;w<s.length;w++){if(H=s[w],G=H.instance,oe=H.currentTarget,H=H.listener,G!==a&&n.isPropagationStopped())break e;a=H,n.currentTarget=oe;try{a(n)}catch(ge){jn(ge)}n.currentTarget=null,a=G}}}}function Ke(e,t){var i=t[Wr];i===void 0&&(i=t[Wr]=new Set);var s=e+"__bubble";i.has(s)||(ap(t,e,2,!1),i.add(s))}function nh(e,t,i){var s=0;t&&(s|=4),ap(i,e,s,t)}var gc="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[gc]){e[gc]=!0,va.forEach(function(i){i!=="selectionchange"&&(A_.has(i)||nh(i,!1,e),nh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gc]||(t[gc]=!0,nh("selectionchange",!1,t))}}function ap(e,t,i,s){switch(Np(t)){case 2:var n=tv;break;case 8:n=iv;break;default:n=yh}i=n.bind(null,t,i,e),n=void 0,!ks||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function ah(e,t,i,s,n){var a=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var w=s.tag;if(w===3||w===4){var H=s.stateNode.containerInfo;if(H===n)break;if(w===4)for(w=s.return;w!==null;){var G=w.tag;if((G===3||G===4)&&w.stateNode.containerInfo===n)return;w=w.return}for(;H!==null;){if(w=ys(H),w===null)return;if(G=w.tag,G===5||G===6||G===26||G===27){s=a=w;continue e}H=H.parentNode}}s=s.return}ir(function(){var oe=a,ge=er(i),Se=[];e:{var ce=Mn.get(e);if(ce!==void 0){var he=Qr,Me=e;switch(e){case"keypress":if(As(i)===0)break e;case"keydown":case"keyup":he=ka;break;case"focusin":Me="focus",he=wn;break;case"focusout":Me="blur",he=wn;break;case"beforeblur":case"afterblur":he=wn;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=ea;break;case Uo:case aa:case la:he=Jr;break;case Rn:he=en;break;case"scroll":case"scrollend":he=bn;break;case"wheel":he=eu;break;case"copy":case"cut":case"paste":he=Zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=kl;break;case"toggle":case"beforetoggle":he=Oo}var He=(t&4)!==0,pt=!He&&(e==="scroll"||e==="scrollend"),ne=He?ce!==null?ce+"Capture":null:ce;He=[];for(var ee=oe,le;ee!==null;){var be=ee;if(le=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||le===null||ne===null||(be=Cs(ee,ne),be!=null&&He.push(ao(ee,be,le))),pt)break;ee=ee.return}0<He.length&&(ce=new he(ce,Me,null,i,ge),Se.push({event:ce,listeners:He}))}}if((t&7)===0){e:{if(ce=e==="mouseover"||e==="pointerover",he=e==="mouseout"||e==="pointerout",ce&&i!==mn&&(Me=i.relatedTarget||i.fromElement)&&(ys(Me)||Me[Ws]))break e;if((he||ce)&&(ce=ge.window===ge?ge:(ce=ge.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Me=i.relatedTarget||i.toElement,he=oe,Me=Me?ys(Me):null,Me!==null&&(pt=te(Me),He=Me.tag,Me!==pt||He!==5&&He!==27&&He!==6)&&(Me=null)):(he=null,Me=oe),he!==Me)){if(He=wa,be="onMouseLeave",ne="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(He=kl,be="onPointerLeave",ne="onPointerEnter",ee="pointer"),pt=he==null?ce:ls(he),le=Me==null?ce:ls(Me),ce=new He(be,ee+"leave",he,i,ge),ce.target=pt,ce.relatedTarget=le,be=null,ys(ge)===oe&&(He=new He(ne,ee+"enter",Me,i,ge),He.target=le,He.relatedTarget=pt,be=He),pt=be,he&&Me)t:{for(He=D_,ne=he,ee=Me,le=0,be=ne;be;be=He(be))le++;be=0;for(var Ne=ee;Ne;Ne=He(Ne))be++;for(;0<le-be;)ne=He(ne),le--;for(;0<be-le;)ee=He(ee),be--;for(;le--;){if(ne===ee||ee!==null&&ne===ee.alternate){He=ne;break t}ne=He(ne),ee=He(ee)}He=null}else He=null;he!==null&&lp(Se,ce,he,He,!1),Me!==null&&pt!==null&&lp(Se,pt,Me,He,!0)}}e:{if(ce=oe?ls(oe):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var tt=Dl;else if(Cn(ce))if(pe)tt=or;else{tt=Ra;var je=Tl}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&Xs(oe.elementType)&&(tt=Dl):tt=Te;if(tt&&(tt=tt(e,oe))){kn(Se,tt,i,ge);break e}je&&je(e,ce,oe),e==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&Yr(ce,"number",ce.value)}switch(je=oe?ls(oe):window,e){case"focusin":(Cn(je)||je.contentEditable==="true")&&(cr=je,ur=oe,mi=null);break;case"focusout":mi=ur=cr=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,zo(Se,i,ge);break;case"selectionchange":if(Oa)break;case"keydown":case"keyup":zo(Se,i,ge)}var Fe;if(El)e:{switch(e){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Fi?Rs(e,i)&&(Ye="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ye="onCompositionStart");Ye&&(Al&&i.locale!=="ko"&&(Fi||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Fi&&(Fe=xl()):(Es=ge,sr="value"in Es?Es.value:Es.textContent,Fi=!0)),je=bc(oe,Ye),0<je.length&&(Ye=new Ii(Ye,e,null,i,ge),Se.push({event:Ye,listeners:je}),Fe?Ye.data=Fe:(Fe=Ms(i),Fe!==null&&(Ye.data=Fe)))),(Fe=Ea?Da(e,i):Lo(e,i))&&(Ye=bc(oe,"onBeforeInput"),0<Ye.length&&(je=new Ii("onBeforeInput","beforeinput",null,i,ge),Se.push({event:je,listeners:Ye}),je.data=Fe)),C_(Se,e,oe,i,ge)}rp(Se,t)})}function ao(e,t,i){return{instance:e,listener:t,currentTarget:i}}function bc(e,t){for(var i=t+"Capture",s=[];e!==null;){var n=e,a=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||a===null||(n=Cs(e,i),n!=null&&s.unshift(ao(e,n,a)),n=Cs(e,t),n!=null&&s.push(ao(e,n,a))),e.tag===3)return s;e=e.return}return[]}function D_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lp(e,t,i,s,n){for(var a=t._reactName,w=[];i!==null&&i!==s;){var H=i,G=H.alternate,oe=H.stateNode;if(H=H.tag,G!==null&&G===s)break;H!==5&&H!==26&&H!==27||oe===null||(G=oe,n?(oe=Cs(i,a),oe!=null&&w.unshift(ao(i,oe,G))):n||(oe=Cs(i,a),oe!=null&&w.push(ao(i,oe,G)))),i=i.return}w.length!==0&&e.push({event:t,listeners:w})}var T_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function op(e){return(typeof e=="string"?e:""+e).replace(T_,`
`).replace(R_,"")}function cp(e,t){return t=op(t),op(e)===t}function ft(e,t,i,s,n,a){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Vs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Vs(e,""+s);break;case"className":$r(e,"class",s);break;case"tabIndex":$r(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(e,i,s);break;case"style":Sl(e,s,a);break;case"data":if(t!=="object"){$r(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Vr(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(i==="formAction"?(t!=="input"&&ft(e,t,"name",n.name,n,null),ft(e,t,"formEncType",n.formEncType,n,null),ft(e,t,"formMethod",n.formMethod,n,null),ft(e,t,"formTarget",n.formTarget,n,null)):(ft(e,t,"encType",n.encType,n,null),ft(e,t,"method",n.method,n,null),ft(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Vr(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=xs);break;case"onScroll":s!=null&&Ke("scroll",e);break;case"onScrollEnd":s!=null&&Ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(E(61));if(i=s.__html,i!=null){if(n.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Vr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Ke("beforetoggle",e),Ke("toggle",e),Ks(e,"popover",s);break;case"xlinkActuate":Ui(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ui(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ui(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ui(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ui(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ui(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ks(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=wl.get(i)||i,Ks(e,i,s))}}function lh(e,t,i,s,n,a){switch(i){case"style":Sl(e,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(E(61));if(i=s.__html,i!=null){if(n.children!=null)throw Error(E(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Vs(e,s):(typeof s=="number"||typeof s=="bigint")&&Vs(e,""+s);break;case"onScroll":s!=null&&Ke("scroll",e);break;case"onScrollEnd":s!=null&&Ke("scrollend",e);break;case"onClick":s!=null&&(e.onclick=xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),a=e[zt]||null,a=a!=null?a[i]:null,typeof a=="function"&&e.removeEventListener(t,a,n),typeof s=="function")){typeof a!="function"&&a!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,n);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Ks(e,i,s)}}}function ui(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",e),Ke("load",e);var s=!1,n=!1,a;for(a in i)if(i.hasOwnProperty(a)){var w=i[a];if(w!=null)switch(a){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ft(e,t,a,w,i,null)}}n&&ft(e,t,"srcSet",i.srcSet,i,null),s&&ft(e,t,"src",i.src,i,null);return;case"input":Ke("invalid",e);var H=a=w=n=null,G=null,oe=null;for(s in i)if(i.hasOwnProperty(s)){var ge=i[s];if(ge!=null)switch(s){case"name":n=ge;break;case"type":w=ge;break;case"checked":G=ge;break;case"defaultChecked":oe=ge;break;case"value":a=ge;break;case"defaultValue":H=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(E(137,t));break;default:ft(e,t,s,ge,i,null)}}Jn(e,a,H,G,oe,w,n,!1);return;case"select":Ke("invalid",e),s=w=a=null;for(n in i)if(i.hasOwnProperty(n)&&(H=i[n],H!=null))switch(n){case"value":a=H;break;case"defaultValue":w=H;break;case"multiple":s=H;default:ft(e,t,n,H,i,null)}t=a,i=w,e.multiple=!!s,t!=null?Ys(e,!!s,t,!1):i!=null&&Ys(e,!!s,i,!0);return;case"textarea":Ke("invalid",e),a=n=s=null;for(w in i)if(i.hasOwnProperty(w)&&(H=i[w],H!=null))switch(w){case"value":s=H;break;case"defaultValue":n=H;break;case"children":a=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(E(91));break;default:ft(e,t,w,H,i,null)}yl(e,s,n,a);return;case"option":for(G in i)i.hasOwnProperty(G)&&(s=i[G],s!=null)&&(G==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":ft(e,t,G,s,i,null));return;case"dialog":Ke("beforetoggle",e),Ke("toggle",e),Ke("cancel",e),Ke("close",e);break;case"iframe":case"object":Ke("load",e);break;case"video":case"audio":for(s=0;s<ro.length;s++)Ke(ro[s],e);break;case"image":Ke("error",e),Ke("load",e);break;case"details":Ke("toggle",e);break;case"embed":case"source":case"link":Ke("error",e),Ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in i)if(i.hasOwnProperty(oe)&&(s=i[oe],s!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:ft(e,t,oe,s,i,null)}return;default:if(Xs(t)){for(ge in i)i.hasOwnProperty(ge)&&(s=i[ge],s!==void 0&&lh(e,t,ge,s,i,void 0));return}}for(H in i)i.hasOwnProperty(H)&&(s=i[H],s!=null&&ft(e,t,H,s,i,null))}function M_(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,a=null,w=null,H=null,G=null,oe=null,ge=null;for(he in i){var Se=i[he];if(i.hasOwnProperty(he)&&Se!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":G=Se;default:s.hasOwnProperty(he)||ft(e,t,he,null,s,Se)}}for(var ce in s){var he=s[ce];if(Se=i[ce],s.hasOwnProperty(ce)&&(he!=null||Se!=null))switch(ce){case"type":a=he;break;case"name":n=he;break;case"checked":oe=he;break;case"defaultChecked":ge=he;break;case"value":w=he;break;case"defaultValue":H=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(E(137,t));break;default:he!==Se&&ft(e,t,ce,he,s,Se)}}ba(e,w,H,G,oe,ge,a,n);return;case"select":he=w=H=ce=null;for(a in i)if(G=i[a],i.hasOwnProperty(a)&&G!=null)switch(a){case"value":break;case"multiple":he=G;default:s.hasOwnProperty(a)||ft(e,t,a,null,s,G)}for(n in s)if(a=s[n],G=i[n],s.hasOwnProperty(n)&&(a!=null||G!=null))switch(n){case"value":ce=a;break;case"defaultValue":H=a;break;case"multiple":w=a;default:a!==G&&ft(e,t,n,a,s,G)}t=H,i=w,s=he,ce!=null?Ys(e,!!i,ce,!1):!!s!=!!i&&(t!=null?Ys(e,!!i,t,!0):Ys(e,!!i,i?[]:"",!1));return;case"textarea":he=ce=null;for(H in i)if(n=i[H],i.hasOwnProperty(H)&&n!=null&&!s.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:ft(e,t,H,null,s,n)}for(w in s)if(n=s[w],a=i[w],s.hasOwnProperty(w)&&(n!=null||a!=null))switch(w){case"value":ce=n;break;case"defaultValue":he=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(E(91));break;default:n!==a&&ft(e,t,w,n,s,a)}bl(e,ce,he);return;case"option":for(var Me in i)ce=i[Me],i.hasOwnProperty(Me)&&ce!=null&&!s.hasOwnProperty(Me)&&(Me==="selected"?e.selected=!1:ft(e,t,Me,null,s,ce));for(G in s)ce=s[G],he=i[G],s.hasOwnProperty(G)&&ce!==he&&(ce!=null||he!=null)&&(G==="selected"?e.selected=ce&&typeof ce!="function"&&typeof ce!="symbol":ft(e,t,G,ce,s,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in i)ce=i[He],i.hasOwnProperty(He)&&ce!=null&&!s.hasOwnProperty(He)&&ft(e,t,He,null,s,ce);for(oe in s)if(ce=s[oe],he=i[oe],s.hasOwnProperty(oe)&&ce!==he&&(ce!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(E(137,t));break;default:ft(e,t,oe,ce,s,he)}return;default:if(Xs(t)){for(var pt in i)ce=i[pt],i.hasOwnProperty(pt)&&ce!==void 0&&!s.hasOwnProperty(pt)&&lh(e,t,pt,void 0,s,ce);for(ge in s)ce=s[ge],he=i[ge],!s.hasOwnProperty(ge)||ce===he||ce===void 0&&he===void 0||lh(e,t,ge,ce,s,he);return}}for(var ne in i)ce=i[ne],i.hasOwnProperty(ne)&&ce!=null&&!s.hasOwnProperty(ne)&&ft(e,t,ne,null,s,ce);for(Se in s)ce=s[Se],he=i[Se],!s.hasOwnProperty(Se)||ce===he||ce==null&&he==null||ft(e,t,Se,ce,s,he)}function up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var n=i[s],a=n.transferSize,w=n.initiatorType,H=n.duration;if(a&&H&&up(w)){for(w=0,H=n.responseEnd,s+=1;s<i.length;s++){var G=i[s],oe=G.startTime;if(oe>H)break;var ge=G.transferSize,Se=G.initiatorType;ge&&up(Se)&&(G=G.responseEnd,w+=ge*(G<H?1:(H-oe)/(G-oe)))}if(--s,t+=8*(a+w)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var oh=null,ch=null;function yc(e){return e.nodeType===9?e:e.ownerDocument}function hp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function uh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hh=null;function O_(){var e=window.event;return e&&e.type==="popstate"?e===hh?!1:(hh=e,!0):(hh=null,!1)}var fp=typeof setTimeout=="function"?setTimeout:void 0,L_=typeof clearTimeout=="function"?clearTimeout:void 0,pp=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof pp<"u"?function(e){return pp.resolve(null).then(e).catch(B_)}:fp;function B_(e){setTimeout(function(){throw e})}function Mr(e){return e==="head"}function mp(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(n),nl(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")lo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,lo(i);for(var a=i.firstChild;a;){var w=a.nextSibling,H=a.nodeName;a[fn]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&a.rel.toLowerCase()==="stylesheet"||i.removeChild(a),a=w}}else i==="body"&&lo(e.ownerDocument.body);i=n}while(i);nl(t)}function _p(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function dh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":dh(i),mt(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function H_(e,t,i,s){for(;e.nodeType===1;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[fn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=fs(e.nextSibling),e===null)break}return null}function z_(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=fs(e.nextSibling),e===null))return null;return e}function vp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=fs(e.nextSibling),e===null))return null;return e}function fh(e){return e.data==="$?"||e.data==="$~"}function ph(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function U_(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function fs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var mh=null;function gp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return fs(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function bp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function yp(e,t,i){switch(t=yc(i),e){case"html":if(e=t.documentElement,!e)throw Error(E(452));return e;case"head":if(e=t.head,!e)throw Error(E(453));return e;case"body":if(e=t.body,!e)throw Error(E(454));return e;default:throw Error(E(451))}}function lo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mt(e)}var ps=new Map,Sp=new Set;function Sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xn=se.d;se.d={f:P_,r:I_,D:F_,C:q_,L:W_,m:$_,X:G_,S:K_,M:Y_};function P_(){var e=Xn.f(),t=dc();return e||t}function I_(e){var t=Hi(e);t!==null&&t.tag===5&&t.type==="form"?Hd(t):Xn.r(e)}var tl=typeof document>"u"?null:document;function wp(e,t,i){var s=tl;if(s&&typeof t=="string"&&t){var n=wi(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof i=="string"&&(n+='[crossorigin="'+i+'"]'),Sp.has(n)||(Sp.add(n),e={rel:e,crossOrigin:i,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),ui(t,"link",e),yt(t),s.head.appendChild(t)))}}function F_(e){Xn.D(e),wp("dns-prefetch",e,null)}function q_(e,t){Xn.C(e,t),wp("preconnect",e,t)}function W_(e,t,i){Xn.L(e,t,i);var s=tl;if(s&&e&&t){var n='link[rel="preload"][as="'+wi(t)+'"]';t==="image"&&i&&i.imageSrcSet?(n+='[imagesrcset="'+wi(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(n+='[imagesizes="'+wi(i.imageSizes)+'"]')):n+='[href="'+wi(e)+'"]';var a=n;switch(t){case"style":a=il(e);break;case"script":a=sl(e)}ps.has(a)||(e=v({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ps.set(a,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(oo(a))||t==="script"&&s.querySelector(co(a))||(t=s.createElement("link"),ui(t,"link",e),yt(t),s.head.appendChild(t)))}}function $_(e,t){Xn.m(e,t);var i=tl;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+wi(s)+'"][href="'+wi(e)+'"]',a=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=sl(e)}if(!ps.has(a)&&(e=v({rel:"modulepreload",href:e},t),ps.set(a,e),i.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(co(a)))return}s=i.createElement("link"),ui(s,"link",e),yt(s),i.head.appendChild(s)}}}function K_(e,t,i){Xn.S(e,t,i);var s=tl;if(s&&e){var n=zi(s).hoistableStyles,a=il(e);t=t||"default";var w=n.get(a);if(!w){var H={loading:0,preload:null};if(w=s.querySelector(oo(a)))H.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ps.get(a))&&_h(e,i);var G=w=s.createElement("link");yt(G),ui(G,"link",e),G._p=new Promise(function(oe,ge){G.onload=oe,G.onerror=ge}),G.addEventListener("load",function(){H.loading|=1}),G.addEventListener("error",function(){H.loading|=2}),H.loading|=4,wc(w,t,s)}w={type:"stylesheet",instance:w,count:1,state:H},n.set(a,w)}}}function G_(e,t){Xn.X(e,t);var i=tl;if(i&&e){var s=zi(i).hoistableScripts,n=sl(e),a=s.get(n);a||(a=i.querySelector(co(n)),a||(e=v({src:e,async:!0},t),(t=ps.get(n))&&vh(e,t),a=i.createElement("script"),yt(a),ui(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(n,a))}}function Y_(e,t){Xn.M(e,t);var i=tl;if(i&&e){var s=zi(i).hoistableScripts,n=sl(e),a=s.get(n);a||(a=i.querySelector(co(n)),a||(e=v({src:e,async:!0,type:"module"},t),(t=ps.get(n))&&vh(e,t),a=i.createElement("script"),yt(a),ui(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(n,a))}}function xp(e,t,i,s){var n=(n=Ae.current)?Sc(n):null;if(!n)throw Error(E(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=il(i.href),i=zi(n).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=il(i.href);var a=zi(n).hoistableStyles,w=a.get(e);if(w||(n=n.ownerDocument||n,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,w),(a=n.querySelector(oo(e)))&&!a._p&&(w.instance=a,w.state.loading=5),ps.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ps.set(e,i),a||V_(n,e,i,w.state))),t&&s===null)throw Error(E(528,""));return w}if(t&&s!==null)throw Error(E(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=sl(i),i=zi(n).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(E(444,e))}}function il(e){return'href="'+wi(e)+'"'}function oo(e){return'link[rel="stylesheet"]['+e+"]"}function Cp(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function V_(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ui(t,"link",i),yt(t),e.head.appendChild(t))}function sl(e){return'[src="'+wi(e)+'"]'}function co(e){return"script[async]"+e}function kp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+wi(i.href)+'"]');if(s)return t.instance=s,yt(s),s;var n=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),yt(s),ui(s,"style",n),wc(s,i.precedence,e),t.instance=s;case"stylesheet":n=il(i.href);var a=e.querySelector(oo(n));if(a)return t.state.loading|=4,t.instance=a,yt(a),a;s=Cp(i),(n=ps.get(n))&&_h(s,n),a=(e.ownerDocument||e).createElement("link"),yt(a);var w=a;return w._p=new Promise(function(H,G){w.onload=H,w.onerror=G}),ui(a,"link",s),t.state.loading|=4,wc(a,i.precedence,e),t.instance=a;case"script":return a=sl(i.src),(n=e.querySelector(co(a)))?(t.instance=n,yt(n),n):(s=i,(n=ps.get(a))&&(s=v({},i),vh(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),yt(n),ui(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(E(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,wc(s,i.precedence,e));return t.instance}function wc(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,a=n,w=0;w<s.length;w++){var H=s[w];if(H.dataset.precedence===t)a=H;else if(a!==n)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function _h(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function vh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xc=null;function Ep(e,t,i){if(xc===null){var s=new Map,n=xc=new Map;n.set(i,s)}else n=xc,s=n.get(i),s||(s=new Map,n.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var a=i[n];if(!(a[fn]||a[Gt]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var w=a.getAttribute(t)||"";w=e+w;var H=s.get(w);H?H.push(a):s.set(w,[a])}}return s}function Ap(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function X_(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Dp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Q_(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var n=il(s.href),a=t.querySelector(oo(n));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Cc.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=a,yt(a);return}a=t.ownerDocument||t,s=Cp(s),(n=ps.get(n))&&_h(s,n),a=a.createElement("link"),yt(a);var w=a;w._p=new Promise(function(H,G){w.onload=H,w.onerror=G}),ui(a,"link",s),i.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Cc.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var gh=0;function Z_(e,t){return e.stylesheets&&e.count===0&&Ec(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&Ec(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&gh===0&&(gh=62500*j_());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ec(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>gh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var kc=null;function Ec(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,kc=new Map,t.forEach(J_,e),kc=null,Cc.call(e))}function J_(e,t){if(!(t.state.loading&4)){var i=kc.get(e);if(i)var s=i.get(null);else{i=new Map,kc.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<n.length;a++){var w=n[a];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),s=w)}s&&i.set(null,s)}n=t.instance,w=n.getAttribute("data-precedence"),a=i.get(w)||s,a===s&&i.set(null,n),i.set(w,n),this.count++,s=Cc.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),a?a.parentNode.insertBefore(n,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var uo={$$typeof:c,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function ev(e,t,i,s,n,a,w,H,G){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=a,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function Tp(e,t,i,s,n,a,w,H,G,oe,ge,Se){return e=new ev(e,t,i,w,G,oe,ge,Se,H),t=1,a===!0&&(t|=24),a=Xe(3,null,null,t),e.current=a,a.stateNode=e,t=De(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:s,isDehydrated:i,cache:t},tu(a),e}function Rp(e){return e?(e=et,e):et}function Mp(e,t,i,s,n,a){n=Rp(n),s.context===null?s.context=n:s.pendingContext=n,s=yr(t),s.payload={element:i},a=a===void 0?null:a,a!==null&&(s.callback=a),i=Sr(e,s,t),i!==null&&(ji(i,e,t),Fl(i,e,t))}function jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function bh(e,t){jp(e,t),(e=e.alternate)&&jp(e,t)}function Op(e){if(e.tag===13||e.tag===31){var t=Ln(e,67108864);t!==null&&ji(t,e,67108864),bh(e,67108864)}}function Lp(e){if(e.tag===13||e.tag===31){var t=is();t=ml(t);var i=Ln(e,t);i!==null&&ji(i,e,t),bh(e,t)}}var Ac=!0;function tv(e,t,i,s){var n=$.T;$.T=null;var a=se.p;try{se.p=2,yh(e,t,i,s)}finally{se.p=a,$.T=n}}function iv(e,t,i,s){var n=$.T;$.T=null;var a=se.p;try{se.p=8,yh(e,t,i,s)}finally{se.p=a,$.T=n}}function yh(e,t,i,s){if(Ac){var n=Sh(s);if(n===null)ah(e,t,s,Dc,i),Bp(e,s);else if(nv(n,e,t,i,s))s.stopPropagation();else if(Bp(e,s),t&4&&-1<sv.indexOf(e)){for(;n!==null;){var a=Hi(n);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var w=Fs(a.pendingLanes);if(w!==0){var H=a;for(H.pendingLanes|=2,H.entangledLanes|=2;w;){var G=1<<31-Ht(w);H.entanglements[1]|=G,w&=~G}cn(a),(at&6)===0&&(uc=Bt()+500,no(0))}}break;case 31:case 13:H=Ln(a,2),H!==null&&ji(H,a,2),dc(),bh(a,2)}if(a=Sh(s),a===null&&ah(e,t,s,Dc,i),a===n)break;n=a}n!==null&&s.stopPropagation()}else ah(e,t,s,null,i)}}function Sh(e){return e=er(e),wh(e)}var Dc=null;function wh(e){if(Dc=null,e=ys(e),e!==null){var t=te(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=q(t),e!==null)return e;e=null}else if(i===31){if(e=d(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dc=e,null}function Np(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ri()){case ai:return 2;case gs:return 8;case di:case Qn:return 32;case Li:return 268435456;default:return 32}default:return 32}}var xh=!1,jr=null,Or=null,Lr=null,ho=new Map,fo=new Map,Nr=[],sv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bp(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(t.pointerId)}}function po(e,t,i,s,n,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},t!==null&&(t=Hi(t),t!==null&&Op(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function nv(e,t,i,s,n){switch(t){case"focusin":return jr=po(jr,e,t,i,s,n),!0;case"dragenter":return Or=po(Or,e,t,i,s,n),!0;case"mouseover":return Lr=po(Lr,e,t,i,s,n),!0;case"pointerover":var a=n.pointerId;return ho.set(a,po(ho.get(a)||null,e,t,i,s,n)),!0;case"gotpointercapture":return a=n.pointerId,fo.set(a,po(fo.get(a)||null,e,t,i,s,n)),!0}return!1}function Hp(e){var t=ys(e.target);if(t!==null){var i=te(t);if(i!==null){if(t=i.tag,t===13){if(t=q(i),t!==null){e.blockedOn=t,qr(e.priority,function(){Lp(i)});return}}else if(t===31){if(t=d(i),t!==null){e.blockedOn=t,qr(e.priority,function(){Lp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Sh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);mn=s,i.target.dispatchEvent(s),mn=null}else return t=Hi(i),t!==null&&Op(t),e.blockedOn=i,!1;t.shift()}return!0}function zp(e,t,i){Tc(e)&&i.delete(t)}function rv(){xh=!1,jr!==null&&Tc(jr)&&(jr=null),Or!==null&&Tc(Or)&&(Or=null),Lr!==null&&Tc(Lr)&&(Lr=null),ho.forEach(zp),fo.forEach(zp)}function Rc(e,t){e.blockedOn===t&&(e.blockedOn=null,xh||(xh=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,rv)))}var Mc=null;function Up(e){Mc!==e&&(Mc=e,p.unstable_scheduleCallback(p.unstable_NormalPriority,function(){Mc===e&&(Mc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(wh(s||i)===null)continue;break}var a=Hi(i);a!==null&&(e.splice(t,3),t-=3,Su(a,{pending:!0,data:n,method:i.method,action:s},s,n))}}))}function nl(e){function t(G){return Rc(G,e)}jr!==null&&Rc(jr,e),Or!==null&&Rc(Or,e),Lr!==null&&Rc(Lr,e),ho.forEach(t),fo.forEach(t);for(var i=0;i<Nr.length;i++){var s=Nr[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Nr.length&&(i=Nr[0],i.blockedOn===null);)Hp(i),i.blockedOn===null&&Nr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var n=i[s],a=i[s+1],w=n[zt]||null;if(typeof a=="function")w||Up(i);else if(w){var H=null;if(a&&a.hasAttribute("formAction")){if(n=a,w=a[zt]||null)H=w.formAction;else if(wh(n)!==null)continue}else H=w.action;typeof H=="function"?i[s+1]=H:(i.splice(s,3),s-=3),Up(i)}}}function Pp(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(w){return n=w})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Ch(e){this._internalRoot=e}jc.prototype.render=Ch.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));var i=t.current,s=is();Mp(i,s,e,t,null,null)},jc.prototype.unmount=Ch.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mp(e.current,2,null,e,null,null),dc(),t[Ws]=null}};function jc(e){this._internalRoot=e}jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bi();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Nr.length&&t!==0&&t<Nr[i].priority;i++);Nr.splice(i,0,e),i===0&&Hp(e)}};var Ip=f.version;if(Ip!=="19.2.3")throw Error(E(527,Ip,"19.2.3"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=_(t),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var av={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{rs=Oc.inject(av),Zt=Oc}catch{}}return _o.createRoot=function(e,t){if(!Y(e))throw Error(E(299));var i=!1,s="",n=Gd,a=Yd,w=Vd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(w=t.onRecoverableError)),t=Tp(e,1,!1,null,null,i,s,null,n,a,w,Pp),e[Ws]=t.current,rh(e),new Ch(t)},_o.hydrateRoot=function(e,t,i){if(!Y(e))throw Error(E(299));var s=!1,n="",a=Gd,w=Yd,H=Vd,G=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onUncaughtError!==void 0&&(a=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(H=i.onRecoverableError),i.formState!==void 0&&(G=i.formState)),t=Tp(e,1,!0,t,i??null,s,n,G,a,w,H,Pp),t.context=Rp(null),i=t.current,s=is(),s=ml(s),n=yr(s),n.callback=null,Sr(i,n,s),i=s,t.current.lanes=i,as(t,i),cn(t),e[Ws]=t.current,rh(e),new jc(t)},_o.version="19.2.3",_o}var Qp;function _v(){if(Qp)return Ah.exports;Qp=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(f){console.error(f)}}return p(),Ah.exports=mv(),Ah.exports}var vv=_v();const gv=Dm(vv);function Zp(p,f){(f==null||f>p.length)&&(f=p.length);for(var D=0,E=Array(f);D<f;D++)E[D]=p[D];return E}function bv(p){if(Array.isArray(p))return p}function yv(p,f,D){return(f=Av(f))in p?Object.defineProperty(p,f,{value:D,enumerable:!0,configurable:!0,writable:!0}):p[f]=D,p}function Sv(p,f){var D=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(D!=null){var E,Y,te,q,d=[],m=!0,_=!1;try{if(te=(D=D.call(p)).next,f!==0)for(;!(m=(E=te.call(D)).done)&&(d.push(E.value),d.length!==f);m=!0);}catch(C){_=!0,Y=C}finally{try{if(!m&&D.return!=null&&(q=D.return(),Object(q)!==q))return}finally{if(_)throw Y}}return d}}function wv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jp(p,f){var D=Object.keys(p);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(p);f&&(E=E.filter(function(Y){return Object.getOwnPropertyDescriptor(p,Y).enumerable})),D.push.apply(D,E)}return D}function em(p){for(var f=1;f<arguments.length;f++){var D=arguments[f]!=null?arguments[f]:{};f%2?Jp(Object(D),!0).forEach(function(E){yv(p,E,D[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(D)):Jp(Object(D)).forEach(function(E){Object.defineProperty(p,E,Object.getOwnPropertyDescriptor(D,E))})}return p}function xv(p,f){if(p==null)return{};var D,E,Y=Cv(p,f);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(p);for(E=0;E<te.length;E++)D=te[E],f.indexOf(D)===-1&&{}.propertyIsEnumerable.call(p,D)&&(Y[D]=p[D])}return Y}function Cv(p,f){if(p==null)return{};var D={};for(var E in p)if({}.hasOwnProperty.call(p,E)){if(f.indexOf(E)!==-1)continue;D[E]=p[E]}return D}function kv(p,f){return bv(p)||Sv(p,f)||Dv(p,f)||wv()}function Ev(p,f){if(typeof p!="object"||!p)return p;var D=p[Symbol.toPrimitive];if(D!==void 0){var E=D.call(p,f);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(p)}function Av(p){var f=Ev(p,"string");return typeof f=="symbol"?f:f+""}function Dv(p,f){if(p){if(typeof p=="string")return Zp(p,f);var D={}.toString.call(p).slice(8,-1);return D==="Object"&&p.constructor&&(D=p.constructor.name),D==="Map"||D==="Set"?Array.from(p):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?Zp(p,f):void 0}}function Tv(p,f,D){return f in p?Object.defineProperty(p,f,{value:D,enumerable:!0,configurable:!0,writable:!0}):p[f]=D,p}function tm(p,f){var D=Object.keys(p);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(p);f&&(E=E.filter(function(Y){return Object.getOwnPropertyDescriptor(p,Y).enumerable})),D.push.apply(D,E)}return D}function im(p){for(var f=1;f<arguments.length;f++){var D=arguments[f]!=null?arguments[f]:{};f%2?tm(Object(D),!0).forEach(function(E){Tv(p,E,D[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(D)):tm(Object(D)).forEach(function(E){Object.defineProperty(p,E,Object.getOwnPropertyDescriptor(D,E))})}return p}function Rv(){for(var p=arguments.length,f=new Array(p),D=0;D<p;D++)f[D]=arguments[D];return function(E){return f.reduceRight(function(Y,te){return te(Y)},E)}}function go(p){return function f(){for(var D=this,E=arguments.length,Y=new Array(E),te=0;te<E;te++)Y[te]=arguments[te];return Y.length>=p.length?p.apply(this,Y):function(){for(var q=arguments.length,d=new Array(q),m=0;m<q;m++)d[m]=arguments[m];return f.apply(D,[].concat(Y,d))}}}function Wc(p){return{}.toString.call(p).includes("Object")}function Mv(p){return!Object.keys(p).length}function So(p){return typeof p=="function"}function jv(p,f){return Object.prototype.hasOwnProperty.call(p,f)}function Ov(p,f){return Wc(f)||zr("changeType"),Object.keys(f).some(function(D){return!jv(p,D)})&&zr("changeField"),f}function Lv(p){So(p)||zr("selectorType")}function Nv(p){So(p)||Wc(p)||zr("handlerType"),Wc(p)&&Object.values(p).some(function(f){return!So(f)})&&zr("handlersType")}function Bv(p){p||zr("initialIsRequired"),Wc(p)||zr("initialType"),Mv(p)&&zr("initialContent")}function Hv(p,f){throw new Error(p[f]||p.default)}var zv={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},zr=go(Hv)(zv),Lc={changes:Ov,selector:Lv,handler:Nv,initial:Bv};function Uv(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Lc.initial(p),Lc.handler(f);var D={current:p},E=go(Fv)(D,f),Y=go(Iv)(D),te=go(Lc.changes)(p),q=go(Pv)(D);function d(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(C){return C};return Lc.selector(_),_(D.current)}function m(_){Rv(E,Y,te,q)(_)}return[d,m]}function Pv(p,f){return So(f)?f(p.current):f}function Iv(p,f){return p.current=im(im({},p.current),f),f}function Fv(p,f,D){return So(f)?f(p.current):Object.keys(D).forEach(function(E){var Y;return(Y=f[E])===null||Y===void 0?void 0:Y.call(f,p.current[E])}),D}var qv={create:Uv},Wv={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function $v(p){return function f(){for(var D=this,E=arguments.length,Y=new Array(E),te=0;te<E;te++)Y[te]=arguments[te];return Y.length>=p.length?p.apply(this,Y):function(){for(var q=arguments.length,d=new Array(q),m=0;m<q;m++)d[m]=arguments[m];return f.apply(D,[].concat(Y,d))}}}function Kv(p){return{}.toString.call(p).includes("Object")}function Gv(p){return p||sm("configIsRequired"),Kv(p)||sm("configType"),p.urls?(Yv(),{paths:{vs:p.urls.monacoBase}}):p}function Yv(){console.warn(Tm.deprecation)}function Vv(p,f){throw new Error(p[f]||p.default)}var Tm={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},sm=$v(Vv)(Tm),Xv={config:Gv},Qv=function(){for(var f=arguments.length,D=new Array(f),E=0;E<f;E++)D[E]=arguments[E];return function(Y){return D.reduceRight(function(te,q){return q(te)},Y)}};function Rm(p,f){return Object.keys(f).forEach(function(D){f[D]instanceof Object&&p[D]&&Object.assign(f[D],Rm(p[D],f[D]))}),em(em({},p),f)}var Zv={type:"cancelation",msg:"operation is manually canceled"};function Mh(p){var f=!1,D=new Promise(function(E,Y){p.then(function(te){return f?Y(Zv):E(te)}),p.catch(Y)});return D.cancel=function(){return f=!0},D}var Jv=["monaco"],eg=qv.create({config:Wv,isInitialized:!1,resolve:null,reject:null,monaco:null}),Mm=kv(eg,2),xo=Mm[0],Kc=Mm[1];function tg(p){var f=Xv.config(p),D=f.monaco,E=xv(f,Jv);Kc(function(Y){return{config:Rm(Y.config,E),monaco:D}})}function ig(){var p=xo(function(f){var D=f.monaco,E=f.isInitialized,Y=f.resolve;return{monaco:D,isInitialized:E,resolve:Y}});if(!p.isInitialized){if(Kc({isInitialized:!0}),p.monaco)return p.resolve(p.monaco),Mh(jh);if(window.monaco&&window.monaco.editor)return jm(window.monaco),p.resolve(window.monaco),Mh(jh);Qv(sg,rg)(ag)}return Mh(jh)}function sg(p){return document.body.appendChild(p)}function ng(p){var f=document.createElement("script");return p&&(f.src=p),f}function rg(p){var f=xo(function(E){var Y=E.config,te=E.reject;return{config:Y,reject:te}}),D=ng("".concat(f.config.paths.vs,"/loader.js"));return D.onload=function(){return p()},D.onerror=f.reject,D}function ag(){var p=xo(function(D){var E=D.config,Y=D.resolve,te=D.reject;return{config:E,resolve:Y,reject:te}}),f=window.require;f.config(p.config),f(["vs/editor/editor.main"],function(D){var E=D.m||D;jm(E),p.resolve(E)},function(D){p.reject(D)})}function jm(p){xo().monaco||Kc({monaco:p})}function lg(){return xo(function(p){var f=p.monaco;return f})}var jh=new Promise(function(p,f){return Kc({resolve:p,reject:f})}),Om={config:tg,init:ig,__getMonacoInstance:lg},og={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Oh=og,cg={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ug=cg;function hg({children:p}){return dl.createElement("div",{style:ug.container},p)}var dg=hg,fg=dg;function pg({width:p,height:f,isEditorReady:D,loading:E,_ref:Y,className:te,wrapperProps:q}){return dl.createElement("section",{style:{...Oh.wrapper,width:p,height:f},...q},!D&&dl.createElement(fg,null,E),dl.createElement("div",{ref:Y,style:{...Oh.fullWidth,...!D&&Oh.hide},className:te}))}var mg=pg,Lm=z.memo(mg);function _g(p){z.useEffect(p,[])}var Nm=_g;function vg(p,f,D=!0){let E=z.useRef(!0);z.useEffect(E.current||!D?()=>{E.current=!1}:p,f)}var ss=vg;function bo(){}function ul(p,f,D,E){return gg(p,E)||bg(p,f,D,E)}function gg(p,f){return p.editor.getModel(Bm(p,f))}function bg(p,f,D,E){return p.editor.createModel(f,D,E?Bm(p,E):void 0)}function Bm(p,f){return p.Uri.parse(f)}function yg({original:p,modified:f,language:D,originalLanguage:E,modifiedLanguage:Y,originalModelPath:te,modifiedModelPath:q,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:m=!1,theme:_="light",loading:C="Loading...",options:v={},height:x="100%",width:T="100%",className:A,wrapperProps:k={},beforeMount:l=bo,onMount:u=bo}){let[o,c]=z.useState(!1),[g,S]=z.useState(!0),R=z.useRef(null),O=z.useRef(null),b=z.useRef(null),M=z.useRef(u),U=z.useRef(l),X=z.useRef(!1);Nm(()=>{let ae=Om.init();return ae.then($=>(O.current=$)&&S(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>R.current?J():ae.cancel()}),ss(()=>{if(R.current&&O.current){let ae=R.current.getOriginalEditor(),$=ul(O.current,p||"",E||D||"text",te||"");$!==ae.getModel()&&ae.setModel($)}},[te],o),ss(()=>{if(R.current&&O.current){let ae=R.current.getModifiedEditor(),$=ul(O.current,f||"",Y||D||"text",q||"");$!==ae.getModel()&&ae.setModel($)}},[q],o),ss(()=>{let ae=R.current.getModifiedEditor();ae.getOption(O.current.editor.EditorOption.readOnly)?ae.setValue(f||""):f!==ae.getValue()&&(ae.executeEdits("",[{range:ae.getModel().getFullModelRange(),text:f||"",forceMoveMarkers:!0}]),ae.pushUndoStop())},[f],o),ss(()=>{R.current?.getModel()?.original.setValue(p||"")},[p],o),ss(()=>{let{original:ae,modified:$}=R.current.getModel();O.current.editor.setModelLanguage(ae,E||D||"text"),O.current.editor.setModelLanguage($,Y||D||"text")},[D,E,Y],o),ss(()=>{O.current?.editor.setTheme(_)},[_],o),ss(()=>{R.current?.updateOptions(v)},[v],o);let F=z.useCallback(()=>{if(!O.current)return;U.current(O.current);let ae=ul(O.current,p||"",E||D||"text",te||""),$=ul(O.current,f||"",Y||D||"text",q||"");R.current?.setModel({original:ae,modified:$})},[D,f,Y,p,E,te,q]),V=z.useCallback(()=>{!X.current&&b.current&&(R.current=O.current.editor.createDiffEditor(b.current,{automaticLayout:!0,...v}),F(),O.current?.editor.setTheme(_),c(!0),X.current=!0)},[v,_,F]);z.useEffect(()=>{o&&M.current(R.current,O.current)},[o]),z.useEffect(()=>{!g&&!o&&V()},[g,o,V]);function J(){let ae=R.current?.getModel();d||ae?.original?.dispose(),m||ae?.modified?.dispose(),R.current?.dispose()}return dl.createElement(Lm,{width:T,height:x,isEditorReady:o,loading:C,_ref:b,className:A,wrapperProps:k})}var Sg=yg,nm=z.memo(Sg);function wg(p){let f=z.useRef();return z.useEffect(()=>{f.current=p},[p]),f.current}var xg=wg,Nc=new Map;function Cg({defaultValue:p,defaultLanguage:f,defaultPath:D,value:E,language:Y,path:te,theme:q="light",line:d,loading:m="Loading...",options:_={},overrideServices:C={},saveViewState:v=!0,keepCurrentModel:x=!1,width:T="100%",height:A="100%",className:k,wrapperProps:l={},beforeMount:u=bo,onMount:o=bo,onChange:c,onValidate:g=bo}){let[S,R]=z.useState(!1),[O,b]=z.useState(!0),M=z.useRef(null),U=z.useRef(null),X=z.useRef(null),F=z.useRef(o),V=z.useRef(u),J=z.useRef(),ae=z.useRef(E),$=xg(te),se=z.useRef(!1),L=z.useRef(!1);Nm(()=>{let j=Om.init();return j.then(Q=>(M.current=Q)&&b(!1)).catch(Q=>Q?.type!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>U.current?W():j.cancel()}),ss(()=>{let j=ul(M.current,p||E||"",f||Y||"",te||D||"");j!==U.current?.getModel()&&(v&&Nc.set($,U.current?.saveViewState()),U.current?.setModel(j),v&&U.current?.restoreViewState(Nc.get(te)))},[te],S),ss(()=>{U.current?.updateOptions(_)},[_],S),ss(()=>{!U.current||E===void 0||(U.current.getOption(M.current.editor.EditorOption.readOnly)?U.current.setValue(E):E!==U.current.getValue()&&(L.current=!0,U.current.executeEdits("",[{range:U.current.getModel().getFullModelRange(),text:E,forceMoveMarkers:!0}]),U.current.pushUndoStop(),L.current=!1))},[E],S),ss(()=>{let j=U.current?.getModel();j&&Y&&M.current?.editor.setModelLanguage(j,Y)},[Y],S),ss(()=>{d!==void 0&&U.current?.revealLine(d)},[d],S),ss(()=>{M.current?.editor.setTheme(q)},[q],S);let I=z.useCallback(()=>{if(!(!X.current||!M.current)&&!se.current){V.current(M.current);let j=te||D,Q=ul(M.current,E||p||"",f||Y||"",j||"");U.current=M.current?.editor.create(X.current,{model:Q,automaticLayout:!0,..._},C),v&&U.current.restoreViewState(Nc.get(j)),M.current.editor.setTheme(q),d!==void 0&&U.current.revealLine(d),R(!0),se.current=!0}},[p,f,D,E,Y,te,_,C,v,q,d]);z.useEffect(()=>{S&&F.current(U.current,M.current)},[S]),z.useEffect(()=>{!O&&!S&&I()},[O,S,I]),ae.current=E,z.useEffect(()=>{S&&c&&(J.current?.dispose(),J.current=U.current?.onDidChangeModelContent(j=>{L.current||c(U.current.getValue(),j)}))},[S,c]),z.useEffect(()=>{if(S){let j=M.current.editor.onDidChangeMarkers(Q=>{let Z=U.current.getModel()?.uri;if(Z&&Q.find(_e=>_e.path===Z.path)){let _e=M.current.editor.getModelMarkers({resource:Z});g?.(_e)}});return()=>{j?.dispose()}}return()=>{}},[S,g]);function W(){J.current?.dispose(),x?v&&Nc.set(te,U.current.saveViewState()):U.current.getModel()?.dispose(),U.current.dispose()}return dl.createElement(Lm,{width:T,height:A,isEditorReady:S,loading:m,_ref:X,className:k,wrapperProps:l})}var kg=Cg,Eg=z.memo(kg),Ag=Eg;function Dg(p,f,D,E){if(typeof f=="function"?p!==f||!E:!f.has(p))throw new TypeError("Cannot read private member from an object whose class did not declare it");return D==="m"?E:D==="a"?E.call(p):E?E.value:f.get(p)}function Tg(p,f,D,E,Y){if(typeof f=="function"?p!==f||!0:!f.has(p))throw new TypeError("Cannot write private member to an object whose class did not declare it");return f.set(p,D),D}var Pc;const vs="__TAURI_TO_IPC_KEY__";function Rg(p,f=!1){return window.__TAURI_INTERNALS__.transformCallback(p,f)}async function me(p,f={},D){return window.__TAURI_INTERNALS__.invoke(p,f,D)}class Mg{get rid(){return Dg(this,Pc,"f")}constructor(f){Pc.set(this,void 0),Tg(this,Pc,f)}async close(){return me("plugin:resources|close",{rid:this.rid})}}Pc=new WeakMap;var hi;(function(p){p.WINDOW_RESIZED="tauri://resize",p.WINDOW_MOVED="tauri://move",p.WINDOW_CLOSE_REQUESTED="tauri://close-requested",p.WINDOW_DESTROYED="tauri://destroyed",p.WINDOW_FOCUS="tauri://focus",p.WINDOW_BLUR="tauri://blur",p.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",p.WINDOW_THEME_CHANGED="tauri://theme-changed",p.WINDOW_CREATED="tauri://window-created",p.WEBVIEW_CREATED="tauri://webview-created",p.DRAG_ENTER="tauri://drag-enter",p.DRAG_OVER="tauri://drag-over",p.DRAG_DROP="tauri://drag-drop",p.DRAG_LEAVE="tauri://drag-leave"})(hi||(hi={}));async function Hm(p,f){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(p,f),await me("plugin:event|unlisten",{event:p,eventId:f})}async function Co(p,f,D){var E;const Y=typeof D?.target=="string"?{kind:"AnyLabel",label:D.target}:(E=D?.target)!==null&&E!==void 0?E:{kind:"Any"};return me("plugin:event|listen",{event:p,target:Y,handler:Rg(f)}).then(te=>async()=>Hm(p,te))}async function Qh(p,f,D){return Co(p,E=>{Hm(p,E.id),f(E)},D)}async function zm(p,f){await me("plugin:event|emit",{event:p,payload:f})}async function Um(p,f,D){await me("plugin:event|emit_to",{target:typeof p=="string"?{kind:"AnyLabel",label:p}:p,event:f,payload:D})}var Lh={exports:{}},rm;function jg(){return rm||(rm=1,(function(p,f){(function(D,E){p.exports=E()})(self,(()=>(()=>{var D={4567:function(q,d,m){var _=this&&this.__decorate||function(c,g,S,R){var O,b=arguments.length,M=b<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,S):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(c,g,S,R);else for(var U=c.length-1;U>=0;U--)(O=c[U])&&(M=(b<3?O(M):b>3?O(g,S,M):O(g,S))||M);return b>3&&M&&Object.defineProperty(g,S,M),M},C=this&&this.__param||function(c,g){return function(S,R){g(S,R,c)}};Object.defineProperty(d,"__esModule",{value:!0}),d.AccessibilityManager=void 0;const v=m(9042),x=m(6114),T=m(9924),A=m(844),k=m(5596),l=m(4725),u=m(3656);let o=d.AccessibilityManager=class extends A.Disposable{constructor(c,g){super(),this._terminal=c,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new T.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((S=>this._handleResize(S.rows)))),this.register(this._terminal.onRender((S=>this._refreshRows(S.start,S.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((S=>this._handleChar(S)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((S=>this._handleTab(S)))),this.register(this._terminal.onKey((S=>this._handleKey(S.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new k.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,A.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(c){for(let g=0;g<c;g++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=v.tooMuchOutput)),x.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,x.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(c)||this._charsToConsume.push(c)}_refreshRows(c,g){this._liveRegionDebouncer.refresh(c,g,this._terminal.rows)}_renderRows(c,g){const S=this._terminal.buffer,R=S.lines.length.toString();for(let O=c;O<=g;O++){const b=S.translateBufferLineToString(S.ydisp+O,!0),M=(S.ydisp+O+1).toString(),U=this._rowElements[O];U&&(b.length===0?U.innerText="":U.textContent=b,U.setAttribute("aria-posinset",M),U.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,g){const S=c.target,R=this._rowElements[g===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==R)return;let O,b;if(g===0?(O=S,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(O=this._rowElements.shift(),b=S,this._rowContainer.removeChild(O)),O.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const M=this._createAccessibilityTreeNode();this._rowElements.unshift(M),this._rowContainer.insertAdjacentElement("afterbegin",M)}else{const M=this._createAccessibilityTreeNode();this._rowElements.push(M),this._rowContainer.appendChild(M)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};d.AccessibilityManager=o=_([C(1,l.IRenderService)],o)},3614:(q,d)=>{function m(x){return x.replace(/\r?\n/g,"\r")}function _(x,T){return T?"\x1B[200~"+x+"\x1B[201~":x}function C(x,T,A,k){x=_(x=m(x),A.decPrivateModes.bracketedPasteMode&&k.rawOptions.ignoreBracketedPasteMode!==!0),A.triggerDataEvent(x,!0),T.value=""}function v(x,T,A){const k=A.getBoundingClientRect(),l=x.clientX-k.left-10,u=x.clientY-k.top-10;T.style.width="20px",T.style.height="20px",T.style.left=`${l}px`,T.style.top=`${u}px`,T.style.zIndex="1000",T.focus()}Object.defineProperty(d,"__esModule",{value:!0}),d.rightClickHandler=d.moveTextAreaUnderMouseCursor=d.paste=d.handlePasteEvent=d.copyHandler=d.bracketTextForPaste=d.prepareTextForTerminal=void 0,d.prepareTextForTerminal=m,d.bracketTextForPaste=_,d.copyHandler=function(x,T){x.clipboardData&&x.clipboardData.setData("text/plain",T.selectionText),x.preventDefault()},d.handlePasteEvent=function(x,T,A,k){x.stopPropagation(),x.clipboardData&&C(x.clipboardData.getData("text/plain"),T,A,k)},d.paste=C,d.moveTextAreaUnderMouseCursor=v,d.rightClickHandler=function(x,T,A,k,l){v(x,T,A),l&&k.rightClickSelect(x),T.value=k.selectionText,T.select()}},7239:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorContrastCache=void 0;const _=m(1505);d.ColorContrastCache=class{constructor(){this._color=new _.TwoKeyMap,this._css=new _.TwoKeyMap}setCss(C,v,x){this._css.set(C,v,x)}getCss(C,v){return this._css.get(C,v)}setColor(C,v,x){this._color.set(C,v,x)}getColor(C,v){return this._color.get(C,v)}clear(){this._color.clear(),this._css.clear()}}},3656:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.addDisposableDomListener=void 0,d.addDisposableDomListener=function(m,_,C,v){m.addEventListener(_,C,v);let x=!1;return{dispose:()=>{x||(x=!0,m.removeEventListener(_,C,v))}}}},6465:function(q,d,m){var _=this&&this.__decorate||function(l,u,o,c){var g,S=arguments.length,R=S<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,u,o,c);else for(var O=l.length-1;O>=0;O--)(g=l[O])&&(R=(S<3?g(R):S>3?g(u,o,R):g(u,o))||R);return S>3&&R&&Object.defineProperty(u,o,R),R},C=this&&this.__param||function(l,u){return function(o,c){u(o,c,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Linkifier2=void 0;const v=m(3656),x=m(8460),T=m(844),A=m(2585);let k=d.Linkifier2=class extends T.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new x.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new x.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,T.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,T.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const u=this._linkProviders.indexOf(l);u!==-1&&this._linkProviders.splice(u,1)}}}attachToDom(l,u,o){this._element=l,this._mouseService=u,this._renderService=o,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const u=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const o=l.composedPath();for(let c=0;c<o.length;c++){const g=o[c];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,u){var o,c;this._activeProviderReplies&&u||((o=this._activeProviderReplies)===null||o===void 0||o.forEach((S=>{S?.forEach((R=>{R.link.dispose&&R.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=l.y);let g=!1;for(const[S,R]of this._linkProviders.entries())u?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(S)&&(g=this._checkLinkProviderResult(S,l,g)):R.provideLinks(l.y,(O=>{var b,M;if(this._isMouseOut)return;const U=O?.map((X=>({link:X})));(b=this._activeProviderReplies)===null||b===void 0||b.set(S,U),g=this._checkLinkProviderResult(S,l,g),((M=this._activeProviderReplies)===null||M===void 0?void 0:M.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)}))}_removeIntersectingLinks(l,u){const o=new Set;for(let c=0;c<u.size;c++){const g=u.get(c);if(g)for(let S=0;S<g.length;S++){const R=g[S],O=R.link.range.start.y<l?0:R.link.range.start.x,b=R.link.range.end.y>l?this._bufferService.cols:R.link.range.end.x;for(let M=O;M<=b;M++){if(o.has(M)){g.splice(S--,1);break}o.add(M)}}}}_checkLinkProviderResult(l,u,o){var c;if(!this._activeProviderReplies)return o;const g=this._activeProviderReplies.get(l);let S=!1;for(let R=0;R<l;R++)this._activeProviderReplies.has(R)&&!this._activeProviderReplies.get(R)||(S=!0);if(!S&&g){const R=g.find((O=>this._linkAtPosition(O.link,u)));R&&(o=!0,this._handleNewLink(R))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let R=0;R<this._activeProviderReplies.size;R++){const O=(c=this._activeProviderReplies.get(R))===null||c===void 0?void 0:c.find((b=>this._linkAtPosition(b.link,u)));if(O){o=!0,this._handleNewLink(O);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const u=this._positionFromMouseEvent(l,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!u||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,T.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(l.link,u)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:o=>{var c,g;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.underline},set:o=>{var c,g,S;!((c=this._currentLink)===null||c===void 0)&&c.state&&((S=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||S===void 0?void 0:S.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((o=>{if(!this._currentLink)return;const c=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(c,g),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}}))))}_linkHover(l,u,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(o,u.text)}_fireUnderlineEvent(l,u){const o=l.range,c=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(l,u,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(o,u.text)}_linkAtPosition(l,u){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,c=l.range.end.y*this._bufferService.cols+l.range.end.x,g=u.y*this._bufferService.cols+u.x;return o<=g&&g<=c}_positionFromMouseEvent(l,u,o){const c=o.getCoords(l,u,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,u,o,c,g){return{x1:l,y1:u,x2:o,y2:c,cols:this._bufferService.cols,fg:g}}};d.Linkifier2=k=_([C(0,A.IBufferService)],k)},9042:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.tooMuchOutput=d.promptLabel=void 0,d.promptLabel="Terminal input",d.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(q,d,m){var _=this&&this.__decorate||function(k,l,u,o){var c,g=arguments.length,S=g<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(k,l,u,o);else for(var R=k.length-1;R>=0;R--)(c=k[R])&&(S=(g<3?c(S):g>3?c(l,u,S):c(l,u))||S);return g>3&&S&&Object.defineProperty(l,u,S),S},C=this&&this.__param||function(k,l){return function(u,o){l(u,o,k)}};Object.defineProperty(d,"__esModule",{value:!0}),d.OscLinkProvider=void 0;const v=m(511),x=m(2585);let T=d.OscLinkProvider=class{constructor(k,l,u){this._bufferService=k,this._optionsService=l,this._oscLinkService=u}provideLinks(k,l){var u;const o=this._bufferService.buffer.lines.get(k-1);if(!o)return void l(void 0);const c=[],g=this._optionsService.rawOptions.linkHandler,S=new v.CellData,R=o.getTrimmedLength();let O=-1,b=-1,M=!1;for(let U=0;U<R;U++)if(b!==-1||o.hasContent(U)){if(o.loadCell(U,S),S.hasExtendedAttrs()&&S.extended.urlId){if(b===-1){b=U,O=S.extended.urlId;continue}M=S.extended.urlId!==O}else b!==-1&&(M=!0);if(M||b!==-1&&U===R-1){const X=(u=this._oscLinkService.getLinkData(O))===null||u===void 0?void 0:u.uri;if(X){const F={start:{x:b+1,y:k},end:{x:U+(M||U!==R-1?0:1),y:k}};let V=!1;if(!g?.allowNonHttpProtocols)try{const J=new URL(X);["http:","https:"].includes(J.protocol)||(V=!0)}catch{V=!0}V||c.push({text:X,range:F,activate:(J,ae)=>g?g.activate(J,ae,F):A(0,ae),hover:(J,ae)=>{var $;return($=g?.hover)===null||$===void 0?void 0:$.call(g,J,ae,F)},leave:(J,ae)=>{var $;return($=g?.leave)===null||$===void 0?void 0:$.call(g,J,ae,F)}})}M=!1,S.hasExtendedAttrs()&&S.extended.urlId?(b=U,O=S.extended.urlId):(b=-1,O=-1)}}l(c)}};function A(k,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}d.OscLinkProvider=T=_([C(0,x.IBufferService),C(1,x.IOptionsService),C(2,x.IOscLinkService)],T)},6193:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.RenderDebouncer=void 0,d.RenderDebouncer=class{constructor(m,_){this._parentWindow=m,this._renderCallback=_,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(m){return this._refreshCallbacks.push(m),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(m,_,C){this._rowCount=C,m=m!==void 0?m:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const m=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(m,_),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const m of this._refreshCallbacks)m(0);this._refreshCallbacks=[]}}},5596:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ScreenDprMonitor=void 0;const _=m(844);class C extends _.Disposable{constructor(x){super(),this._parentWindow=x,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,_.toDisposable)((()=>{this.clearListener()})))}setListener(x){this._listener&&this.clearListener(),this._listener=x,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var x;this._outerListener&&((x=this._resolutionMediaMatchList)===null||x===void 0||x.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}d.ScreenDprMonitor=C},3236:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const _=m(3614),C=m(3656),v=m(6465),x=m(9042),T=m(3730),A=m(1680),k=m(3107),l=m(5744),u=m(2950),o=m(1296),c=m(428),g=m(4269),S=m(5114),R=m(8934),O=m(3230),b=m(9312),M=m(4725),U=m(6731),X=m(8055),F=m(8969),V=m(8460),J=m(844),ae=m(6114),$=m(8437),se=m(2584),L=m(7399),I=m(5941),W=m(9074),j=m(2585),Q=m(5435),Z=m(4567),_e=typeof window<"u"?window.document:null;class xe extends F.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(B={}){super(B),this.browser=ae,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new J.MutableDisposable),this._onCursorMove=this.register(new V.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new V.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new V.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new V.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new V.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new V.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new V.EventEmitter),this._onBlur=this.register(new V.EventEmitter),this._onA11yCharEmitter=this.register(new V.EventEmitter),this._onA11yTabEmitter=this.register(new V.EventEmitter),this._onWillOpen=this.register(new V.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(v.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(T.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(W.DecorationService),this._instantiationService.setService(j.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((ie,de)=>this.refresh(ie,de)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((ie=>this._reportWindowsOptions(ie)))),this.register(this._inputHandler.onColor((ie=>this._handleColorEvent(ie)))),this.register((0,V.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,V.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,V.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,V.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((ie=>this._afterResize(ie.cols,ie.rows)))),this.register((0,J.toDisposable)((()=>{var ie,de;this._customKeyEventHandler=void 0,(de=(ie=this.element)===null||ie===void 0?void 0:ie.parentNode)===null||de===void 0||de.removeChild(this.element)})))}_handleColorEvent(B){if(this._themeService)for(const ie of B){let de,fe="";switch(ie.index){case 256:de="foreground",fe="10";break;case 257:de="background",fe="11";break;case 258:de="cursor",fe="12";break;default:de="ansi",fe="4;"+ie.index}switch(ie.type){case 0:const ze=X.color.toColorRGB(de==="ansi"?this._themeService.colors.ansi[ie.index]:this._themeService.colors[de]);this.coreService.triggerDataEvent(`${se.C0.ESC}]${fe};${(0,I.toRgbString)(ze)}${se.C1_ESCAPED.ST}`);break;case 1:if(de==="ansi")this._themeService.modifyColors((ke=>ke.ansi[ie.index]=X.rgba.toColor(...ie.color)));else{const ke=de;this._themeService.modifyColors((Ve=>Ve[ke]=X.rgba.toColor(...ie.color)))}break;case 2:this._themeService.restoreColor(ie.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(B){B?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const B=this.buffer.ybase+this.buffer.y,ie=this.buffer.lines.get(B);if(!ie)return;const de=Math.min(this.buffer.x,this.cols-1),fe=this._renderService.dimensions.css.cell.height,ze=ie.getWidth(de),ke=this._renderService.dimensions.css.cell.width*ze,Ve=this.buffer.y*this._renderService.dimensions.css.cell.height,qe=de*this._renderService.dimensions.css.cell.width;this.textarea.style.left=qe+"px",this.textarea.style.top=Ve+"px",this.textarea.style.width=ke+"px",this.textarea.style.height=fe+"px",this.textarea.style.lineHeight=fe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,C.addDisposableDomListener)(this.element,"copy",(ie=>{this.hasSelection()&&(0,_.copyHandler)(ie,this._selectionService)})));const B=ie=>(0,_.handlePasteEvent)(ie,this.textarea,this.coreService,this.optionsService);this.register((0,C.addDisposableDomListener)(this.textarea,"paste",B)),this.register((0,C.addDisposableDomListener)(this.element,"paste",B)),ae.isFirefox?this.register((0,C.addDisposableDomListener)(this.element,"mousedown",(ie=>{ie.button===2&&(0,_.rightClickHandler)(ie,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,C.addDisposableDomListener)(this.element,"contextmenu",(ie=>{(0,_.rightClickHandler)(ie,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),ae.isLinux&&this.register((0,C.addDisposableDomListener)(this.element,"auxclick",(ie=>{ie.button===1&&(0,_.moveTextAreaUnderMouseCursor)(ie,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,C.addDisposableDomListener)(this.textarea,"keyup",(B=>this._keyUp(B)),!0)),this.register((0,C.addDisposableDomListener)(this.textarea,"keydown",(B=>this._keyDown(B)),!0)),this.register((0,C.addDisposableDomListener)(this.textarea,"keypress",(B=>this._keyPress(B)),!0)),this.register((0,C.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,C.addDisposableDomListener)(this.textarea,"compositionupdate",(B=>this._compositionHelper.compositionupdate(B)))),this.register((0,C.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,C.addDisposableDomListener)(this.textarea,"input",(B=>this._inputEvent(B)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(B){var ie;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),B.appendChild(this.element);const de=_e.createDocumentFragment();this._viewportElement=_e.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),de.appendChild(this._viewportElement),this._viewportScrollArea=_e.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=_e.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=_e.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),de.appendChild(this.screenElement),this.textarea=_e.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",x.promptLabel),ae.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(ie=this._document.defaultView)!==null&&ie!==void 0?ie:window),this._instantiationService.setService(M.ICoreBrowserService,this._coreBrowserService),this.register((0,C.addDisposableDomListener)(this.textarea,"focus",(fe=>this._handleTextAreaFocus(fe)))),this.register((0,C.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(U.ThemeService),this._instantiationService.setService(M.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(O.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((fe=>this._onRender.fire(fe)))),this.onResize((fe=>this._renderService.resize(fe.cols,fe.rows))),this._compositionView=_e.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(de);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(A.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((fe=>this.scrollLines(fe.amount,fe.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((fe=>this.scrollLines(fe.amount,fe.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((fe=>this._renderService.handleSelectionChanged(fe.start,fe.end,fe.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((fe=>{this.textarea.value=fe,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((fe=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,C.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(k.BufferDecorationRenderer,this.screenElement)),this.register((0,C.addDisposableDomListener)(this.element,"mousedown",(fe=>this._selectionService.handleMouseDown(fe)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(fe=>this._handleScreenReaderModeOptionChange(fe)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(fe=>{!this._overviewRulerRenderer&&fe&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const B=this,ie=this.element;function de(ke){const Ve=B._mouseService.getMouseReportCoords(ke,B.screenElement);if(!Ve)return!1;let qe,Nt;switch(ke.overrideType||ke.type){case"mousemove":Nt=32,ke.buttons===void 0?(qe=3,ke.button!==void 0&&(qe=ke.button<3?ke.button:3)):qe=1&ke.buttons?0:4&ke.buttons?1:2&ke.buttons?2:3;break;case"mouseup":Nt=0,qe=ke.button<3?ke.button:3;break;case"mousedown":Nt=1,qe=ke.button<3?ke.button:3;break;case"wheel":if(B.viewport.getLinesScrolled(ke)===0)return!1;Nt=ke.deltaY<0?0:1,qe=4;break;default:return!1}return!(Nt===void 0||qe===void 0||qe>4)&&B.coreMouseService.triggerMouseEvent({col:Ve.col,row:Ve.row,x:Ve.x,y:Ve.y,button:qe,action:Nt,ctrl:ke.ctrlKey,alt:ke.altKey,shift:ke.shiftKey})}const fe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ze={mouseup:ke=>(de(ke),ke.buttons||(this._document.removeEventListener("mouseup",fe.mouseup),fe.mousedrag&&this._document.removeEventListener("mousemove",fe.mousedrag)),this.cancel(ke)),wheel:ke=>(de(ke),this.cancel(ke,!0)),mousedrag:ke=>{ke.buttons&&de(ke)},mousemove:ke=>{ke.buttons||de(ke)}};this.register(this.coreMouseService.onProtocolChange((ke=>{ke?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ke)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ke?fe.mousemove||(ie.addEventListener("mousemove",ze.mousemove),fe.mousemove=ze.mousemove):(ie.removeEventListener("mousemove",fe.mousemove),fe.mousemove=null),16&ke?fe.wheel||(ie.addEventListener("wheel",ze.wheel,{passive:!1}),fe.wheel=ze.wheel):(ie.removeEventListener("wheel",fe.wheel),fe.wheel=null),2&ke?fe.mouseup||(ie.addEventListener("mouseup",ze.mouseup),fe.mouseup=ze.mouseup):(this._document.removeEventListener("mouseup",fe.mouseup),ie.removeEventListener("mouseup",fe.mouseup),fe.mouseup=null),4&ke?fe.mousedrag||(fe.mousedrag=ze.mousedrag):(this._document.removeEventListener("mousemove",fe.mousedrag),fe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,C.addDisposableDomListener)(ie,"mousedown",(ke=>{if(ke.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ke))return de(ke),fe.mouseup&&this._document.addEventListener("mouseup",fe.mouseup),fe.mousedrag&&this._document.addEventListener("mousemove",fe.mousedrag),this.cancel(ke)}))),this.register((0,C.addDisposableDomListener)(ie,"wheel",(ke=>{if(!fe.wheel){if(!this.buffer.hasScrollback){const Ve=this.viewport.getLinesScrolled(ke);if(Ve===0)return;const qe=se.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ke.deltaY<0?"A":"B");let Nt="";for(let xt=0;xt<Math.abs(Ve);xt++)Nt+=qe;return this.coreService.triggerDataEvent(Nt,!0),this.cancel(ke,!0)}return this.viewport.handleWheel(ke)?this.cancel(ke):void 0}}),{passive:!1})),this.register((0,C.addDisposableDomListener)(ie,"touchstart",(ke=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ke),this.cancel(ke)}),{passive:!0})),this.register((0,C.addDisposableDomListener)(ie,"touchmove",(ke=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ke)?void 0:this.cancel(ke)}),{passive:!1}))}refresh(B,ie){var de;(de=this._renderService)===null||de===void 0||de.refreshRows(B,ie)}updateCursorStyle(B){var ie;!((ie=this._selectionService)===null||ie===void 0)&&ie.shouldColumnSelect(B)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(B,ie,de=0){var fe;de===1?(super.scrollLines(B,ie,de),this.refresh(0,this.rows-1)):(fe=this.viewport)===null||fe===void 0||fe.scrollLines(B)}paste(B){(0,_.paste)(B,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(B){this._customKeyEventHandler=B}registerLinkProvider(B){return this.linkifier2.registerLinkProvider(B)}registerCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const ie=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),ie}deregisterCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(B){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)}registerDecoration(B){return this._decorationService.registerDecoration(B)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(B,ie,de){this._selectionService.setSelection(B,ie,de)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()}selectAll(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()}selectLines(B,ie){var de;(de=this._selectionService)===null||de===void 0||de.selectLines(B,ie)}_keyDown(B){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;const ie=this.browser.isMac&&this.options.macOptionIsMeta&&B.altKey;if(!ie&&!this._compositionHelper.keydown(B))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;ie||B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const de=(0,L.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),de.type===3||de.type===2){const fe=this.rows-1;return this.scrollLines(de.type===2?-fe:fe),this.cancel(B,!0)}return de.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(de.cancel&&this.cancel(B,!0),!de.key||!!(B.key&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&B.key.length===1&&B.key.charCodeAt(0)>=65&&B.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(de.key!==se.C0.ETX&&de.key!==se.C0.CR||(this.textarea.value=""),this._onKey.fire({key:de.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(de.key,!0),!this.optionsService.rawOptions.screenReaderMode||B.altKey||B.ctrlKey?this.cancel(B,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(B,ie){const de=B.isMac&&!this.options.macOptionIsMeta&&ie.altKey&&!ie.ctrlKey&&!ie.metaKey||B.isWindows&&ie.altKey&&ie.ctrlKey&&!ie.metaKey||B.isWindows&&ie.getModifierState("AltGraph");return ie.type==="keypress"?de:de&&(!ie.keyCode||ie.keyCode>47)}_keyUp(B){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||((function(ie){return ie.keyCode===16||ie.keyCode===17||ie.keyCode===18})(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)}_keyPress(B){let ie;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)ie=B.charCode;else if(B.which===null||B.which===void 0)ie=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;ie=B.which}return!(!ie||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(ie=String.fromCharCode(ie),this._onKey.fire({key:ie,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(ie,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(B){if(B.data&&B.inputType==="insertText"&&(!B.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const ie=B.data;return this.coreService.triggerDataEvent(ie,!0),this.cancel(B),!0}return!1}resize(B,ie){B!==this.cols||ie!==this.rows?super.resize(B,ie):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(B,ie){var de,fe;(de=this._charSizeService)===null||de===void 0||de.measure(),(fe=this.viewport)===null||fe===void 0||fe.syncScrollArea(!0)}clear(){var B;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ie=1;ie<this.rows;ie++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(B=this.viewport)===null||B===void 0||B.reset(),this.refresh(0,this.rows-1)}}reset(){var B,ie;this.options.rows=this.rows,this.options.cols=this.cols;const de=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)===null||B===void 0||B.reset(),this._decorationService.reset(),(ie=this.viewport)===null||ie===void 0||ie.reset(),this._customKeyEventHandler=de,this.refresh(0,this.rows-1)}clearTextureAtlas(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()}_reportFocus(){var B;!((B=this.element)===null||B===void 0)&&B.classList.contains("focus")?this.coreService.triggerDataEvent(se.C0.ESC+"[I"):this.coreService.triggerDataEvent(se.C0.ESC+"[O")}_reportWindowsOptions(B){if(this._renderService)switch(B){case Q.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const ie=this._renderService.dimensions.css.canvas.width.toFixed(0),de=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[4;${de};${ie}t`);break;case Q.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const fe=this._renderService.dimensions.css.cell.width.toFixed(0),ze=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[6;${ze};${fe}t`)}}cancel(B,ie){if(this.options.cancelEvents||ie)return B.preventDefault(),B.stopPropagation(),!1}}d.Terminal=xe},9924:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TimeBasedDebouncer=void 0,d.TimeBasedDebouncer=class{constructor(m,_=1e3){this._renderCallback=m,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(m,_,C){this._rowCount=C,m=m!==void 0?m:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;const v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){const x=v-this._lastRefreshMs,T=this._debounceThresholdMS-x;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),T)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const m=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(m,_)}}},1680:function(q,d,m){var _=this&&this.__decorate||function(u,o,c,g){var S,R=arguments.length,O=R<3?o:g===null?g=Object.getOwnPropertyDescriptor(o,c):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(u,o,c,g);else for(var b=u.length-1;b>=0;b--)(S=u[b])&&(O=(R<3?S(O):R>3?S(o,c,O):S(o,c))||O);return R>3&&O&&Object.defineProperty(o,c,O),O},C=this&&this.__param||function(u,o){return function(c,g){o(c,g,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Viewport=void 0;const v=m(3656),x=m(4725),T=m(8460),A=m(844),k=m(2585);let l=d.Viewport=class extends A.Disposable{constructor(u,o,c,g,S,R,O,b){super(),this._viewportElement=u,this._scrollArea=o,this._bufferService=c,this._optionsService=g,this._charSizeService=S,this._renderService=R,this._coreBrowserService=O,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new T.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((M=>this._activeBuffer=M.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((M=>this._renderDimensions=M))),this._handleThemeChange(b.colors),this.register(b.onChangeColors((M=>this._handleThemeChange(M)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const o=this._getPixelsScrolled(u);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(u,o))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let o=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(u,o){var c;let g,S="";const R=[],O=o??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let M=u;M<O;M++){const U=b.get(M);if(!U)continue;const X=(c=b.get(M+1))===null||c===void 0?void 0:c.isWrapped;if(S+=U.translateToString(!X),!X||M===b.length-1){const F=document.createElement("div");F.textContent=S,R.push(F),S.length>0&&(g=F),S=""}}return{bufferElements:R,cursorElement:g}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let o=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(u,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const o=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(u,o))}};d.Viewport=l=_([C(2,k.IBufferService),C(3,k.IOptionsService),C(4,x.ICharSizeService),C(5,x.IRenderService),C(6,x.ICoreBrowserService),C(7,x.IThemeService)],l)},3107:function(q,d,m){var _=this&&this.__decorate||function(l,u,o,c){var g,S=arguments.length,R=S<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,u,o,c);else for(var O=l.length-1;O>=0;O--)(g=l[O])&&(R=(S<3?g(R):S>3?g(u,o,R):g(u,o))||R);return S>3&&R&&Object.defineProperty(u,o,R),R},C=this&&this.__param||function(l,u){return function(o,c){u(o,c,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.BufferDecorationRenderer=void 0;const v=m(3656),x=m(4725),T=m(844),A=m(2585);let k=d.BufferDecorationRenderer=class extends T.Disposable{constructor(l,u,o,c){super(),this._screenElement=l,this._bufferService=u,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,v.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((g=>this._removeDecoration(g)))),this.register((0,T.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var u,o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((u=l?.options)===null||u===void 0?void 0:u.layer)==="top"),c.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(o=l.options.x)!==null&&o!==void 0?o:0;return g&&g>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(l,c),c}_refreshStyle(l){const u=l.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let o=this._decorationElements.get(l);o||(o=this._createElement(l),l.element=o,this._decorationElements.set(l,o),this._container.appendChild(o),l.onDispose((()=>{this._decorationElements.delete(l),o.remove()}))),o.style.top=u*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(o)}}_refreshXPosition(l,u=l.element){var o;if(!u)return;const c=(o=l.options.x)!==null&&o!==void 0?o:0;(l.options.anchor||"left")==="right"?u.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var u;(u=this._decorationElements.get(l))===null||u===void 0||u.remove(),this._decorationElements.delete(l),l.dispose()}};d.BufferDecorationRenderer=k=_([C(1,A.IBufferService),C(2,A.IDecorationService),C(3,x.IRenderService)],k)},5871:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorZoneStore=void 0,d.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(m){if(m.options.overviewRulerOptions){for(const _ of this._zones)if(_.color===m.options.overviewRulerOptions.color&&_.position===m.options.overviewRulerOptions.position){if(this._lineIntersectsZone(_,m.marker.line))return;if(this._lineAdjacentToZone(_,m.marker.line,m.options.overviewRulerOptions.position))return void this._addLineToZone(_,m.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=m.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=m.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=m.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=m.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:m.options.overviewRulerOptions.color,position:m.options.overviewRulerOptions.position,startBufferLine:m.marker.line,endBufferLine:m.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(m){this._linePadding=m}_lineIntersectsZone(m,_){return _>=m.startBufferLine&&_<=m.endBufferLine}_lineAdjacentToZone(m,_,C){return _>=m.startBufferLine-this._linePadding[C||"full"]&&_<=m.endBufferLine+this._linePadding[C||"full"]}_addLineToZone(m,_){m.startBufferLine=Math.min(m.startBufferLine,_),m.endBufferLine=Math.max(m.endBufferLine,_)}}},5744:function(q,d,m){var _=this&&this.__decorate||function(g,S,R,O){var b,M=arguments.length,U=M<3?S:O===null?O=Object.getOwnPropertyDescriptor(S,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(g,S,R,O);else for(var X=g.length-1;X>=0;X--)(b=g[X])&&(U=(M<3?b(U):M>3?b(S,R,U):b(S,R))||U);return M>3&&U&&Object.defineProperty(S,R,U),U},C=this&&this.__param||function(g,S){return function(R,O){S(R,O,g)}};Object.defineProperty(d,"__esModule",{value:!0}),d.OverviewRulerRenderer=void 0;const v=m(5871),x=m(3656),T=m(4725),A=m(844),k=m(2585),l={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let c=d.OverviewRulerRenderer=class extends A.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,S,R,O,b,M,U){var X;super(),this._viewportElement=g,this._screenElement=S,this._bufferService=R,this._decorationService=O,this._renderService=b,this._optionsService=M,this._coreBrowseService=U,this._colorZoneStore=new v.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(X=this._viewportElement.parentElement)===null||X===void 0||X.insertBefore(this._canvas,this._viewportElement);const F=this._canvas.getContext("2d");if(!F)throw new Error("Ctx cannot be null");this._ctx=F,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,A.toDisposable)((()=>{var V;(V=this._canvas)===null||V===void 0||V.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,x.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=g,u.center=S,u.right=g,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=u.left,o.right=u.left+u.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);l.left=S,l.center=S,l.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const S of g)S.position!=="full"&&this._renderColorZone(S);for(const S of g)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(o[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-l[g.position||"full"]/2),u[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[g.position||"full"]))}_queueRefresh(g,S){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};d.OverviewRulerRenderer=c=_([C(2,k.IBufferService),C(3,k.IDecorationService),C(4,T.IRenderService),C(5,k.IOptionsService),C(6,T.ICoreBrowserService)],c)},2950:function(q,d,m){var _=this&&this.__decorate||function(k,l,u,o){var c,g=arguments.length,S=g<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(k,l,u,o);else for(var R=k.length-1;R>=0;R--)(c=k[R])&&(S=(g<3?c(S):g>3?c(l,u,S):c(l,u))||S);return g>3&&S&&Object.defineProperty(l,u,S),S},C=this&&this.__param||function(k,l){return function(u,o){l(u,o,k)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CompositionHelper=void 0;const v=m(4725),x=m(2585),T=m(2584);let A=d.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(k,l,u,o,c,g){this._textarea=k,this._compositionView=l,this._bufferService=u,this._optionsService=o,this._coreService=c,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(k){this._compositionView.textContent=k.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(k){if(this._isComposing||this._isSendingComposition){if(k.keyCode===229||k.keyCode===16||k.keyCode===17||k.keyCode===18)return!1;this._finalizeComposition(!1)}return k.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(k){if(this._compositionView.classList.remove("active"),this._isComposing=!1,k){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}}),0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const k=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const l=this._textarea.value,u=l.replace(k,"");this._dataAlreadySent=u,l.length>k.length?this._coreService.triggerDataEvent(u,!0):l.length<k.length?this._coreService.triggerDataEvent(`${T.C0.DEL}`,!0):l.length===k.length&&l!==k&&this._coreService.triggerDataEvent(l,!0)}}),0)}updateCompositionElements(k){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}k||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};d.CompositionHelper=A=_([C(2,x.IBufferService),C(3,x.IOptionsService),C(4,x.ICoreService),C(5,v.IRenderService)],A)},9806:(q,d)=>{function m(_,C,v){const x=v.getBoundingClientRect(),T=_.getComputedStyle(v),A=parseInt(T.getPropertyValue("padding-left")),k=parseInt(T.getPropertyValue("padding-top"));return[C.clientX-x.left-A,C.clientY-x.top-k]}Object.defineProperty(d,"__esModule",{value:!0}),d.getCoords=d.getCoordsRelativeToElement=void 0,d.getCoordsRelativeToElement=m,d.getCoords=function(_,C,v,x,T,A,k,l,u){if(!A)return;const o=m(_,C,v);return o?(o[0]=Math.ceil((o[0]+(u?k/2:0))/k),o[1]=Math.ceil(o[1]/l),o[0]=Math.min(Math.max(o[0],1),x+(u?1:0)),o[1]=Math.min(Math.max(o[1],1),T),o):void 0}},9504:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.moveToCellSequence=void 0;const _=m(2584);function C(l,u,o,c){const g=l-v(l,o),S=u-v(u,o),R=Math.abs(g-S)-(function(O,b,M){let U=0;const X=O-v(O,M),F=b-v(b,M);for(let V=0;V<Math.abs(X-F);V++){const J=x(O,b)==="A"?-1:1,ae=M.buffer.lines.get(X+J*V);ae?.isWrapped&&U++}return U})(l,u,o);return k(R,A(x(l,u),c))}function v(l,u){let o=0,c=u.buffer.lines.get(l),g=c?.isWrapped;for(;g&&l>=0&&l<u.rows;)o++,c=u.buffer.lines.get(--l),g=c?.isWrapped;return o}function x(l,u){return l>u?"A":"B"}function T(l,u,o,c,g,S){let R=l,O=u,b="";for(;R!==o||O!==c;)R+=g?1:-1,g&&R>S.cols-1?(b+=S.buffer.translateBufferLineToString(O,!1,l,R),R=0,l=0,O++):!g&&R<0&&(b+=S.buffer.translateBufferLineToString(O,!1,0,l+1),R=S.cols-1,l=R,O--);return b+S.buffer.translateBufferLineToString(O,!1,l,R)}function A(l,u){const o=u?"O":"[";return _.C0.ESC+o+l}function k(l,u){l=Math.floor(l);let o="";for(let c=0;c<l;c++)o+=u;return o}d.moveToCellSequence=function(l,u,o,c){const g=o.buffer.x,S=o.buffer.y;if(!o.buffer.hasScrollback)return(function(b,M,U,X,F,V){return C(M,X,F,V).length===0?"":k(T(b,M,b,M-v(M,F),!1,F).length,A("D",V))})(g,S,0,u,o,c)+C(S,u,o,c)+(function(b,M,U,X,F,V){let J;J=C(M,X,F,V).length>0?X-v(X,F):M;const ae=X,$=(function(se,L,I,W,j,Q){let Z;return Z=C(I,W,j,Q).length>0?W-v(W,j):L,se<I&&Z<=W||se>=I&&Z<W?"C":"D"})(b,M,U,X,F,V);return k(T(b,J,U,ae,$==="C",F).length,A($,V))})(g,S,l,u,o,c);let R;if(S===u)return R=g>l?"D":"C",k(Math.abs(g-l),A(R,c));R=S>u?"D":"C";const O=Math.abs(S-u);return k((function(b,M){return M.cols-b})(S>u?l:g,o)+(O-1)*o.cols+1+((S>u?g:l)-1),A(R,c))}},1296:function(q,d,m){var _=this&&this.__decorate||function(F,V,J,ae){var $,se=arguments.length,L=se<3?V:ae===null?ae=Object.getOwnPropertyDescriptor(V,J):ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(F,V,J,ae);else for(var I=F.length-1;I>=0;I--)($=F[I])&&(L=(se<3?$(L):se>3?$(V,J,L):$(V,J))||L);return se>3&&L&&Object.defineProperty(V,J,L),L},C=this&&this.__param||function(F,V){return function(J,ae){V(J,ae,F)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRenderer=void 0;const v=m(3787),x=m(2550),T=m(2223),A=m(6171),k=m(4725),l=m(8055),u=m(8460),o=m(844),c=m(2585),g="xterm-dom-renderer-owner-",S="xterm-rows",R="xterm-fg-",O="xterm-bg-",b="xterm-focus",M="xterm-selection";let U=1,X=d.DomRenderer=class extends o.Disposable{constructor(F,V,J,ae,$,se,L,I,W,j){super(),this._element=F,this._screenElement=V,this._viewportElement=J,this._linkifier2=ae,this._charSizeService=se,this._optionsService=L,this._bufferService=I,this._coreBrowserService=W,this._themeService=j,this._terminalClass=U++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,A.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Q=>this._injectCss(Q)))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(v.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Q=>this._handleLinkHover(Q)))),this.register(this._linkifier2.onHideLinkUnderline((Q=>this._handleLinkLeave(Q)))),this.register((0,o.toDisposable)((()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new x.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const F=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*F,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*F),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/F),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/F),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const J of this._rowElements)J.style.width=`${this.dimensions.css.canvas.width}px`,J.style.height=`${this.dimensions.css.cell.height}px`,J.style.lineHeight=`${this.dimensions.css.cell.height}px`,J.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const V=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=V,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(F){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let V=`${this._terminalSelector} .${S} { color: ${F.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;V+=`${this._terminalSelector} .${S} .xterm-dim { color: ${l.color.multiplyOpacity(F.foreground,.5).css};}`,V+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,V+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",V+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${F.cursor.css};  color: ${F.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${F.cursor.css}; }}`,V+=`${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${F.cursor.css}; color: ${F.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${F.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${F.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${F.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,V+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${F.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${F.selectionInactiveBackgroundOpaque.css};}`;for(const[J,ae]of F.ansi.entries())V+=`${this._terminalSelector} .${R}${J} { color: ${ae.css}; }${this._terminalSelector} .${R}${J}.xterm-dim { color: ${l.color.multiplyOpacity(ae,.5).css}; }${this._terminalSelector} .${O}${J} { background-color: ${ae.css}; }`;V+=`${this._terminalSelector} .${R}${T.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(F.background).css}; }${this._terminalSelector} .${R}${T.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(F.background),.5).css}; }${this._terminalSelector} .${O}${T.INVERTED_DEFAULT_COLOR} { background-color: ${F.foreground.css}; }`,this._themeStyleElement.textContent=V}_setDefaultSpacing(){const F=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${F}px`,this._rowFactory.defaultSpacing=F}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(F,V){for(let J=this._rowElements.length;J<=V;J++){const ae=document.createElement("div");this._rowContainer.appendChild(ae),this._rowElements.push(ae)}for(;this._rowElements.length>V;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(F,V){this._refreshRowElements(F,V),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(F,V,J){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(F,V,J),this.renderRows(0,this._bufferService.rows-1),!F||!V)return;const ae=F[1]-this._bufferService.buffer.ydisp,$=V[1]-this._bufferService.buffer.ydisp,se=Math.max(ae,0),L=Math.min($,this._bufferService.rows-1);if(se>=this._bufferService.rows||L<0)return;const I=document.createDocumentFragment();if(J){const W=F[0]>V[0];I.appendChild(this._createSelectionElement(se,W?V[0]:F[0],W?F[0]:V[0],L-se+1))}else{const W=ae===se?F[0]:0,j=se===$?V[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(se,W,j));const Q=L-se-1;if(I.appendChild(this._createSelectionElement(se+1,0,this._bufferService.cols,Q)),se!==L){const Z=$===L?V[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(L,0,Z))}}this._selectionContainer.appendChild(I)}_createSelectionElement(F,V,J,ae=1){const $=document.createElement("div");return $.style.height=ae*this.dimensions.css.cell.height+"px",$.style.top=F*this.dimensions.css.cell.height+"px",$.style.left=V*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(J-V)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const F of this._rowElements)F.replaceChildren()}renderRows(F,V){const J=this._bufferService.buffer,ae=J.ybase+J.y,$=Math.min(J.x,this._bufferService.cols-1),se=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=F;W<=V;W++){const j=W+J.ydisp,Q=this._rowElements[W],Z=J.lines.get(j);if(!Q||!Z)break;Q.replaceChildren(...this._rowFactory.createRow(Z,j,j===ae,L,I,$,se,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!0)}_handleLinkLeave(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!1)}_setCellUnderline(F,V,J,ae,$,se){J<0&&(F=0),ae<0&&(V=0);const L=this._bufferService.rows-1;J=Math.max(Math.min(J,L),0),ae=Math.max(Math.min(ae,L),0),$=Math.min($,this._bufferService.cols);const I=this._bufferService.buffer,W=I.ybase+I.y,j=Math.min(I.x,$-1),Q=this._optionsService.rawOptions.cursorBlink,Z=this._optionsService.rawOptions.cursorStyle,_e=this._optionsService.rawOptions.cursorInactiveStyle;for(let xe=J;xe<=ae;++xe){const Ae=xe+I.ydisp,B=this._rowElements[xe],ie=I.lines.get(Ae);if(!B||!ie)break;B.replaceChildren(...this._rowFactory.createRow(ie,Ae,Ae===W,Z,_e,j,Q,this.dimensions.css.cell.width,this._widthCache,se?xe===J?F:0:-1,se?(xe===ae?V:$)-1:-1))}}};d.DomRenderer=X=_([C(4,c.IInstantiationService),C(5,k.ICharSizeService),C(6,c.IOptionsService),C(7,c.IBufferService),C(8,k.ICoreBrowserService),C(9,k.IThemeService)],X)},3787:function(q,d,m){var _=this&&this.__decorate||function(R,O,b,M){var U,X=arguments.length,F=X<3?O:M===null?M=Object.getOwnPropertyDescriptor(O,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(R,O,b,M);else for(var V=R.length-1;V>=0;V--)(U=R[V])&&(F=(X<3?U(F):X>3?U(O,b,F):U(O,b))||F);return X>3&&F&&Object.defineProperty(O,b,F),F},C=this&&this.__param||function(R,O){return function(b,M){O(b,M,R)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRendererRowFactory=void 0;const v=m(2223),x=m(643),T=m(511),A=m(2585),k=m(8055),l=m(4725),u=m(4269),o=m(6171),c=m(3734);let g=d.DomRendererRowFactory=class{constructor(R,O,b,M,U,X,F){this._document=R,this._characterJoinerService=O,this._optionsService=b,this._coreBrowserService=M,this._coreService=U,this._decorationService=X,this._themeService=F,this._workCell=new T.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(R,O,b){this._selectionStart=R,this._selectionEnd=O,this._columnSelectMode=b}createRow(R,O,b,M,U,X,F,V,J,ae,$){const se=[],L=this._characterJoinerService.getJoinedCharacters(O),I=this._themeService.colors;let W,j=R.getNoBgTrimmedLength();b&&j<X+1&&(j=X+1);let Q=0,Z="",_e=0,xe=0,Ae=0,B=!1,ie=0,de=!1,fe=0;const ze=[],ke=ae!==-1&&$!==-1;for(let Ve=0;Ve<j;Ve++){R.loadCell(Ve,this._workCell);let qe=this._workCell.getWidth();if(qe===0)continue;let Nt=!1,xt=Ve,Pe=this._workCell;if(L.length>0&&Ve===L[0][0]){Nt=!0;const ot=L.shift();Pe=new u.JoinedCellData(this._workCell,R.translateToString(!0,ot[0],ot[1]),ot[1]-ot[0]),xt=ot[1]-1,qe=Pe.getWidth()}const Tt=this._isCellInSelection(Ve,O),Is=b&&Ve===X,gt=ke&&Ve>=ae&&Ve<=$;let yi=!1;this._decorationService.forEachDecorationAtCell(Ve,O,void 0,(ot=>{yi=!0}));let Qe=Pe.getChars()||x.WHITESPACE_CELL_CHAR;if(Qe===" "&&(Pe.isUnderline()||Pe.isOverline())&&(Qe=""),fe=qe*V-J.get(Qe,Pe.isBold(),Pe.isItalic()),W){if(Q&&(Tt&&de||!Tt&&!de&&Pe.bg===_e)&&(Tt&&de&&I.selectionForeground||Pe.fg===xe)&&Pe.extended.ext===Ae&&gt===B&&fe===ie&&!Is&&!Nt&&!yi){Z+=Qe,Q++;continue}Q&&(W.textContent=Z),W=this._document.createElement("span"),Q=0,Z=""}else W=this._document.createElement("span");if(_e=Pe.bg,xe=Pe.fg,Ae=Pe.extended.ext,B=gt,ie=fe,de=Tt,Nt&&X>=Ve&&X<=xt&&(X=Ve),!this._coreService.isCursorHidden&&Is){if(ze.push("xterm-cursor"),this._coreBrowserService.isFocused)F&&ze.push("xterm-cursor-blink"),ze.push(M==="bar"?"xterm-cursor-bar":M==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(U)switch(U){case"outline":ze.push("xterm-cursor-outline");break;case"block":ze.push("xterm-cursor-block");break;case"bar":ze.push("xterm-cursor-bar");break;case"underline":ze.push("xterm-cursor-underline")}}if(Pe.isBold()&&ze.push("xterm-bold"),Pe.isItalic()&&ze.push("xterm-italic"),Pe.isDim()&&ze.push("xterm-dim"),Z=Pe.isInvisible()?x.WHITESPACE_CELL_CHAR:Pe.getChars()||x.WHITESPACE_CELL_CHAR,Pe.isUnderline()&&(ze.push(`xterm-underline-${Pe.extended.underlineStyle}`),Z===" "&&(Z=""),!Pe.isUnderlineColorDefault()))if(Pe.isUnderlineColorRGB())W.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(Pe.getUnderlineColor()).join(",")})`;else{let ot=Pe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Pe.isBold()&&ot<8&&(ot+=8),W.style.textDecorationColor=I.ansi[ot].css}Pe.isOverline()&&(ze.push("xterm-overline"),Z===" "&&(Z="")),Pe.isStrikethrough()&&ze.push("xterm-strikethrough"),gt&&(W.style.textDecoration="underline");let Qt=Pe.getFgColor(),Bt=Pe.getFgColorMode(),ri=Pe.getBgColor(),ai=Pe.getBgColorMode();const gs=!!Pe.isInverse();if(gs){const ot=Qt;Qt=ri,ri=ot;const rs=Bt;Bt=ai,ai=rs}let di,Qn,Li,ns=!1;switch(this._decorationService.forEachDecorationAtCell(Ve,O,void 0,(ot=>{ot.options.layer!=="top"&&ns||(ot.backgroundColorRGB&&(ai=50331648,ri=ot.backgroundColorRGB.rgba>>8&16777215,di=ot.backgroundColorRGB),ot.foregroundColorRGB&&(Bt=50331648,Qt=ot.foregroundColorRGB.rgba>>8&16777215,Qn=ot.foregroundColorRGB),ns=ot.options.layer==="top")})),!ns&&Tt&&(di=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ri=di.rgba>>8&16777215,ai=50331648,ns=!0,I.selectionForeground&&(Bt=50331648,Qt=I.selectionForeground.rgba>>8&16777215,Qn=I.selectionForeground)),ns&&ze.push("xterm-decoration-top"),ai){case 16777216:case 33554432:Li=I.ansi[ri],ze.push(`xterm-bg-${ri}`);break;case 50331648:Li=k.rgba.toColor(ri>>16,ri>>8&255,255&ri),this._addStyle(W,`background-color:#${S((ri>>>0).toString(16),"0",6)}`);break;default:gs?(Li=I.foreground,ze.push(`xterm-bg-${v.INVERTED_DEFAULT_COLOR}`)):Li=I.background}switch(di||Pe.isDim()&&(di=k.color.multiplyOpacity(Li,.5)),Bt){case 16777216:case 33554432:Pe.isBold()&&Qt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Qt+=8),this._applyMinimumContrast(W,Li,I.ansi[Qt],Pe,di,void 0)||ze.push(`xterm-fg-${Qt}`);break;case 50331648:const ot=k.rgba.toColor(Qt>>16&255,Qt>>8&255,255&Qt);this._applyMinimumContrast(W,Li,ot,Pe,di,Qn)||this._addStyle(W,`color:#${S(Qt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(W,Li,I.foreground,Pe,di,void 0)||gs&&ze.push(`xterm-fg-${v.INVERTED_DEFAULT_COLOR}`)}ze.length&&(W.className=ze.join(" "),ze.length=0),Is||Nt||yi?W.textContent=Z:Q++,fe!==this.defaultSpacing&&(W.style.letterSpacing=`${fe}px`),se.push(W),Ve=xt}return W&&Q&&(W.textContent=Z),se}_applyMinimumContrast(R,O,b,M,U,X){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(M.getCode()))return!1;const F=this._getContrastCache(M);let V;if(U||X||(V=F.getColor(O.rgba,b.rgba)),V===void 0){const J=this._optionsService.rawOptions.minimumContrastRatio/(M.isDim()?2:1);V=k.color.ensureContrastRatio(U||O,X||b,J),F.setColor((U||O).rgba,(X||b).rgba,V??null)}return!!V&&(this._addStyle(R,`color:${V.css}`),!0)}_getContrastCache(R){return R.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(R,O){R.setAttribute("style",`${R.getAttribute("style")||""}${O};`)}_isCellInSelection(R,O){const b=this._selectionStart,M=this._selectionEnd;return!(!b||!M)&&(this._columnSelectMode?b[0]<=M[0]?R>=b[0]&&O>=b[1]&&R<M[0]&&O<=M[1]:R<b[0]&&O>=b[1]&&R>=M[0]&&O<=M[1]:O>b[1]&&O<M[1]||b[1]===M[1]&&O===b[1]&&R>=b[0]&&R<M[0]||b[1]<M[1]&&O===M[1]&&R<M[0]||b[1]<M[1]&&O===b[1]&&R>=b[0])}};function S(R,O,b){for(;R.length<b;)R=O+R;return R}d.DomRendererRowFactory=g=_([C(1,l.ICharacterJoinerService),C(2,A.IOptionsService),C(3,l.ICoreBrowserService),C(4,A.ICoreService),C(5,A.IDecorationService),C(6,l.IThemeService)],g)},2550:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WidthCache=void 0,d.WidthCache=class{constructor(m){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=m.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=m.createElement("span"),C=m.createElement("span");C.style.fontWeight="bold";const v=m.createElement("span");v.style.fontStyle="italic";const x=m.createElement("span");x.style.fontWeight="bold",x.style.fontStyle="italic",this._measureElements=[_,C,v,x],this._container.appendChild(_),this._container.appendChild(C),this._container.appendChild(v),this._container.appendChild(x),m.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(m,_,C,v){m===this._font&&_===this._fontSize&&C===this._weight&&v===this._weightBold||(this._font=m,this._fontSize=_,this._weight=C,this._weightBold=v,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${C}`,this._measureElements[1].style.fontWeight=`${v}`,this._measureElements[2].style.fontWeight=`${C}`,this._measureElements[3].style.fontWeight=`${v}`,this.clear())}get(m,_,C){let v=0;if(!_&&!C&&m.length===1&&(v=m.charCodeAt(0))<256)return this._flat[v]!==-9999?this._flat[v]:this._flat[v]=this._measure(m,0);let x=m;_&&(x+="B"),C&&(x+="I");let T=this._holey.get(x);if(T===void 0){let A=0;_&&(A|=1),C&&(A|=2),T=this._measure(m,A),this._holey.set(x,T)}return T}_measure(m,_){const C=this._measureElements[_];return C.textContent=m.repeat(32),C.offsetWidth/32}}},2223:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT_BASELINE=d.DIM_OPACITY=d.INVERTED_DEFAULT_COLOR=void 0;const _=m(6114);d.INVERTED_DEFAULT_COLOR=257,d.DIM_OPACITY=.5,d.TEXT_BASELINE=_.isFirefox||_.isLegacyEdge?"bottom":"ideographic"},6171:(q,d)=>{function m(_){return 57508<=_&&_<=57558}Object.defineProperty(d,"__esModule",{value:!0}),d.createRenderDimensions=d.excludeFromContrastRatioDemands=d.isRestrictedPowerlineGlyph=d.isPowerlineGlyph=d.throwIfFalsy=void 0,d.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},d.isPowerlineGlyph=m,d.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},d.excludeFromContrastRatioDemands=function(_){return m(_)||(function(C){return 9472<=C&&C<=9631})(_)},d.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionModel=void 0,d.SelectionModel=class{constructor(m){this._bufferService=m,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const m=this.selectionStart[0]+this.selectionStartLength;return m>this._bufferService.cols?m%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)-1]:[m%this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)]:[m,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const m=this.selectionStart[0]+this.selectionStartLength;return m>this._bufferService.cols?[m%this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)]:[Math.max(m,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const m=this.selectionStart,_=this.selectionEnd;return!(!m||!_)&&(m[1]>_[1]||m[1]===_[1]&&m[0]>_[0])}handleTrim(m){return this.selectionStart&&(this.selectionStart[1]-=m),this.selectionEnd&&(this.selectionEnd[1]-=m),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(q,d,m){var _=this&&this.__decorate||function(l,u,o,c){var g,S=arguments.length,R=S<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,u,o,c);else for(var O=l.length-1;O>=0;O--)(g=l[O])&&(R=(S<3?g(R):S>3?g(u,o,R):g(u,o))||R);return S>3&&R&&Object.defineProperty(u,o,R),R},C=this&&this.__param||function(l,u){return function(o,c){u(o,c,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharSizeService=void 0;const v=m(2585),x=m(8460),T=m(844);let A=d.CharSizeService=class extends T.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,u,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new x.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new k(l,u,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};d.CharSizeService=A=_([C(2,v.IOptionsService)],A);class k{constructor(u,o,c){this._document=u,this._parentElement=o,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const u={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return u.width!==0&&u.height!==0&&(this._result.width=u.width/32,this._result.height=Math.ceil(u.height)),this._result}}},4269:function(q,d,m){var _=this&&this.__decorate||function(u,o,c,g){var S,R=arguments.length,O=R<3?o:g===null?g=Object.getOwnPropertyDescriptor(o,c):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(u,o,c,g);else for(var b=u.length-1;b>=0;b--)(S=u[b])&&(O=(R<3?S(O):R>3?S(o,c,O):S(o,c))||O);return R>3&&O&&Object.defineProperty(o,c,O),O},C=this&&this.__param||function(u,o){return function(c,g){o(c,g,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharacterJoinerService=d.JoinedCellData=void 0;const v=m(3734),x=m(643),T=m(511),A=m(2585);class k extends v.AttributeData{constructor(o,c,g){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}d.JoinedCellData=k;let l=d.CharacterJoinerService=class Pm{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new T.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const g=[],S=c.translateToString(!0);let R=0,O=0,b=0,M=c.getFg(0),U=c.getBg(0);for(let X=0;X<c.getTrimmedLength();X++)if(c.loadCell(X,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==U){if(X-R>1){const F=this._getJoinedRanges(S,b,O,c,R);for(let V=0;V<F.length;V++)g.push(F[V])}R=X,b=O,M=this._workCell.fg,U=this._workCell.bg}O+=this._workCell.getChars().length||x.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-R>1){const X=this._getJoinedRanges(S,b,O,c,R);for(let F=0;F<X.length;F++)g.push(X[F])}return g}_getJoinedRanges(o,c,g,S,R){const O=o.substring(c,g);let b=[];try{b=this._characterJoiners[0].handler(O)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const U=this._characterJoiners[M].handler(O);for(let X=0;X<U.length;X++)Pm._mergeRanges(b,U[X])}catch(U){console.error(U)}return this._stringRangesToCellRanges(b,S,R),b}_stringRangesToCellRanges(o,c,g){let S=0,R=!1,O=0,b=o[S];if(b){for(let M=g;M<this._bufferService.cols;M++){const U=c.getWidth(M),X=c.getString(M).length||x.WHITESPACE_CELL_CHAR.length;if(U!==0){if(!R&&b[0]<=O&&(b[0]=M,R=!0),b[1]<=O){if(b[1]=M,b=o[++S],!b)break;b[0]<=O?(b[0]=M,R=!0):R=!1}O+=X}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let g=!1;for(let S=0;S<o.length;S++){const R=o[S];if(g){if(c[1]<=R[0])return o[S-1][1]=c[1],o;if(c[1]<=R[1])return o[S-1][1]=Math.max(c[1],R[1]),o.splice(S,1),o;o.splice(S,1),S--}else{if(c[1]<=R[0])return o.splice(S,0,c),o;if(c[1]<=R[1])return R[0]=Math.min(c[0],R[0]),o;c[0]<R[1]&&(R[0]=Math.min(c[0],R[0]),g=!0)}}return g?o[o.length-1][1]=c[1]:o.push(c),o}};d.CharacterJoinerService=l=_([C(0,A.IBufferService)],l)},5114:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CoreBrowserService=void 0,d.CoreBrowserService=class{constructor(m,_){this._textarea=m,this.window=_,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(q,d,m){var _=this&&this.__decorate||function(A,k,l,u){var o,c=arguments.length,g=c<3?k:u===null?u=Object.getOwnPropertyDescriptor(k,l):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(A,k,l,u);else for(var S=A.length-1;S>=0;S--)(o=A[S])&&(g=(c<3?o(g):c>3?o(k,l,g):o(k,l))||g);return c>3&&g&&Object.defineProperty(k,l,g),g},C=this&&this.__param||function(A,k){return function(l,u){k(l,u,A)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseService=void 0;const v=m(4725),x=m(9806);let T=d.MouseService=class{constructor(A,k){this._renderService=A,this._charSizeService=k}getCoords(A,k,l,u,o){return(0,x.getCoords)(window,A,k,l,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(A,k){const l=(0,x.getCoordsRelativeToElement)(window,A,k);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};d.MouseService=T=_([C(0,v.IRenderService),C(1,v.ICharSizeService)],T)},3230:function(q,d,m){var _=this&&this.__decorate||function(g,S,R,O){var b,M=arguments.length,U=M<3?S:O===null?O=Object.getOwnPropertyDescriptor(S,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(g,S,R,O);else for(var X=g.length-1;X>=0;X--)(b=g[X])&&(U=(M<3?b(U):M>3?b(S,R,U):b(S,R))||U);return M>3&&U&&Object.defineProperty(S,R,U),U},C=this&&this.__param||function(g,S){return function(R,O){S(R,O,g)}};Object.defineProperty(d,"__esModule",{value:!0}),d.RenderService=void 0;const v=m(3656),x=m(6193),T=m(5596),A=m(4725),k=m(8460),l=m(844),u=m(7226),o=m(2585);let c=d.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,S,R,O,b,M,U,X){if(super(),this._rowCount=g,this._charSizeService=O,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new k.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new k.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new k.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new k.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new x.RenderDebouncer(U.window,((F,V)=>this._renderRows(F,V))),this.register(this._renderDebouncer),this._screenDprMonitor=new T.ScreenDprMonitor(U.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(M.onResize((()=>this._fullRefresh()))),this.register(M.buffers.onBufferActivate((()=>{var F;return(F=this._renderer.value)===null||F===void 0?void 0:F.clear()}))),this.register(R.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(b.onDecorationRegistered((()=>this._fullRefresh()))),this.register(b.onDecorationRemoved((()=>this._fullRefresh()))),this.register(R.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(M.cols,M.rows),this._fullRefresh()}))),this.register(R.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(M.buffer.y,M.buffer.y,!0)))),this.register((0,v.addDisposableDomListener)(U.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(X.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in U.window){const F=new U.window.IntersectionObserver((V=>this._handleIntersectionChange(V[V.length-1])),{threshold:0});F.observe(S),this.register({dispose:()=>F.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,S,R=!1){this._isPaused?this._needsFullRefresh=!0:(R||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,S,this._rowCount))}_renderRows(g,S){this._renderer.value&&(g=Math.min(g,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(g,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:S}),this._onRender.fire({start:g,end:S}),this._isNextRenderRedrawOnly=!0)}resize(g,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw((S=>this.refreshRows(S.start,S.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,S;this._renderer.value&&((S=(g=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(g,S))):this._renderer.value.handleResize(g,S),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,S,R){var O;this._selectionState.start=g,this._selectionState.end=S,this._selectionState.columnSelectMode=R,(O=this._renderer.value)===null||O===void 0||O.handleSelectionChanged(g,S,R)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};d.RenderService=c=_([C(2,o.IOptionsService),C(3,A.ICharSizeService),C(4,o.IDecorationService),C(5,o.IBufferService),C(6,A.ICoreBrowserService),C(7,A.IThemeService)],c)},9312:function(q,d,m){var _=this&&this.__decorate||function(b,M,U,X){var F,V=arguments.length,J=V<3?M:X===null?X=Object.getOwnPropertyDescriptor(M,U):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(b,M,U,X);else for(var ae=b.length-1;ae>=0;ae--)(F=b[ae])&&(J=(V<3?F(J):V>3?F(M,U,J):F(M,U))||J);return V>3&&J&&Object.defineProperty(M,U,J),J},C=this&&this.__param||function(b,M){return function(U,X){M(U,X,b)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionService=void 0;const v=m(9806),x=m(9504),T=m(456),A=m(4725),k=m(8460),l=m(844),u=m(6114),o=m(4841),c=m(511),g=m(2585),S="",R=new RegExp(S,"g");let O=d.SelectionService=class extends l.Disposable{constructor(b,M,U,X,F,V,J,ae,$){super(),this._element=b,this._screenElement=M,this._linkifier=U,this._bufferService=X,this._coreService=F,this._mouseService=V,this._optionsService=J,this._renderService=ae,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new k.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new k.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new k.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new k.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=se=>this._handleMouseMove(se),this._mouseUpListener=se=>this._handleMouseUp(se),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((se=>this._handleTrim(se))),this.register(this._bufferService.buffers.onBufferActivate((se=>this._handleBufferActivate(se)))),this.enable(),this._model=new T.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!b||!M||b[0]===M[0]&&b[1]===M[1])}get selectionText(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;if(!b||!M)return"";const U=this._bufferService.buffer,X=[];if(this._activeSelectionMode===3){if(b[0]===M[0])return"";const F=b[0]<M[0]?b[0]:M[0],V=b[0]<M[0]?M[0]:b[0];for(let J=b[1];J<=M[1];J++){const ae=U.translateBufferLineToString(J,!0,F,V);X.push(ae)}}else{const F=b[1]===M[1]?M[0]:void 0;X.push(U.translateBufferLineToString(b[1],!0,b[0],F));for(let V=b[1]+1;V<=M[1]-1;V++){const J=U.lines.get(V),ae=U.translateBufferLineToString(V,!0);J?.isWrapped?X[X.length-1]+=ae:X.push(ae)}if(b[1]!==M[1]){const V=U.lines.get(M[1]),J=U.translateBufferLineToString(M[1],!0,0,M[0]);V&&V.isWrapped?X[X.length-1]+=J:X.push(J)}}return X.map((F=>F.replace(R," "))).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),u.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const M=this._getMouseBufferCoords(b),U=this._model.finalSelectionStart,X=this._model.finalSelectionEnd;return!!(U&&X&&M)&&this._areCoordsInSelection(M,U,X)}isCellInSelection(b,M){const U=this._model.finalSelectionStart,X=this._model.finalSelectionEnd;return!(!U||!X)&&this._areCoordsInSelection([b,M],U,X)}_areCoordsInSelection(b,M,U){return b[1]>M[1]&&b[1]<U[1]||M[1]===U[1]&&b[1]===M[1]&&b[0]>=M[0]&&b[0]<U[0]||M[1]<U[1]&&b[1]===U[1]&&b[0]<U[0]||M[1]<U[1]&&b[1]===M[1]&&b[0]>=M[0]}_selectWordAtCursor(b,M){var U,X;const F=(X=(U=this._linkifier.currentLink)===null||U===void 0?void 0:U.link)===null||X===void 0?void 0:X.range;if(F)return this._model.selectionStart=[F.start.x-1,F.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(F,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const V=this._getMouseBufferCoords(b);return!!V&&(this._selectWordAt(V,M),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,M){this._model.clearSelection(),b=Math.max(b,0),M=Math.min(M,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,M],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const M=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(M)return M[0]--,M[1]--,M[1]+=this._bufferService.buffer.ydisp,M}_getMouseEventScrollAmount(b){let M=(0,v.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const U=this._renderService.dimensions.css.canvas.height;return M>=0&&M<=U?0:(M>U&&(M-=U),M=Math.min(Math.max(M,-50),50),M/=50,M/Math.abs(M)+Math.round(14*M))}shouldForceSelection(b){return u.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const M=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);M&&M.length!==this._model.selectionStart[0]&&M.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const M=this._getMouseBufferCoords(b);M&&(this._activeSelectionMode=2,this._selectLineAt(M[1]))}shouldColumnSelect(b){return b.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const M=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const U=this._bufferService.buffer;if(this._model.selectionEnd[1]<U.lines.length){const X=U.lines.get(this._model.selectionEnd[1]);X&&X.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}M&&M[0]===this._model.selectionEnd[0]&&M[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const M=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&M<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const U=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(U&&U[0]!==void 0&&U[1]!==void 0){const X=(0,x.moveToCellSequence)(U[0]-1,U[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(X,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd,U=!(!b||!M||b[0]===M[0]&&b[1]===M[1]);U?b&&M&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&M[0]===this._oldSelectionEnd[0]&&M[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,M,U)):this._oldHasSelection&&this._fireOnSelectionChange(b,M,U)}_fireOnSelectionChange(b,M,U){this._oldSelectionStart=b,this._oldSelectionEnd=M,this._oldHasSelection=U,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim((M=>this._handleTrim(M)))}_convertViewportColToCharacterIndex(b,M){let U=M;for(let X=0;M>=X;X++){const F=b.loadCell(X,this._workCell).getChars().length;this._workCell.getWidth()===0?U--:F>1&&M!==X&&(U+=F-1)}return U}setSelection(b,M,U){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,M],this._model.selectionStartLength=U,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,M,U=!0,X=!0){if(b[0]>=this._bufferService.cols)return;const F=this._bufferService.buffer,V=F.lines.get(b[1]);if(!V)return;const J=F.translateBufferLineToString(b[1],!1);let ae=this._convertViewportColToCharacterIndex(V,b[0]),$=ae;const se=b[0]-ae;let L=0,I=0,W=0,j=0;if(J.charAt(ae)===" "){for(;ae>0&&J.charAt(ae-1)===" ";)ae--;for(;$<J.length&&J.charAt($+1)===" ";)$++}else{let _e=b[0],xe=b[0];V.getWidth(_e)===0&&(L++,_e--),V.getWidth(xe)===2&&(I++,xe++);const Ae=V.getString(xe).length;for(Ae>1&&(j+=Ae-1,$+=Ae-1);_e>0&&ae>0&&!this._isCharWordSeparator(V.loadCell(_e-1,this._workCell));){V.loadCell(_e-1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,_e--):B>1&&(W+=B-1,ae-=B-1),ae--,_e--}for(;xe<V.length&&$+1<J.length&&!this._isCharWordSeparator(V.loadCell(xe+1,this._workCell));){V.loadCell(xe+1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,xe++):B>1&&(j+=B-1,$+=B-1),$++,xe++}}$++;let Q=ae+se-L+W,Z=Math.min(this._bufferService.cols,$-ae+L+I-W-j);if(M||J.slice(ae,$).trim()!==""){if(U&&Q===0&&V.getCodePoint(0)!==32){const _e=F.lines.get(b[1]-1);if(_e&&V.isWrapped&&_e.getCodePoint(this._bufferService.cols-1)!==32){const xe=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(xe){const Ae=this._bufferService.cols-xe.start;Q-=Ae,Z+=Ae}}}if(X&&Q+Z===this._bufferService.cols&&V.getCodePoint(this._bufferService.cols-1)!==32){const _e=F.lines.get(b[1]+1);if(_e?.isWrapped&&_e.getCodePoint(0)!==32){const xe=this._getWordAt([0,b[1]+1],!1,!1,!0);xe&&(Z+=xe.length)}}return{start:Q,length:Z}}}_selectWordAt(b,M){const U=this._getWordAt(b,M);if(U){for(;U.start<0;)U.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[U.start,b[1]],this._model.selectionStartLength=U.length}}_selectToWordAt(b){const M=this._getWordAt(b,!0);if(M){let U=b[1];for(;M.start<0;)M.start+=this._bufferService.cols,U--;if(!this._model.areSelectionValuesReversed())for(;M.start+M.length>this._bufferService.cols;)M.length-=this._bufferService.cols,U++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?M.start:M.start+M.length,U]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const M=this._bufferService.buffer.getWrappedRangeForLine(b),U={start:{x:0,y:M.first},end:{x:this._bufferService.cols-1,y:M.last}};this._model.selectionStart=[0,M.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(U,this._bufferService.cols)}};d.SelectionService=O=_([C(3,g.IBufferService),C(4,g.ICoreService),C(5,A.IMouseService),C(6,g.IOptionsService),C(7,A.IRenderService),C(8,A.ICoreBrowserService)],O)},4725:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.IThemeService=d.ICharacterJoinerService=d.ISelectionService=d.IRenderService=d.IMouseService=d.ICoreBrowserService=d.ICharSizeService=void 0;const _=m(8343);d.ICharSizeService=(0,_.createDecorator)("CharSizeService"),d.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),d.IMouseService=(0,_.createDecorator)("MouseService"),d.IRenderService=(0,_.createDecorator)("RenderService"),d.ISelectionService=(0,_.createDecorator)("SelectionService"),d.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService"),d.IThemeService=(0,_.createDecorator)("ThemeService")},6731:function(q,d,m){var _=this&&this.__decorate||function(O,b,M,U){var X,F=arguments.length,V=F<3?b:U===null?U=Object.getOwnPropertyDescriptor(b,M):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(O,b,M,U);else for(var J=O.length-1;J>=0;J--)(X=O[J])&&(V=(F<3?X(V):F>3?X(b,M,V):X(b,M))||V);return F>3&&V&&Object.defineProperty(b,M,V),V},C=this&&this.__param||function(O,b){return function(M,U){b(M,U,O)}};Object.defineProperty(d,"__esModule",{value:!0}),d.ThemeService=d.DEFAULT_ANSI_COLORS=void 0;const v=m(7239),x=m(8055),T=m(8460),A=m(844),k=m(2585),l=x.css.toColor("#ffffff"),u=x.css.toColor("#000000"),o=x.css.toColor("#ffffff"),c=x.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};d.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const O=[x.css.toColor("#2e3436"),x.css.toColor("#cc0000"),x.css.toColor("#4e9a06"),x.css.toColor("#c4a000"),x.css.toColor("#3465a4"),x.css.toColor("#75507b"),x.css.toColor("#06989a"),x.css.toColor("#d3d7cf"),x.css.toColor("#555753"),x.css.toColor("#ef2929"),x.css.toColor("#8ae234"),x.css.toColor("#fce94f"),x.css.toColor("#729fcf"),x.css.toColor("#ad7fa8"),x.css.toColor("#34e2e2"),x.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let M=0;M<216;M++){const U=b[M/36%6|0],X=b[M/6%6|0],F=b[M%6];O.push({css:x.channels.toCss(U,X,F),rgba:x.channels.toRgba(U,X,F)})}for(let M=0;M<24;M++){const U=8+10*M;O.push({css:x.channels.toCss(U,U,U),rgba:x.channels.toRgba(U,U,U)})}return O})());let S=d.ThemeService=class extends A.Disposable{get colors(){return this._colors}constructor(O){super(),this._optionsService=O,this._contrastCache=new v.ColorContrastCache,this._halfContrastCache=new v.ColorContrastCache,this._onChangeColors=this.register(new T.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:u,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:x.color.blend(u,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:x.color.blend(u,g),ansi:d.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(O={}){const b=this._colors;if(b.foreground=R(O.foreground,l),b.background=R(O.background,u),b.cursor=R(O.cursor,o),b.cursorAccent=R(O.cursorAccent,c),b.selectionBackgroundTransparent=R(O.selectionBackground,g),b.selectionBackgroundOpaque=x.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=R(O.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=x.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=O.selectionForeground?R(O.selectionForeground,x.NULL_COLOR):void 0,b.selectionForeground===x.NULL_COLOR&&(b.selectionForeground=void 0),x.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=x.color.opacity(b.selectionBackgroundTransparent,.3)),x.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=x.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=d.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=R(O.black,d.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=R(O.red,d.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=R(O.green,d.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=R(O.yellow,d.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=R(O.blue,d.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=R(O.magenta,d.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=R(O.cyan,d.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=R(O.white,d.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=R(O.brightBlack,d.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=R(O.brightRed,d.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=R(O.brightGreen,d.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=R(O.brightYellow,d.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=R(O.brightBlue,d.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=R(O.brightMagenta,d.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=R(O.brightCyan,d.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=R(O.brightWhite,d.DEFAULT_ANSI_COLORS[15]),O.extendedAnsi){const M=Math.min(b.ansi.length-16,O.extendedAnsi.length);for(let U=0;U<M;U++)b.ansi[U+16]=R(O.extendedAnsi[U],d.DEFAULT_ANSI_COLORS[U+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(O){this._restoreColor(O),this._onChangeColors.fire(this.colors)}_restoreColor(O){if(O!==void 0)switch(O){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[O]=this._restoreColors.ansi[O]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(O){O(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function R(O,b){if(O!==void 0)try{return x.css.toColor(O)}catch{}return b}d.ThemeService=S=_([C(0,k.IOptionsService)],S)},6349:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CircularList=void 0;const _=m(8460),C=m(844);class v extends C.Disposable{constructor(T){super(),this._maxLength=T,this.onDeleteEmitter=this.register(new _.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new _.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new _.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(T){if(this._maxLength===T)return;const A=new Array(T);for(let k=0;k<Math.min(T,this.length);k++)A[k]=this._array[this._getCyclicIndex(k)];this._array=A,this._maxLength=T,this._startIndex=0}get length(){return this._length}set length(T){if(T>this._length)for(let A=this._length;A<T;A++)this._array[A]=void 0;this._length=T}get(T){return this._array[this._getCyclicIndex(T)]}set(T,A){this._array[this._getCyclicIndex(T)]=A}push(T){this._array[this._getCyclicIndex(this._length)]=T,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(T,A,...k){if(A){for(let l=T;l<this._length-A;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+A)];this._length-=A,this.onDeleteEmitter.fire({index:T,amount:A})}for(let l=this._length-1;l>=T;l--)this._array[this._getCyclicIndex(l+k.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<k.length;l++)this._array[this._getCyclicIndex(T+l)]=k[l];if(k.length&&this.onInsertEmitter.fire({index:T,amount:k.length}),this._length+k.length>this._maxLength){const l=this._length+k.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=k.length}trimStart(T){T>this._length&&(T=this._length),this._startIndex+=T,this._length-=T,this.onTrimEmitter.fire(T)}shiftElements(T,A,k){if(!(A<=0)){if(T<0||T>=this._length)throw new Error("start argument out of range");if(T+k<0)throw new Error("Cannot shift elements in list beyond index 0");if(k>0){for(let u=A-1;u>=0;u--)this.set(T+u+k,this.get(T+u));const l=T+A+k-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<A;l++)this.set(T+l+k,this.get(T+l))}}_getCyclicIndex(T){return(this._startIndex+T)%this._maxLength}}d.CircularList=v},1439:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.clone=void 0,d.clone=function m(_,C=5){if(typeof _!="object")return _;const v=Array.isArray(_)?[]:{};for(const x in _)v[x]=C<=1?_[x]:_[x]&&m(_[x],C-1);return v}},8055:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.contrastRatio=d.toPaddedHex=d.rgba=d.rgb=d.css=d.color=d.channels=d.NULL_COLOR=void 0;const _=m(6114);let C=0,v=0,x=0,T=0;var A,k,l,u,o;function c(S){const R=S.toString(16);return R.length<2?"0"+R:R}function g(S,R){return S<R?(R+.05)/(S+.05):(S+.05)/(R+.05)}d.NULL_COLOR={css:"#00000000",rgba:0},(function(S){S.toCss=function(R,O,b,M){return M!==void 0?`#${c(R)}${c(O)}${c(b)}${c(M)}`:`#${c(R)}${c(O)}${c(b)}`},S.toRgba=function(R,O,b,M=255){return(R<<24|O<<16|b<<8|M)>>>0}})(A||(d.channels=A={})),(function(S){function R(O,b){return T=Math.round(255*b),[C,v,x]=o.toChannels(O.rgba),{css:A.toCss(C,v,x,T),rgba:A.toRgba(C,v,x,T)}}S.blend=function(O,b){if(T=(255&b.rgba)/255,T===1)return{css:b.css,rgba:b.rgba};const M=b.rgba>>24&255,U=b.rgba>>16&255,X=b.rgba>>8&255,F=O.rgba>>24&255,V=O.rgba>>16&255,J=O.rgba>>8&255;return C=F+Math.round((M-F)*T),v=V+Math.round((U-V)*T),x=J+Math.round((X-J)*T),{css:A.toCss(C,v,x),rgba:A.toRgba(C,v,x)}},S.isOpaque=function(O){return(255&O.rgba)==255},S.ensureContrastRatio=function(O,b,M){const U=o.ensureContrastRatio(O.rgba,b.rgba,M);if(U)return o.toColor(U>>24&255,U>>16&255,U>>8&255)},S.opaque=function(O){const b=(255|O.rgba)>>>0;return[C,v,x]=o.toChannels(b),{css:A.toCss(C,v,x),rgba:b}},S.opacity=R,S.multiplyOpacity=function(O,b){return T=255&O.rgba,R(O,T*b/255)},S.toColorRGB=function(O){return[O.rgba>>24&255,O.rgba>>16&255,O.rgba>>8&255]}})(k||(d.color=k={})),(function(S){let R,O;if(!_.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const M=b.getContext("2d",{willReadFrequently:!0});M&&(R=M,R.globalCompositeOperation="copy",O=R.createLinearGradient(0,0,1,1))}S.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return C=parseInt(b.slice(1,2).repeat(2),16),v=parseInt(b.slice(2,3).repeat(2),16),x=parseInt(b.slice(3,4).repeat(2),16),o.toColor(C,v,x);case 5:return C=parseInt(b.slice(1,2).repeat(2),16),v=parseInt(b.slice(2,3).repeat(2),16),x=parseInt(b.slice(3,4).repeat(2),16),T=parseInt(b.slice(4,5).repeat(2),16),o.toColor(C,v,x,T);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const M=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return C=parseInt(M[1]),v=parseInt(M[2]),x=parseInt(M[3]),T=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),o.toColor(C,v,x,T);if(!R||!O)throw new Error("css.toColor: Unsupported css format");if(R.fillStyle=O,R.fillStyle=b,typeof R.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(R.fillRect(0,0,1,1),[C,v,x,T]=R.getImageData(0,0,1,1).data,T!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(C,v,x,T),css:b}}})(l||(d.css=l={})),(function(S){function R(O,b,M){const U=O/255,X=b/255,F=M/255;return .2126*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:Math.pow((X+.055)/1.055,2.4))+.0722*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))}S.relativeLuminance=function(O){return R(O>>16&255,O>>8&255,255&O)},S.relativeLuminance2=R})(u||(d.rgb=u={})),(function(S){function R(b,M,U){const X=b>>24&255,F=b>>16&255,V=b>>8&255;let J=M>>24&255,ae=M>>16&255,$=M>>8&255,se=g(u.relativeLuminance2(J,ae,$),u.relativeLuminance2(X,F,V));for(;se<U&&(J>0||ae>0||$>0);)J-=Math.max(0,Math.ceil(.1*J)),ae-=Math.max(0,Math.ceil(.1*ae)),$-=Math.max(0,Math.ceil(.1*$)),se=g(u.relativeLuminance2(J,ae,$),u.relativeLuminance2(X,F,V));return(J<<24|ae<<16|$<<8|255)>>>0}function O(b,M,U){const X=b>>24&255,F=b>>16&255,V=b>>8&255;let J=M>>24&255,ae=M>>16&255,$=M>>8&255,se=g(u.relativeLuminance2(J,ae,$),u.relativeLuminance2(X,F,V));for(;se<U&&(J<255||ae<255||$<255);)J=Math.min(255,J+Math.ceil(.1*(255-J))),ae=Math.min(255,ae+Math.ceil(.1*(255-ae))),$=Math.min(255,$+Math.ceil(.1*(255-$))),se=g(u.relativeLuminance2(J,ae,$),u.relativeLuminance2(X,F,V));return(J<<24|ae<<16|$<<8|255)>>>0}S.ensureContrastRatio=function(b,M,U){const X=u.relativeLuminance(b>>8),F=u.relativeLuminance(M>>8);if(g(X,F)<U){if(F<X){const ae=R(b,M,U),$=g(X,u.relativeLuminance(ae>>8));if($<U){const se=O(b,M,U);return $>g(X,u.relativeLuminance(se>>8))?ae:se}return ae}const V=O(b,M,U),J=g(X,u.relativeLuminance(V>>8));if(J<U){const ae=R(b,M,U);return J>g(X,u.relativeLuminance(ae>>8))?V:ae}return V}},S.reduceLuminance=R,S.increaseLuminance=O,S.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},S.toColor=function(b,M,U,X){return{css:A.toCss(b,M,U,X),rgba:A.toRgba(b,M,U,X)}}})(o||(d.rgba=o={})),d.toPaddedHex=c,d.contrastRatio=g},8969:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CoreTerminal=void 0;const _=m(844),C=m(2585),v=m(4348),x=m(7866),T=m(744),A=m(7302),k=m(6975),l=m(8460),u=m(1753),o=m(1480),c=m(7994),g=m(9282),S=m(5435),R=m(5981),O=m(2660);let b=!1;class M extends _.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((X=>{var F;(F=this._onScrollApi)===null||F===void 0||F.fire(X.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(X){for(const F in X)this.optionsService.options[F]=X[F]}constructor(X){super(),this._windowsWrappingHeuristics=this.register(new _.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new v.InstantiationService,this.optionsService=this.register(new A.OptionsService(X)),this._instantiationService.setService(C.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(T.BufferService)),this._instantiationService.setService(C.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(x.LogService)),this._instantiationService.setService(C.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(k.CoreService)),this._instantiationService.setService(C.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(C.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(C.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(C.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(O.OscLinkService),this._instantiationService.setService(C.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new R.WriteBuffer(((F,V)=>this._inputHandler.parse(F,V)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(X,F){this._writeBuffer.write(X,F)}writeSync(X,F){this._logService.logLevel<=C.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(X,F)}resize(X,F){isNaN(X)||isNaN(F)||(X=Math.max(X,T.MINIMUM_COLS),F=Math.max(F,T.MINIMUM_ROWS),this._bufferService.resize(X,F))}scroll(X,F=!1){this._bufferService.scroll(X,F)}scrollLines(X,F,V){this._bufferService.scrollLines(X,F,V)}scrollPages(X){this.scrollLines(X*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(X){const F=X-this._bufferService.buffer.ydisp;F!==0&&this.scrollLines(F)}registerEscHandler(X,F){return this._inputHandler.registerEscHandler(X,F)}registerDcsHandler(X,F){return this._inputHandler.registerDcsHandler(X,F)}registerCsiHandler(X,F){return this._inputHandler.registerCsiHandler(X,F)}registerOscHandler(X,F){return this._inputHandler.registerOscHandler(X,F)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let X=!1;const F=this.optionsService.rawOptions.windowsPty;F&&F.buildNumber!==void 0&&F.buildNumber!==void 0?X=F.backend==="conpty"&&F.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(X=!0),X?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const X=[];X.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),X.push(this.registerCsiHandler({final:"H"},(()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,_.toDisposable)((()=>{for(const F of X)F.dispose()}))}}}d.CoreTerminal=M},8460:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.forwardEvent=d.EventEmitter=void 0,d.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let _=0;_<this._listeners.length;_++)if(this._listeners[_]===m)return void this._listeners.splice(_,1)}}})),this._event}fire(m,_){const C=[];for(let v=0;v<this._listeners.length;v++)C.push(this._listeners[v]);for(let v=0;v<C.length;v++)C[v].call(void 0,m,_)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},d.forwardEvent=function(m,_){return m((C=>_.fire(C)))}},5435:function(q,d,m){var _=this&&this.__decorate||function(se,L,I,W){var j,Q=arguments.length,Z=Q<3?L:W===null?W=Object.getOwnPropertyDescriptor(L,I):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(se,L,I,W);else for(var _e=se.length-1;_e>=0;_e--)(j=se[_e])&&(Z=(Q<3?j(Z):Q>3?j(L,I,Z):j(L,I))||Z);return Q>3&&Z&&Object.defineProperty(L,I,Z),Z},C=this&&this.__param||function(se,L){return function(I,W){L(I,W,se)}};Object.defineProperty(d,"__esModule",{value:!0}),d.InputHandler=d.WindowsOptionsReportType=void 0;const v=m(2584),x=m(7116),T=m(2015),A=m(844),k=m(482),l=m(8437),u=m(8460),o=m(643),c=m(511),g=m(3734),S=m(2585),R=m(6242),O=m(6351),b=m(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},U=131072;function X(se,L){if(se>24)return L.setWinLines||!1;switch(se){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var F;(function(se){se[se.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",se[se.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(F||(d.WindowsOptionsReportType=F={}));let V=0;class J extends A.Disposable{getAttrData(){return this._curAttrData}constructor(L,I,W,j,Q,Z,_e,xe,Ae=new T.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=I,this._coreService=W,this._logService=j,this._optionsService=Q,this._oscLinkService=Z,this._coreMouseService=_e,this._unicodeService=xe,this._parser=Ae,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new k.StringToUtf32,this._utf8Decoder=new k.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ae(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._parser.setCsiHandlerFallback(((B,ie)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:ie.toArray()})})),this._parser.setEscHandlerFallback((B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})})),this._parser.setExecuteHandlerFallback((B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})})),this._parser.setOscHandlerFallback(((B,ie,de)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:ie,data:de})})),this._parser.setDcsHandlerFallback(((B,ie,de)=>{ie==="HOOK"&&(de=de.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:ie,payload:de})})),this._parser.setPrintHandler(((B,ie,de)=>this.print(B,ie,de))),this._parser.registerCsiHandler({final:"@"},(B=>this.insertChars(B))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(B=>this.scrollLeft(B))),this._parser.registerCsiHandler({final:"A"},(B=>this.cursorUp(B))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(B=>this.scrollRight(B))),this._parser.registerCsiHandler({final:"B"},(B=>this.cursorDown(B))),this._parser.registerCsiHandler({final:"C"},(B=>this.cursorForward(B))),this._parser.registerCsiHandler({final:"D"},(B=>this.cursorBackward(B))),this._parser.registerCsiHandler({final:"E"},(B=>this.cursorNextLine(B))),this._parser.registerCsiHandler({final:"F"},(B=>this.cursorPrecedingLine(B))),this._parser.registerCsiHandler({final:"G"},(B=>this.cursorCharAbsolute(B))),this._parser.registerCsiHandler({final:"H"},(B=>this.cursorPosition(B))),this._parser.registerCsiHandler({final:"I"},(B=>this.cursorForwardTab(B))),this._parser.registerCsiHandler({final:"J"},(B=>this.eraseInDisplay(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(B=>this.eraseInDisplay(B,!0))),this._parser.registerCsiHandler({final:"K"},(B=>this.eraseInLine(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(B=>this.eraseInLine(B,!0))),this._parser.registerCsiHandler({final:"L"},(B=>this.insertLines(B))),this._parser.registerCsiHandler({final:"M"},(B=>this.deleteLines(B))),this._parser.registerCsiHandler({final:"P"},(B=>this.deleteChars(B))),this._parser.registerCsiHandler({final:"S"},(B=>this.scrollUp(B))),this._parser.registerCsiHandler({final:"T"},(B=>this.scrollDown(B))),this._parser.registerCsiHandler({final:"X"},(B=>this.eraseChars(B))),this._parser.registerCsiHandler({final:"Z"},(B=>this.cursorBackwardTab(B))),this._parser.registerCsiHandler({final:"`"},(B=>this.charPosAbsolute(B))),this._parser.registerCsiHandler({final:"a"},(B=>this.hPositionRelative(B))),this._parser.registerCsiHandler({final:"b"},(B=>this.repeatPrecedingCharacter(B))),this._parser.registerCsiHandler({final:"c"},(B=>this.sendDeviceAttributesPrimary(B))),this._parser.registerCsiHandler({prefix:">",final:"c"},(B=>this.sendDeviceAttributesSecondary(B))),this._parser.registerCsiHandler({final:"d"},(B=>this.linePosAbsolute(B))),this._parser.registerCsiHandler({final:"e"},(B=>this.vPositionRelative(B))),this._parser.registerCsiHandler({final:"f"},(B=>this.hVPosition(B))),this._parser.registerCsiHandler({final:"g"},(B=>this.tabClear(B))),this._parser.registerCsiHandler({final:"h"},(B=>this.setMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(B=>this.setModePrivate(B))),this._parser.registerCsiHandler({final:"l"},(B=>this.resetMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(B=>this.resetModePrivate(B))),this._parser.registerCsiHandler({final:"m"},(B=>this.charAttributes(B))),this._parser.registerCsiHandler({final:"n"},(B=>this.deviceStatus(B))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(B=>this.deviceStatusPrivate(B))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(B=>this.softReset(B))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(B=>this.setCursorStyle(B))),this._parser.registerCsiHandler({final:"r"},(B=>this.setScrollRegion(B))),this._parser.registerCsiHandler({final:"s"},(B=>this.saveCursor(B))),this._parser.registerCsiHandler({final:"t"},(B=>this.windowOptions(B))),this._parser.registerCsiHandler({final:"u"},(B=>this.restoreCursor(B))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(B=>this.insertColumns(B))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(B=>this.deleteColumns(B))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(B=>this.selectProtected(B))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(B=>this.requestMode(B,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(B=>this.requestMode(B,!1))),this._parser.setExecuteHandler(v.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(v.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(v.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(v.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(v.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(v.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(v.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(v.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(v.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(v.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(v.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(v.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new R.OscHandler((B=>(this.setTitle(B),this.setIconName(B),!0)))),this._parser.registerOscHandler(1,new R.OscHandler((B=>this.setIconName(B)))),this._parser.registerOscHandler(2,new R.OscHandler((B=>this.setTitle(B)))),this._parser.registerOscHandler(4,new R.OscHandler((B=>this.setOrReportIndexedColor(B)))),this._parser.registerOscHandler(8,new R.OscHandler((B=>this.setHyperlink(B)))),this._parser.registerOscHandler(10,new R.OscHandler((B=>this.setOrReportFgColor(B)))),this._parser.registerOscHandler(11,new R.OscHandler((B=>this.setOrReportBgColor(B)))),this._parser.registerOscHandler(12,new R.OscHandler((B=>this.setOrReportCursorColor(B)))),this._parser.registerOscHandler(104,new R.OscHandler((B=>this.restoreIndexedColor(B)))),this._parser.registerOscHandler(110,new R.OscHandler((B=>this.restoreFgColor(B)))),this._parser.registerOscHandler(111,new R.OscHandler((B=>this.restoreBgColor(B)))),this._parser.registerOscHandler(112,new R.OscHandler((B=>this.restoreCursorColor(B)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const B in x.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},(()=>this.selectCharset("("+B))),this._parser.registerEscHandler({intermediates:")",final:B},(()=>this.selectCharset(")"+B))),this._parser.registerEscHandler({intermediates:"*",final:B},(()=>this.selectCharset("*"+B))),this._parser.registerEscHandler({intermediates:"+",final:B},(()=>this.selectCharset("+"+B))),this._parser.registerEscHandler({intermediates:"-",final:B},(()=>this.selectCharset("-"+B))),this._parser.registerEscHandler({intermediates:".",final:B},(()=>this.selectCharset("."+B))),this._parser.registerEscHandler({intermediates:"/",final:B},(()=>this.selectCharset("/"+B)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((B=>(this._logService.error("Parsing error: ",B),B))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new O.DcsHandler(((B,ie)=>this.requestStatusString(B,ie))))}_preserveStack(L,I,W,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=W,this._parseStack.position=j}_logSlowResolvingAsync(L){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([L,new Promise(((I,W)=>setTimeout((()=>W("#SLOW_TIMEOUT")),5e3)))]).catch((I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,I){let W,j=this._activeBuffer.x,Q=this._activeBuffer.y,Z=0;const _e=this._parseStack.paused;if(_e){if(W=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(W),W;j=this._parseStack.cursorStartX,Q=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>U&&(Z=this._parseStack.position+U)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,(xe=>String.fromCharCode(xe))).join("")}"`),typeof L=="string"?L.split("").map((xe=>xe.charCodeAt(0))):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<U&&(this._parseBuffer=new Uint32Array(Math.min(L.length,U))),_e||this._dirtyRowTracker.clearRange(),L.length>U)for(let xe=Z;xe<L.length;xe+=U){const Ae=xe+U<L.length?xe+U:L.length,B=typeof L=="string"?this._stringDecoder.decode(L.substring(xe,Ae),this._parseBuffer):this._utf8Decoder.decode(L.subarray(xe,Ae),this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,B))return this._preserveStack(j,Q,B,xe),this._logSlowResolvingAsync(W),W}else if(!_e){const xe=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,xe))return this._preserveStack(j,Q,xe,0),this._logSlowResolvingAsync(W),W}this._activeBuffer.x===j&&this._activeBuffer.y===Q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,I,W){let j,Q;const Z=this._charsetService.charset,_e=this._optionsService.rawOptions.screenReaderMode,xe=this._bufferService.cols,Ae=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,ie=this._curAttrData;let de=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&W-I>0&&de.getWidth(this._activeBuffer.x-1)===2&&de.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ie.fg,ie.bg,ie.extended);for(let fe=I;fe<W;++fe){if(j=L[fe],Q=this._unicodeService.wcwidth(j),j<127&&Z){const ze=Z[String.fromCharCode(j)];ze&&(j=ze.charCodeAt(0))}if(_e&&this._onA11yChar.fire((0,k.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Q||!this._activeBuffer.x){if(this._activeBuffer.x+Q-1>=xe){if(Ae){for(;this._activeBuffer.x<xe;)de.setCellFromCodePoint(this._activeBuffer.x++,0,1,ie.fg,ie.bg,ie.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),de=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=xe-1,Q===2)continue}if(B&&(de.insertCells(this._activeBuffer.x,Q,this._activeBuffer.getNullCell(ie),ie),de.getWidth(xe-1)===2&&de.setCellFromCodePoint(xe-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,ie.fg,ie.bg,ie.extended)),de.setCellFromCodePoint(this._activeBuffer.x++,j,Q,ie.fg,ie.bg,ie.extended),Q>0)for(;--Q;)de.setCellFromCodePoint(this._activeBuffer.x++,0,0,ie.fg,ie.bg,ie.extended)}else de.getWidth(this._activeBuffer.x-1)?de.addCodepointToCell(this._activeBuffer.x-1,j):de.addCodepointToCell(this._activeBuffer.x-2,j)}W-I>0&&(de.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<xe&&W-I>0&&de.getWidth(this._activeBuffer.x)===0&&!de.hasContent(this._activeBuffer.x)&&de.setCellFromCodePoint(this._activeBuffer.x,0,1,ie.fg,ie.bg,ie.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,I){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,I):this._parser.registerCsiHandler(L,(W=>!X(W.params[0],this._optionsService.rawOptions.windowOptions)||I(W)))}registerDcsHandler(L,I){return this._parser.registerDcsHandler(L,new O.DcsHandler(I))}registerEscHandler(L,I){return this._parser.registerEscHandler(L,I)}registerOscHandler(L,I){return this._parser.registerOscHandler(L,new R.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=L,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+I)}cursorUp(L){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const I=L.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const I=L.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,I,W,j=!1,Q=!1){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);Z.replaceCells(I,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Q),j&&(Z.isWrapped=!1)}_resetBufferLine(L,I=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);W&&(W.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),W.isWrapped=!1)}eraseInDisplay(L,I=!1){let W;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);W<this._bufferService.rows;W++)this._resetBufferLine(W,I);this._dirtyRowTracker.markDirty(W);break;case 1:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(W+1).isWrapped=!1);W--;)this._resetBufferLine(W,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(W=this._bufferService.rows,this._dirtyRowTracker.markDirty(W-1);W--;)this._resetBufferLine(W,I);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(L,I=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Q=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;I--;)this._activeBuffer.lines.splice(Q-1,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;I--;)this._activeBuffer.lines.splice(W,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const I=L.params[0]||1,W=new Uint32Array(I);for(let j=0;j<I;++j)W[j]=this._parser.precedingCodepoint;return this.print(W,0,W.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(v.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(v.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(v.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(v.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(v.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,x.DEFAULT_CHARSET),this._charsetService.setgCharset(1,x.DEFAULT_CHARSET),this._charsetService.setgCharset(2,x.DEFAULT_CHARSET),this._charsetService.setgCharset(3,x.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,I){const W=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:Q}=this._coreMouseService,Z=this._coreService,{buffers:_e,cols:xe}=this._bufferService,{active:Ae,alt:B}=_e,ie=this._optionsService.rawOptions,de=Ve=>Ve?1:2,fe=L.params[0];return ze=fe,ke=I?fe===2?4:fe===4?de(Z.modes.insertMode):fe===12?3:fe===20?de(ie.convertEol):0:fe===1?de(W.applicationCursorKeys):fe===3?ie.windowOptions.setWinLines?xe===80?2:xe===132?1:0:0:fe===6?de(W.origin):fe===7?de(W.wraparound):fe===8?3:fe===9?de(j==="X10"):fe===12?de(ie.cursorBlink):fe===25?de(!Z.isCursorHidden):fe===45?de(W.reverseWraparound):fe===66?de(W.applicationKeypad):fe===67?4:fe===1e3?de(j==="VT200"):fe===1002?de(j==="DRAG"):fe===1003?de(j==="ANY"):fe===1004?de(W.sendFocus):fe===1005?4:fe===1006?de(Q==="SGR"):fe===1015?4:fe===1016?de(Q==="SGR_PIXELS"):fe===1048?1:fe===47||fe===1047||fe===1049?de(Ae===B):fe===2004?de(W.bracketedPasteMode):0,Z.triggerDataEvent(`${v.C0.ESC}[${I?"":"?"}${ze};${ke}$y`),!0;var ze,ke}_updateAttrColor(L,I,W,j,Q){return I===2?(L|=50331648,L&=-16777216,L|=g.AttributeData.fromColorRGB([W,j,Q])):I===5&&(L&=-50331904,L|=33554432|255&W),L}_extractColor(L,I,W){const j=[0,0,-1,0,0,0];let Q=0,Z=0;do{if(j[Z+Q]=L.params[I+Z],L.hasSubParams(I+Z)){const _e=L.getSubParams(I+Z);let xe=0;do j[1]===5&&(Q=1),j[Z+xe+1+Q]=_e[xe];while(++xe<_e.length&&xe+Z+1+Q<j.length);break}if(j[1]===5&&Z+Q>=2||j[1]===2&&Z+Q>=5)break;j[1]&&(Q=1)}while(++Z+I<L.length&&Z+Q<j.length);for(let _e=2;_e<j.length;++_e)j[_e]===-1&&(j[_e]=0);switch(j[0]){case 38:W.fg=this._updateAttrColor(W.fg,j[1],j[3],j[4],j[5]);break;case 48:W.bg=this._updateAttrColor(W.bg,j[1],j[3],j[4],j[5]);break;case 58:W.extended=W.extended.clone(),W.extended.underlineColor=this._updateAttrColor(W.extended.underlineColor,j[1],j[3],j[4],j[5])}return Z}_processUnderline(L,I){I.extended=I.extended.clone(),(!~L||L>5)&&(L=1),I.extended.underlineStyle=L,I.fg|=268435456,L===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(L){L.fg=l.DEFAULT_ATTR_DATA.fg,L.bg=l.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=L.length;let W;const j=this._curAttrData;for(let Q=0;Q<I;Q++)W=L.params[Q],W>=30&&W<=37?(j.fg&=-50331904,j.fg|=16777216|W-30):W>=40&&W<=47?(j.bg&=-50331904,j.bg|=16777216|W-40):W>=90&&W<=97?(j.fg&=-50331904,j.fg|=16777224|W-90):W>=100&&W<=107?(j.bg&=-50331904,j.bg|=16777224|W-100):W===0?this._processSGR0(j):W===1?j.fg|=134217728:W===3?j.bg|=67108864:W===4?(j.fg|=268435456,this._processUnderline(L.hasSubParams(Q)?L.getSubParams(Q)[0]:1,j)):W===5?j.fg|=536870912:W===7?j.fg|=67108864:W===8?j.fg|=1073741824:W===9?j.fg|=2147483648:W===2?j.bg|=134217728:W===21?this._processUnderline(2,j):W===22?(j.fg&=-134217729,j.bg&=-134217729):W===23?j.bg&=-67108865:W===24?(j.fg&=-268435457,this._processUnderline(0,j)):W===25?j.fg&=-536870913:W===27?j.fg&=-67108865:W===28?j.fg&=-1073741825:W===29?j.fg&=2147483647:W===39?(j.fg&=-67108864,j.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):W===49?(j.bg&=-67108864,j.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):W===38||W===48||W===58?Q+=this._extractColor(L,Q,j):W===53?j.bg|=1073741824:W===55?j.bg&=-1073741825:W===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):W===100?(j.fg&=-67108864,j.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",W);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${v.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${v.C0.ESC}[${I};${W}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const I=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${v.C0.ESC}[?${I};${W}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const I=L.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const W=I%2==1;return this._optionsService.options.cursorBlink=W,!0}setScrollRegion(L){const I=L.params[0]||1;let W;return(L.length<2||(W=L.params[1])>this._bufferService.rows||W===0)&&(W=this._bufferService.rows),W>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=W-1,this._setCursor(0,0)),!0}windowOptions(L){if(!X(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(F.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(F.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${v.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const I=[],W=L.split(";");for(;W.length>1;){const j=W.shift(),Q=W.shift();if(/^\d+$/.exec(j)){const Z=parseInt(j);if($(Z))if(Q==="?")I.push({type:0,index:Z});else{const _e=(0,b.parseColor)(Q);_e&&I.push({type:1,index:Z,color:_e})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(L){const I=L.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(L,I){this._getCurrentLinkId()&&this._finishHyperlink();const W=L.split(":");let j;const Q=W.findIndex((Z=>Z.startsWith("id=")));return Q!==-1&&(j=W[Q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,I){const W=L.split(";");for(let j=0;j<W.length&&!(I>=this._specialColors.length);++j,++I)if(W[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const Q=(0,b.parseColor)(W[j]);Q&&this._onColor.fire([{type:1,index:this._specialColors[I],color:Q}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const I=[],W=L.split(";");for(let j=0;j<W.length;++j)if(/^\d+$/.exec(W[j])){const Q=parseInt(W[j]);$(Q)&&I.push({type:2,index:Q})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,x.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(M[L[0]],x.CHARSETS[L[1]]||x.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new c.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const W=this._activeBuffer.ybase+this._activeBuffer.y+I,j=this._activeBuffer.lines.get(W);j&&(j.fill(L),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,I){const W=this._bufferService.buffer,j=this._optionsService.rawOptions;return(Q=>(this._coreService.triggerDataEvent(`${v.C0.ESC}${Q}${v.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${W.scrollTop+1};${W.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,I){this._dirtyRowTracker.markRangeDirty(L,I)}}d.InputHandler=J;let ae=class{constructor(se){this._bufferService=se,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(se){se<this.start?this.start=se:se>this.end&&(this.end=se)}markRangeDirty(se,L){se>L&&(V=se,se=L,L=V),se<this.start&&(this.start=se),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(se){return 0<=se&&se<256}ae=_([C(0,S.IBufferService)],ae)},844:(q,d)=>{function m(_){for(const C of _)C.dispose();_.length=0}Object.defineProperty(d,"__esModule",{value:!0}),d.getDisposeArrayDisposable=d.disposeArray=d.toDisposable=d.MutableDisposable=d.Disposable=void 0,d.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const _ of this._disposables)_.dispose();this._disposables.length=0}register(_){return this._disposables.push(_),_}unregister(_){const C=this._disposables.indexOf(_);C!==-1&&this._disposables.splice(C,1)}},d.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(_){var C;this._isDisposed||_===this._value||((C=this._value)===null||C===void 0||C.dispose(),this._value=_)}clear(){this.value=void 0}dispose(){var _;this._isDisposed=!0,(_=this._value)===null||_===void 0||_.dispose(),this._value=void 0}},d.toDisposable=function(_){return{dispose:_}},d.disposeArray=m,d.getDisposeArrayDisposable=function(_){return{dispose:()=>m(_)}}},1505:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FourKeyMap=d.TwoKeyMap=void 0;class m{constructor(){this._data={}}set(C,v,x){this._data[C]||(this._data[C]={}),this._data[C][v]=x}get(C,v){return this._data[C]?this._data[C][v]:void 0}clear(){this._data={}}}d.TwoKeyMap=m,d.FourKeyMap=class{constructor(){this._data=new m}set(_,C,v,x,T){this._data.get(_,C)||this._data.set(_,C,new m),this._data.get(_,C).set(v,x,T)}get(_,C,v,x){var T;return(T=this._data.get(_,C))===null||T===void 0?void 0:T.get(v,x)}clear(){this._data.clear()}}},6114:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.isChromeOS=d.isLinux=d.isWindows=d.isIphone=d.isIpad=d.isMac=d.getSafariVersion=d.isSafari=d.isLegacyEdge=d.isFirefox=d.isNode=void 0,d.isNode=typeof navigator>"u";const m=d.isNode?"node":navigator.userAgent,_=d.isNode?"node":navigator.platform;d.isFirefox=m.includes("Firefox"),d.isLegacyEdge=m.includes("Edge"),d.isSafari=/^((?!chrome|android).)*safari/i.test(m),d.getSafariVersion=function(){if(!d.isSafari)return 0;const C=m.match(/Version\/(\d+)/);return C===null||C.length<2?0:parseInt(C[1])},d.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),d.isIpad=_==="iPad",d.isIphone=_==="iPhone",d.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),d.isLinux=_.indexOf("Linux")>=0,d.isChromeOS=/\bCrOS\b/.test(m)},6106:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SortedList=void 0;let m=0;d.SortedList=class{constructor(_){this._getKey=_,this._array=[]}clear(){this._array.length=0}insert(_){this._array.length!==0?(m=this._search(this._getKey(_)),this._array.splice(m,0,_)):this._array.push(_)}delete(_){if(this._array.length===0)return!1;const C=this._getKey(_);if(C===void 0||(m=this._search(C),m===-1)||this._getKey(this._array[m])!==C)return!1;do if(this._array[m]===_)return this._array.splice(m,1),!0;while(++m<this._array.length&&this._getKey(this._array[m])===C);return!1}*getKeyIterator(_){if(this._array.length!==0&&(m=this._search(_),!(m<0||m>=this._array.length)&&this._getKey(this._array[m])===_))do yield this._array[m];while(++m<this._array.length&&this._getKey(this._array[m])===_)}forEachByKey(_,C){if(this._array.length!==0&&(m=this._search(_),!(m<0||m>=this._array.length)&&this._getKey(this._array[m])===_))do C(this._array[m]);while(++m<this._array.length&&this._getKey(this._array[m])===_)}values(){return[...this._array].values()}_search(_){let C=0,v=this._array.length-1;for(;v>=C;){let x=C+v>>1;const T=this._getKey(this._array[x]);if(T>_)v=x-1;else{if(!(T<_)){for(;x>0&&this._getKey(this._array[x-1])===_;)x--;return x}C=x+1}}return C}}},7226:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DebouncedIdleTask=d.IdleTaskQueue=d.PriorityTaskQueue=void 0;const _=m(6114);class C{constructor(){this._tasks=[],this._i=0}enqueue(T){this._tasks.push(T),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(T){this._idleCallback=void 0;let A=0,k=0,l=T.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),k=Math.max(A,k),u=T.timeRemaining(),1.5*k>u)return l-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-A))}ms`),void this._start();l=u}this.clear()}}class v extends C{_requestCallback(T){return setTimeout((()=>T(this._createDeadline(16))))}_cancelCallback(T){clearTimeout(T)}_createDeadline(T){const A=Date.now()+T;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}d.PriorityTaskQueue=v,d.IdleTaskQueue=!_.isNode&&"requestIdleCallback"in window?class extends C{_requestCallback(x){return requestIdleCallback(x)}_cancelCallback(x){cancelIdleCallback(x)}}:v,d.DebouncedIdleTask=class{constructor(){this._queue=new d.IdleTaskQueue}set(x){this._queue.clear(),this._queue.enqueue(x)}flush(){this._queue.flush()}}},9282:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.updateWindowsModeWrappedState=void 0;const _=m(643);d.updateWindowsModeWrappedState=function(C){const v=C.buffer.lines.get(C.buffer.ybase+C.buffer.y-1),x=v?.get(C.cols-1),T=C.buffer.lines.get(C.buffer.ybase+C.buffer.y);T&&x&&(T.isWrapped=x[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&x[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ExtendedAttrs=d.AttributeData=void 0;class m{constructor(){this.fg=0,this.bg=0,this.extended=new _}static toColorRGB(v){return[v>>>16&255,v>>>8&255,255&v]}static fromColorRGB(v){return(255&v[0])<<16|(255&v[1])<<8|255&v[2]}clone(){const v=new m;return v.fg=this.fg,v.bg=this.bg,v.extended=this.extended.clone(),v}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}d.AttributeData=m;class _{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(v){this._ext=v}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(v){this._ext&=-469762049,this._ext|=v<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(v){this._ext&=-67108864,this._ext|=67108863&v}get urlId(){return this._urlId}set urlId(v){this._urlId=v}constructor(v=0,x=0){this._ext=0,this._urlId=0,this._ext=v,this._urlId=x}clone(){return new _(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}d.ExtendedAttrs=_},9092:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Buffer=d.MAX_BUFFER_SIZE=void 0;const _=m(6349),C=m(7226),v=m(3734),x=m(8437),T=m(4634),A=m(511),k=m(643),l=m(4863),u=m(7116);d.MAX_BUFFER_SIZE=4294967295,d.Buffer=class{constructor(o,c,g){this._hasScrollback=o,this._optionsService=c,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=x.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=A.CellData.fromCharData([0,k.NULL_CELL_CHAR,k.NULL_CELL_WIDTH,k.NULL_CELL_CODE]),this._whitespaceCell=A.CellData.fromCharData([0,k.WHITESPACE_CELL_CHAR,k.WHITESPACE_CELL_WIDTH,k.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new C.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new v.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new v.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new x.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>d.MAX_BUFFER_SIZE?d.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=x.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const g=this.getNullCell(x.DEFAULT_ATTR_DATA);let S=0;const R=this._getCorrectBufferLength(c);if(R>this.lines.maxLength&&(this.lines.maxLength=R),this.lines.length>0){if(this._cols<o)for(let b=0;b<this.lines.length;b++)S+=+this.lines.get(b).resize(o,g);let O=0;if(this._rows<c)for(let b=this._rows;b<c;b++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new x.BufferLine(o,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+O+1?(this.ybase--,O++,this.ydisp>0&&this.ydisp--):this.lines.push(new x.BufferLine(o,g)));else for(let b=this._rows;b>c;b--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(R<this.lines.maxLength){const b=this.lines.length-R;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=R}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),O&&(this.y+=O),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let O=0;O<this.lines.length;O++)S+=+this.lines.get(O).resize(o,g);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const g=(0,T.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(x.DEFAULT_ATTR_DATA));if(g.length>0){const S=(0,T.reflowLargerCreateNewLayout)(this.lines,g);(0,T.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(o,c,S.countRemoved)}}_reflowLargerAdjustViewport(o,c,g){const S=this.getNullCell(x.DEFAULT_ATTR_DATA);let R=g;for(;R-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new x.BufferLine(o,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(o,c){const g=this.getNullCell(x.DEFAULT_ATTR_DATA),S=[];let R=0;for(let O=this.lines.length-1;O>=0;O--){let b=this.lines.get(O);if(!b||!b.isWrapped&&b.getTrimmedLength()<=o)continue;const M=[b];for(;b.isWrapped&&O>0;)b=this.lines.get(--O),M.unshift(b);const U=this.ybase+this.y;if(U>=O&&U<O+M.length)continue;const X=M[M.length-1].getTrimmedLength(),F=(0,T.reflowSmallerGetNewLineLengths)(M,this._cols,o),V=F.length-M.length;let J;J=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+V):Math.max(0,this.lines.length-this.lines.maxLength+V);const ae=[];for(let j=0;j<V;j++){const Q=this.getBlankLine(x.DEFAULT_ATTR_DATA,!0);ae.push(Q)}ae.length>0&&(S.push({start:O+M.length+R,newLines:ae}),R+=ae.length),M.push(...ae);let $=F.length-1,se=F[$];se===0&&($--,se=F[$]);let L=M.length-V-1,I=X;for(;L>=0;){const j=Math.min(I,se);if(M[$]===void 0)break;if(M[$].copyCellsFrom(M[L],I-j,se-j,j,!0),se-=j,se===0&&($--,se=F[$]),I-=j,I===0){L--;const Q=Math.max(L,0);I=(0,T.getWrappedLineTrimmedLength)(M,Q,this._cols)}}for(let j=0;j<M.length;j++)F[j]<o&&M[j].setCell(F[j],g);let W=V-J;for(;W-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+R)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+V,this.ybase+c-1)}if(S.length>0){const O=[],b=[];for(let $=0;$<this.lines.length;$++)b.push(this.lines.get($));const M=this.lines.length;let U=M-1,X=0,F=S[X];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+R);let V=0;for(let $=Math.min(this.lines.maxLength-1,M+R-1);$>=0;$--)if(F&&F.start>U+V){for(let se=F.newLines.length-1;se>=0;se--)this.lines.set($--,F.newLines[se]);$++,O.push({index:U+1,amount:F.newLines.length}),V+=F.newLines.length,F=S[++X]}else this.lines.set($,b[U--]);let J=0;for(let $=O.length-1;$>=0;$--)O[$].index+=J,this.lines.onInsertEmitter.fire(O[$]),J+=O[$].amount;const ae=Math.max(0,M+R-this.lines.maxLength);ae>0&&this.lines.onTrimEmitter.fire(ae)}}translateBufferLineToString(o,c,g=0,S){const R=this.lines.get(o);return R?R.translateToString(c,g,S):""}getWrappedRangeForLine(o){let c=o,g=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:c,last:g}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new l.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim((g=>{c.line-=g,c.line<0&&c.dispose()}))),c.register(this.lines.onInsert((g=>{c.line>=g.index&&(c.line+=g.amount)}))),c.register(this.lines.onDelete((g=>{c.line>=g.index&&c.line<g.index+g.amount&&c.dispose(),c.line>g.index&&(c.line-=g.amount)}))),c.register(c.onDispose((()=>this._removeMarker(c)))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLine=d.DEFAULT_ATTR_DATA=void 0;const _=m(3734),C=m(511),v=m(643),x=m(482);d.DEFAULT_ATTR_DATA=Object.freeze(new _.AttributeData);let T=0;class A{constructor(l,u,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const c=u||C.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]);for(let g=0;g<l;++g)this.setCell(g,c);this.length=l}get(l){const u=this._data[3*l+0],o=2097151&u;return[this._data[3*l+1],2097152&u?this._combined[l]:o?(0,x.stringFromCodePoint)(o):"",u>>22,2097152&u?this._combined[l].charCodeAt(this._combined[l].length-1):o]}set(l,u){this._data[3*l+1]=u[v.CHAR_DATA_ATTR_INDEX],u[v.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=u[1],this._data[3*l+0]=2097152|l|u[v.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=u[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[v.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const u=this._data[3*l+0];return 2097152&u?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&u}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const u=this._data[3*l+0];return 2097152&u?this._combined[l]:2097151&u?(0,x.stringFromCodePoint)(2097151&u):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,u){return T=3*l,u.content=this._data[T+0],u.fg=this._data[T+1],u.bg=this._data[T+2],2097152&u.content&&(u.combinedData=this._combined[l]),268435456&u.bg&&(u.extended=this._extendedAttrs[l]),u}setCell(l,u){2097152&u.content&&(this._combined[l]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[l]=u.extended),this._data[3*l+0]=u.content,this._data[3*l+1]=u.fg,this._data[3*l+2]=u.bg}setCellFromCodePoint(l,u,o,c,g,S){268435456&g&&(this._extendedAttrs[l]=S),this._data[3*l+0]=u|o<<22,this._data[3*l+1]=c,this._data[3*l+2]=g}addCodepointToCell(l,u){let o=this._data[3*l+0];2097152&o?this._combined[l]+=(0,x.stringFromCodePoint)(u):(2097151&o?(this._combined[l]=(0,x.stringFromCodePoint)(2097151&o)+(0,x.stringFromCodePoint)(u),o&=-2097152,o|=2097152):o=u|4194304,this._data[3*l+0]=o)}insertCells(l,u,o,c){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs),u<this.length-l){const g=new C.CellData;for(let S=this.length-l-u-1;S>=0;--S)this.setCell(l+u+S,this.loadCell(l+S,g));for(let S=0;S<u;++S)this.setCell(l+S,o)}else for(let g=l;g<this.length;++g)this.setCell(g,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs)}deleteCells(l,u,o,c){if(l%=this.length,u<this.length-l){const g=new C.CellData;for(let S=0;S<this.length-l-u;++S)this.setCell(l+S,this.loadCell(l+u+S,g));for(let S=this.length-u;S<this.length;++S)this.setCell(S,o)}else for(let g=l;g<this.length;++g)this.setCell(g,o);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs)}replaceCells(l,u,o,c,g=!1){if(g)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodePoint(u,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs);l<u&&l<this.length;)this.isProtected(l)||this.setCell(l,o),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,c?.fg||0,c?.bg||0,c?.extended||new _.ExtendedAttrs);l<u&&l<this.length;)this.setCell(l++,o)}resize(l,u){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<l;++c)this.setCell(c,u)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let S=0;S<c.length;S++){const R=parseInt(c[S],10);R>=l&&delete this._combined[R]}const g=Object.keys(this._extendedAttrs);for(let S=0;S<g.length;S++){const R=parseInt(g[S],10);R>=l&&delete this._extendedAttrs[R]}}return this.length=l,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,u=!1){if(u)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,l);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const u in l._combined)this._combined[u]=l._combined[u];this._extendedAttrs={};for(const u in l._extendedAttrs)this._extendedAttrs[u]=l._extendedAttrs[u];this.isWrapped=l.isWrapped}clone(){const l=new A(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const u in this._combined)l._combined[u]=this._combined[u];for(const u in this._extendedAttrs)l._extendedAttrs[u]=this._extendedAttrs[u];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,u,o,c,g){const S=l._data;if(g)for(let O=c-1;O>=0;O--){for(let b=0;b<3;b++)this._data[3*(o+O)+b]=S[3*(u+O)+b];268435456&S[3*(u+O)+2]&&(this._extendedAttrs[o+O]=l._extendedAttrs[u+O])}else for(let O=0;O<c;O++){for(let b=0;b<3;b++)this._data[3*(o+O)+b]=S[3*(u+O)+b];268435456&S[3*(u+O)+2]&&(this._extendedAttrs[o+O]=l._extendedAttrs[u+O])}const R=Object.keys(l._combined);for(let O=0;O<R.length;O++){const b=parseInt(R[O],10);b>=u&&(this._combined[b-u+o]=l._combined[b])}}translateToString(l=!1,u=0,o=this.length){l&&(o=Math.min(o,this.getTrimmedLength()));let c="";for(;u<o;){const g=this._data[3*u+0],S=2097151&g;c+=2097152&g?this._combined[u]:S?(0,x.stringFromCodePoint)(S):v.WHITESPACE_CELL_CHAR,u+=g>>22||1}return c}}d.BufferLine=A},4841:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getRangeLength=void 0,d.getRangeLength=function(m,_){if(m.start.y>m.end.y)throw new Error(`Buffer range end (${m.end.x}, ${m.end.y}) cannot be before start (${m.start.x}, ${m.start.y})`);return _*(m.end.y-m.start.y)+(m.end.x-m.start.x+1)}},4634:(q,d)=>{function m(_,C,v){if(C===_.length-1)return _[C].getTrimmedLength();const x=!_[C].hasContent(v-1)&&_[C].getWidth(v-1)===1,T=_[C+1].getWidth(0)===2;return x&&T?v-1:v}Object.defineProperty(d,"__esModule",{value:!0}),d.getWrappedLineTrimmedLength=d.reflowSmallerGetNewLineLengths=d.reflowLargerApplyNewLayout=d.reflowLargerCreateNewLayout=d.reflowLargerGetLinesToRemove=void 0,d.reflowLargerGetLinesToRemove=function(_,C,v,x,T){const A=[];for(let k=0;k<_.length-1;k++){let l=k,u=_.get(++l);if(!u.isWrapped)continue;const o=[_.get(k)];for(;l<_.length&&u.isWrapped;)o.push(u),u=_.get(++l);if(x>=k&&x<l){k+=o.length-1;continue}let c=0,g=m(o,c,C),S=1,R=0;for(;S<o.length;){const b=m(o,S,C),M=b-R,U=v-g,X=Math.min(M,U);o[c].copyCellsFrom(o[S],R,g,X,!1),g+=X,g===v&&(c++,g=0),R+=X,R===b&&(S++,R=0),g===0&&c!==0&&o[c-1].getWidth(v-1)===2&&(o[c].copyCellsFrom(o[c-1],v-1,g++,1,!1),o[c-1].setCell(v-1,T))}o[c].replaceCells(g,v,T);let O=0;for(let b=o.length-1;b>0&&(b>c||o[b].getTrimmedLength()===0);b--)O++;O>0&&(A.push(k+o.length-O),A.push(O)),k+=o.length-1}return A},d.reflowLargerCreateNewLayout=function(_,C){const v=[];let x=0,T=C[x],A=0;for(let k=0;k<_.length;k++)if(T===k){const l=C[++x];_.onDeleteEmitter.fire({index:k-A,amount:l}),k+=l-1,A+=l,T=C[++x]}else v.push(k);return{layout:v,countRemoved:A}},d.reflowLargerApplyNewLayout=function(_,C){const v=[];for(let x=0;x<C.length;x++)v.push(_.get(C[x]));for(let x=0;x<v.length;x++)_.set(x,v[x]);_.length=C.length},d.reflowSmallerGetNewLineLengths=function(_,C,v){const x=[],T=_.map(((u,o)=>m(_,o,C))).reduce(((u,o)=>u+o));let A=0,k=0,l=0;for(;l<T;){if(T-l<v){x.push(T-l);break}A+=v;const u=m(_,k,C);A>u&&(A-=u,k++);const o=_[k].getWidth(A-1)===2;o&&A--;const c=o?v-1:v;x.push(c),l+=c}return x},d.getWrappedLineTrimmedLength=m},5295:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferSet=void 0;const _=m(8460),C=m(844),v=m(9092);class x extends C.Disposable{constructor(A,k){super(),this._optionsService=A,this._bufferService=k,this._onBufferActivate=this.register(new _.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new v.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new v.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(A){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(A),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(A,k){this._normal.resize(A,k),this._alt.resize(A,k),this.setupTabStops(A)}setupTabStops(A){this._normal.setupTabStops(A),this._alt.setupTabStops(A)}}d.BufferSet=x},511:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CellData=void 0;const _=m(482),C=m(643),v=m(3734);class x extends v.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new v.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const k=new x;return k.setFromCharData(A),k}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,_.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[C.CHAR_DATA_ATTR_INDEX],this.bg=0;let k=!1;if(A[C.CHAR_DATA_CHAR_INDEX].length>2)k=!0;else if(A[C.CHAR_DATA_CHAR_INDEX].length===2){const l=A[C.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const u=A[C.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(l-55296)+u-56320+65536|A[C.CHAR_DATA_WIDTH_INDEX]<<22:k=!0}else k=!0}else this.content=A[C.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[C.CHAR_DATA_WIDTH_INDEX]<<22;k&&(this.combinedData=A[C.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[C.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}d.CellData=x},643:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WHITESPACE_CELL_CODE=d.WHITESPACE_CELL_WIDTH=d.WHITESPACE_CELL_CHAR=d.NULL_CELL_CODE=d.NULL_CELL_WIDTH=d.NULL_CELL_CHAR=d.CHAR_DATA_CODE_INDEX=d.CHAR_DATA_WIDTH_INDEX=d.CHAR_DATA_CHAR_INDEX=d.CHAR_DATA_ATTR_INDEX=d.DEFAULT_EXT=d.DEFAULT_ATTR=d.DEFAULT_COLOR=void 0,d.DEFAULT_COLOR=0,d.DEFAULT_ATTR=256|d.DEFAULT_COLOR<<9,d.DEFAULT_EXT=0,d.CHAR_DATA_ATTR_INDEX=0,d.CHAR_DATA_CHAR_INDEX=1,d.CHAR_DATA_WIDTH_INDEX=2,d.CHAR_DATA_CODE_INDEX=3,d.NULL_CELL_CHAR="",d.NULL_CELL_WIDTH=1,d.NULL_CELL_CODE=0,d.WHITESPACE_CELL_CHAR=" ",d.WHITESPACE_CELL_WIDTH=1,d.WHITESPACE_CELL_CODE=32},4863:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Marker=void 0;const _=m(8460),C=m(844);class v{get id(){return this._id}constructor(T){this.line=T,this.isDisposed=!1,this._disposables=[],this._id=v._nextId++,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,C.disposeArray)(this._disposables),this._disposables.length=0)}register(T){return this._disposables.push(T),T}}d.Marker=v,v._nextId=1},7116:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_CHARSET=d.CHARSETS=void 0,d.CHARSETS={},d.DEFAULT_CHARSET=d.CHARSETS.B,d.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},d.CHARSETS.A={"#":""},d.CHARSETS.B=void 0,d.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},d.CHARSETS.C=d.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},d.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},d.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},d.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},d.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},d.CHARSETS.E=d.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},d.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},d.CHARSETS.H=d.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},d.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(q,d)=>{var m,_,C;Object.defineProperty(d,"__esModule",{value:!0}),d.C1_ESCAPED=d.C1=d.C0=void 0,(function(v){v.NUL="\0",v.SOH="",v.STX="",v.ETX="",v.EOT="",v.ENQ="",v.ACK="",v.BEL="\x07",v.BS="\b",v.HT="	",v.LF=`
`,v.VT="\v",v.FF="\f",v.CR="\r",v.SO="",v.SI="",v.DLE="",v.DC1="",v.DC2="",v.DC3="",v.DC4="",v.NAK="",v.SYN="",v.ETB="",v.CAN="",v.EM="",v.SUB="",v.ESC="\x1B",v.FS="",v.GS="",v.RS="",v.US="",v.SP=" ",v.DEL=""})(m||(d.C0=m={})),(function(v){v.PAD="",v.HOP="",v.BPH="",v.NBH="",v.IND="",v.NEL="",v.SSA="",v.ESA="",v.HTS="",v.HTJ="",v.VTS="",v.PLD="",v.PLU="",v.RI="",v.SS2="",v.SS3="",v.DCS="",v.PU1="",v.PU2="",v.STS="",v.CCH="",v.MW="",v.SPA="",v.EPA="",v.SOS="",v.SGCI="",v.SCI="",v.CSI="",v.ST="",v.OSC="",v.PM="",v.APC=""})(_||(d.C1=_={})),(function(v){v.ST=`${m.ESC}\\`})(C||(d.C1_ESCAPED=C={}))},7399:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.evaluateKeyboardEvent=void 0;const _=m(2584),C={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};d.evaluateKeyboardEvent=function(v,x,T,A){const k={type:0,cancel:!1,key:void 0},l=(v.shiftKey?1:0)|(v.altKey?2:0)|(v.ctrlKey?4:0)|(v.metaKey?8:0);switch(v.keyCode){case 0:v.key==="UIKeyInputUpArrow"?k.key=x?_.C0.ESC+"OA":_.C0.ESC+"[A":v.key==="UIKeyInputLeftArrow"?k.key=x?_.C0.ESC+"OD":_.C0.ESC+"[D":v.key==="UIKeyInputRightArrow"?k.key=x?_.C0.ESC+"OC":_.C0.ESC+"[C":v.key==="UIKeyInputDownArrow"&&(k.key=x?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(v.altKey){k.key=_.C0.ESC+_.C0.DEL;break}k.key=_.C0.DEL;break;case 9:if(v.shiftKey){k.key=_.C0.ESC+"[Z";break}k.key=_.C0.HT,k.cancel=!0;break;case 13:k.key=v.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,k.cancel=!0;break;case 27:k.key=_.C0.ESC,v.altKey&&(k.key=_.C0.ESC+_.C0.ESC),k.cancel=!0;break;case 37:if(v.metaKey)break;l?(k.key=_.C0.ESC+"[1;"+(l+1)+"D",k.key===_.C0.ESC+"[1;3D"&&(k.key=_.C0.ESC+(T?"b":"[1;5D"))):k.key=x?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(v.metaKey)break;l?(k.key=_.C0.ESC+"[1;"+(l+1)+"C",k.key===_.C0.ESC+"[1;3C"&&(k.key=_.C0.ESC+(T?"f":"[1;5C"))):k.key=x?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(v.metaKey)break;l?(k.key=_.C0.ESC+"[1;"+(l+1)+"A",T||k.key!==_.C0.ESC+"[1;3A"||(k.key=_.C0.ESC+"[1;5A")):k.key=x?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(v.metaKey)break;l?(k.key=_.C0.ESC+"[1;"+(l+1)+"B",T||k.key!==_.C0.ESC+"[1;3B"||(k.key=_.C0.ESC+"[1;5B")):k.key=x?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:v.shiftKey||v.ctrlKey||(k.key=_.C0.ESC+"[2~");break;case 46:k.key=l?_.C0.ESC+"[3;"+(l+1)+"~":_.C0.ESC+"[3~";break;case 36:k.key=l?_.C0.ESC+"[1;"+(l+1)+"H":x?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:k.key=l?_.C0.ESC+"[1;"+(l+1)+"F":x?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:v.shiftKey?k.type=2:v.ctrlKey?k.key=_.C0.ESC+"[5;"+(l+1)+"~":k.key=_.C0.ESC+"[5~";break;case 34:v.shiftKey?k.type=3:v.ctrlKey?k.key=_.C0.ESC+"[6;"+(l+1)+"~":k.key=_.C0.ESC+"[6~";break;case 112:k.key=l?_.C0.ESC+"[1;"+(l+1)+"P":_.C0.ESC+"OP";break;case 113:k.key=l?_.C0.ESC+"[1;"+(l+1)+"Q":_.C0.ESC+"OQ";break;case 114:k.key=l?_.C0.ESC+"[1;"+(l+1)+"R":_.C0.ESC+"OR";break;case 115:k.key=l?_.C0.ESC+"[1;"+(l+1)+"S":_.C0.ESC+"OS";break;case 116:k.key=l?_.C0.ESC+"[15;"+(l+1)+"~":_.C0.ESC+"[15~";break;case 117:k.key=l?_.C0.ESC+"[17;"+(l+1)+"~":_.C0.ESC+"[17~";break;case 118:k.key=l?_.C0.ESC+"[18;"+(l+1)+"~":_.C0.ESC+"[18~";break;case 119:k.key=l?_.C0.ESC+"[19;"+(l+1)+"~":_.C0.ESC+"[19~";break;case 120:k.key=l?_.C0.ESC+"[20;"+(l+1)+"~":_.C0.ESC+"[20~";break;case 121:k.key=l?_.C0.ESC+"[21;"+(l+1)+"~":_.C0.ESC+"[21~";break;case 122:k.key=l?_.C0.ESC+"[23;"+(l+1)+"~":_.C0.ESC+"[23~";break;case 123:k.key=l?_.C0.ESC+"[24;"+(l+1)+"~":_.C0.ESC+"[24~";break;default:if(!v.ctrlKey||v.shiftKey||v.altKey||v.metaKey)if(T&&!A||!v.altKey||v.metaKey)!T||v.altKey||v.ctrlKey||v.shiftKey||!v.metaKey?v.key&&!v.ctrlKey&&!v.altKey&&!v.metaKey&&v.keyCode>=48&&v.key.length===1?k.key=v.key:v.key&&v.ctrlKey&&(v.key==="_"&&(k.key=_.C0.US),v.key==="@"&&(k.key=_.C0.NUL)):v.keyCode===65&&(k.type=1);else{const u=C[v.keyCode],o=u?.[v.shiftKey?1:0];if(o)k.key=_.C0.ESC+o;else if(v.keyCode>=65&&v.keyCode<=90){const c=v.ctrlKey?v.keyCode-64:v.keyCode+32;let g=String.fromCharCode(c);v.shiftKey&&(g=g.toUpperCase()),k.key=_.C0.ESC+g}else if(v.keyCode===32)k.key=_.C0.ESC+(v.ctrlKey?_.C0.NUL:" ");else if(v.key==="Dead"&&v.code.startsWith("Key")){let c=v.code.slice(3,4);v.shiftKey||(c=c.toLowerCase()),k.key=_.C0.ESC+c,k.cancel=!0}}else v.keyCode>=65&&v.keyCode<=90?k.key=String.fromCharCode(v.keyCode-64):v.keyCode===32?k.key=_.C0.NUL:v.keyCode>=51&&v.keyCode<=55?k.key=String.fromCharCode(v.keyCode-51+27):v.keyCode===56?k.key=_.C0.DEL:v.keyCode===219?k.key=_.C0.ESC:v.keyCode===220?k.key=_.C0.FS:v.keyCode===221&&(k.key=_.C0.GS)}return k}},482:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Utf8ToUtf32=d.StringToUtf32=d.utf32ToString=d.stringFromCodePoint=void 0,d.stringFromCodePoint=function(m){return m>65535?(m-=65536,String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):String.fromCharCode(m)},d.utf32ToString=function(m,_=0,C=m.length){let v="";for(let x=_;x<C;++x){let T=m[x];T>65535?(T-=65536,v+=String.fromCharCode(55296+(T>>10))+String.fromCharCode(T%1024+56320)):v+=String.fromCharCode(T)}return v},d.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(m,_){const C=m.length;if(!C)return 0;let v=0,x=0;if(this._interim){const T=m.charCodeAt(x++);56320<=T&&T<=57343?_[v++]=1024*(this._interim-55296)+T-56320+65536:(_[v++]=this._interim,_[v++]=T),this._interim=0}for(let T=x;T<C;++T){const A=m.charCodeAt(T);if(55296<=A&&A<=56319){if(++T>=C)return this._interim=A,v;const k=m.charCodeAt(T);56320<=k&&k<=57343?_[v++]=1024*(A-55296)+k-56320+65536:(_[v++]=A,_[v++]=k)}else A!==65279&&(_[v++]=A)}return v}},d.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(m,_){const C=m.length;if(!C)return 0;let v,x,T,A,k=0,l=0,u=0;if(this.interim[0]){let g=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let R,O=0;for(;(R=63&this.interim[++O])&&O<4;)S<<=6,S|=R;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=b-O;for(;u<M;){if(u>=C)return 0;if(R=m[u++],(192&R)!=128){u--,g=!0;break}this.interim[O++]=R,S<<=6,S|=63&R}g||(b===2?S<128?u--:_[k++]=S:b===3?S<2048||S>=55296&&S<=57343||S===65279||(_[k++]=S):S<65536||S>1114111||(_[k++]=S)),this.interim.fill(0)}const o=C-4;let c=u;for(;c<C;){for(;!(!(c<o)||128&(v=m[c])||128&(x=m[c+1])||128&(T=m[c+2])||128&(A=m[c+3]));)_[k++]=v,_[k++]=x,_[k++]=T,_[k++]=A,c+=4;if(v=m[c++],v<128)_[k++]=v;else if((224&v)==192){if(c>=C)return this.interim[0]=v,k;if(x=m[c++],(192&x)!=128){c--;continue}if(l=(31&v)<<6|63&x,l<128){c--;continue}_[k++]=l}else if((240&v)==224){if(c>=C)return this.interim[0]=v,k;if(x=m[c++],(192&x)!=128){c--;continue}if(c>=C)return this.interim[0]=v,this.interim[1]=x,k;if(T=m[c++],(192&T)!=128){c--;continue}if(l=(15&v)<<12|(63&x)<<6|63&T,l<2048||l>=55296&&l<=57343||l===65279)continue;_[k++]=l}else if((248&v)==240){if(c>=C)return this.interim[0]=v,k;if(x=m[c++],(192&x)!=128){c--;continue}if(c>=C)return this.interim[0]=v,this.interim[1]=x,k;if(T=m[c++],(192&T)!=128){c--;continue}if(c>=C)return this.interim[0]=v,this.interim[1]=x,this.interim[2]=T,k;if(A=m[c++],(192&A)!=128){c--;continue}if(l=(7&v)<<18|(63&x)<<12|(63&T)<<6|63&A,l<65536||l>1114111)continue;_[k++]=l}}return k}}},225:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeV6=void 0;const m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],_=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let C;d.UnicodeV6=class{constructor(){if(this.version="6",!C){C=new Uint8Array(65536),C.fill(1),C[0]=0,C.fill(0,1,32),C.fill(0,127,160),C.fill(2,4352,4448),C[9001]=2,C[9002]=2,C.fill(2,11904,42192),C[12351]=1,C.fill(2,44032,55204),C.fill(2,63744,64256),C.fill(2,65040,65050),C.fill(2,65072,65136),C.fill(2,65280,65377),C.fill(2,65504,65511);for(let v=0;v<m.length;++v)C.fill(0,m[v][0],m[v][1]+1)}}wcwidth(v){return v<32?0:v<127?1:v<65536?C[v]:(function(x,T){let A,k=0,l=T.length-1;if(x<T[0][0]||x>T[l][1])return!1;for(;l>=k;)if(A=k+l>>1,x>T[A][1])k=A+1;else{if(!(x<T[A][0]))return!0;l=A-1}return!1})(v,_)?0:v>=131072&&v<=196605||v>=196608&&v<=262141?2:1}}},5981:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WriteBuffer=void 0;const _=m(8460),C=m(844);class v extends C.Disposable{constructor(T){super(),this._action=T,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new _.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(T,A){if(A!==void 0&&this._syncCalls>A)return void(this._syncCalls=0);if(this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let k;for(this._isSyncWriting=!0;k=this._writeBuffer.shift();){this._action(k);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(T,A){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(A),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(A)}_innerWrite(T=0,A=!0){const k=T||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],u=this._action(l,A);if(u){const c=g=>Date.now()-k>=12?setTimeout((()=>this._innerWrite(0,g))):this._innerWrite(k,g);return void u.catch((g=>(queueMicrotask((()=>{throw g})),Promise.resolve(!1)))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-k>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}d.WriteBuffer=v},5941:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.toRgbString=d.parseColor=void 0;const m=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function C(v,x){const T=v.toString(16),A=T.length<2?"0"+T:T;switch(x){case 4:return T[0];case 8:return A;case 12:return(A+A).slice(0,3);default:return A+A}}d.parseColor=function(v){if(!v)return;let x=v.toLowerCase();if(x.indexOf("rgb:")===0){x=x.slice(4);const T=m.exec(x);if(T){const A=T[1]?15:T[4]?255:T[7]?4095:65535;return[Math.round(parseInt(T[1]||T[4]||T[7]||T[10],16)/A*255),Math.round(parseInt(T[2]||T[5]||T[8]||T[11],16)/A*255),Math.round(parseInt(T[3]||T[6]||T[9]||T[12],16)/A*255)]}}else if(x.indexOf("#")===0&&(x=x.slice(1),_.exec(x)&&[3,6,9,12].includes(x.length))){const T=x.length/3,A=[0,0,0];for(let k=0;k<3;++k){const l=parseInt(x.slice(T*k,T*k+T),16);A[k]=T===1?l<<4:T===2?l:T===3?l>>4:l>>8}return A}},d.toRgbString=function(v,x=16){const[T,A,k]=v;return`rgb:${C(T,x)}/${C(A,x)}/${C(k,x)}`}},5770:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PAYLOAD_LIMIT=void 0,d.PAYLOAD_LIMIT=1e7},6351:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DcsHandler=d.DcsParser=void 0;const _=m(482),C=m(8742),v=m(5770),x=[];d.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=x,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=x}registerHandler(A,k){this._handlers[A]===void 0&&(this._handlers[A]=[]);const l=this._handlers[A];return l.push(k),{dispose:()=>{const u=l.indexOf(k);u!==-1&&l.splice(u,1)}}}clearHandler(A){this._handlers[A]&&delete this._handlers[A]}setHandlerFallback(A){this._handlerFb=A}reset(){if(this._active.length)for(let A=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;A>=0;--A)this._active[A].unhook(!1);this._stack.paused=!1,this._active=x,this._ident=0}hook(A,k){if(this.reset(),this._ident=A,this._active=this._handlers[A]||x,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(k);else this._handlerFb(this._ident,"HOOK",k)}put(A,k,l){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(A,k,l);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(A,k,l))}unhook(A,k=!0){if(this._active.length){let l=!1,u=this._active.length-1,o=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,l=k,o=this._stack.fallThrough,this._stack.paused=!1),!o&&l===!1){for(;u>=0&&(l=this._active[u].unhook(A),l!==!0);u--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,l;u--}for(;u>=0;u--)if(l=this._active[u].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",A);this._active=x,this._ident=0}};const T=new C.Params;T.addParam(0),d.DcsHandler=class{constructor(A){this._handler=A,this._data="",this._params=T,this._hitLimit=!1}hook(A){this._params=A.length>1||A.params[0]?A.clone():T,this._data="",this._hitLimit=!1}put(A,k,l){this._hitLimit||(this._data+=(0,_.utf32ToString)(A,k,l),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(A){let k=!1;if(this._hitLimit)k=!1;else if(A&&(k=this._handler(this._data,this._params),k instanceof Promise))return k.then((l=>(this._params=T,this._data="",this._hitLimit=!1,l)));return this._params=T,this._data="",this._hitLimit=!1,k}}},2015:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.EscapeSequenceParser=d.VT500_TRANSITION_TABLE=d.TransitionTable=void 0;const _=m(844),C=m(8742),v=m(6242),x=m(6351);class T{constructor(u){this.table=new Uint8Array(u)}setDefault(u,o){this.table.fill(u<<4|o)}add(u,o,c,g){this.table[o<<8|u]=c<<4|g}addMany(u,o,c,g){for(let S=0;S<u.length;S++)this.table[o<<8|u[S]]=c<<4|g}}d.TransitionTable=T;const A=160;d.VT500_TRANSITION_TABLE=(function(){const l=new T(4095),u=Array.apply(null,Array(256)).map(((O,b)=>b)),o=(O,b)=>u.slice(O,b),c=o(32,127),g=o(0,24);g.push(25),g.push.apply(g,o(28,32));const S=o(0,14);let R;for(R in l.setDefault(1,0),l.addMany(c,0,2,0),S)l.addMany([24,26,153,154],R,3,0),l.addMany(o(128,144),R,3,0),l.addMany(o(144,152),R,3,0),l.add(156,R,0,0),l.add(27,R,11,1),l.add(157,R,4,8),l.addMany([152,158,159],R,0,7),l.add(155,R,11,3),l.add(144,R,11,9);return l.addMany(g,0,3,0),l.addMany(g,1,3,1),l.add(127,1,0,1),l.addMany(g,8,0,8),l.addMany(g,3,3,3),l.add(127,3,0,3),l.addMany(g,4,3,4),l.add(127,4,0,4),l.addMany(g,6,3,6),l.addMany(g,5,3,5),l.add(127,5,0,5),l.addMany(g,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(c,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(o(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(c,7,0,7),l.addMany(g,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(o(64,127),3,7,0),l.addMany(o(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(o(48,60),4,8,4),l.addMany(o(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(o(32,64),6,0,6),l.add(127,6,0,6),l.addMany(o(64,127),6,0,0),l.addMany(o(32,48),3,9,5),l.addMany(o(32,48),5,9,5),l.addMany(o(48,64),5,0,6),l.addMany(o(64,127),5,7,0),l.addMany(o(32,48),4,9,5),l.addMany(o(32,48),1,9,2),l.addMany(o(32,48),2,9,2),l.addMany(o(48,127),2,10,0),l.addMany(o(48,80),1,10,0),l.addMany(o(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(o(96,127),1,10,0),l.add(80,1,11,9),l.addMany(g,9,0,9),l.add(127,9,0,9),l.addMany(o(28,32),9,0,9),l.addMany(o(32,48),9,9,12),l.addMany(o(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(g,11,0,11),l.addMany(o(32,128),11,0,11),l.addMany(o(28,32),11,0,11),l.addMany(g,10,0,10),l.add(127,10,0,10),l.addMany(o(28,32),10,0,10),l.addMany(o(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(o(32,48),10,9,12),l.addMany(g,12,0,12),l.add(127,12,0,12),l.addMany(o(28,32),12,0,12),l.addMany(o(32,48),12,9,12),l.addMany(o(48,64),12,0,11),l.addMany(o(64,127),12,12,13),l.addMany(o(64,127),10,12,13),l.addMany(o(64,127),9,12,13),l.addMany(g,13,13,13),l.addMany(c,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(A,0,2,0),l.add(A,8,5,8),l.add(A,6,0,6),l.add(A,11,0,11),l.add(A,13,13,13),l})();class k extends _.Disposable{constructor(u=d.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new C.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,c,g)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,_.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new v.OscParser),this._dcsParser=this.register(new x.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(u,o=[64,126]){let c=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=u.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<u.intermediates.length;++S){const R=u.intermediates.charCodeAt(S);if(32>R||R>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=R}}if(u.final.length!==1)throw new Error("final must be a single byte");const g=u.final.charCodeAt(0);if(o[0]>g||g>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=g,c}identToString(u){const o=[];for(;u;)o.push(String.fromCharCode(255&u)),u>>=8;return o.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,o){const c=this._identifier(u,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const g=this._escHandlers[c];return g.push(o),{dispose:()=>{const S=g.indexOf(o);S!==-1&&g.splice(S,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,o){this._executeHandlers[u.charCodeAt(0)]=o}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,o){const c=this._identifier(u);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const g=this._csiHandlers[c];return g.push(o),{dispose:()=>{const S=g.indexOf(o);S!==-1&&g.splice(S,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,o){return this._dcsParser.registerHandler(this._identifier(u),o)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,o){return this._oscParser.registerHandler(u,o)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,o,c,g,S){this._parseStack.state=u,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=g,this._parseStack.chunkPos=S}parse(u,o,c){let g,S=0,R=0,O=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,O=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let M=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&M>-1){for(;M>=0&&(g=b[M](this._params),g!==!0);M--)if(g instanceof Promise)return this._parseStack.handlerPos=M,g}this._parseStack.handlers=[];break;case 4:if(c===!1&&M>-1){for(;M>=0&&(g=b[M](),g!==!0);M--)if(g instanceof Promise)return this._parseStack.handlerPos=M,g}this._parseStack.handlers=[];break;case 6:if(S=u[this._parseStack.chunkPos],g=this._dcsParser.unhook(S!==24&&S!==26,c),g)return g;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=u[this._parseStack.chunkPos],g=this._oscParser.end(S!==24&&S!==26,c),g)return g;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,O=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=O;b<o;++b){switch(S=u[b],R=this._transitions.table[this.currentState<<8|(S<160?S:A)],R>>4){case 2:for(let V=b+1;;++V){if(V>=o||(S=u[V])<32||S>126&&S<A){this._printHandler(u,b,V),b=V-1;break}if(++V>=o||(S=u[V])<32||S>126&&S<A){this._printHandler(u,b,V),b=V-1;break}if(++V>=o||(S=u[V])<32||S>126&&S<A){this._printHandler(u,b,V),b=V-1;break}if(++V>=o||(S=u[V])<32||S>126&&S<A){this._printHandler(u,b,V),b=V-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const M=this._csiHandlers[this._collect<<8|S];let U=M?M.length-1:-1;for(;U>=0&&(g=M[U](this._params),g!==!0);U--)if(g instanceof Promise)return this._preserveStack(3,M,U,R,b),g;U<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++b<o&&(S=u[b])>47&&S<60);b--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const X=this._escHandlers[this._collect<<8|S];let F=X?X.length-1:-1;for(;F>=0&&(g=X[F](),g!==!0);F--)if(g instanceof Promise)return this._preserveStack(4,X,F,R,b),g;F<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let V=b+1;;++V)if(V>=o||(S=u[V])===24||S===26||S===27||S>127&&S<A){this._dcsParser.put(u,b,V),b=V-1;break}break;case 14:if(g=this._dcsParser.unhook(S!==24&&S!==26),g)return this._preserveStack(6,[],0,R,b),g;S===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let V=b+1;;V++)if(V>=o||(S=u[V])<32||S>127&&S<A){this._oscParser.put(u,b,V),b=V-1;break}break;case 6:if(g=this._oscParser.end(S!==24&&S!==26),g)return this._preserveStack(5,[],0,R,b),g;S===27&&(R|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&R}}}d.EscapeSequenceParser=k},6242:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OscHandler=d.OscParser=void 0;const _=m(5770),C=m(482),v=[];d.OscParser=class{constructor(){this._state=0,this._active=v,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(x,T){this._handlers[x]===void 0&&(this._handlers[x]=[]);const A=this._handlers[x];return A.push(T),{dispose:()=>{const k=A.indexOf(T);k!==-1&&A.splice(k,1)}}}clearHandler(x){this._handlers[x]&&delete this._handlers[x]}setHandlerFallback(x){this._handlerFb=x}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}reset(){if(this._state===2)for(let x=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;x>=0;--x)this._active[x].end(!1);this._stack.paused=!1,this._active=v,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||v,this._active.length)for(let x=this._active.length-1;x>=0;x--)this._active[x].start();else this._handlerFb(this._id,"START")}_put(x,T,A){if(this._active.length)for(let k=this._active.length-1;k>=0;k--)this._active[k].put(x,T,A);else this._handlerFb(this._id,"PUT",(0,C.utf32ToString)(x,T,A))}start(){this.reset(),this._state=1}put(x,T,A){if(this._state!==3){if(this._state===1)for(;T<A;){const k=x[T++];if(k===59){this._state=2,this._start();break}if(k<48||57<k)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+k-48}this._state===2&&A-T>0&&this._put(x,T,A)}}end(x,T=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let A=!1,k=this._active.length-1,l=!1;if(this._stack.paused&&(k=this._stack.loopPosition-1,A=T,l=this._stack.fallThrough,this._stack.paused=!1),!l&&A===!1){for(;k>=0&&(A=this._active[k].end(x),A!==!0);k--)if(A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=k,this._stack.fallThrough=!1,A;k--}for(;k>=0;k--)if(A=this._active[k].end(!1),A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=k,this._stack.fallThrough=!0,A}else this._handlerFb(this._id,"END",x);this._active=v,this._id=-1,this._state=0}}},d.OscHandler=class{constructor(x){this._handler=x,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(x,T,A){this._hitLimit||(this._data+=(0,C.utf32ToString)(x,T,A),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(x){let T=!1;if(this._hitLimit)T=!1;else if(x&&(T=this._handler(this._data),T instanceof Promise))return T.then((A=>(this._data="",this._hitLimit=!1,A)));return this._data="",this._hitLimit=!1,T}}},8742:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Params=void 0;const m=2147483647;class _{static fromArray(v){const x=new _;if(!v.length)return x;for(let T=Array.isArray(v[0])?1:0;T<v.length;++T){const A=v[T];if(Array.isArray(A))for(let k=0;k<A.length;++k)x.addSubParam(A[k]);else x.addParam(A)}return x}constructor(v=32,x=32){if(this.maxLength=v,this.maxSubParamsLength=x,x>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(v),this.length=0,this._subParams=new Int32Array(x),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(v),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const v=new _(this.maxLength,this.maxSubParamsLength);return v.params.set(this.params),v.length=this.length,v._subParams.set(this._subParams),v._subParamsLength=this._subParamsLength,v._subParamsIdx.set(this._subParamsIdx),v._rejectDigits=this._rejectDigits,v._rejectSubDigits=this._rejectSubDigits,v._digitIsSub=this._digitIsSub,v}toArray(){const v=[];for(let x=0;x<this.length;++x){v.push(this.params[x]);const T=this._subParamsIdx[x]>>8,A=255&this._subParamsIdx[x];A-T>0&&v.push(Array.prototype.slice.call(this._subParams,T,A))}return v}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(v){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(v<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=v>m?m:v}}addSubParam(v){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(v<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=v>m?m:v,this._subParamsIdx[this.length-1]++}}hasSubParams(v){return(255&this._subParamsIdx[v])-(this._subParamsIdx[v]>>8)>0}getSubParams(v){const x=this._subParamsIdx[v]>>8,T=255&this._subParamsIdx[v];return T-x>0?this._subParams.subarray(x,T):null}getSubParamsAll(){const v={};for(let x=0;x<this.length;++x){const T=this._subParamsIdx[x]>>8,A=255&this._subParamsIdx[x];A-T>0&&(v[x]=this._subParams.slice(T,A))}return v}addDigit(v){let x;if(this._rejectDigits||!(x=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const T=this._digitIsSub?this._subParams:this.params,A=T[x-1];T[x-1]=~A?Math.min(10*A+v,m):v}}d.Params=_},5741:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AddonManager=void 0,d.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let m=this._addons.length-1;m>=0;m--)this._addons[m].instance.dispose()}loadAddon(m,_){const C={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(C),_.dispose=()=>this._wrappedAddonDispose(C),_.activate(m)}_wrappedAddonDispose(m){if(m.isDisposed)return;let _=-1;for(let C=0;C<this._addons.length;C++)if(this._addons[C]===m){_=C;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");m.isDisposed=!0,m.dispose.apply(m.instance),this._addons.splice(_,1)}}},8771:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferApiView=void 0;const _=m(3785),C=m(511);d.BufferApiView=class{constructor(v,x){this._buffer=v,this.type=x}init(v){return this._buffer=v,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(v){const x=this._buffer.lines.get(v);if(x)return new _.BufferLineApiView(x)}getNullCell(){return new C.CellData}}},3785:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLineApiView=void 0;const _=m(511);d.BufferLineApiView=class{constructor(C){this._line=C}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(C,v){if(!(C<0||C>=this._line.length))return v?(this._line.loadCell(C,v),v):this._line.loadCell(C,new _.CellData)}translateToString(C,v,x){return this._line.translateToString(C,v,x)}}},8285:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferNamespaceApi=void 0;const _=m(8771),C=m(8460),v=m(844);class x extends v.Disposable{constructor(A){super(),this._core=A,this._onBufferChange=this.register(new C.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}d.BufferNamespaceApi=x},7975:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParserApi=void 0,d.ParserApi=class{constructor(m){this._core=m}registerCsiHandler(m,_){return this._core.registerCsiHandler(m,(C=>_(C.toArray())))}addCsiHandler(m,_){return this.registerCsiHandler(m,_)}registerDcsHandler(m,_){return this._core.registerDcsHandler(m,((C,v)=>_(C,v.toArray())))}addDcsHandler(m,_){return this.registerDcsHandler(m,_)}registerEscHandler(m,_){return this._core.registerEscHandler(m,_)}addEscHandler(m,_){return this.registerEscHandler(m,_)}registerOscHandler(m,_){return this._core.registerOscHandler(m,_)}addOscHandler(m,_){return this.registerOscHandler(m,_)}}},7090:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeApi=void 0,d.UnicodeApi=class{constructor(m){this._core=m}register(m){this._core.unicodeService.register(m)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(m){this._core.unicodeService.activeVersion=m}}},744:function(q,d,m){var _=this&&this.__decorate||function(l,u,o,c){var g,S=arguments.length,R=S<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,u,o,c);else for(var O=l.length-1;O>=0;O--)(g=l[O])&&(R=(S<3?g(R):S>3?g(u,o,R):g(u,o))||R);return S>3&&R&&Object.defineProperty(u,o,R),R},C=this&&this.__param||function(l,u){return function(o,c){u(o,c,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.BufferService=d.MINIMUM_ROWS=d.MINIMUM_COLS=void 0;const v=m(8460),x=m(844),T=m(5295),A=m(2585);d.MINIMUM_COLS=2,d.MINIMUM_ROWS=1;let k=d.BufferService=class extends x.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new v.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new v.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,d.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,d.MINIMUM_ROWS),this.buffers=this.register(new T.BufferSet(l,this))}resize(l,u){this.cols=l,this.rows=u,this.buffers.resize(l,u),this._onResize.fire({cols:l,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,u=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===l.fg&&c.getBg(0)===l.bg||(c=o.getBlankLine(l,u),this._cachedBlankLine=c),c.isWrapped=u;const g=o.ybase+o.scrollTop,S=o.ybase+o.scrollBottom;if(o.scrollTop===0){const R=o.lines.isFull;S===o.lines.length-1?R?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(S+1,0,c.clone()),R?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const R=S-g+1;o.lines.shiftElements(g+1,R-1,-1),o.lines.set(S,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(l,u,o){const c=this.buffer;if(l<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else l+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const g=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+l,c.ybase),0),g!==c.ydisp&&(u||this._onScroll.fire(c.ydisp))}};d.BufferService=k=_([C(0,A.IOptionsService)],k)},7994:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CharsetService=void 0,d.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(m){this.glevel=m,this.charset=this._charsets[m]}setgCharset(m,_){this._charsets[m]=_,this.glevel===m&&(this.charset=_)}}},1753:function(q,d,m){var _=this&&this.__decorate||function(c,g,S,R){var O,b=arguments.length,M=b<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,S):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(c,g,S,R);else for(var U=c.length-1;U>=0;U--)(O=c[U])&&(M=(b<3?O(M):b>3?O(g,S,M):O(g,S))||M);return b>3&&M&&Object.defineProperty(g,S,M),M},C=this&&this.__param||function(c,g){return function(S,R){g(S,R,c)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreMouseService=void 0;const v=m(2585),x=m(8460),T=m(844),A={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function k(c,g){let S=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(S|=64,S|=c.action):(S|=3&c.button,4&c.button&&(S|=64),8&c.button&&(S|=128),c.action===32?S|=32:c.action!==0||g||(S|=3)),S}const l=String.fromCharCode,u={DEFAULT:c=>{const g=[k(c,!1)+32,c.col+32,c.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${l(g[0])}${l(g[1])}${l(g[2])}`},SGR:c=>{const g=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${k(c,!0)};${c.col};${c.row}${g}`},SGR_PIXELS:c=>{const g=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${k(c,!0)};${c.x};${c.y}${g}`}};let o=d.CoreMouseService=class extends T.Disposable{constructor(c,g){super(),this._bufferService=c,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new x.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(A))this.addProtocol(S,A[S]);for(const S of Object.keys(u))this.addEncoding(S,u[S]);this.reset()}addProtocol(c,g){this._protocols[c]=g}addEncoding(c,g){this._encodings[c]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const g=this._encodings[this._activeEncoding](c);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,g,S){if(S){if(c.x!==g.x||c.y!==g.y)return!1}else if(c.col!==g.col||c.row!==g.row)return!1;return c.button===g.button&&c.action===g.action&&c.ctrl===g.ctrl&&c.alt===g.alt&&c.shift===g.shift}};d.CoreMouseService=o=_([C(0,v.IBufferService),C(1,v.ICoreService)],o)},6975:function(q,d,m){var _=this&&this.__decorate||function(o,c,g,S){var R,O=arguments.length,b=O<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,g):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,c,g,S);else for(var M=o.length-1;M>=0;M--)(R=o[M])&&(b=(O<3?R(b):O>3?R(c,g,b):R(c,g))||b);return O>3&&b&&Object.defineProperty(c,g,b),b},C=this&&this.__param||function(o,c){return function(g,S){c(g,S,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreService=void 0;const v=m(1439),x=m(8460),T=m(844),A=m(2585),k=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=d.CoreService=class extends T.Disposable{constructor(o,c,g){super(),this._bufferService=o,this._logService=c,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new x.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new x.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new x.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new x.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,v.clone)(k),this.decPrivateModes=(0,v.clone)(l)}reset(){this.modes=(0,v.clone)(k),this.decPrivateModes=(0,v.clone)(l)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,(()=>o.split("").map((S=>S.charCodeAt(0))))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,(()=>o.split("").map((c=>c.charCodeAt(0))))),this._onBinary.fire(o))}};d.CoreService=u=_([C(0,A.IBufferService),C(1,A.ILogService),C(2,A.IOptionsService)],u)},9074:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DecorationService=void 0;const _=m(8055),C=m(8460),v=m(844),x=m(6106);let T=0,A=0;class k extends v.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new x.SortedList((o=>o?.marker.line)),this._onDecorationRegistered=this.register(new C.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new C.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,v.toDisposable)((()=>this.reset())))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new l(o);if(c){const g=c.marker.onDispose((()=>c.dispose()));c.onDispose((()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),g.dispose())})),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,g){var S,R,O;let b=0,M=0;for(const U of this._decorations.getKeyIterator(c))b=(S=U.options.x)!==null&&S!==void 0?S:0,M=b+((R=U.options.width)!==null&&R!==void 0?R:1),o>=b&&o<M&&(!g||((O=U.options.layer)!==null&&O!==void 0?O:"bottom")===g)&&(yield U)}forEachDecorationAtCell(o,c,g,S){this._decorations.forEachByKey(c,(R=>{var O,b,M;T=(O=R.options.x)!==null&&O!==void 0?O:0,A=T+((b=R.options.width)!==null&&b!==void 0?b:1),o>=T&&o<A&&(!g||((M=R.options.layer)!==null&&M!==void 0?M:"bottom")===g)&&S(R)}))}}d.DecorationService=k;class l extends v.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=_.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=_.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new C.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new C.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InstantiationService=d.ServiceCollection=void 0;const _=m(2585),C=m(8343);class v{constructor(...T){this._entries=new Map;for(const[A,k]of T)this.set(A,k)}set(T,A){const k=this._entries.get(T);return this._entries.set(T,A),k}forEach(T){for(const[A,k]of this._entries.entries())T(A,k)}has(T){return this._entries.has(T)}get(T){return this._entries.get(T)}}d.ServiceCollection=v,d.InstantiationService=class{constructor(){this._services=new v,this._services.set(_.IInstantiationService,this)}setService(x,T){this._services.set(x,T)}getService(x){return this._services.get(x)}createInstance(x,...T){const A=(0,C.getServiceDependencies)(x).sort(((u,o)=>u.index-o.index)),k=[];for(const u of A){const o=this._services.get(u.id);if(!o)throw new Error(`[createInstance] ${x.name} depends on UNKNOWN service ${u.id}.`);k.push(o)}const l=A.length>0?A[0].index:T.length;if(T.length!==l)throw new Error(`[createInstance] First service dependency of ${x.name} at position ${l+1} conflicts with ${T.length} static arguments`);return new x(...T,...k)}}},7866:function(q,d,m){var _=this&&this.__decorate||function(l,u,o,c){var g,S=arguments.length,R=S<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,u,o,c);else for(var O=l.length-1;O>=0;O--)(g=l[O])&&(R=(S<3?g(R):S>3?g(u,o,R):g(u,o))||R);return S>3&&R&&Object.defineProperty(u,o,R),R},C=this&&this.__param||function(l,u){return function(o,c){u(o,c,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.traceCall=d.setTraceLogger=d.LogService=void 0;const v=m(844),x=m(2585),T={trace:x.LogLevelEnum.TRACE,debug:x.LogLevelEnum.DEBUG,info:x.LogLevelEnum.INFO,warn:x.LogLevelEnum.WARN,error:x.LogLevelEnum.ERROR,off:x.LogLevelEnum.OFF};let A,k=d.LogService=class extends v.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=x.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),A=this}_updateLogLevel(){this._logLevel=T[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let u=0;u<l.length;u++)typeof l[u]=="function"&&(l[u]=l[u]())}_log(l,u,o){this._evalLazyOptionalParams(o),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...o)}trace(l,...u){var o,c;this._logLevel<=x.LogLevelEnum.TRACE&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,u)}debug(l,...u){var o,c;this._logLevel<=x.LogLevelEnum.DEBUG&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,u)}info(l,...u){var o,c;this._logLevel<=x.LogLevelEnum.INFO&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,l,u)}warn(l,...u){var o,c;this._logLevel<=x.LogLevelEnum.WARN&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,l,u)}error(l,...u){var o,c;this._logLevel<=x.LogLevelEnum.ERROR&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,l,u)}};d.LogService=k=_([C(0,x.IOptionsService)],k),d.setTraceLogger=function(l){A=l},d.traceCall=function(l,u,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(...g){if(A.logLevel!==x.LogLevelEnum.TRACE)return c.apply(this,g);A.trace(`GlyphRenderer#${c.name}(${g.map((R=>JSON.stringify(R))).join(", ")})`);const S=c.apply(this,g);return A.trace(`GlyphRenderer#${c.name} return`,S),S}}},7302:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OptionsService=d.DEFAULT_OPTIONS=void 0;const _=m(8460),C=m(844),v=m(6114);d.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:v.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const x=["normal","bold","100","200","300","400","500","600","700","800","900"];class T extends C.Disposable{constructor(k){super(),this._onOptionChange=this.register(new _.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},d.DEFAULT_OPTIONS);for(const u in k)if(u in l)try{const o=k[u];l[u]=this._sanitizeAndValidateOption(u,o)}catch(o){console.error(o)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(k,l){return this.onOptionChange((u=>{u===k&&l(this.rawOptions[k])}))}onMultipleOptionChange(k,l){return this.onOptionChange((u=>{k.indexOf(u)!==-1&&l()}))}_setupOptions(){const k=u=>{if(!(u in d.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},l=(u,o)=>{if(!(u in d.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);o=this._sanitizeAndValidateOption(u,o),this.rawOptions[u]!==o&&(this.rawOptions[u]=o,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const o={get:k.bind(this,u),set:l.bind(this,u)};Object.defineProperty(this.options,u,o)}}_sanitizeAndValidateOption(k,l){switch(k){case"cursorStyle":if(l||(l=d.DEFAULT_OPTIONS[k]),!(function(u){return u==="block"||u==="underline"||u==="bar"})(l))throw new Error(`"${l}" is not a valid value for ${k}`);break;case"wordSeparator":l||(l=d.DEFAULT_OPTIONS[k]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=x.includes(l)?l:d.DEFAULT_OPTIONS[k];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${k} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${k} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${k} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${k} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}d.OptionsService=T},2660:function(q,d,m){var _=this&&this.__decorate||function(T,A,k,l){var u,o=arguments.length,c=o<3?A:l===null?l=Object.getOwnPropertyDescriptor(A,k):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(T,A,k,l);else for(var g=T.length-1;g>=0;g--)(u=T[g])&&(c=(o<3?u(c):o>3?u(A,k,c):u(A,k))||c);return o>3&&c&&Object.defineProperty(A,k,c),c},C=this&&this.__param||function(T,A){return function(k,l){A(k,l,T)}};Object.defineProperty(d,"__esModule",{value:!0}),d.OscLinkService=void 0;const v=m(2585);let x=d.OscLinkService=class{constructor(T){this._bufferService=T,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(T){const A=this._bufferService.buffer;if(T.id===void 0){const g=A.addMarker(A.ybase+A.y),S={data:T,id:this._nextId++,lines:[g]};return g.onDispose((()=>this._removeMarkerFromLink(S,g))),this._dataByLinkId.set(S.id,S),S.id}const k=T,l=this._getEntryIdKey(k),u=this._entriesWithId.get(l);if(u)return this.addLineToLink(u.id,A.ybase+A.y),u.id;const o=A.addMarker(A.ybase+A.y),c={id:this._nextId++,key:this._getEntryIdKey(k),data:k,lines:[o]};return o.onDispose((()=>this._removeMarkerFromLink(c,o))),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(T,A){const k=this._dataByLinkId.get(T);if(k&&k.lines.every((l=>l.line!==A))){const l=this._bufferService.buffer.addMarker(A);k.lines.push(l),l.onDispose((()=>this._removeMarkerFromLink(k,l)))}}getLinkData(T){var A;return(A=this._dataByLinkId.get(T))===null||A===void 0?void 0:A.data}_getEntryIdKey(T){return`${T.id};;${T.uri}`}_removeMarkerFromLink(T,A){const k=T.lines.indexOf(A);k!==-1&&(T.lines.splice(k,1),T.lines.length===0&&(T.data.id!==void 0&&this._entriesWithId.delete(T.key),this._dataByLinkId.delete(T.id)))}};d.OscLinkService=x=_([C(0,v.IBufferService)],x)},8343:(q,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.createDecorator=d.getServiceDependencies=d.serviceRegistry=void 0;const m="di$target",_="di$dependencies";d.serviceRegistry=new Map,d.getServiceDependencies=function(C){return C[_]||[]},d.createDecorator=function(C){if(d.serviceRegistry.has(C))return d.serviceRegistry.get(C);const v=function(x,T,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(k,l,u){l[m]===l?l[_].push({id:k,index:u}):(l[_]=[{id:k,index:u}],l[m]=l)})(v,x,A)};return v.toString=()=>C,d.serviceRegistry.set(C,v),v}},2585:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.IDecorationService=d.IUnicodeService=d.IOscLinkService=d.IOptionsService=d.ILogService=d.LogLevelEnum=d.IInstantiationService=d.ICharsetService=d.ICoreService=d.ICoreMouseService=d.IBufferService=void 0;const _=m(8343);var C;d.IBufferService=(0,_.createDecorator)("BufferService"),d.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),d.ICoreService=(0,_.createDecorator)("CoreService"),d.ICharsetService=(0,_.createDecorator)("CharsetService"),d.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(function(v){v[v.TRACE=0]="TRACE",v[v.DEBUG=1]="DEBUG",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.OFF=5]="OFF"})(C||(d.LogLevelEnum=C={})),d.ILogService=(0,_.createDecorator)("LogService"),d.IOptionsService=(0,_.createDecorator)("OptionsService"),d.IOscLinkService=(0,_.createDecorator)("OscLinkService"),d.IUnicodeService=(0,_.createDecorator)("UnicodeService"),d.IDecorationService=(0,_.createDecorator)("DecorationService")},1480:(q,d,m)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeService=void 0;const _=m(8460),C=m(225);d.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter,this.onChange=this._onChange.event;const v=new C.UnicodeV6;this.register(v),this._active=v.version,this._activeProvider=v}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(v){if(!this._providers[v])throw new Error(`unknown Unicode version "${v}"`);this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)}register(v){this._providers[v.version]=v}wcwidth(v){return this._activeProvider.wcwidth(v)}getStringCellWidth(v){let x=0;const T=v.length;for(let A=0;A<T;++A){let k=v.charCodeAt(A);if(55296<=k&&k<=56319){if(++A>=T)return x+this.wcwidth(k);const l=v.charCodeAt(A);56320<=l&&l<=57343?k=1024*(k-55296)+l-56320+65536:x+=this.wcwidth(l)}x+=this.wcwidth(k)}return x}}}},E={};function Y(q){var d=E[q];if(d!==void 0)return d.exports;var m=E[q]={exports:{}};return D[q].call(m.exports,m,m.exports,Y),m.exports}var te={};return(()=>{var q=te;Object.defineProperty(q,"__esModule",{value:!0}),q.Terminal=void 0;const d=Y(9042),m=Y(3236),_=Y(844),C=Y(5741),v=Y(8285),x=Y(7975),T=Y(7090),A=["cols","rows"];class k extends _.Disposable{constructor(u){super(),this._core=this.register(new m.Terminal(u)),this._addonManager=this.register(new C.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=g=>this._core.options[g],c=(g,S)=>{this._checkReadonlyOptions(g),this._core.options[g]=S};for(const g in this._core.options){const S={get:o.bind(this,g),set:c.bind(this,g)};Object.defineProperty(this._publicOptions,g,S)}}_checkReadonlyOptions(u){if(A.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new x.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new T.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new v.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const o in u)this._publicOptions[o]=u[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(u,o){this._verifyIntegers(u,o),this._core.resize(u,o)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){var o,c,g;return this._checkProposedApi(),this._verifyPositiveIntegers((o=u.x)!==null&&o!==void 0?o:0,(c=u.width)!==null&&c!==void 0?c:0,(g=u.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,o,c){this._verifyIntegers(u,o,c),this._core.select(u,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,o){this._verifyIntegers(u,o),this._core.selectLines(u,o)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,o){this._core.write(u,o)}writeln(u,o){this._core.write(u),this._core.write(`\r
`,o)}paste(u){this._core.paste(u)}refresh(u,o){this._verifyIntegers(u,o),this._core.refresh(u,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return d}_verifyIntegers(...u){for(const o of u)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const o of u)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}q.Terminal=k})(),te})()))})(Lh)),Lh.exports}var Og=jg(),Nh={exports:{}},am;function Lg(){return am||(am=1,(function(p,f){(function(D,E){p.exports=E()})(self,(()=>(()=>{var D={};return(()=>{var E=D;Object.defineProperty(E,"__esModule",{value:!0}),E.FitAddon=void 0,E.FitAddon=class{activate(Y){this._terminal=Y}dispose(){}fit(){const Y=this.proposeDimensions();if(!Y||!this._terminal||isNaN(Y.cols)||isNaN(Y.rows))return;const te=this._terminal._core;this._terminal.rows===Y.rows&&this._terminal.cols===Y.cols||(te._renderService.clear(),this._terminal.resize(Y.cols,Y.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const Y=this._terminal._core,te=Y._renderService.dimensions;if(te.css.cell.width===0||te.css.cell.height===0)return;const q=this._terminal.options.scrollback===0?0:Y.viewport.scrollBarWidth,d=window.getComputedStyle(this._terminal.element.parentElement),m=parseInt(d.getPropertyValue("height")),_=Math.max(0,parseInt(d.getPropertyValue("width"))),C=window.getComputedStyle(this._terminal.element),v=m-(parseInt(C.getPropertyValue("padding-top"))+parseInt(C.getPropertyValue("padding-bottom"))),x=_-(parseInt(C.getPropertyValue("padding-right"))+parseInt(C.getPropertyValue("padding-left")))-q;return{cols:Math.max(2,Math.floor(x/te.css.cell.width)),rows:Math.max(1,Math.floor(v/te.css.cell.height))}}}})(),D})()))})(Nh)),Nh.exports}var Ng=Lg();const Bg=p=>p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hg=p=>p.replace(/^([A-Z])|[\s-_]+(\w)/g,(f,D,E)=>E?E.toUpperCase():D.toLowerCase()),lm=p=>{const f=Hg(p);return f.charAt(0).toUpperCase()+f.slice(1)},Im=(...p)=>p.filter((f,D,E)=>!!f&&f.trim()!==""&&E.indexOf(f)===D).join(" ").trim(),zg=p=>{for(const f in p)if(f.startsWith("aria-")||f==="role"||f==="title")return!0};var Ug={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pg=z.forwardRef(({color:p="currentColor",size:f=24,strokeWidth:D=2,absoluteStrokeWidth:E,className:Y="",children:te,iconNode:q,...d},m)=>z.createElement("svg",{ref:m,...Ug,width:f,height:f,stroke:p,strokeWidth:E?Number(D)*24/Number(f):D,className:Im("lucide",Y),...!te&&!zg(d)&&{"aria-hidden":"true"},...d},[...q.map(([_,C])=>z.createElement(_,C)),...Array.isArray(te)?te:[te]]));const Je=(p,f)=>{const D=z.forwardRef(({className:E,...Y},te)=>z.createElement(Pg,{ref:te,iconNode:f,className:Im(`lucide-${Bg(lm(p))}`,`lucide-${p}`,E),...Y}));return D.displayName=lm(p),D};const Ig=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fg=Je("arrow-left",Ig);const qg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wg=Je("arrow-right",qg);const $g=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Kg=Je("arrow-up",$g);const Gg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Yg=Je("bell",Gg);const Vg=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],om=Je("brain",Vg);const Xg=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qh=Je("check",Xg);const Qg=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bi=Je("chevron-down",Qg);const Zg=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Jg=Je("chevron-left",Zg);const e0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ps=Je("chevron-right",e0);const t0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bc=Je("circle-check",t0);const i0=[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]],Bh=Je("circle-dashed",i0);const s0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n0=Je("eye",s0);const r0=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],a0=Je("file-code",r0);const l0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],o0=Je("file-json",l0);const c0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fm=Je("file-text",c0);const u0=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],h0=Je("folder-open",u0);const d0=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],qm=Je("folder",d0);const f0=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],p0=Je("git-branch",f0);const m0=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],cm=Je("list-checks",m0);const _0=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],v0=Je("palette",_0);const g0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hc=Je("plus",g0);const b0=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Wm=Je("rotate-cw",b0);const y0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],S0=Je("save",y0);const w0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wh=Je("search",w0);const x0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$m=Je("settings",x0);const C0=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],k0=Je("square-terminal",C0);const E0=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A0=Je("star",E0);const D0=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],T0=Je("terminal",D0);const R0=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],M0=Je("thumbs-down",R0);const j0=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],O0=Je("thumbs-up",j0);const L0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$h=Je("triangle-alert",L0);const N0=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Kh=Je("wand-sparkles",N0);const B0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ic=Je("x",B0);class Km{constructor(...f){this.type="Logical",f.length===1?"Logical"in f[0]?(this.width=f[0].Logical.width,this.height=f[0].Logical.height):(this.width=f[0].width,this.height=f[0].height):(this.width=f[0],this.height=f[1])}toPhysical(f){return new fl(this.width*f,this.height*f)}[vs](){return{width:this.width,height:this.height}}toJSON(){return this[vs]()}}class fl{constructor(...f){this.type="Physical",f.length===1?"Physical"in f[0]?(this.width=f[0].Physical.width,this.height=f[0].Physical.height):(this.width=f[0].width,this.height=f[0].height):(this.width=f[0],this.height=f[1])}toLogical(f){return new Km(this.width/f,this.height/f)}[vs](){return{width:this.width,height:this.height}}toJSON(){return this[vs]()}}class Hr{constructor(f){this.size=f}toLogical(f){return this.size instanceof Km?this.size:this.size.toLogical(f)}toPhysical(f){return this.size instanceof fl?this.size:this.size.toPhysical(f)}[vs](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[vs]()}}class Gm{constructor(...f){this.type="Logical",f.length===1?"Logical"in f[0]?(this.x=f[0].Logical.x,this.y=f[0].Logical.y):(this.x=f[0].x,this.y=f[0].y):(this.x=f[0],this.y=f[1])}toPhysical(f){return new _s(this.x*f,this.y*f)}[vs](){return{x:this.x,y:this.y}}toJSON(){return this[vs]()}}class _s{constructor(...f){this.type="Physical",f.length===1?"Physical"in f[0]?(this.x=f[0].Physical.x,this.y=f[0].Physical.y):(this.x=f[0].x,this.y=f[0].y):(this.x=f[0],this.y=f[1])}toLogical(f){return new Gm(this.x/f,this.y/f)}[vs](){return{x:this.x,y:this.y}}toJSON(){return this[vs]()}}class hl{constructor(f){this.position=f}toLogical(f){return this.position instanceof Gm?this.position:this.position.toLogical(f)}toPhysical(f){return this.position instanceof _s?this.position:this.position.toPhysical(f)}[vs](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[vs]()}}class yo extends Mg{constructor(f){super(f)}static async new(f,D,E){return me("plugin:image|new",{rgba:$c(f),width:D,height:E}).then(Y=>new yo(Y))}static async fromBytes(f){return me("plugin:image|from_bytes",{bytes:$c(f)}).then(D=>new yo(D))}static async fromPath(f){return me("plugin:image|from_path",{path:f}).then(D=>new yo(D))}async rgba(){return me("plugin:image|rgba",{rid:this.rid}).then(f=>new Uint8Array(f))}async size(){return me("plugin:image|size",{rid:this.rid})}}function $c(p){return p==null?null:typeof p=="string"?p:p instanceof yo?p.rid:p}var Gh;(function(p){p[p.Critical=1]="Critical",p[p.Informational=2]="Informational"})(Gh||(Gh={}));class H0{constructor(f){this._preventDefault=!1,this.event=f.event,this.id=f.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var um;(function(p){p.None="none",p.Normal="normal",p.Indeterminate="indeterminate",p.Paused="paused",p.Error="error"})(um||(um={}));function Zh(){return new Gc(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function Hh(){return me("plugin:window|get_all_windows").then(p=>p.map(f=>new Gc(f,{skip:!0})))}const zh=["tauri://created","tauri://error"];class Gc{constructor(f,D={}){var E;this.label=f,this.listeners=Object.create(null),D?.skip||me("plugin:window|create",{options:{...D,parent:typeof D.parent=="string"?D.parent:(E=D.parent)===null||E===void 0?void 0:E.label,label:f}}).then(async()=>this.emit("tauri://created")).catch(async Y=>this.emit("tauri://error",Y))}static async getByLabel(f){var D;return(D=(await Hh()).find(E=>E.label===f))!==null&&D!==void 0?D:null}static getCurrent(){return Zh()}static async getAll(){return Hh()}static async getFocusedWindow(){for(const f of await Hh())if(await f.isFocused())return f;return null}async listen(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Co(f,D,{target:{kind:"Window",label:this.label}})}async once(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Qh(f,D,{target:{kind:"Window",label:this.label}})}async emit(f,D){if(zh.includes(f)){for(const E of this.listeners[f]||[])E({event:f,id:-1,payload:D});return}return zm(f,D)}async emitTo(f,D,E){if(zh.includes(D)){for(const Y of this.listeners[D]||[])Y({event:D,id:-1,payload:E});return}return Um(f,D,E)}_handleTauriEvent(f,D){return zh.includes(f)?(f in this.listeners?this.listeners[f].push(D):this.listeners[f]=[D],!0):!1}async scaleFactor(){return me("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return me("plugin:window|inner_position",{label:this.label}).then(f=>new _s(f))}async outerPosition(){return me("plugin:window|outer_position",{label:this.label}).then(f=>new _s(f))}async innerSize(){return me("plugin:window|inner_size",{label:this.label}).then(f=>new fl(f))}async outerSize(){return me("plugin:window|outer_size",{label:this.label}).then(f=>new fl(f))}async isFullscreen(){return me("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return me("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return me("plugin:window|is_maximized",{label:this.label})}async isFocused(){return me("plugin:window|is_focused",{label:this.label})}async isDecorated(){return me("plugin:window|is_decorated",{label:this.label})}async isResizable(){return me("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return me("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return me("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return me("plugin:window|is_closable",{label:this.label})}async isVisible(){return me("plugin:window|is_visible",{label:this.label})}async title(){return me("plugin:window|title",{label:this.label})}async theme(){return me("plugin:window|theme",{label:this.label})}async isAlwaysOnTop(){return me("plugin:window|is_always_on_top",{label:this.label})}async center(){return me("plugin:window|center",{label:this.label})}async requestUserAttention(f){let D=null;return f&&(f===Gh.Critical?D={type:"Critical"}:D={type:"Informational"}),me("plugin:window|request_user_attention",{label:this.label,value:D})}async setResizable(f){return me("plugin:window|set_resizable",{label:this.label,value:f})}async setEnabled(f){return me("plugin:window|set_enabled",{label:this.label,value:f})}async isEnabled(){return me("plugin:window|is_enabled",{label:this.label})}async setMaximizable(f){return me("plugin:window|set_maximizable",{label:this.label,value:f})}async setMinimizable(f){return me("plugin:window|set_minimizable",{label:this.label,value:f})}async setClosable(f){return me("plugin:window|set_closable",{label:this.label,value:f})}async setTitle(f){return me("plugin:window|set_title",{label:this.label,value:f})}async maximize(){return me("plugin:window|maximize",{label:this.label})}async unmaximize(){return me("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return me("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return me("plugin:window|minimize",{label:this.label})}async unminimize(){return me("plugin:window|unminimize",{label:this.label})}async show(){return me("plugin:window|show",{label:this.label})}async hide(){return me("plugin:window|hide",{label:this.label})}async close(){return me("plugin:window|close",{label:this.label})}async destroy(){return me("plugin:window|destroy",{label:this.label})}async setDecorations(f){return me("plugin:window|set_decorations",{label:this.label,value:f})}async setShadow(f){return me("plugin:window|set_shadow",{label:this.label,value:f})}async setEffects(f){return me("plugin:window|set_effects",{label:this.label,value:f})}async clearEffects(){return me("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(f){return me("plugin:window|set_always_on_top",{label:this.label,value:f})}async setAlwaysOnBottom(f){return me("plugin:window|set_always_on_bottom",{label:this.label,value:f})}async setContentProtected(f){return me("plugin:window|set_content_protected",{label:this.label,value:f})}async setSize(f){return me("plugin:window|set_size",{label:this.label,value:f instanceof Hr?f:new Hr(f)})}async setMinSize(f){return me("plugin:window|set_min_size",{label:this.label,value:f instanceof Hr?f:f?new Hr(f):null})}async setMaxSize(f){return me("plugin:window|set_max_size",{label:this.label,value:f instanceof Hr?f:f?new Hr(f):null})}async setSizeConstraints(f){function D(E){return E?{Logical:E}:null}return me("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:D(f?.minWidth),minHeight:D(f?.minHeight),maxWidth:D(f?.maxWidth),maxHeight:D(f?.maxHeight)}})}async setPosition(f){return me("plugin:window|set_position",{label:this.label,value:f instanceof hl?f:new hl(f)})}async setFullscreen(f){return me("plugin:window|set_fullscreen",{label:this.label,value:f})}async setSimpleFullscreen(f){return me("plugin:window|set_simple_fullscreen",{label:this.label,value:f})}async setFocus(){return me("plugin:window|set_focus",{label:this.label})}async setFocusable(f){return me("plugin:window|set_focusable",{label:this.label,value:f})}async setIcon(f){return me("plugin:window|set_icon",{label:this.label,value:$c(f)})}async setSkipTaskbar(f){return me("plugin:window|set_skip_taskbar",{label:this.label,value:f})}async setCursorGrab(f){return me("plugin:window|set_cursor_grab",{label:this.label,value:f})}async setCursorVisible(f){return me("plugin:window|set_cursor_visible",{label:this.label,value:f})}async setCursorIcon(f){return me("plugin:window|set_cursor_icon",{label:this.label,value:f})}async setBackgroundColor(f){return me("plugin:window|set_background_color",{color:f})}async setCursorPosition(f){return me("plugin:window|set_cursor_position",{label:this.label,value:f instanceof hl?f:new hl(f)})}async setIgnoreCursorEvents(f){return me("plugin:window|set_ignore_cursor_events",{label:this.label,value:f})}async startDragging(){return me("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(f){return me("plugin:window|start_resize_dragging",{label:this.label,value:f})}async setBadgeCount(f){return me("plugin:window|set_badge_count",{label:this.label,value:f})}async setBadgeLabel(f){return me("plugin:window|set_badge_label",{label:this.label,value:f})}async setOverlayIcon(f){return me("plugin:window|set_overlay_icon",{label:this.label,value:f?$c(f):void 0})}async setProgressBar(f){return me("plugin:window|set_progress_bar",{label:this.label,value:f})}async setVisibleOnAllWorkspaces(f){return me("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:f})}async setTitleBarStyle(f){return me("plugin:window|set_title_bar_style",{label:this.label,value:f})}async setTheme(f){return me("plugin:window|set_theme",{label:this.label,value:f})}async onResized(f){return this.listen(hi.WINDOW_RESIZED,D=>{D.payload=new fl(D.payload),f(D)})}async onMoved(f){return this.listen(hi.WINDOW_MOVED,D=>{D.payload=new _s(D.payload),f(D)})}async onCloseRequested(f){return this.listen(hi.WINDOW_CLOSE_REQUESTED,async D=>{const E=new H0(D);await f(E),E.isPreventDefault()||await this.destroy()})}async onDragDropEvent(f){const D=await this.listen(hi.DRAG_ENTER,q=>{f({...q,payload:{type:"enter",paths:q.payload.paths,position:new _s(q.payload.position)}})}),E=await this.listen(hi.DRAG_OVER,q=>{f({...q,payload:{type:"over",position:new _s(q.payload.position)}})}),Y=await this.listen(hi.DRAG_DROP,q=>{f({...q,payload:{type:"drop",paths:q.payload.paths,position:new _s(q.payload.position)}})}),te=await this.listen(hi.DRAG_LEAVE,q=>{f({...q,payload:{type:"leave"}})});return()=>{D(),Y(),E(),te()}}async onFocusChanged(f){const D=await this.listen(hi.WINDOW_FOCUS,Y=>{f({...Y,payload:!0})}),E=await this.listen(hi.WINDOW_BLUR,Y=>{f({...Y,payload:!1})});return()=>{D(),E()}}async onScaleChanged(f){return this.listen(hi.WINDOW_SCALE_FACTOR_CHANGED,f)}async onThemeChanged(f){return this.listen(hi.WINDOW_THEME_CHANGED,f)}}var hm;(function(p){p.Disabled="disabled",p.Throttle="throttle",p.Suspend="suspend"})(hm||(hm={}));var dm;(function(p){p.Default="default",p.FluentOverlay="fluentOverlay"})(dm||(dm={}));var fm;(function(p){p.AppearanceBased="appearanceBased",p.Light="light",p.Dark="dark",p.MediumLight="mediumLight",p.UltraDark="ultraDark",p.Titlebar="titlebar",p.Selection="selection",p.Menu="menu",p.Popover="popover",p.Sidebar="sidebar",p.HeaderView="headerView",p.Sheet="sheet",p.WindowBackground="windowBackground",p.HudWindow="hudWindow",p.FullScreenUI="fullScreenUI",p.Tooltip="tooltip",p.ContentBackground="contentBackground",p.UnderWindowBackground="underWindowBackground",p.UnderPageBackground="underPageBackground",p.Mica="mica",p.Blur="blur",p.Acrylic="acrylic",p.Tabbed="tabbed",p.TabbedDark="tabbedDark",p.TabbedLight="tabbedLight"})(fm||(fm={}));var pm;(function(p){p.FollowsWindowActiveState="followsWindowActiveState",p.Active="active",p.Inactive="inactive"})(pm||(pm={}));function Ym(){return new Jh(Zh(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function mm(){return me("plugin:webview|get_all_webviews").then(p=>p.map(f=>new Jh(new Gc(f.windowLabel,{skip:!0}),f.label,{skip:!0})))}const Uh=["tauri://created","tauri://error"];class Jh{constructor(f,D,E){this.window=f,this.label=D,this.listeners=Object.create(null),E?.skip||me("plugin:webview|create_webview",{windowLabel:f.label,options:{...E,label:D}}).then(async()=>this.emit("tauri://created")).catch(async Y=>this.emit("tauri://error",Y))}static async getByLabel(f){var D;return(D=(await mm()).find(E=>E.label===f))!==null&&D!==void 0?D:null}static getCurrent(){return Ym()}static async getAll(){return mm()}async listen(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Co(f,D,{target:{kind:"Webview",label:this.label}})}async once(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Qh(f,D,{target:{kind:"Webview",label:this.label}})}async emit(f,D){if(Uh.includes(f)){for(const E of this.listeners[f]||[])E({event:f,id:-1,payload:D});return}return zm(f,D)}async emitTo(f,D,E){if(Uh.includes(D)){for(const Y of this.listeners[D]||[])Y({event:D,id:-1,payload:E});return}return Um(f,D,E)}_handleTauriEvent(f,D){return Uh.includes(f)?(f in this.listeners?this.listeners[f].push(D):this.listeners[f]=[D],!0):!1}async position(){return me("plugin:webview|webview_position",{label:this.label}).then(f=>new _s(f))}async size(){return me("plugin:webview|webview_size",{label:this.label}).then(f=>new fl(f))}async close(){return me("plugin:webview|webview_close",{label:this.label})}async setSize(f){return me("plugin:webview|set_webview_size",{label:this.label,value:f instanceof Hr?f:new Hr(f)})}async setPosition(f){return me("plugin:webview|set_webview_position",{label:this.label,value:f instanceof hl?f:new hl(f)})}async setFocus(){return me("plugin:webview|set_webview_focus",{label:this.label})}async setAutoResize(f){return me("plugin:webview|set_webview_auto_resize",{label:this.label,value:f})}async hide(){return me("plugin:webview|webview_hide",{label:this.label})}async show(){return me("plugin:webview|webview_show",{label:this.label})}async setZoom(f){return me("plugin:webview|set_webview_zoom",{label:this.label,value:f})}async reparent(f){return me("plugin:webview|reparent",{label:this.label,window:typeof f=="string"?f:f.label})}async clearAllBrowsingData(){return me("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(f){return me("plugin:webview|set_webview_background_color",{color:f})}async onDragDropEvent(f){const D=await this.listen(hi.DRAG_ENTER,q=>{f({...q,payload:{type:"enter",paths:q.payload.paths,position:new _s(q.payload.position)}})}),E=await this.listen(hi.DRAG_OVER,q=>{f({...q,payload:{type:"over",position:new _s(q.payload.position)}})}),Y=await this.listen(hi.DRAG_DROP,q=>{f({...q,payload:{type:"drop",paths:q.payload.paths,position:new _s(q.payload.position)}})}),te=await this.listen(hi.DRAG_LEAVE,q=>{f({...q,payload:{type:"leave"}})});return()=>{D(),Y(),E(),te()}}}function z0(){const p=Ym();return new pl(p.label,{skip:!0})}async function _m(){return me("plugin:window|get_all_windows").then(p=>p.map(f=>new pl(f,{skip:!0})))}class pl{constructor(f,D={}){var E;this.label=f,this.listeners=Object.create(null),D?.skip||me("plugin:webview|create_webview_window",{options:{...D,parent:typeof D.parent=="string"?D.parent:(E=D.parent)===null||E===void 0?void 0:E.label,label:f}}).then(async()=>this.emit("tauri://created")).catch(async Y=>this.emit("tauri://error",Y))}static async getByLabel(f){var D;const E=(D=(await _m()).find(Y=>Y.label===f))!==null&&D!==void 0?D:null;return E?new pl(E.label,{skip:!0}):null}static getCurrent(){return z0()}static async getAll(){return _m()}async listen(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Co(f,D,{target:{kind:"WebviewWindow",label:this.label}})}async once(f,D){return this._handleTauriEvent(f,D)?()=>{const E=this.listeners[f];E.splice(E.indexOf(D),1)}:Qh(f,D,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(f){return me("plugin:window|set_background_color",{color:f}).then(()=>me("plugin:webview|set_webview_background_color",{color:f}))}}U0(pl,[Gc,Jh]);function U0(p,f){(Array.isArray(f)?f:[f]).forEach(D=>{Object.getOwnPropertyNames(D.prototype).forEach(E=>{var Y;typeof p.prototype=="object"&&p.prototype&&E in p.prototype||Object.defineProperty(p.prototype,E,(Y=Object.getOwnPropertyDescriptor(D.prototype,E))!==null&&Y!==void 0?Y:Object.create(null))})})}async function Fc(p,f){await me("plugin:opener|open_url",{url:p,with:f})}async function P0(){return me("settings_get")}async function rl(p){await me("settings_set",{next:p})}async function un(p){return me("provider_key_status",{provider:p})}async function I0(p){await me("provider_key_set",{provider:p.provider,apiKey:p.apiKey,encryptionPassword:p.encryptionPassword??null})}async function F0(p){return me("ai_chat",{messages:p.messages,encryptionPassword:p.encryptionPassword??null,thinking:p.thinking??null})}async function q0(p){return me("provider_key_clear",{provider:p})}async function W0(){return me("auth_begin_login")}async function Ph(p){return me("auth_wait_login",{state:p})}async function $0(){return me("auth_get_profile")}async function K0(){return me("auth_logout")}async function al(){return me("auth_get_credits")}async function G0(p){return me("debug_gemini_end_to_end",{apiKey:p})}async function Y0(){return me("workspace_get")}async function vm(){return me("workspace_pick_folder")}async function V0(){return me("workspace_pick_file")}async function ll(p){return me("workspace_set",{root:p})}async function X0(p){return me("workspace_list_dir",{relDir:p??null})}async function Q0(p){return me("workspace_list_files",{maxFiles:p})}async function ol(p){return me("workspace_read_file",{relPath:p})}async function ms(p,f){await me("workspace_write_file",{relPath:p,contents:f})}async function Z0(p){await me("workspace_create_dir",{relPath:p})}async function Ih(p){await me("workspace_delete",{relPath:p})}async function gm(p,f){await me("workspace_rename",{fromRel:p,toRel:f})}async function J0(p,f){return me("workspace_search",{query:p,maxResults:f})}async function eb(p){return me("terminal_start",{cols:p.cols,rows:p.rows,cwd:p.cwd??null})}async function bm(p){await me("terminal_write",{id:p.id,data:p.data})}async function tb(p){await me("terminal_resize",{id:p.id,cols:p.cols,rows:p.rows})}async function ib(p){await me("terminal_kill",{id:p.id})}function Fh(p,f){const D=f?.enabled!==!1,E=Math.max(10,Math.min(240,Math.floor(f?.cps??70))),Y=Math.max(200,Math.min(12e3,Math.floor(f?.maxChars??6e3))),te=String(p??"").slice(0,Y),[q,d]=z.useState(D?0:te.length),m=z.useRef(te);return z.useEffect(()=>{if(!D){d(te.length),m.current=te;return}if(d(x=>{const T=m.current;return te.startsWith(T)&&x<=T.length?x:0}),!te.length)return;const _=Math.max(12,Math.floor(1e3/E));let C=!0;const v=window.setInterval(()=>{C&&d(x=>x>=te.length?x:Math.min(te.length,x+1))},_);return()=>{C=!1,window.clearInterval(v)}},[te,D,E]),z.useEffect(()=>{m.current=te},[te]),te.slice(0,q)}function sb({messageId:p,ar:f,onToggle:D}){const E=f.phase==="think"?"Think":f.phase==="plan"?"Plan":f.phase==="act"?"Act":f.phase==="verify"?"Verify":"Done",te=f.phase==="think"?om:f.phase==="plan"?cm:f.phase==="act"?Kh:f.phase==="verify"?qh:Bc,q=Fh(f.thinkText||(f.status==="running"?"Thinking":""),{enabled:!0,cps:75}),d=Fh(f.verifyText||"",{enabled:!0,cps:85}),m=Fh(f.doneText||"",{enabled:!0,cps:90});return r.jsxs("div",{className:"ws-msg ws-msg-anim ws-msg-assistant",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-[11px] text-muted",children:"Agent"}),r.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[13px] text-text",children:[r.jsx(te,{className:"h-4 w-4 text-muted"}),r.jsx("span",{className:"truncate",children:"Pompora"})]})]}),r.jsx("div",{className:"shrink-0 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[f.status==="running"?r.jsx(Bh,{className:"h-4 w-4 text-muted animate-spin"}):f.status==="done"?r.jsx(Bc,{className:"h-4 w-4 text-emerald-300"}):r.jsx($h,{className:"h-4 w-4 text-red-300"}),r.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] ${qc(f.status==="error"?"error":f.status==="done"?"done":"running")}`,children:E})]})})]}),r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"think"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(om,{className:"h-4 w-4"}),"Thinking"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.think?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.think?"":"ws-agent-panel-b-open"}`,children:r.jsxs("div",{className:"px-2 pb-2 text-[12px] text-muted whitespace-pre-wrap break-words",children:[q,f.status==="running"?r.jsx("span",{className:"ws-caret"}):null]})})]}),r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"plan"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(cm,{className:"h-4 w-4"}),"Plan"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.plan?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.plan?"":"ws-agent-panel-b-open"}`,children:r.jsx("div",{className:"px-2 pb-2",children:(f.planItems??[]).length?r.jsx("div",{className:"space-y-1",children:(f.planItems??[]).slice(0,12).map((_,C)=>r.jsxs("div",{className:"flex items-start gap-2 text-[12px] text-muted",children:[r.jsx("span",{className:"ws-log-dot mt-1"}),r.jsx("span",{className:"whitespace-pre-wrap break-words",children:_})]},C))}):r.jsx("div",{className:"text-[12px] text-muted",children:"No plan yet."})})})]}),r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"act"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(Kh,{className:"h-4 w-4"}),"Actions"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.act?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.act?"":"ws-agent-panel-b-open"}`,children:r.jsx("div",{className:"px-2 pb-2",children:(f.actions??[]).length?r.jsx("div",{className:"space-y-1",children:(f.actions??[]).slice(-14).map(_=>r.jsxs("div",{className:"flex items-start gap-2 text-[12px] text-muted",children:[r.jsx("span",{className:"mt-0.5",children:_.status==="running"?r.jsx(Bh,{className:"h-4 w-4 animate-spin"}):_.status==="done"?r.jsx(Bc,{className:"h-4 w-4 text-emerald-300"}):_.status==="error"?r.jsx($h,{className:"h-4 w-4 text-red-300"}):r.jsx(Bh,{className:"h-4 w-4"})}),r.jsx("span",{className:"whitespace-pre-wrap break-words",children:_.label})]},_.id))}):r.jsx("div",{className:"text-[12px] text-muted",children:"No actions yet."})})})]}),r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"output"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(k0,{className:"h-4 w-4"}),"Output"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.output?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.output?"":"ws-agent-panel-b-open"}`,children:r.jsx("div",{className:"px-2 pb-2",children:(f.output??[]).length?r.jsx("div",{className:"ws-terminal-log",children:(f.output??[]).slice(-120).map((_,C)=>r.jsx("div",{className:"whitespace-pre-wrap break-words",children:_},C))}):r.jsx("div",{className:"text-[12px] text-muted",children:"No output."})})})]}),r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"verify"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(qh,{className:"h-4 w-4"}),"Verify"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.verify?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.verify?"":"ws-agent-panel-b-open"}`,children:r.jsx("div",{className:"px-2 pb-2 text-[12px] text-muted whitespace-pre-wrap break-words",children:d})})]}),r.jsxs("div",{className:"ws-agent-panel",children:[r.jsxs("button",{type:"button",className:"ws-agent-panel-h flex w-full items-center justify-between px-2 py-2 text-left",onClick:()=>D(p,"done"),children:[r.jsxs("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:[r.jsx(Bc,{className:"h-4 w-4"}),"Done"]}),r.jsx(bi,{className:`h-4 w-4 text-muted ${f.collapsed.done?"":"rotate-180"}`})]}),r.jsx("div",{className:`ws-agent-panel-b ${f.collapsed.done?"":"ws-agent-panel-b-open"}`,children:r.jsx("div",{className:"px-2 pb-2 text-[12px] text-muted whitespace-pre-wrap break-words",children:m})})]})]})]})}function ym(p){return p==="think"?0:p==="plan"?1:p==="act"?2:p==="verify"?3:4}function zc(p,f,D){return Math.max(f,Math.min(D,p))}function Sm(p){const f=Math.max(0,Date.now()-p),D=Math.floor(f/1e3);if(D<60)return"now";const E=Math.floor(D/60);if(E<60)return`${E}m`;const Y=Math.floor(E/60);if(Y<24)return`${Y}h`;const te=Math.floor(Y/24);if(te<7)return`${te}d`;const q=Math.floor(te/7);if(q<4)return`${q}w`;const d=Math.floor(te/30);return d<12?`${d}mo`:`${Math.floor(te/365)}y`}function nb(p){const D=(p.split(`
`)[0]?.trim()??"").replace(/\s+/g," ").replace(/[\[\]{}<>`]/g,"").trim();return D?D.length>34?`${D.slice(0,34).trim()}`:D:"Chat"}function rb(p){return p.role==="user"||p.role==="assistant"}function ab(p){const f=p.trim();return f?!!(f.length>800||f.includes("<!DOCTYPE html")||f.includes("<html")||f.includes("</div>")||f.includes("function ")||f.includes("```")||f.startsWith("{")&&f.includes('"edits"')):!1}function lb(p){const f=[],D=/(^|[\s"'`(\[])([A-Za-z0-9_./-]+\.[A-Za-z0-9]{1,8})(?=$|[\s"'`),.:;!?\]])/g,E=new Set;let Y;for(;Y=D.exec(p);){const te=(Y[2]??"").trim();if(!te||te.includes("://"))continue;const q=te.replace(/^\.\//,"");q.includes(".")&&(q.length>140||E.has(q)||(E.add(q),f.push(q)))}return f}function ob(p){const f=p.trim().toLowerCase();return f?!!(/\brm\b/.test(f)&&/\s-\w*r\w*f\b/.test(f)||/\bmkfs\b/.test(f)||/\bdd\b/.test(f)&&/\bif=\b/.test(f)||/\bshutdown\b|\breboot\b|\bpoweroff\b/.test(f)||f.includes(":(){")&&f.includes("};:")):!1}function wo(p){return p.replace(/\r\n/g,`
`).split(`
`)}function wm(p){return p.replace(/\x1b\[[0-9;?]*[ -/]*[@-~]/g,"").replace(/\x1b\][^\x07]*(?:\x07|\x1b\\)/g,"").replace(/\r/g,"")}function cb(p){const f=wo(p),D=[];let E=0;const Y=te=>{const q=te.match(/^(\d+)(?:,(\d+))?$/);return q?{start:Number(q[1]),count:q[2]?Number(q[2]):1}:{start:0,count:0}};for(;E<f.length;){const q=f[E].match(/^@@\s+-(\d+(?:,\d+)?)\s+\+(\d+(?:,\d+)?)\s+@@/);if(!q){E++;continue}const d=Y(q[1]),m=Y(q[2]),_={oldStart:d.start,oldCount:d.count,newStart:m.start,newCount:m.count,lines:[]};for(E++;E<f.length;){const C=f[E];if(C.startsWith("@@ "))break;if(C.startsWith("--- ")||C.startsWith("+++ ")||C.startsWith("diff ")){E++;continue}const v=C[0],x=C.slice(1);v===" "?_.lines.push({kind:"ctx",text:x}):v==="+"?_.lines.push({kind:"add",text:x}):v==="-"?_.lines.push({kind:"del",text:x}):C==="\\ No newline at end of file"||_.lines.push({kind:"ctx",text:C}),E++}D.push(_)}return D}function ub(p,f,D,E){if(!f.length)return Math.max(D,Math.min(E,p.length));const Y=p.length-f.length;if(D>Y)return null;let te=null,q=1/0;for(let d=D;d<=Y;d++){let m=!0;for(let C=0;C<f.length;C++)if(p[d+C]!==f[C]){m=!1;break}if(!m)continue;const _=Math.abs(d-E);if(_<q&&(q=_,te=d,_===0))break}return te}function xm(p,f){const D=cb(f);if(!D.length)return{ok:!1,error:"Patch has no hunks"};const E=wo(p),Y=[];let te=0;for(const q of D){const d=Math.max(0,q.oldStart-1),m=q.lines.filter(C=>C.kind==="ctx"||C.kind==="del").map(C=>C.text),_=ub(E,m,te,d);if(_===null)return{ok:!1,error:`Failed to locate hunk context in file (starting near line ${d+1}).`};if(_<te)return{ok:!1,error:"Patch hunk overlaps previous hunk"};Y.push(...E.slice(te,_)),te=_;for(const C of q.lines)if(C.kind==="ctx"){if(E[te]!==C.text)return{ok:!1,error:`Context mismatch at line ${te+1}: expected '${C.text}', got '${E[te]??"<eof>"}'`};Y.push(E[te]),te++}else if(C.kind==="del"){if(E[te]!==C.text)return{ok:!1,error:`Delete mismatch at line ${te+1}: expected '${C.text}', got '${E[te]??"<eof>"}'`};te++}else C.kind==="add"&&Y.push(C.text)}return Y.push(...E.slice(te)),{ok:!0,text:Y.join(`
`)}}function Uc(p){const f=p.trim();return f==="/dev/null"?f:f.startsWith("a/")||f.startsWith("b/")?f.slice(2):f}function Cm(p){const f=wo(p),D=[];let E=[];for(const te of f){if(te.startsWith("diff --git ")){E.length&&D.push(E),E=[te];continue}E.length&&E.push(te)}E.length&&D.push(E);const Y=[];for(const te of D){const q=te.join(`
`);let d=null,m=null,_=null,C=null;for(const A of te)A.startsWith("rename from ")&&(d=Uc(A.slice(12))),A.startsWith("rename to ")&&(m=Uc(A.slice(10))),A.startsWith("--- ")&&(_=Uc(A.slice(4))),A.startsWith("+++ ")&&(C=Uc(A.slice(4)));const v=C==="/dev/null"||te.some(A=>A.startsWith("deleted file mode")),x=_==="/dev/null"||te.some(A=>A.startsWith("new file mode"));if(d&&m){Y.push({op:"rename",from:d,to:m}),q.includes("@@ ")&&Y.push({op:"patch",path:m,content:q});continue}const T=(C&&C!=="/dev/null"?C:_&&_!=="/dev/null"?_:null)??null;if(T){if(v){Y.push({op:"delete",path:T});continue}q.includes("@@ ")?Y.push({op:"patch",path:T,content:q}):x&&Y.push({op:"write",path:T,content:""})}}return Y}function hb(p,f){const D=(q,d)=>{let m=String(q??"").trim();if(!m)return m;for(m=m.replace(/\\/g,"/");m.startsWith("./");)m=m.slice(2);const _=(d??"").replace(/\\/g,"/").replace(/\/$/,"");return _&&(m===_||m.startsWith(_+"/"))&&(m=m.slice(_.length),m.startsWith("/")&&(m=m.slice(1))),(m.startsWith("/")||/^[A-Za-z]:\//.test(m)||m.includes(".."))&&(m=Oi(m)),m.startsWith("/")&&(m=m.slice(1)),m};let E=!1;const Y=q=>{if((q.op||"").toLowerCase()==="rename"){const m=typeof q.from=="string"?q.from:"",_=typeof q.to=="string"?q.to:"",C=typeof q.from=="string"?D(q.from,f):q.from,v=typeof q.to=="string"?D(q.to,f):q.to;return m&&C&&m!==C&&(E=!0),_&&v&&_!==v&&(E=!0),{...q,from:C,to:v}}if(typeof q.path=="string"){const m=q.path,_=D(m,f);return m!==_&&(E=!0),{...q,path:_}}return q},te=[];for(const q of p){if((q.op||"").toLowerCase()==="patch"){const m=String(q.content??""),_=m.includes("diff --git ")&&m.includes("@@ ");if((!q.path||!String(q.path).trim())&&_){for(const v of Cm(m))te.push(Y(v));continue}if(_&&m.includes(`
diff --git `)){for(const v of Cm(m))te.push(Y(v));continue}}te.push(Y(q))}return{edits:te,didSanitize:E}}function db(p,f){const D=wo(p),E=wo(f),Y=D.length,te=E.length,q=Y+te,d=new Map;d.set(1,0);const m=[];for(let _=0;_<=q;_++){const C=new Map;for(let v=-_;v<=_;v+=2){let x;v===-_||v!==_&&(d.get(v-1)??0)<(d.get(v+1)??0)?x=d.get(v+1)??0:x=(d.get(v-1)??0)+1;let T=x-v;for(;x<Y&&T<te&&D[x]===E[T];)x++,T++;if(C.set(v,x),x>=Y&&T>=te){m.push(C);const A=[];let k=Y,l=te;for(let u=m.length-1;u>=0;u--){const o=m[u],c=k-l;let g;c===-u||c!==u&&(o.get(c-1)??0)<(o.get(c+1)??0)?g=c+1:g=c-1;const S=o.get(g)??0,R=S-g;for(;k>S&&l>R;)A.push({type:"ctx",line:D[k-1]}),k--,l--;if(u===0)break;k===S?(A.push({type:"add",line:E[l-1]}),l--):(A.push({type:"del",line:D[k-1]}),k--)}return A.reverse(),A}}m.push(C),d.clear();for(const[v,x]of C.entries())d.set(v,x)}return[]}function vo(p){let f=0,D=0;for(const E of p){const Y=E.before??"",te=E.after??"",q=db(Y,te);for(const d of q)d.type==="add"&&f++,d.type==="del"&&D++}return{files:p.length,added:f,removed:D}}function fb(p){const f=p.trim();if(!f)return null;const D=d=>{try{return JSON.parse(d)}catch{return null}},Y=D(f)??(()=>{let d=0,m=-1,_=!1,C=!1;for(let v=0;v<f.length;v++){const x=f[v];if(_){if(C){C=!1;continue}if(x==="\\"){C=!0;continue}x==='"'&&(_=!1);continue}if(x==='"'){_=!0;continue}if(x==="{"){d===0&&(m=v),d++;continue}if(x==="}"&&(d--,d===0&&m>=0))return D(f.slice(m,v+1))}return null})(),te=d=>{const m=d.indexOf('"edits"');if(m<0)return null;const _=d.slice(m),C=_.indexOf("[");if(C<0)return null;const v=_.slice(C);let x=0,T=!1,A=!1;for(let k=0;k<v.length;k++){const l=v[k];if(T){if(A){A=!1;continue}if(l==="\\"){A=!0;continue}l==='"'&&(T=!1);continue}if(l==='"'){T=!0;continue}if(l==="["){x++;continue}if(l==="]"&&(x--,x===0)){const u=v.slice(0,k+1),o=D(u);return Array.isArray(o)?o:null}}return null};if(Y&&typeof Y=="object"){const d=Y;if(Array.isArray(d.edits)){const m=d.edits,_=(typeof d.assistant_message=="string"?d.assistant_message:null)??(typeof d.summary=="string"?d.summary:null)??"Proposed changes are ready.",C=typeof d.think=="string"?d.think:void 0,v=typeof d.verify=="string"?d.verify:void 0,x=typeof d.done=="string"?d.done:void 0;let T;return Array.isArray(d.plan)?T=d.plan.map(A=>typeof A=="string"?A.trim():"").filter(Boolean).slice(0,16):typeof d.plan=="string"&&(T=d.plan.split(`
`).map(A=>A.replace(/^([-*]|\d+\.)\s+/,"").trim()).filter(Boolean).slice(0,16)),{message:String(_).trim(),edits:m,think:C,plan:T,verify:v,done:x}}}const q=te(f);return q&&q.length?{message:"Proposed changes are ready.",edits:q}:null}function st(){return r.jsx("div",{className:"my-1 h-px bg-border"})}function nt(p){return p.checked?r.jsx("span",{className:"text-[11px] text-muted",children:""}):null}function ue(p){return r.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs text-text hover:bg-bg",onClick:()=>{p.onClick?.(),p.keepOpen||window.dispatchEvent(new Event("pompora:menubar-close"))},onMouseEnter:p.onMouseEnter,onMouseLeave:p.onMouseLeave,children:[r.jsx("span",{className:"flex min-w-0 items-center gap-2",children:r.jsx("span",{className:"truncate",children:p.label})}),r.jsxs("span",{className:"flex items-center gap-2 text-[11px] text-muted",children:[p.shortcut?r.jsx("span",{className:"whitespace-nowrap",children:p.shortcut}):null,p.right??null]})]})}function Oi(p){const D=p.replace(/\\/g,"/").split("/").filter(Boolean);return D[D.length-1]??p}function km(p){const f=p.replace(/\\/g,"/"),D=f.lastIndexOf("/");return D<=0?"/":f.slice(0,D)}function Em(p){let f=String(p||"").trim();if(!f)return"";for(f=f.replace(/\\/g,"/");f.startsWith("./");)f=f.slice(2);return f=f.replace(/^\/+/,""),f=f.replace(/\/+?/g,"/"),f}function cl(p){const f=p.toLowerCase(),D=f.includes(".")?f.split(".").pop()??"":"";return D==="ts"||D==="tsx"?"typescript":D==="js"||D==="jsx"?"javascript":D==="json"?"json":D==="css"?"css":D==="html"?"html":D==="md"?"markdown":D==="rs"?"rust":D==="toml"?"toml":D==="yaml"||D==="yml"?"yaml":"plaintext"}function Vm(p){const f=p.toLowerCase();return f.endsWith(".json")?o0:f.endsWith(".ts")||f.endsWith(".tsx")||f.endsWith(".js")||f.endsWith(".jsx")?a0:Fm}function qc(p){return p==="done"?"bg-emerald-500/15 text-emerald-300 border-emerald-500/25":p==="error"?"bg-red-500/15 text-red-300 border-red-500/25":p==="running"?"bg-sky-500/15 text-sky-300 border-sky-500/25":"bg-muted/10 text-muted border-border"}function pb(){const p="pompora.chat_sessions.v1",f="pompora.terminal_run_policy.v1",[D,E]=z.useState("explorer"),[Y,te]=z.useState(!1),[q,d]=z.useState(""),[m,_]=z.useState(0),[C,v]=z.useState(!1),[x,T]=z.useState(""),[A,k]=z.useState(0),[l,u]=z.useState(null),[o,c]=z.useState([]),[g,S]=z.useState(!1),[R,O]=z.useState(!1),[b,M]=z.useState(""),[U,X]=z.useState(()=>{try{return window.localStorage.getItem(f)==="always"?"always":"ask"}catch{return"ask"}}),[F,V]=z.useState(null);z.useEffect(()=>{try{window.localStorage.setItem(f,U)}catch{}},[f,U]),z.useEffect(()=>{if(!F)return;const h=y=>{const N=y.target;N&&(N.closest("[data-run-menu-root]")||V(null))};return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[F]);const[J,ae]=z.useState({theme:"dark",offline_mode:!1,active_provider:null,pompora_thinking:null,workspace_root:null,recent_workspaces:[]}),$=z.useRef(0),[se,L]=z.useState(!1),[I,W]=z.useState(!1),[j,Q]=z.useState(!1),[Z,_e]=z.useState({root:null,recent:[]}),[xe,Ae]=z.useState(!1),[B,ie]=z.useState(!1),[de,fe]=z.useState(!1),[ze,ke]=z.useState(!1),[Ve,qe]=z.useState(!1),[Nt,xt]=z.useState(!1),[Pe,Tt]=z.useState(!1),[Is,gt]=z.useState(null),[yi,Qe]=z.useState(null),[Qt,Bt]=z.useState(!1),ri=z.useCallback(()=>{Ae(!1),ie(!1),fe(!1),ke(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null)},[]),ai=xe||de||ze||Ve||Nt||Pe;z.useEffect(()=>{const h=()=>ri();return window.addEventListener("pompora:menubar-close",h),()=>window.removeEventListener("pompora:menubar-close",h)},[ri]);const[gs,di]=z.useState([]),[Qn,Li]=z.useState(1),[ns,ot]=z.useState({}),[rs,Zt]=z.useState(new Set),[Ct,Ht]=z.useState(null),[bs,ht]=z.useState([]),[Si,bt]=z.useState(null),[Zn,_a]=z.useState(""),[Fs,hn]=z.useState([]),[Ur,ko]=z.useState(!1),[Pr,Ir]=z.useState(null),[as,Ni]=z.useState(null),[dn,Eo]=z.useState(""),[Fr,ml]=z.useState(""),[_l,Bi]=z.useState(null),[qr,qs]=z.useState({}),[Gt,zt]=z.useState(!1),[Ws,Wr]=z.useState(!1),[Yc,vl]=z.useState(!1),[Ao,fn]=z.useState(null),[mt,ys]=z.useState(null),[Hi,ls]=z.useState(null),[zi,yt]=z.useState(!1),[va,Ss]=z.useState(!1),$s=z.useRef(`${Date.now()}-${Math.random().toString(16).slice(2)}`),[pn,gl]=z.useState(""),[Jt,ws]=z.useState(()=>{try{const y=localStorage.getItem(p);if(y){const N=JSON.parse(y);if(Array.isArray(N)){const P=Date.now(),re=N.filter(K=>K&&typeof K.id=="string").map(K=>({id:String(K.id),title:typeof K.title=="string"?K.title:"Chat",createdAt:typeof K.createdAt=="number"?K.createdAt:P,updatedAt:typeof K.updatedAt=="number"?K.updatedAt:P,messages:Array.isArray(K.messages)?K.messages:[],logs:Array.isArray(K.logs)?K.logs:[],draft:typeof K.draft=="string"?K.draft:"",changeSet:K.changeSet??null})).slice(0,200);if(re.length)return re}}}catch{}const h=Date.now();return[{id:$s.current,title:"Chat 1",createdAt:h,updatedAt:h,messages:[],logs:[],draft:"",changeSet:null}]}),[Yt,Ks]=z.useState(()=>Jt[0]?.id??$s.current),[$r,Ui]=z.useState(!1),[Et,Pi]=z.useState(!1),[Kr,Gs]=z.useState(!1),[ga,Gr]=z.useState("chat"),[Vc,wi]=z.useState({}),ba="pompora.splash_skip.v1",[Jn,Yr]=z.useState(!1),[Ys,bl]=z.useState(!1),[yl,Vs]=z.useState(!1),[Xc,ya]=z.useState(!1),[Sl,Xs]=z.useState(!1),[wl,Qc]=z.useState(340),[Vr,xs]=z.useState(300),[mn,er]=z.useState(!1),[Qs,tr]=z.useState(240),[_n,vn]=z.useState("terminal"),[ir,Cs]=z.useState(!1),[xi,ks]=z.useState(!1),[Zs,Es]=z.useState(null),sr=z.useCallback(h=>{if(h instanceof Error)return h.message||String(h);if(typeof h=="string")return h;if(h===null)return"<null>";if(h===void 0)return"<undefined>";try{const y=JSON.stringify(h);return y&&y!=="{}"?y:String(h)}catch{return String(h)}},[]),nr=z.useMemo(()=>Jt.some(h=>h.messages.some(y=>y.role==="user")),[Jt]),xl=z.useRef(!1);z.useEffect(()=>{if(xl.current)return;xl.current=!0;const h=Date.now(),y=`${h}-${Math.random().toString(16).slice(2)}`;ws(N=>[...N,{id:y,title:"Chat",createdAt:h,updatedAt:h,messages:[],logs:[],draft:"",changeSet:null}]),Ks(y)},[]),z.useEffect(()=>{Jt.length&&(Jt.some(h=>h.id===Yt)||Ks(Jt[0].id))},[Yt,Jt]),z.useEffect(()=>{const h=window.setTimeout(()=>{try{localStorage.setItem(p,JSON.stringify(Jt))}catch{}},250);return()=>window.clearTimeout(h)},[Jt]);const As=z.useRef(null),Xr=z.useRef(null),Js=z.useCallback(()=>{bl(!0),Vs(!1),As.current&&window.clearTimeout(As.current),As.current=window.setTimeout(()=>{Yr(!1),bl(!1),As.current=null},520)},[]);z.useEffect(()=>()=>{As.current&&window.clearTimeout(As.current)},[]),z.useEffect(()=>{try{localStorage.getItem(ba)!=="1"&&Yr(!0)}catch{Yr(!0)}},[]),z.useEffect(()=>{if(!Jn)return;ya(!1),Xs(!1);const h=Xr.current;if(!h)return;try{h.load();const N=h.play();N&&typeof N.catch=="function"&&N.catch(()=>{Xs(!0)})}catch{Xs(!0)}const y=window.setTimeout(()=>{try{h.readyState>=2&&h.videoWidth>0&&h.videoHeight>0||Xs(!0)}catch{Xs(!0)}},1200);return()=>window.clearTimeout(y)},[Jn]),z.useEffect(()=>{if(!Jn||Ys)return;const h=window.setTimeout(()=>{Js()},12e3);return()=>window.clearTimeout(h)},[Js,Ys,Jn]);const li=z.useCallback(()=>{Js()},[Js]),gn=z.useCallback(()=>{try{localStorage.setItem(ba,"1")}catch{}Js()},[Js]),[Qr]=z.useState([]),Le=z.useMemo(()=>Jt.find(y=>y.id===Yt)??Jt[0],[Yt,Jt]),bn=z.useRef([]),Sa=z.useRef(null),Zr=z.useRef(null),Ci=z.useRef(null),yn=z.useRef(null),wa=z.useRef(null),xa=z.useRef(null),Sn=z.useRef(null),Do=z.useRef(null),wn=z.useRef(null),To=z.useRef([]),Jr=z.useRef(null),Ro=z.useRef(""),Zc=z.useRef({}),Cl=z.useRef(null),Ii=z.useRef(null),ki=z.useRef(null),Ca=z.useRef(null),rr=z.useRef(null),xn=z.useRef(null),Ds=z.useRef(null),ar=z.useRef(null),ka=z.useRef(null),Jc=z.useMemo(()=>{const h=["52px",`minmax(220px, ${Vr}px)`,"minmax(520px, 1fr)"];return Kr&&h.push(`minmax(280px, ${wl}px)`),h.join(" ")},[wl,Vr,Kr]),kl=z.useMemo(()=>{const h=Jt.map(N=>{const P=N.title.match(/\bChat\s+(\d+)\b/i);return P?Number(P[1]):null}).filter(N=>typeof N=="number"&&Number.isFinite(N));return`Chat ${(h.length?Math.max(...h):0)+1}`},[Jt]),Mo=z.useCallback(h=>{ws(y=>y.map(N=>N.id===Yt?{...N,title:h,updatedAt:Date.now()}:N))},[Yt]),ea=z.useCallback(h=>{ws(y=>y.map(N=>N.id===Yt?{...N,draft:h}:N))},[Yt]),Ze=z.useCallback(h=>{ws(y=>y.map(N=>{if(N.id!==Yt)return N;const P=typeof h=="function"?h(N.messages):h;return{...N,messages:P,updatedAt:Date.now()}}))},[Yt]),en=z.useCallback(h=>{ws(y=>y.map(N=>{if(N.id!==Yt)return N;const P=typeof h=="function"?h(N.logs):h;return{...N,logs:P,updatedAt:Date.now()}}))},[Yt]),Ts=z.useCallback(h=>{const y=Date.now(),N=h.id??`log-${y}-${Math.random().toString(16).slice(2)}`,P=h.groupId??Cl.current??"session",re={id:N,ts:h.ts??y,groupId:P,kind:h.kind,title:h.title,status:h.status,details:h.details,collapsed:h.collapsed??!0};return en(K=>[...K,re].slice(-400)),N},[en]),eu=z.useCallback(h=>{en(y=>y.map(N=>N.id===h?{...N,collapsed:!N.collapsed}:N))},[en]),jo=z.useCallback((h,y)=>{en(N=>N.map(P=>P.id===h?{...P,status:y}:P))},[en]),Oo=z.useCallback((h,y)=>{const N=String(y||"").trim();N&&en(P=>P.map(re=>re.id===h?{...re,details:[...re.details??[],N].slice(-240)}:re))},[en]),lr=z.useCallback((h,y,N)=>{const P=String(y||"").trim();P&&Ze(re=>re.map(K=>{if(K.id!==h||K.kind!=="activity"||!K.activity)return K;const ye=N?.detail?K.activity.steps:[...K.activity.steps,P].slice(-80),ve=N?.detail?[...K.activity.details??[],P].slice(-200):K.activity.details;return{...K,activity:{...K.activity,steps:ye,details:ve}}}))},[Ze]),El=z.useCallback(h=>{Ze(y=>y.map(N=>N.id!==h||N.kind!=="activity"||!N.activity?N:{...N,activity:{...N.activity,collapsed:!N.activity.collapsed}}))},[Ze]),os=z.useCallback((h,y)=>{Ze(N=>N.map(P=>P.id===h&&P.kind==="activity"&&P.activity?{...P,activity:{...P.activity,status:y}}:P))},[Ze]),Ea=z.useCallback((h,y)=>{Ze(N=>N.map(P=>P.id===h&&P.kind==="activity"&&P.activity?{...P,activity:{...P.activity,progress:y}}:P))},[Ze]),Al=z.useCallback(h=>{const y=h.trim();if(!y||Ro.current===y||(Ro.current=y,To.current.push(y),Jr.current))return;const N=Cl.current??"session",P=Zc.current;P[N]||(P[N]=Ts({kind:"info",title:"Activity",status:"running",details:[],collapsed:!1,groupId:N}));const re=P[N];Jr.current=window.setInterval(()=>{const K=To.current.shift();if(!K){Jr.current&&window.clearInterval(Jr.current),Jr.current=null,re&&(jo(re,"done"),delete P[N]);return}re&&Oo(re,K)},80)},[Ts,Oo,jo]),Aa=z.useCallback(async h=>{const y=(bn.current??[]).find(ye=>ye.id===h);if(!y?.run)return;const N=y.run.cmd,P=Array.isArray(y.run.tail)?y.run.tail.join(`
`):"",re=(y.run.error??"").trim(),K=`The following terminal command failed:

${N}

`+(re?`Error summary:
${re}

`:"")+(P?`Terminal output (tail):
${P}

`:"")+"Fix the issue and propose the minimal next terminal commands to resolve it. Return JSON edits.";ea(K),window.setTimeout(()=>{Do.current?.()},0)},[ea]),Ut=z.useCallback(h=>{ws(y=>y.map(N=>N.id===Yt?{...N,changeSet:h,updatedAt:Date.now()}:N))},[Yt]);z.useEffect(()=>{const h=N=>{if(yn.current){const{startX:P,startW:re}=yn.current,K=Math.max(280,Math.min(620,Math.floor(window.innerWidth*.6))),ye=zc(re+(P-N.clientX),280,K);Qc(ye)}if(wa.current){const{startX:P,startW:re}=wa.current,K=Math.max(280,Math.min(520,Math.floor(window.innerWidth*.45))),ye=zc(re+(N.clientX-P),220,K);xs(ye)}if(xa.current){const{startY:P,startH:re}=xa.current,K=Math.max(160,Math.min(520,Math.floor(window.innerHeight*.7))),ye=zc(re+(P-N.clientY),160,K);tr(ye)}},y=()=>{yn.current=null,wa.current=null,xa.current=null};return window.addEventListener("mousemove",h),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y)}},[]);const Rs=z.useCallback(async()=>{if(ki.current&&Ii.current)return;if(ar.current)return ar.current;const h=(async()=>{const y=rr.current;if(!y)return;y.innerHTML="";const N=new Og.Terminal({fontSize:12,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',cursorBlink:!0,cursorStyle:"bar",cursorWidth:2,lineHeight:1.15,scrollback:8e3,convertEol:!0,theme:{background:"rgb(12, 12, 12)",foreground:"rgb(244, 244, 245)",cursor:"rgb(244, 244, 245)",selectionBackground:"rgba(112, 163, 255, 0.25)"}}),P=new Ng.FitAddon;if(N.loadAddon(P),N.open(y),P.fit(),ki.current=N,Ca.current=P,xn.current){try{xn.current()}catch{}xn.current=null}const{cols:re,rows:K}=N,ye=Z.root??J.workspace_root??null,ve=await eb({cols:re,rows:K,cwd:ye});Ii.current=ve,ka.current=ye,N.onData(De=>{const we=Ii.current;we&&bm({id:we,data:De})}),xn.current=await Co("terminal:data",De=>{const we=Ii.current;if(!we||De.payload.id!==we)return;ki.current?.write(De.payload.data);const Ee=Ds.current;if(!Ee||Ee.id!==we)return;const Ce=Date.now();if(Ee.lastDataAt=Ce,Ee.buffer+=De.payload.data,Ce-Ee.lastFlushAt<220)return;Ee.lastFlushAt=Ce;const Oe=Ee.buffer.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);Ee.buffer=Oe.pop()??"";for(const Re of Oe){if(Ee.emitted>=Ee.maxEmitted)break;const Dt=wm(Re).trimEnd();Dt.trim()&&(Ee.emitted+=1,Ee.emit(Dt))}})})();return ar.current=h.catch(y=>{try{ki.current?.dispose()}catch{}ki.current=null,Ca.current=null,Ii.current=null;const N=rr.current;throw N&&(N.innerHTML=""),y}).finally(()=>{ar.current=null}),ar.current},[J.workspace_root,Z.root]),Ms=z.useCallback(()=>{const h=ki.current,y=Ii.current,N=Ca.current;!h||!y||!N||(N.fit(),tb({id:y,cols:h.cols,rows:h.rows}))},[]);z.useEffect(()=>{if(!mn||_n!=="terminal")return;Rs();const h=rr.current;if(!h)return;const y=new ResizeObserver(()=>Ms());return y.observe(h),()=>y.disconnect()},[Rs,mn,_n,Ms,Qs]);const Fi=z.useCallback(async()=>{er(!1);const h=Ii.current;if(Ii.current=null,ka.current=null,ar.current=null,Ds.current=null,xn.current){try{xn.current()}catch{}xn.current=null}try{h&&await ib({id:h})}catch{}try{ki.current?.dispose()}catch{}ki.current=null,Ca.current=null;const y=rr.current;y&&(y.innerHTML="")},[]),Da=z.useCallback(()=>{if(mn){Fi();return}vn("terminal"),er(!0),window.setTimeout(()=>{Rs().then(()=>{Ms(),ki.current?.focus()})},0)},[Fi,Rs,mn,Ms]),Lo=z.useCallback(async(h,y)=>{const N=h.trim();if(!N||ob(N)&&!window.confirm(`The app is about to run a potentially dangerous command:

${N}

Run anyway?`))return;vn("terminal"),er(!0);const P=Z.root??J.workspace_root??null;Ii.current&&ka.current&&P&&ka.current!==P&&(await Fi(),vn("terminal"),er(!0));for(let we=0;we<30&&!rr.current;we++)await new Promise(Ee=>window.setTimeout(Ee,50));await Rs(),Ms(),window.setTimeout(()=>{try{ki.current?.focus()}catch{}},0);const re=Ii.current;if(!re)throw new Error("Terminal not available");y?.(`run ${N}`),Ds.current={id:re,startedAt:Date.now(),lastDataAt:Date.now(),lastFlushAt:0,buffer:"",emitted:0,maxEmitted:28,emit:we=>y?.(`terminal ${we}`)},await bm({id:re,data:N+"\r"});const K=Date.now(),ye=15e3,ve=650,De=350;await new Promise(we=>{const Ee=window.setInterval(()=>{const Ce=Date.now();if(Ce-K>ye){window.clearInterval(Ee),Ds.current=null,we();return}const Oe=Ds.current;if(!Oe||Oe.id!==re){Ce-K>=De&&(window.clearInterval(Ee),Ds.current=null,we());return}Ce-K<De||Ce-Oe.lastDataAt>=ve&&(window.clearInterval(Ee),Ds.current=null,we())},120)})},[Fi,Rs,Ms,J.workspace_root,Z.root]),No=z.useCallback(async()=>{u(null),c([]),await wn.current?.(void 0);const h=Array.from(rs);for(const y of h)await wn.current?.(y)},[rs]),Cn=z.useCallback((h,y)=>{const N=`${Date.now()}-${Math.random().toString(16).slice(2)}`;Ze(P=>[...P,{id:N,role:"assistant",content:"",kind:"run_request",run:{cmd:h,status:"pending",remaining:y,error:null,tail:null,autoFixRequested:!1}}])},[Ze]),kn=z.useCallback(async(h,y)=>{y==="always"&&X("always");const N=(bn.current??[]).find(De=>De.id===h);if(!N?.run||N.kind!=="run_request")return;const P=N.run.cmd,re=Array.isArray(N.run.remaining)?N.run.remaining:[];Ze(De=>De.map(we=>we.id===h?{...we,run:we.run?{...we.run,status:"running"}:we.run}:we));const K=[],ye=`act-${Date.now()}-${Math.random().toString(16).slice(2)}`;Ze(De=>[...De,{id:ye,role:"assistant",content:"",kind:"activity",activity:{title:`Running: ${P}`,status:"running",steps:[]}}]);const ve=De=>{const we=De.trim();if(we&&we.startsWith("terminal ")){const Ee=wm(we.slice(9));if(!Ee.trim()||/^[]+$/.test(Ee.trim()))return;lr(ye,Ee,{detail:!0}),K.push(Ee),K.length>80&&K.splice(0,K.length-80);return}};try{await Lo(P,ve),await No();const De=K.join(`
`),we=/\bnpm\s+err!/i.test(De)||/\berror\s+enoent\b/i.test(De)||/\bcommand failed\b/i.test(De)||/\b(exit code|code)\b\s*[:=]?\s*[1-9]/i.test(De);if(Ze(Oe=>Oe.map(Re=>Re.id===h?{...Re,run:Re.run?{...Re.run,status:"done"}:Re.run}:Re)),os(ye,"done"),we){const Oe=K.slice(-20).join(`
`);Ze(St=>St.map(rt=>rt.id===h?{...rt,run:rt.run?{...rt.run,error:Oe||"Command appears to have failed.",tail:K.slice(-80)}:rt.run}:rt)),Ts({kind:"error",title:"Run failed",status:"error",details:["Click Fix to ask AI to resolve it."]}),(bn.current??[]).find(St=>St.id===h)?.run?.autoFixRequested||(Ze(St=>St.map(rt=>rt.id===h?{...rt,run:rt.run?{...rt.run,autoFixRequested:!0}:rt.run}:rt)),window.setTimeout(()=>{Aa(h)},250))}else Ze(Oe=>Oe.map(Re=>Re.id===h?{...Re,run:Re.run?{...Re.run,tail:K.slice(-80)}:Re.run}:Re));const Ee=re[0]??"",Ce=re.slice(1);Ee.trim()&&(U==="always"?(Cn(Ee,Ce),window.setTimeout(()=>{const Oe=(bn.current??[]).slice().reverse().find(Re=>Re.kind==="run_request"&&Re.run?.cmd===Ee);Oe?.id&&kn(Oe.id,"once")},0)):Cn(Ee,Ce))}catch(De){lr(ye,`Command failed: ${String(De)}`),os(ye,"error"),Ze(we=>we.map(Ee=>Ee.id===h?{...Ee,run:Ee.run?{...Ee.run,status:"canceled"}:Ee.run}:Ee))}},[Ts,lr,Aa,Cn,No,U,Lo,Ze,os]),ta=z.useCallback(h=>{Ze(y=>y.map(N=>N.id===h?{...N,run:N.run?{...N.run,status:"canceled",remaining:[]}:N.run}:N))},[Ze]),cs=z.useCallback(async(h,y,N)=>{if(!h.length)return;if(!Z.root)throw new Error("No workspace is open");const P=[],re=async we=>{we&&await new Promise(Ee=>window.setTimeout(Ee,we))},K=we=>{const Ee=we.match(/\S+\s*/g),Ce=Ee?Ee.length:Math.max(1,Math.ceil(we.length/6)),Oe=we.length>2e4?18:10,Re=Math.ceil(Ce/Oe);return zc(Re*28,240,2400)},ye=h.filter(we=>{const Ee=(we.op||"").toLowerCase();return(Ee==="write"||Ee==="patch")&&typeof we.path=="string"});ye.length&&ye.map(we=>we.path).filter(we=>bs.some(Ee=>Ee.path===we&&Ee.isDirty));const ve=new Set,De=new Set;for(const we of h){const Ee=(we.op||"").toLowerCase();if(Ee==="write"){const Ce=we.path?.trim();if(!Ce)throw new Error("AI edit op 'write' missing path");y?.(`editing ${Ce}`),N?.previewFile&&await N.previewFile(Ce),N?.pace&&await re(K(String(we.content??"")));let Oe=null;try{Oe=await ol(Ce)}catch{Oe=null}Oe&&Oe.length>2e3&&(we.content??"").length<Oe.length*.3,await ms(Ce,we.content??"");const Re=Ce.includes("/")?Ce.split("/").slice(0,-1).join("/"):"";ve.add(Re),u(null),c([]),ht(Dt=>Dt.map(St=>St.path===Ce?{...St,content:we.content??"",isDirty:!1}:St)),y?.(`write ${Ce}`),N?.pace&&await re(120)}else if(Ee==="patch"){const Ce=we.path?.trim();if(!Ce)throw new Error("AI edit op 'patch' missing path");const Oe=String(we.content??"");let Re="";try{const rt=await ol(Ce);Re=typeof rt=="string"?rt:rt.content??""}catch{Re=""}const Dt=xm(Re,Oe);if(!Dt.ok)throw new Error(`Failed to apply patch to ${Ce}: ${Dt.error}`);y?.(`editing ${Ce}`),N?.previewFile&&await N.previewFile(Ce),N?.pace&&await re(K(Dt.text)),await ms(Ce,Dt.text);const St=Ce.includes("/")?Ce.split("/").slice(0,-1).join("/"):"";ve.add(St),u(null),c([]),ht(rt=>rt.map(mr=>mr.path===Ce?{...mr,content:Dt.text,isDirty:!1}:mr)),y?.(`patch ${Ce}`),N?.pace&&await re(120)}else if(Ee==="delete"){const Ce=we.path?.trim();if(!Ce)throw new Error("AI edit op 'delete' missing path");await Ih(Ce);const Oe=Ce.includes("/")?Ce.split("/").slice(0,-1).join("/"):"";ve.add(Oe),u(null),c([]),ht(Re=>Re.filter(Dt=>Dt.path!==Ce)),Si===Ce&&bt(null),y?.(`delete ${Ce}`),N?.pace&&await re(160)}else if(Ee==="rename"){const Ce=we.from?.trim(),Oe=we.to?.trim();if(!Ce||!Oe)throw new Error("AI edit op 'rename' missing from/to");await gm(Ce,Oe);const Re=Ce.includes("/")?Ce.split("/").slice(0,-1).join("/"):"",Dt=Oe.includes("/")?Oe.split("/").slice(0,-1).join("/"):"";ve.add(Re),ve.add(Dt),u(null),c([]),ht(St=>St.map(rt=>rt.path===Ce?{...rt,path:Oe,name:Oi(Oe),language:cl(Oe)}:rt)),Si===Ce&&bt(Oe),y?.(`rename ${Ce}  ${Oe}`),N?.pace&&await re(160)}else if(Ee==="run"){const Ce=String(we.content??"").trim();if(!Ce)throw new Error("AI edit op 'run' missing command in content");De.has(Ce)||(De.add(Ce),P.push(Ce),y?.(`run ${Ce}`))}else throw new Error(`Unsupported AI edit op: ${we.op}`)}await wn.current?.(void 0);for(const we of ve)await wn.current?.(we||void 0);P.length&&(U==="always"?(Cn(P[0],P.slice(1)),window.setTimeout(()=>{const we=(bn.current??[]).slice().reverse().find(Ee=>Ee.kind==="run_request"&&Ee.run?.cmd===P[0]);we?.id&&kn(we.id,"once")},0)):Cn(P[0],P.slice(1)))},[Si,Cn,kn,U,bs,Z.root]),Bo=z.useCallback(async h=>{const y=[],N=new Set,P=async K=>{const ye=bs.find(ve=>ve.path===K);if(ye)return ye.content;try{const ve=await ol(K);return typeof ve=="string"?ve:ve.content??""}catch{return null}};for(const K of h){const ye=(K.op||"").toLowerCase();if(ye!=="run"){if(ye==="write"){const ve=K.path?.trim();if(!ve||N.has(`w:${ve}`))continue;N.add(`w:${ve}`);const De=await P(ve),we=typeof K.content=="string"?K.content:"";y.push({kind:"write",path:ve,before:De,after:we})}else if(ye==="patch"){const ve=K.path?.trim();if(!ve||N.has(`p:${ve}`))continue;N.add(`p:${ve}`);const De=await P(ve)??"",we=String(K.content??""),Ee=xm(De,we);if(!Ee.ok)throw new Error(`Failed to build changeset patch for ${ve}: ${Ee.error}`);y.push({kind:"write",path:ve,before:De,after:Ee.text})}else if(ye==="delete"){const ve=K.path?.trim();if(!ve||N.has(`d:${ve}`))continue;N.add(`d:${ve}`);const De=await P(ve);y.push({kind:"delete",path:ve,before:De,after:null})}else if(ye==="rename"){const ve=K.from?.trim(),De=K.to?.trim();if(!ve||!De||N.has(`r:${ve}->${De}`))continue;N.add(`r:${ve}->${De}`);const we=await P(ve),Ee=we;y.push({kind:"rename",path:`${ve}  ${De}`,before:we,after:Ee})}}}const re=vo(y);return{id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,edits:h,files:y,stats:re,applied:!1}},[bs]),ia=z.useCallback(async h=>{const y=h.files.filter(ve=>ve.kind==="write"),N=h.files.filter(ve=>ve.kind==="delete"),P=h.files.filter(ve=>ve.kind==="rename"),re=y.filter(ve=>ve.before===null),K=[];return h.files.length>8&&K.push(`Large change: ${h.files.length} files`),re.length&&K.push(`Creates new files: ${re.length}`),N.length&&K.push(`Deletes files: ${N.length}`),P.length&&K.push(`Renames: ${P.length}`),K.length?window.confirm(`This change set is larger than usual or potentially destructive:

- ${K.join(`
- `)}

Apply anyway?`):!0},[]),Dl=z.useCallback((h,y,N)=>{const P=[],re=String(h||"").split(`
`).map(Ce=>Ce.trim()).filter(Boolean);let K=!1;for(const Ce of re){const Oe=Ce.toLowerCase();if(Oe==="plan:"||Oe==="plan"||Oe.startsWith("plan:")){K=!0;continue}if(K){if(Oe.startsWith("notes")||Oe.startsWith("result")||Oe.startsWith("changes")||Oe.startsWith("summary")){K=!1;continue}const Re=Ce.replace(/^([-*]|\d+\.)\s+/,"").trim();if(Re&&P.push(Re),P.length>=6)break}}const ye=y.files.map(Ce=>Ce.kind==="rename"?{path:Ce.path.split("  ")[1]??Ce.path,kind:"rename",isNew:!1}:{path:Ce.path,kind:Ce.kind,isNew:Ce.kind==="write"?Ce.before===null:!1}).slice(0,30),ve=[];N&&ve.push("AI returned paths outside this workspace; paths were sanitized.");const De=y.files.filter(Ce=>Ce.kind==="write"&&Ce.before===null).length,we=y.files.filter(Ce=>Ce.kind==="delete").length,Ee=y.files.filter(Ce=>Ce.kind==="rename").length;return y.files.length>8&&ve.push(`Large scope: ${y.files.length} files.`),De&&ve.push(`Creates new files: ${De}.`),we&&ve.push(`Deletes files: ${we}.`),Ee&&ve.push(`Renames files: ${Ee}.`),{changeSetId:y.id,title:"Proposed changes",plan:P.length?P:["Review proposed changes","Apply when ready"],risks:ve,files:ye,stats:y.stats}},[]),pe=z.useCallback(h=>{if(h.kind!=="error")return;const y=`${h.title}: ${h.message}`.trim();y&&Al(y)},[Al]);z.useEffect(()=>{Sn.current=pe},[pe]);const Ta=z.useCallback(h=>{const y=h.trim();if(/\bout_of_credits\b/i.test(y))return{title:"Pompora: out of credits",message:"You ran out of credits for this mode. Upgrade your plan or wait for the quota reset."};if(/\bno_fast_access\b/i.test(y))return{title:"Pompora: fast not available",message:"Your current plan does not include fast mode. Upgrade your plan or use slow mode."};if(/openrouter_rate_limited/i.test(y))return{title:"OpenRouter: rate limited",message:"OpenRouter rate limited the upstream request (shared free capacity). Wait a bit or switch to a different model/provider."};if(/openrouter_privacy_block/i.test(y)||/Free model publication/i.test(y))return{title:"OpenRouter: privacy settings",message:'OpenRouter blocked the request due to your privacy/data-policy settings for free models ("Free model publication"). Open https://openrouter.ai/settings/privacy and relax the restriction (or use a non-free model / BYOK).'};if(y.includes("Insufficient Balance")||y.includes("status 402")||y.includes("Payment Required")){const re=/deepseek/i.test(y);return{title:re?"DeepSeek: Payment required":"AI: Payment required",message:re?"Your DeepSeek API key has insufficient balance. Add credits / enable billing in DeepSeek or switch to another provider.":"This provider requires billing/credits for the selected upstream route. Switch provider/model or wait and retry if this is coming from OpenRouter shared capacity."}}const N=y.match(/status\s+(\d+)/i),P=N?Number(N[1]):null;return P===401||P===403?{title:"AI: Authorization failed",message:"Your API key is invalid or missing permissions. Re-check the key for the selected provider."}:P===429?{title:"AI: Rate limited",message:"You are being rate limited. Wait a bit and try again."}:{title:"AI request failed",message:y}},[]),[us,sa]=z.useState(null),js=z.useRef(null),na=z.useRef(null),[Tl,Ra]=z.useState(null),Te=z.useMemo(()=>Si?bs.find(h=>h.path===Si)??null:null,[Si,bs]),or=z.useMemo(()=>{if(!Te)return null;const h=Le.changeSet;return h?h.files.find(N=>N.kind==="write"&&N.path===Te.path)??null:null},[Le.changeSet,Te]),[Ho,ei]=z.useState(null),Rt=z.useRef(null),Ma=z.useRef("");z.useEffect(()=>()=>{Rt.current&&window.clearInterval(Rt.current),Rt.current=null},[]),z.useEffect(()=>{const h=Le.changeSet?.id??"",y=Te?.path??"",N=typeof or?.after=="string"?or.after:null;if(!h||!y||N===null){ei(null),Ma.current="",Rt.current&&window.clearInterval(Rt.current),Rt.current=null;return}const P=`${h}:${y}:${N.length}:${N.slice(0,32)}`;if(Ma.current===P)return;if(Ma.current=P,N.length<140){ei(null),Rt.current&&window.clearInterval(Rt.current),Rt.current=null;return}Rt.current&&window.clearInterval(Rt.current),Rt.current=null,ei("");const re=N.match(/\S+\s*/g)??[N],K=N.length>2e4?18:10;let ye=0;Rt.current=window.setInterval(()=>{ye=Math.min(re.length,ye+K),ei(re.slice(0,ye).join("")),ye>=re.length&&(Rt.current&&window.clearInterval(Rt.current),Rt.current=null)},28)},[Le.changeSet?.id,Te?.path,or?.after]),z.useEffect(()=>{try{const h=window.localStorage.getItem("pompora.recentFiles");if(!h)return;const y=JSON.parse(h);Array.isArray(y)&&di(y.filter(N=>typeof N=="string").slice(0,20))}catch{}},[]);const En=z.useCallback(h=>{const y=h.replace(/\\/g,"/");di(N=>{const P=[y,...N.filter(re=>re!==y)].slice(0,20);try{window.localStorage.setItem("pompora.recentFiles",JSON.stringify(P))}catch{}return P})},[]),tn=z.useCallback(()=>{const h=Qn;Li(P=>P+1);const y=`untitled:${Date.now()}:${h}`,N={path:y,name:`Untitled-${h}`,language:"plaintext",content:"",isDirty:!0};ht(P=>[...P,N]),bt(y)},[Qn]),ja=z.useCallback(()=>{try{const h=`main-${Date.now()}`;new pl(h,{title:"Pompora",width:1280,height:800})}catch(h){console.error("New window failed",h),window.alert(`Failed to open new window: ${String(h)}`)}},[]);z.useEffect(()=>{const h=document.documentElement;J.theme==="light"?h.setAttribute("data-theme","light"):h.removeAttribute("data-theme")},[J.theme]),z.useEffect(()=>{let h=!1;return Promise.all([P0(),Y0()]).then(([y,N])=>{if(h)return;const P=y.active_provider==="openrouter"?"openai":y.active_provider;ae(re=>({...re,...y,pompora_thinking:y.pompora_thinking??re.pompora_thinking??null,workspace_root:y.workspace_root??null,recent_workspaces:y.recent_workspaces??[],active_provider:P??null})),_e(N)}).catch(()=>{}).finally(()=>{h||L(!0)}),()=>{h=!0}},[]),z.useEffect(()=>{let h=!1;if(Bi(null),Ni(null),!!se&&J.active_provider)return un(J.active_provider).then(y=>{h||Ni(y)}).catch(y=>{h||Bi(String(y))}),()=>{h=!0}},[se,J.active_provider]),z.useEffect(()=>{let h=!1;return $0().then(y=>{h||ys(y)}).catch(()=>{}),()=>{h=!0}},[]),z.useEffect(()=>{if(!mt){ls(null);return}let h=!1;return al().then(y=>{h||ls(y)}).catch(()=>{}),()=>{h=!0}},[mt]),z.useEffect(()=>{if(!va)return;const h=y=>{const N=y.target;N&&(N.closest("[data-account-menu-root]")||Ss(!1))};return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[va]);const Rl=z.useMemo(()=>{const h=(mt?.first_name??"").trim(),y=(mt?.last_name??"").trim();if(h&&y)return`${h[0].toUpperCase()}${y[0].toUpperCase()}`;if(h)return h[0].toUpperCase();const N=(mt?.email??"").trim();return N?N[0].toUpperCase():"U"},[mt?.email,mt?.first_name,mt?.last_name]),Oa=z.useCallback(async h=>{try{const y=Fc(h);if(await Promise.race([y.then(()=>"ok").catch(()=>"err"),new Promise(P=>window.setTimeout(()=>P("timeout"),1500))])==="ok")return!0}catch{}try{return window.open(h,"_blank","noopener,noreferrer"),!0}catch{}return!1},[]),cr=z.useCallback(async()=>{if(!zi){yt(!0);try{await K0(),ys(null),ls(null),Ss(!1);try{J.active_provider==="pompora"&&Ni(await un("pompora"))}catch{}}catch(h){pe({kind:"error",title:"Logout failed",message:String(h)})}finally{yt(!1)}}},[zi,pe,J.active_provider]),ur=z.useCallback(async h=>{if(!zi){yt(!0);try{const[y,N]=await W0();let P=y;try{const K=new URL(y),ye=K.searchParams.get("redirect")??"",ve=K.searchParams.get("state")??N,De=`/desktop/login?redirect=${ye}&state=${ve}`;P=`https://pompora.dev/${h}?next=${encodeURIComponent(De)}`}catch{}if(pe({kind:"info",title:"Sign in",message:"Opening browser"}),!await Oa(P)){pe({kind:"error",title:"Could not open browser",message:"Copy the URL and open it manually."});try{window.prompt("Open this URL in your browser:",P)}catch{}yt(!1),Ph(N).then(async K=>{ys(K);try{const ye=await al();ls(ye)}catch{}try{J.active_provider==="pompora"&&Ni(await un("pompora"))}catch{}pe({kind:"info",title:"Signed in",message:"Connected to your Pompora account."})}).catch(K=>{pe({kind:"error",title:"Sign in failed",message:String(K)})});return}yt(!1),Ph(N).then(async K=>{ys(K);try{const ye=await al();ls(ye)}catch{}try{J.active_provider==="pompora"&&Ni(await un("pompora"))}catch{}pe({kind:"info",title:"Signed in",message:"Connected to your Pompora account."})}).catch(K=>{pe({kind:"error",title:"Sign in failed",message:String(K)})})}catch(y){pe({kind:"error",title:"Sign in failed",message:String(y)})}finally{yt(!1)}}},[al,Ph,zi,pe,Oa,J.active_provider]);z.useEffect(()=>{Ws&&J.active_provider&&un(J.active_provider).then(h=>{Ni(h)}).catch(h=>{Bi(String(h))})},[Ws,J.active_provider]);const mi=z.useMemo(()=>[{id:"pompora",label:"Pompora",api:!1},{id:"openai",label:"GPT-4o mini",api:!0},{id:"anthropic",label:"Claude 3.5 Sonnet",api:!0},{id:"gemini",label:"Gemini Flash",api:!0},{id:"deepseek",label:"DeepSeek Chat",api:!0},{id:"groq",label:"Groq Llama",api:!0},{id:"ollama",label:"Ollama",api:!1},{id:"lmstudio",label:"LM Studio",api:!1},{id:"custom",label:"Custom",api:!0}],[]),La=z.useMemo(()=>{const h=J.active_provider;if(!h)return"Not configured";if(h==="pompora"){const N=String(J.pompora_thinking??Zs??"slow").toLowerCase();return`Pompora ${N==="reasoning"?"Reasoning":N==="fast"?"Fast":"Slow"}`}return mi.find(N=>N.id===h)?.label??h},[mi,J.active_provider,J.pompora_thinking,Zs]),zo=z.useMemo(()=>{const h=J.active_provider;return!h||!mi.find(P=>P.id===h)?.api?!1:qr[h]?.is_configured!==!0},[mi,qr,J.active_provider]),qi=z.useMemo(()=>{const h=J.active_provider;return h?h==="pompora"?!1:!["ollama","lmstudio"].includes(h):!0},[J.active_provider]),ti=z.useMemo(()=>{if(J.offline_mode)return"Offline mode is enabled";const h=J.active_provider;return h?h==="pompora"?mt?as?.is_configured!==!0?"Finish signing in to Pompora":null:"Log in to use Pompora AI":qi&&as?.is_configured!==!0?"Add an API key in Settings (Ctrl+,)":null:"Pick an AI provider from the model dropdown"},[mt,as?.is_configured,qi,J.active_provider,J.offline_mode]),ra=z.useMemo(()=>{const h=Hi?.plan||mt?.plan||"starter",y=String(h).toLowerCase().trim();return y==="pro_plus"||y==="proplus"||y==="pro+"?"pro":y==="free"?"starter":y==="starter"||y==="plus"||y==="pro"?y:"starter"},[Hi?.plan,mt?.plan]),Ml=z.useMemo(()=>ra==="pro"?["slow","fast","reasoning"]:ra==="plus"?["slow","fast"]:["slow"],[ra]),An=z.useMemo(()=>new Set(Ml),[Ml]),Uo=z.useCallback(async()=>{const h=[...mi.filter(N=>N.api).map(N=>N.id),"pompora"];if(!h.length)return;const y={};await Promise.all(h.map(async N=>{try{y[N]=await un(N)}catch{y[N]=null}})),qs(y)},[mi]),aa=z.useMemo(()=>({used:0,total:0,pct:0}),[]),la="pompora:settings",Dn=z.useCallback(()=>{ht(h=>h.some(y=>y.path===la)?h:[...h,{path:la,name:"Settings",language:"plaintext",content:"",isDirty:!1}]),bt(la)},[]),[Tn,Po]=z.useState(null),Rn=z.useCallback((h,y,N="tr")=>{const P=h.getBoundingClientRect(),re=10,K=N==="tr"&&P.right<280?"tl":N,ye=P.top<44?"below":"above",ve=K==="tr"?P.right:P.left,De=ye==="above"?P.top:P.bottom,we=Math.min(window.innerWidth-re,Math.max(re,ve)),Ee=Math.min(window.innerHeight-re,Math.max(re,De));Po({text:y,x:we,y:Ee,align:K,placement:ye})},[]),Mn=z.useCallback(()=>Po(null),[]);z.useEffect(()=>{if(!xi)return;const h=y=>{const N=y.target;N&&(N.closest("[data-model-picker-root]")||ks(!1))};return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[xi]),z.useEffect(()=>{Bi(null)},[J.active_provider]);const jl=z.useMemo(()=>{const h=Z.root??J.workspace_root;return h?Oi(h):"No folder"},[J.workspace_root,Z.root]),Wi=z.useMemo(()=>Z.root??J.workspace_root??"",[J.workspace_root,Z.root]),jn=z.useMemo(()=>ti===null,[ti]),lt=z.useCallback(async h=>{const y=h??"",N=await X0(h),P=new Set,re=N.filter(K=>{const ye=String(K?.path||"");return!ye||P.has(ye)?!1:(P.add(ye),!0)});ot(K=>({...K,[y]:re}))},[]);z.useEffect(()=>{wn.current=lt},[lt]);const On=z.useCallback(h=>{const y=h.includes("/")?h.split("/").slice(0,-1).join("/"):"",N=ns[y];return N?N.find(P=>P.path===h)??null:null},[ns]),hr=z.useCallback(h=>h?On(h)?.is_dir?h:h.includes("/")?h.split("/").slice(0,-1).join("/"):"":"",[On]),Mt=z.useCallback(async()=>{ot({}),Zt(new Set),Ht(null),Z.root&&await lt(void 0)},[lt,Z.root]),Na=z.useCallback(async()=>{const h=await vm();if(!h)return;window.alert("Multi-root workspace is not implemented yet. Opening the selected folder instead.");const y=await ll(h);_e(y),ae(N=>({...N,workspace_root:y.root,recent_workspaces:y.recent})),ht([]),bt(null),await Mt()},[Mt]);z.useEffect(()=>{Mt()},[Mt]),z.useEffect(()=>{u(null),c([])},[Z.root]),z.useEffect(()=>{bn.current=Le.messages},[Le.messages]),z.useEffect(()=>{const h=Sa.current;h&&(h.scrollTop=h.scrollHeight)},[Le.messages.length,$r]),z.useEffect(()=>()=>{Ci.current&&window.clearInterval(Ci.current)},[]);const Ba=z.useCallback((h,y)=>{Ze(N=>{const P=N.slice(),re=P[h];if(!re||re.role!=="assistant")return N;const K=re.rating===y?null:y;return P[h]={...re,rating:K},P})},[Ze]),Ln=z.useCallback((h,y)=>{Ci.current&&window.clearInterval(Ci.current);const N=y.match(/\S+\s*/g)??[y],P=y.length>2400?6:y.length>900?4:2,re=y.length>2400?36:30;let K=0,ye="";Ci.current=window.setInterval(()=>{K=Math.min(N.length,K+P);const ve=N.slice(0,K).join("");ve!==ye&&(ye=ve,Ze(De=>De.map(we=>we.id===h?{...we,content:ve}:we))),K>=N.length&&(Ci.current&&window.clearInterval(Ci.current),Ci.current=null)},re)},[Ze]);z.useEffect(()=>{if(!Kr)return;const h=window.setTimeout(()=>Zr.current?.focus(),0);return()=>window.clearTimeout(h)},[Yt,Kr]);const At=z.useCallback(async()=>{try{const h=await vm();if(!h){window.alert("No folder was selected.");return}const y=await ll(h);_e(y),ae(N=>({...N,workspace_root:y.root,recent_workspaces:y.recent})),ht([]),bt(null),await Mt()}catch(h){console.error("Open folder failed",h),window.alert(`Failed to open folder: ${String(h)}`)}},[Mt]),sn=z.useCallback(async h=>{const y=await ll(h);_e(y),ae(N=>({...N,workspace_root:y.root,recent_workspaces:y.recent})),ht([]),bt(null),await Mt()},[Mt]),et=z.useCallback(async h=>{const y=Em(h);if(!y)return;let N="";try{N=await ol(y)}catch{N=""}const P={path:y,name:Oi(y),language:cl(y),content:N,isDirty:!1};if(ht(re=>{const K=y.toLowerCase(),ye=re.find(ve=>String(ve.path||"").replace(/\\/g,"/").toLowerCase()===K);return ye?(bt(ye.path),re):(bt(y),[...re,P])}),Z.root){const re=`${Z.root.replace(/\\/g,"/").replace(/\/$/,"")}/${y}`;En(re)}},[En,Z.root]),oi=z.useMemo(()=>{const h=Le.changeSet;return h?h.files.filter(y=>y.kind==="write"&&typeof y.path=="string"):[]},[Le.changeSet]),[Xe,jt]=z.useState(null),[Os,Ol]=z.useState({}),Ei=z.useCallback((h,y)=>{Ze(N=>N.map(P=>P.id!==h||P.kind!=="agent_run"||!P.agentRun?P:{...P,agentRun:y(P.agentRun)}))},[Ze]),Nn=z.useCallback((h,y)=>{Ei(h,N=>({...N,collapsed:{...N.collapsed,[y]:!N.collapsed[y]}}))},[Ei]),[Ha,Ll]=z.useState(!1),za=z.useRef(null);z.useEffect(()=>{const h=Le.changeSet?.id??null;h!==za.current&&(za.current=h,Ll(!1),Ol({}))},[Le.changeSet?.id]),z.useEffect(()=>{if(!Le.changeSet){jt(null);return}if(!oi.length||Xe&&oi.some(N=>N.path===Xe))return;const y=oi[0].path;jt(y),et(y)},[Le.changeSet,oi,et,Xe]);const Nl=z.useCallback(()=>{const h=Le.changeSet;if(h){if(h.applied){Ut(null),jt(null),Ts({kind:"action",title:"Accepted all changes",status:"done"});return}(async()=>{if(!Z.root){Sn.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}if(!await ia(h))return;const N=new Set;for(const ve of h.edits){if(String(ve.op||"").toLowerCase()!=="run")continue;const we=String(ve.content??"").trim();we&&N.add(we)}const P=h.edits.filter(ve=>String(ve.op||"").toLowerCase()!=="run").length,re=Math.max(1,P+N.size),K=`act-${Date.now()}-${Math.random().toString(16).slice(2)}`;Ze(ve=>[...ve,{id:K,role:"assistant",content:"",kind:"activity",activity:{title:"Applying changes",status:"running",steps:[],progress:{done:0,total:re,current:"Starting"}}}]),Pi(!0);let ye=0;try{const ve=De=>{lr(K,De);const we=String(De||"").trim();we&&/^(write|patch|delete|rename|run)\b/i.test(we)&&(ye=Math.min(re,ye+1),Ea(K,{done:ye,total:re,current:we}))};await cs(h.edits,ve,{pace:!0,previewFile:async De=>{jt(De),await et(De)}}),ye=re,Ea(K,{done:ye,total:re,current:"Done"}),os(K,"done"),Ut({...h,applied:!0})}catch(ve){lr(K,`Failed: ${String(ve)}`),Ea(K,{done:Math.min(ye,re),total:re,current:"Failed"}),os(K,"error")}finally{Pi(!1)}})()}},[Le.changeSet,lr,cs,ia,et,Ut,Ea,os,jt,Z.root]),_i=z.useCallback(async()=>{const h=Le.changeSet;if(h){if(!h.applied){Ut(null),jt(null),Ts({kind:"action",title:"Discarded proposed changes",status:"done"});return}if(!Z.root){Sn.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}Pi(!0);try{const y=[];for(let N=h.files.length-1;N>=0;N--){const P=h.files[N];if(P.kind==="write")P.before===null?y.push({op:"delete",path:P.path}):y.push({op:"write",path:P.path,content:P.before});else if(P.kind==="delete")P.before!==null&&y.push({op:"write",path:P.path,content:P.before});else if(P.kind==="rename"){const re=P.path.split("  ");re.length===2&&y.push({op:"rename",from:re[1],to:re[0]})}}await cs(y),Ut(null),jt(null),Ts({kind:"action",title:"Reverted all changes",status:"done"})}catch(y){Sn.current?.({kind:"error",title:"Revert failed",message:String(y)})}finally{Pi(!1)}}},[Le.changeSet,cs,Ut,Ze,Z.root]),nn=z.useCallback(h=>{const y=Le.changeSet;if(!y)return;if(!y.applied){(async()=>{if(!Z.root){Sn.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}const re=y.edits.filter(K=>{const ye=String(K.op||"").toLowerCase();return ye==="write"||ye==="patch"||ye==="delete"?String(K.path||"").trim()===h:!1});if(!re.length){const K=y.files.filter(ve=>!(ve.kind==="write"&&ve.path===h)),ye={...y,files:K,stats:vo(K)};Ut(K.length?ye:null);return}Pi(!0);try{await cs(re,void 0,{pace:!0,previewFile:async K=>{et(K)}})}finally{Pi(!1)}Ut({...y,applied:!0}),Ts({kind:"action",title:`Applied ${h}`,status:"done"})})();return}const N=y.files.filter(re=>!(re.kind==="write"&&re.path===h));if(!N.length){Ut(null),jt(null);return}const P={...y,files:N,stats:vo(N)};if(Ut(P),!N.some(re=>re.kind==="write"&&re.path===Xe)){const re=N.find(K=>K.kind==="write");re?.kind==="write"&&(jt(re.path),et(re.path))}},[Le.changeSet,et,Xe,Ut]),rn=z.useCallback(async h=>{const y=Le.changeSet;if(!y)return;const N=y.files.find(P=>P.kind==="write"&&P.path===h);if(!(!N||N.kind!=="write")){if(!y.applied){const P=y.files.filter(K=>!(K.kind==="write"&&K.path===h));if(!P.length){Ut(null),jt(null);return}const re={...y,files:P,stats:vo(P)};if(Ut(re),!P.some(K=>K.kind==="write"&&K.path===Xe)){const K=P.find(ye=>ye.kind==="write");K?.kind==="write"&&(jt(K.path),et(K.path))}return}if(!Z.root){Sn.current?.({kind:"error",title:"No workspace",message:"Open a folder first."});return}Pi(!0);try{N.before===null?(await Ih(h),ht(K=>K.filter(ye=>ye.path!==h)),Si===h&&bt(null)):(await ms(h,N.before),ht(K=>K.map(ye=>ye.path===h?{...ye,content:N.before??"",isDirty:!1}:ye)));const P=y.files.filter(K=>!(K.kind==="write"&&K.path===h));if(!P.length){Ut(null),jt(null);return}const re={...y,files:P,stats:vo(P)};if(Ut(re),!P.some(K=>K.kind==="write"&&K.path===Xe)){const K=P.find(ye=>ye.kind==="write");K?.kind==="write"&&(jt(K.path),et(K.path))}}catch(P){Sn.current?.({kind:"error",title:"Reject failed",message:String(P)})}finally{Pi(!1)}}},[Le.changeSet,Si,et,Xe,Ut,Z.root]),oa=z.useCallback(async()=>{if(Z.root&&!g&&!(l===Z.root&&o.length)){S(!0);try{const h=await Q0(2e4),y=new Set,N=h.map(P=>Em(P)).filter(P=>{const re=String(P||"");return!re||y.has(re)?!1:(y.add(re),!0)});c(N),u(Z.root)}finally{S(!1)}}},[o.length,l,g,Z.root]),an=z.useCallback(async()=>{if(!Z.root){await At();return}v(!0),T(""),k(0),oa()},[oa,At,Z.root]),ii=z.useCallback(async()=>{try{const h=await V0();if(!h){window.alert("No file was selected.");return}const y=km(h),N=await ll(y);_e(N),ae(P=>({...P,workspace_root:N.root,recent_workspaces:N.recent})),ht([]),bt(null),await Mt(),await et(Oi(h)),En(h)}catch(h){console.error("Open file failed",h),window.alert(`Failed to open file: ${String(h)}`)}},[et,Mt,En]);z.useEffect(()=>{if(!Qt||!Te||!Te.isDirty||Te.path.startsWith("untitled:"))return;const h=window.setTimeout(()=>{(async()=>{try{await ms(Te.path,Te.content),ht(y=>y.map(N=>N.path===Te.path?{...N,isDirty:!1}:N))}catch(y){console.error("Auto save failed",y)}})()},600);return()=>window.clearTimeout(h)},[Te,Qt]);const Ai=z.useCallback(h=>{if(!Te)return;const y=js.current;if(y){const N=y.getModel(),P=N?Math.max(1,Math.min(h,N.getLineCount())):Math.max(1,h);y.revealLineInCenter(P),y.setPosition({lineNumber:P,column:1}),y.focus();return}Ir({path:Te.path,line:Math.max(1,h)})},[Te]),$i=z.useCallback(()=>{Te&&(O(!0),M(""))},[Te]);z.useEffect(()=>{if(!Pr||!Te||Te.path!==Pr.path)return;const h=js.current;if(!h)return;const y=h.getModel();if(!y)return;const N=Math.max(1,Math.min(Pr.line,y.getLineCount()));h.revealLineInCenter(N),h.setPosition({lineNumber:N,column:1}),h.focus(),Ir(null)},[Te,Pr]);const Ki=z.useCallback(async()=>{if(!Z.root){await At();return}const h=hr(Ct),y=window.prompt("New file name");if(!y)return;const N=h?`${h}/${y}`:y;await ms(N,""),await lt(h||void 0),Ht(N),await et(N)},[hr,et,At,lt,Ct,Z.root]),vi=z.useCallback(async()=>{if(!Z.root){await At();return}const h=hr(Ct),y=window.prompt("New folder name");if(!y)return;const N=h?`${h}/${y}`:y;await Z0(N),await lt(h||void 0),Ht(N)},[hr,At,lt,Ct,Z.root]),Gi=z.useCallback(async()=>{if(!Ct)return;const h=Oi(Ct),y=window.prompt("Rename to",h);if(!y||y===h)return;const N=Ct.includes("/")?Ct.split("/").slice(0,-1).join("/"):"",P=N?`${N}/${y}`:y,re=Ct;await gm(re,P),ht(K=>K.map(ye=>{if(ye.path===re)return{...ye,path:P,name:Oi(P)};const ve=re.endsWith("/")?re:`${re}/`;if(ye.path.startsWith(ve)){const De=ye.path.slice(ve.length),we=`${P}/${De}`;return{...ye,path:we,name:Oi(we)}}return ye})),bt(K=>{if(!K)return K;if(K===re)return P;const ye=re.endsWith("/")?re:`${re}/`;if(K.startsWith(ye)){const ve=K.slice(ye.length);return`${P}/${ve}`}return K}),Ht(P),await Mt()},[Mt,Ct]),Ua=z.useCallback(async()=>{if(!Ct||!window.confirm(`Delete '${Oi(Ct)}'?`))return;const y=Ct;await Ih(y),ht(N=>N.filter(P=>{if(P.path===y)return!1;const re=y.endsWith("/")?y:`${y}/`;return!P.path.startsWith(re)})),bt(N=>{if(!N)return N;if(N===y)return null;const P=y.endsWith("/")?y:`${y}/`;return N.startsWith(P)?null:N}),Ht(null),await Mt()},[Mt,Ct]);z.useEffect(()=>{let h=!1;const y=Zn.trim();if(!y){hn([]);return}if(!Z.root){hn([]);return}ko(!0);const N=window.setTimeout(()=>{J0(y,200).then(P=>{h||hn(P)}).catch(()=>{h||hn([])}).finally(()=>{h||ko(!1)})},180);return()=>{h=!0,window.clearTimeout(N)}},[Zn,Z.root]);const Yi=z.useCallback(h=>{let y=Si;ht(N=>{const P=N.find(K=>K.path===h);if(P?.isDirty&&!window.confirm(`Close '${P.name}' without saving?`))return N;const re=N.filter(K=>K.path!==h);return Si===h&&(y=re.length?re[re.length-1].path:null),re}),bt(y)},[Si]),Bn=z.useCallback(async()=>{if(Te){if(Te.path.startsWith("untitled:")){if(!Z.root&&(await At(),!Z.root))return;const h=window.prompt("Save As (relative path)",Te.name);if(!h)return;const y=h.trim().replace(/\\/g,"/");if(!y)return;await ms(y,Te.content),ht(N=>N.map(P=>P.path===Te.path?{...P,path:y,name:Oi(y),language:cl(y),isDirty:!1}:P)),bt(y);return}await ms(Te.path,Te.content),ht(h=>h.map(y=>y.path===Te.path?{...y,isDirty:!1}:y)),await lt(Te.path.includes("/")?Te.path.split("/").slice(0,-1).join("/"):void 0)}},[Te,At,lt,Z.root]),dr=z.useCallback(async()=>{const h=bs.filter(y=>y.isDirty);for(const y of h){if(y.path.startsWith("untitled:")){bt(y.path);const N=window.prompt("Save As (relative path)",y.name);if(!N)continue;const P=N.trim().replace(/\\/g,"/");if(!P)continue;await ms(P,y.content),ht(re=>re.map(K=>K.path===y.path?{...K,path:P,name:Oi(P),language:cl(P),isDirty:!1}:K)),bt(P);continue}await ms(y.path,y.content),ht(N=>N.map(P=>P.path===y.path?{...P,isDirty:!1}:P))}},[bs]),Pt=z.useCallback(async()=>{if(!Te||!Z.root&&(await At(),!Z.root))return;const h=window.prompt("Save As (relative path)",Te.name);if(!h)return;const y=h.trim().replace(/\\/g,"/");y&&(await ms(y,Te.content),ht(N=>{const P=N.filter(K=>K.path!==Te.path),re={path:y,name:Oi(y),language:cl(y),content:Te.content,isDirty:!1};return[...P,re]}),bt(y),await lt(y.includes("/")?y.split("/").slice(0,-1).join("/"):void 0))},[Te,At,lt,Z.root]),_t=z.useCallback(async()=>{if(!Te)return;if(Te.path.startsWith("untitled:")){if(!window.confirm("Revert will close this untitled file. Continue?"))return;Yi(Te.path);return}const h=await ol(Te.path);ht(y=>y.map(N=>N.path===Te.path?{...N,content:h,isDirty:!1}:N))},[Te,Yi]),We=z.useCallback(async()=>{if(!Z.root){window.alert("No folder is open. Open a folder first.");return}const h=window.prompt("Save Workspace As (file name)","pompora-workspace.json");if(!h)return;const y=h.trim().replace(/\\/g,"/");if(!y)return;const N=JSON.stringify({folders:[Z.root]},null,2);await ms(y,N),await lt(y.includes("/")?y.split("/").slice(0,-1).join("/"):void 0)},[lt,Z.root]),ln=z.useCallback(async()=>{if(!Z.root){window.alert("No folder is open. Open a folder first.");return}const h=window.prompt("Duplicate Workspace As (file name)","pompora-workspace-copy.json");if(!h)return;const y=h.trim().replace(/\\/g,"/");if(!y)return;const N=JSON.stringify({folders:[Z.root]},null,2);await ms(y,N),await lt(y.includes("/")?y.split("/").slice(0,-1).join("/"):void 0)},[lt,Z.root]),fi=z.useCallback(async h=>{const y=h.replace(/\\/g,"/"),N=km(y),P=await ll(N);_e(P),ae(re=>({...re,workspace_root:P.root,recent_workspaces:P.recent})),ht([]),bt(null),await Mt(),await et(Oi(y)),En(y)},[et,Mt,En]),Pa=z.useCallback(async()=>{if(!window.confirm("Close folder?"))return;const y=await ll(null);_e(y),ae(N=>({...N,workspace_root:y.root,recent_workspaces:y.recent})),ht([]),bt(null),ot({}),Zt(new Set),Ht(null)},[]),Ls=z.useCallback(()=>{try{Zh().close()}catch{window.close()}},[]),Io=z.useCallback(()=>{ae(h=>{const y={...h,theme:h.theme==="dark"?"light":"dark"};return rl(y).catch(N=>console.error("Failed to save theme",N)),y})},[]),Bl=z.useCallback(async h=>{const y=$.current+=1;Ni(null),Wr(!1),vl(!1);const N={...J,active_provider:h};ae(N);try{await rl(N),h&&Ni(await un(h))}catch(P){console.error("Failed to save provider selection",P),Bi(String(P)),$.current===y&&ae(J)}},[J]),fr=z.useCallback(async()=>{if(!I){W(!0);try{await rl(J)}catch(h){console.error("Failed to save settings",h),pe({kind:"error",title:"Settings",message:"Failed to save settings"})}finally{W(!1)}}},[I,pe,J]),Hn=z.useCallback(async()=>{if(j)return;Q(!0);const h={...J,offline_mode:!J.offline_mode};ae(h);try{await rl(h)}catch(y){console.error("Failed to toggle offline mode",y),pe({kind:"error",title:"Settings",message:"Failed to toggle offline mode"}),ae(J)}finally{Q(!1)}},[j,pe,J]),Hl=z.useCallback(async h=>{const y=$.current+=1,N={...J,pompora_thinking:h};ae(N);try{await rl(N)}catch(P){console.error("Failed to save pompora thinking",P),pe({kind:"error",title:"Settings",message:`Failed to save thinking mode: ${sr(P)}`}),$.current===y&&ae(J)}},[sr,pe,J]),ca=z.useCallback(async h=>{const y=$.current+=1,N=J;Es(h);const P={...J,active_provider:"pompora",pompora_thinking:h};ae(P);try{await rl(P);try{Ni(await un("pompora"))}catch{}}catch(re){console.error("Failed to select pompora mode",re),pe({kind:"error",title:"Settings",message:`Failed to save thinking mode: ${sr(re)}`}),$.current===y&&(ae(N),Es(N.active_provider==="pompora"?String(N.pompora_thinking??"slow").toLowerCase():null))}},[sr,pe,J]),zl=z.useCallback(async()=>{if(J.active_provider&&J.active_provider!=="pompora"&&dn.trim()){zt(!0),Bi(null);try{await I0({provider:J.active_provider,apiKey:dn.trim(),encryptionPassword:Fr?Fr.trim():void 0}),Wr(!0),setTimeout(()=>Wr(!1),2e3),Ni(await un(J.active_provider))}catch(h){console.error(h),Bi(String(h))}finally{zt(!1)}}},[dn,Fr,J.active_provider]),zn=z.useCallback(async()=>{if(J.active_provider&&J.active_provider!=="pompora"){zt(!0),Bi(null);try{await q0(J.active_provider),vl(!0),setTimeout(()=>vl(!1),2e3),Ni(await un(J.active_provider))}catch(h){console.error(h),Bi(String(h))}finally{zt(!1)}}},[J.active_provider]),Ns=z.useCallback(async()=>{if(J.active_provider){zt(!0),Bi(null),fn("Running debug test...");try{const h=await G0(dn.trim());fn(h)}catch(h){fn(String(h))}finally{zt(!1)}}},[dn,J.active_provider]),Vi=z.useCallback(async()=>{const h=Le.draft.trim();if(!h||!J.active_provider||J.offline_mode)return;let y=null;if(ti){pe({kind:"info",title:"Action required",message:ti}),J.active_provider?Dn():ks(!0);return}Le.messages.length===0&&/^Chat\s+\d+$/i.test(Le.title)&&Mo(nb(h)),Ui(!0);let N;if(qi&&as?.storage==="encryptedfile"){const P=window.prompt("Enter encryption password to use your stored provider key");if(!P){Ui(!1);return}N=P}try{const re=[...(bn.current??[]).filter(Be=>Be.role!=="meta"),{role:"user",content:h}];ea("");const K=Z.root?lb(h):[],ye=Z.root&&Le.changeSet?Le.changeSet.files.filter(Be=>Be.kind==="write"&&typeof Be.path=="string").map(Be=>Be.path).slice(0,4):[],ve=Z.root&&Te?.path?[Te.path]:[],De=Z.root?Array.from(new Set([...K,...ve,...ye])).slice(0,6):[];y=`run-${Date.now()}-${Math.random().toString(16).slice(2)}`,Cl.current=y;const we={id:y,role:"assistant",content:"",kind:"agent_run",agentRun:{phase:"think",status:"running",contextFiles:De,thinkText:"",planItems:[],verifyText:"",doneText:"",actions:[],output:[],collapsed:{think:!1,plan:!1,act:!1,output:!0,verify:!0,done:!1}}};Ze([...re,we]);const Ee=[];for(const Be of De){const qt=`read:${Be}`;Ei(y,si=>({...si,actions:[...si.actions,{id:qt,label:`Read ${Be}`,status:"running"}].slice(-40)}));try{const Qi=Le.changeSet?.files.find(Vt=>Vt.kind==="write"&&Vt.path===Be&&typeof Vt.after=="string")??null,gr=Qi?String(Qi.after||""):await ol(Be),hs=gr.length>12e3;Ee.push({path:Be,content:hs?gr.slice(0,12e3):gr,truncated:hs}),Ei(y,Vt=>({...Vt,actions:Vt.actions.map(Ia=>Ia.id===qt?{...Ia,status:"done"}:Ia)}))}catch{Ei(y,si=>({...si,actions:si.actions.map(Qi=>Qi.id===qt?{...Qi,status:"error"}:Qi)}))}}const Ce=(Le.logs??[]).slice(-24).map(Be=>{const qt=`${Be.title}`.trim(),si=(Be.details??[]).slice(-1)[0];return si?`${qt}  ${si}`:qt}).filter(Boolean).slice(-16),Oe=re.filter(rb).filter(Be=>String(Be.content||"").trim().length>0).filter(Be=>!(Be.role==="assistant"&&Be.kind==="run_request")),Re=[{role:"system",content:`You are Pompora, an autonomous agentic coding system operating inside a real codebase. You MUST follow this workflow in order: THINK, PLAN, ACT, VERIFY, DONE. No skipping.

Output MUST be valid JSON only (no markdown), shaped as:
{
  "assistant_message": string,
  "think": string,
  "plan": string[],
  "verify": string,
  "done": string,
  "edits": AiEditOp[]
}

Rules:
- Do not hallucinate files.
- Prefer op='patch' with unified diff; keep patches minimal; do not replace whole files unless necessary.
- Never patch lines that don't exist in the provided file context.
- Use op='run' for commands; avoid destructive commands.
- If you need more file context, return edits=[] and explain in assistant_message what file(s) to read.
`},...Ee.length?[{role:"system",content:`Workspace file context (use this exact content for patches; if truncated, request a read of the full file):

`+Ee.map(Be=>`FILE: ${Be.path}${Be.truncated?" (TRUNCATED)":""}
---
${Be.content}
---`).join(`

`)}]:[],...Ce.length?[{role:"system",content:`Recent IDE actions (already executed):
`+Ce.map(Be=>`- ${Be}`).join(`
`)}]:[],...Oe.map(Be=>({role:Be.role,content:Be.content}))],Dt=async()=>{const Be=J.active_provider==="pompora"?J.pompora_thinking??Zs??"slow":null,qt=Be?String(Be).toLowerCase():null;return await F0({messages:Re,encryptionPassword:N,thinking:qt})};let St;try{St=await Dt()}catch(Be){const qt=String(Be);if(/No content found in (API|Gemini API) response/i.test(qt))Ts({kind:"info",title:"AI returned an empty response",status:"running",details:["Retrying once"]}),St=await Dt();else throw Be}const rt=St.edits,mr=String(St.output??"");if(!(Array.isArray(rt)&&rt.length>0)&&mr.trim().length===0)throw new Error("No content found in API response: <empty assistant output>");const Xi=fb(String(St.output??"")),vr=Array.isArray(rt)&&rt.length?rt:Xi?.edits??null,Fo=String(St.output??""),Hs=(Xi?.message??Fo.trim()).trim();if(Ei(y,Be=>({...Be,thinkText:String(Xi?.think??"").trim(),planItems:Array.isArray(Xi?.plan)?Xi.plan.slice(0,16):Be.planItems,verifyText:String(Xi?.verify??"").trim(),doneText:String(Xi?.done??"").trim(),phase:Xi?.plan&&Xi.plan.length?"plan":"think"})),vr&&vr.length){Pi(!0),Ei(y,Be=>({...Be,phase:ym(Be.phase)<ym("act")?"act":Be.phase}));try{const Be=hb(vr,Z.root),qt=Be.edits,si=await Bo(qt);Gs(!0),Ut(si);const Qi=si.files.find(Vt=>Vt.kind==="write"&&typeof Vt.path=="string");Qi?.kind==="write"&&(jt(Qi.path),await et(Qi.path));const gr=`prop-${Date.now()}-${Math.random().toString(16).slice(2)}`,hs=Dl(Hs,si,Be.didSanitize);Ze(Vt=>[...Vt,{id:gr,role:"assistant",content:"",kind:"proposal",proposal:hs}])}finally{Pi(!1)}}else{const Be=Hs.length?ab(Hs)?"Im readytell me what you want to change and Ill guide you step by step.":Hs:"Ready.";Ei(y,qt=>({...qt,phase:"done",status:"done",doneText:qt.doneText||Be}))}if(J.active_provider==="pompora")try{const Be=await al();ls(Be)}catch{}}catch(P){const re=Ta(String(P));pe({kind:"error",title:re.title,message:re.message}),y&&Ei(y,K=>({...K,phase:"done",status:"error",doneText:K.doneText||`${re.title}: ${re.message}`}))}finally{Ui(!1)}},[Le.draft,Le.messages.length,Le.title,ti,mt,cs,Bo,Dl,Ta,as?.storage,pe,Dn,et,qi,ks,Ut,ea,Ze,Mo,jt,al,J.active_provider,J.offline_mode,Ln,Z.root]),Bs=z.useMemo(()=>mi.filter(h=>h.id!=="pompora"),[mi]);z.useEffect(()=>{Do.current=Vi},[Vi]);const ua=z.useMemo(()=>{const h=[{id:"file.openFolder",label:"File: Open Folder...",shortcut:"Ctrl+K Ctrl+O",run:()=>{At()}},{id:"file.openFile",label:"File: Open File...",shortcut:"Ctrl+O",run:()=>{ii()}},{id:"file.quickOpen",label:"File: Quick Open...",shortcut:"Ctrl+P",run:()=>{an()}},{id:"editor.gotoLine",label:"Go: Go to Line...",shortcut:"Ctrl+G",run:()=>$i()},{id:"file.newFile",label:"File: New File",shortcut:"Ctrl+N",run:()=>tn()},{id:"file.newFolder",label:"File: New Folder...",run:()=>{vi()}},{id:"file.rename",label:"File: Rename...",run:()=>{Gi()}},{id:"file.delete",label:"File: Delete",run:()=>{Ua()}},{id:"file.save",label:"File: Save",shortcut:"Ctrl+S",run:()=>{Bn()}},{id:"file.saveAll",label:"File: Save All",shortcut:"Ctrl+K S",run:()=>{dr()}},{id:"view.commandPalette",label:"View: Show Command Palette",shortcut:"Ctrl+Shift+P",run:()=>te(!0)},{id:"workbench.findInFiles",label:"Search: Find in Files",shortcut:"Ctrl+Shift+F",run:()=>E("search")},{id:"view.toggleTheme",label:"Preferences: Toggle Theme",run:()=>Io()},{id:"view.settings",label:"Preferences: Open Settings",shortcut:"Ctrl+,",run:()=>Dn()},{id:"workbench.focusExplorer",label:"View: Focus Explorer",run:()=>E("explorer")}];return Te&&h.push({id:"file.closeActive",label:"File: Close Active Editor",shortcut:"Ctrl+W",run:()=>Yi(Te.path)}),h},[Te,Yi,vi,Ua,tn,At,$i,an,Gi,Bn,dr]),Ul=z.useMemo(()=>{const h=q.trim().toLowerCase();return h?ua.filter(y=>y.label.toLowerCase().includes(h)):ua},[ua,q]);z.useEffect(()=>{const h=y=>{if(y.ctrlKey&&y.key.toLowerCase()==="l"){y.preventDefault(),Gs(P=>!P);return}if(y.ctrlKey&&(y.key==="`"||y.code==="Backquote")){y.preventDefault(),Da();return}if(y.ctrlKey&&y.shiftKey&&y.key.toLowerCase()==="p"){y.preventDefault(),te(!0);return}if(y.ctrlKey&&y.key==="F4"){Te&&(y.preventDefault(),Yi(Te.path));return}if(y.ctrlKey&&!y.shiftKey&&y.key.toLowerCase()==="f"){const P=js.current;P&&(y.preventDefault(),P.getAction("actions.find")?.run());return}if(y.ctrlKey&&!y.shiftKey&&y.key.toLowerCase()==="p"){y.preventDefault(),an();return}if(y.ctrlKey&&!y.shiftKey&&y.key.toLowerCase()==="g"){y.preventDefault(),$i();return}if(y.ctrlKey&&!y.shiftKey&&y.key.toLowerCase()==="h"){const P=js.current;P&&(y.preventDefault(),P.getAction("editor.action.startFindReplaceAction")?.run());return}if(y.ctrlKey&&y.shiftKey&&y.key.toLowerCase()==="f"){y.preventDefault(),E("search");return}if(y.ctrlKey&&y.key===","){y.preventDefault(),Dn();return}if(y.ctrlKey&&y.key.toLowerCase()==="k"){y.preventDefault(),window.__pomporaChord={started:Date.now()};return}const N=window.__pomporaChord;if(N&&Date.now()-N.started<1500){if(y.ctrlKey&&y.key.toLowerCase()==="o"){y.preventDefault(),window.__pomporaChord=null,At();return}if(y.key.toLowerCase()==="s"){y.preventDefault(),window.__pomporaChord=null,dr();return}}if(window.__pomporaChord&&(window.__pomporaChord=null),y.ctrlKey&&y.shiftKey&&y.key.toLowerCase()==="s"){y.preventDefault(),Pt();return}if(y.ctrlKey&&y.key.toLowerCase()==="s"){y.preventDefault(),Bn();return}if(y.ctrlKey&&y.shiftKey&&y.key.toLowerCase()==="n"){y.preventDefault(),ja();return}if(y.ctrlKey&&y.altKey&&y.metaKey&&y.key.toLowerCase()==="n"){y.preventDefault(),tn();return}if(y.ctrlKey&&y.key.toLowerCase()==="n"){y.preventDefault(),tn();return}if(y.ctrlKey&&y.key==="w"){Te&&(y.preventDefault(),Yi(Te.path));return}y.key==="Escape"&&(te(!1),v(!1),O(!1),sa(null),Ae(!1),ie(!1))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[Te,Pa,Yi,tn,At,$i,ja,an,ii,Bn,dr,Pt,Da]),z.useEffect(()=>{if(!us)return;const h=()=>sa(null);return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[us]),z.useEffect(()=>{if(!ai)return;const h=y=>{const N=y.target;N&&(N.closest("[data-menubar-root]")||ri())};return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[ai,ri]);const Un=z.useCallback(async h=>{try{await navigator.clipboard.writeText(h)}catch{window.prompt("Copy to clipboard:",h)}},[]);z.useEffect(()=>{Y||(d(""),_(0))},[Y]),z.useEffect(()=>{C||(T(""),k(0))},[C]),z.useEffect(()=>{_(0)},[q]);const pr=J.theme==="light"?"vs":"vs-dark";return r.jsxs("div",{className:"h-full w-full bg-bg text-text",children:[Jn?r.jsxs("div",{className:`fixed inset-0 z-[100] bg-black transition-opacity duration-500 ${Ys?"pointer-events-none opacity-0":"opacity-100"}`,onMouseDown:()=>Vs(!1),children:[r.jsxs("video",{className:"h-full w-full object-cover",ref:Xr,autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",poster:"/logo_transparent_bigger.png",onLoadedData:()=>ya(!0),onCanPlay:()=>ya(!0),onError:()=>Xs(!0),onEnded:()=>{Js()},children:[r.jsx("source",{src:"/loading-screen.mp4",type:"video/mp4"}),r.jsx("source",{src:"/loading_screen.mp4",type:"video/mp4"})]}),!Xc&&!Sl?r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-end justify-start p-4",children:r.jsx("div",{className:"rounded-md border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white/80 backdrop-blur",children:"Loading"})}):null,Sl?r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-[520px] rounded-xl border border-white/10 bg-black/50 p-5 text-center text-white backdrop-blur",children:[r.jsx("div",{className:"text-sm font-medium",children:"Your system cant play this video format."}),r.jsx("div",{className:"mt-1 text-[12px] text-white/70",children:"Re-encode to H.264/AAC (MP4) for best compatibility."})]})}):null,r.jsx("div",{className:"absolute bottom-4 right-4",onMouseDown:h=>h.stopPropagation(),children:r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"inline-flex overflow-hidden rounded-md border border-white/10 bg-black/40 text-[12px] text-white backdrop-blur",children:[r.jsx("button",{type:"button",className:"px-4 py-1.5 hover:bg-black/55",onClick:li,children:"Skip"}),r.jsxs("button",{type:"button",className:"flex items-center px-2 py-1.5 hover:bg-black/55",onClick:()=>Vs(h=>!h),"aria-label":"Skip options",children:[r.jsx("span",{className:"mx-1 h-4 w-px bg-white/10"}),r.jsx(bi,{className:`h-4 w-4 transition-transform ${yl?"rotate-180":""}`})]})]}),yl?r.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-44 overflow-auto rounded-lg border border-white/10 bg-black/70 text-[12px] text-white shadow-xl backdrop-blur max-h-[320px]",children:[r.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left hover:bg-white/10",onClick:li,children:"Skip one time"}),r.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left hover:bg-white/10",onClick:gn,children:"Always skip"})]}):null]})})]}):null,r.jsxs("div",{className:"grid h-full grid-rows-[36px_1fr_26px]",children:[r.jsx("header",{className:"border-b border-border bg-panel",children:r.jsxs("div",{className:"grid h-9 grid-cols-[1fr_auto_1fr] items-center px-2","data-menubar-root":!0,children:[r.jsxs("div",{className:"flex min-w-0 items-center gap-2 justify-self-start",children:[r.jsx("img",{src:"/logo.png",alt:"Pompora",className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted",children:[r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(Ae(!0),ie(!1),fe(!1),ke(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null))},onClick:()=>{Ae(h=>!h),ie(!1),fe(!1),ke(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null)},children:"File"}),xe?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-64 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"New Text File",shortcut:"Ctrl+N",onClick:()=>tn()}),r.jsx(ue,{label:"New File",shortcut:"Ctrl+Alt+Win+N",onClick:()=>tn()}),r.jsx(ue,{label:"New Window",shortcut:"Ctrl+Shift+N",onClick:()=>ja()}),r.jsx(st,{}),r.jsx(ue,{label:"Open File",shortcut:"Ctrl+O",onClick:()=>{ii()}}),r.jsx(ue,{label:"Open Folder",shortcut:"Ctrl+K Ctrl+O",onClick:()=>{At()}}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Open Recent",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>ie(!0),onMouseLeave:()=>ie(!1),onClick:()=>ie(h=>!h)}),B?r.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",onMouseEnter:()=>ie(!0),onMouseLeave:()=>ie(!1),children:[r.jsx("div",{className:"px-2 py-1 text-[11px] font-medium text-muted",children:"Folders"}),(Z.recent.length?Z.recent:J.recent_workspaces).length?(Z.recent.length?Z.recent:J.recent_workspaces).map(h=>r.jsx(ue,{label:h,onClick:()=>{sn(h)}},h)):r.jsx("div",{className:"px-2 py-1 text-xs text-muted",children:"No recent folders"}),r.jsx(st,{}),r.jsx("div",{className:"px-2 py-1 text-[11px] font-medium text-muted",children:"Files"}),gs.length?gs.map(h=>r.jsx(ue,{label:h,onClick:()=>{fi(h)}},h)):r.jsx("div",{className:"px-2 py-1 text-xs text-muted",children:"No recent files"})]}):null]}),r.jsx(st,{}),r.jsx(ue,{label:"Add Folder to Workspace",onClick:()=>{Na()}}),r.jsx(ue,{label:"Save Workspace as",onClick:()=>{We()}}),r.jsx(ue,{label:"Duplicate Workspace",onClick:()=>{ln()}}),r.jsx(st,{}),r.jsx(ue,{label:"Save",shortcut:"Ctrl+S",onClick:()=>{Bn()}}),r.jsx(ue,{label:"Save As",shortcut:"Ctrl+Shift+S",onClick:()=>{Pt()}}),r.jsx(ue,{label:"Save All",shortcut:"Ctrl+K S",onClick:()=>{dr()}}),r.jsx(st,{}),r.jsx(ue,{label:Qt?"Auto Save: On":"Auto Save: Off",onClick:()=>Bt(h=>!h)}),r.jsx(st,{}),r.jsx(ue,{label:"Revert File",onClick:()=>{_t()}}),r.jsx(ue,{label:"Close Editor",shortcut:"Ctrl+F4",onClick:()=>Te?Yi(Te.path):void 0}),r.jsx(ue,{label:"Close Folder",onClick:()=>{Pa()}}),r.jsx(ue,{label:"Close Window",shortcut:"Alt+F4",onClick:()=>Ls()}),r.jsx(st,{}),r.jsx(ue,{label:"Exit",onClick:()=>Ls()})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(fe(!0),Ae(!1),ie(!1),ke(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null))},onClick:()=>{fe(h=>!h),Ae(!1),ie(!1),ke(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null)},children:"Edit"}),de?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Undo",shortcut:"Ctrl+Z",onClick:()=>pe({kind:"info",title:"Undo",message:"Coming next."})}),r.jsx(ue,{label:"Redo",shortcut:"Ctrl+Y",onClick:()=>pe({kind:"info",title:"Redo",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Cut",shortcut:"Ctrl+X",onClick:()=>pe({kind:"info",title:"Cut",message:"Coming next."})}),r.jsx(ue,{label:"Copy",shortcut:"Ctrl+C",onClick:()=>pe({kind:"info",title:"Copy",message:"Coming next."})}),r.jsx(ue,{label:"Paste",shortcut:"Ctrl+V",onClick:()=>pe({kind:"info",title:"Paste",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Find",shortcut:"Ctrl+F",onClick:()=>{const h=js.current;h&&h.getAction("actions.find")?.run()}}),r.jsx(ue,{label:"Replace",shortcut:"Ctrl+H",onClick:()=>{const h=js.current;h&&h.getAction("editor.action.startFindReplaceAction")?.run()}}),r.jsx(st,{}),r.jsx(ue,{label:"Find in Files",shortcut:"Ctrl+Shift+F",onClick:()=>E("search")}),r.jsx(ue,{label:"Replace in Files",shortcut:"Ctrl+Shift+H",onClick:()=>pe({kind:"info",title:"Replace in Files",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Toggle Line Comment",shortcut:"Ctrl+/",onClick:()=>pe({kind:"info",title:"Toggle Line Comment",message:"Coming next."})}),r.jsx(ue,{label:"Toggle Block Comment",shortcut:"Shift+Alt+A",onClick:()=>pe({kind:"info",title:"Toggle Block Comment",message:"Coming next."})}),r.jsx(ue,{label:"Emmet: Expand Abbreviation",shortcut:"Tab",onClick:()=>pe({kind:"info",title:"Emmet",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(ke(!0),Ae(!1),ie(!1),fe(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null))},onClick:()=>{ke(h=>!h),Ae(!1),ie(!1),fe(!1),qe(!1),xt(!1),Tt(!1),gt(null),Qe(null)},children:"Selection"}),ze?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Select All",shortcut:"Ctrl+A",onClick:()=>pe({kind:"info",title:"Select All",message:"Coming next."})}),r.jsx(ue,{label:"Expand Selection",shortcut:"Shift+Alt+RightArrow",onClick:()=>pe({kind:"info",title:"Expand Selection",message:"Coming next."})}),r.jsx(ue,{label:"Shrink Selection",onClick:()=>pe({kind:"info",title:"Shrink Selection",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Copy Line Up",shortcut:"Shift+Alt+UpArrow",onClick:()=>pe({kind:"info",title:"Copy Line Up",message:"Coming next."})}),r.jsx(ue,{label:"Copy Line Down",shortcut:"Shift+Alt+DownArrow",onClick:()=>pe({kind:"info",title:"Copy Line Down",message:"Coming next."})}),r.jsx(ue,{label:"Move Line Up",shortcut:"Alt+UpArrow",onClick:()=>pe({kind:"info",title:"Move Line Up",message:"Coming next."})}),r.jsx(ue,{label:"Move Line Down",shortcut:"Alt+DownArrow",onClick:()=>pe({kind:"info",title:"Move Line Down",message:"Coming next."})}),r.jsx(ue,{label:"Duplicate Selection",onClick:()=>pe({kind:"info",title:"Duplicate Selection",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Add Cursor Above",shortcut:"Ctrl+Alt+UpArrow",onClick:()=>pe({kind:"info",title:"Add Cursor Above",message:"Coming next."})}),r.jsx(ue,{label:"Add Cursor Below",shortcut:"Ctrl+Alt+DownArrow",onClick:()=>pe({kind:"info",title:"Add Cursor Below",message:"Coming next."})}),r.jsx(ue,{label:"Add Cursors to Line End",shortcut:"Shift+Alt+I",onClick:()=>pe({kind:"info",title:"Add Cursors to Line End",message:"Coming next."})}),r.jsx(ue,{label:"Add Next Occurrence",shortcut:"Ctrl+D",onClick:()=>pe({kind:"info",title:"Add Next Occurrence",message:"Coming next."})}),r.jsx(ue,{label:"Add Previous Occurrence",onClick:()=>pe({kind:"info",title:"Add Previous Occurrence",message:"Coming next."})}),r.jsx(ue,{label:"Select All Occurrences",shortcut:"Ctrl+Shift+L",onClick:()=>pe({kind:"info",title:"Select All Occurrences",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Switch to Ctrl+Click for Multi-Cursor",onClick:()=>pe({kind:"info",title:"Multi-cursor",message:"Coming next."})}),r.jsx(ue,{label:"Column Selection Mode",onClick:()=>pe({kind:"info",title:"Column Selection Mode",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(qe(!0),gt(null),Qe(null),Ae(!1),ie(!1),fe(!1),ke(!1),xt(!1),Tt(!1))},onClick:()=>{qe(h=>!h),gt(null),Qe(null),Ae(!1),ie(!1),fe(!1),ke(!1),xt(!1),Tt(!1)},children:"View"}),Ve?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",onMouseLeave:()=>{gt(null),Qe(null)},children:[r.jsx(ue,{label:"Command Palette",shortcut:"Ctrl+Shift+P",onClick:()=>te(!0)}),r.jsx(ue,{label:"Open View",onClick:()=>pe({kind:"info",title:"Open View",message:"Coming next."})}),r.jsx(st,{}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Appearance",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>gt("appearance"),onClick:()=>gt(h=>h==="appearance"?null:"appearance")}),Is==="appearance"?r.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-80 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Full Screen",shortcut:"F11",onClick:()=>pe({kind:"info",title:"Full Screen",message:"Coming next."})}),r.jsx(ue,{label:"Zen Mode",shortcut:"Ctrl+K Z",onClick:()=>pe({kind:"info",title:"Zen Mode",message:"Coming next."})}),r.jsx(ue,{label:"Centered Layout",onClick:()=>pe({kind:"info",title:"Centered Layout",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Menu Bar",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Menu Bar",message:"Coming next."})}),r.jsx(ue,{label:"Primary Side Bar",shortcut:"Ctrl+B",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Primary Side Bar",message:"Coming next."})}),r.jsx(ue,{label:"Secondary Side Bar",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Secondary Side Bar",message:"Coming next."})}),r.jsx(ue,{label:"Status Bar",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Status Bar",message:"Coming next."})}),r.jsx(ue,{label:"Panel",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Panel",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Move Primary Side Bar Right",onClick:()=>pe({kind:"info",title:"Move Primary Side Bar Right",message:"Coming next."})}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Activity Bar Position",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("activityBarPosition"),onClick:()=>Qe(h=>h==="activityBarPosition"?null:"activityBarPosition")}),yi==="activityBarPosition"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Default",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Top",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Bottom",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Hidden",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Activity Bar",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Secondary Activity Bar Position",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("secondaryActivityBarPosition"),onClick:()=>Qe(h=>h==="secondaryActivityBarPosition"?null:"secondaryActivityBarPosition")}),yi==="secondaryActivityBarPosition"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Default",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Top",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Bottom",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})}),r.jsx(ue,{label:"Hidden",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Secondary Activity Bar",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Panel Position",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("panelPosition"),onClick:()=>Qe(h=>h==="panelPosition"?null:"panelPosition")}),yi==="panelPosition"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Top",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Panel Position",message:"Coming next."})}),r.jsx(ue,{label:"Left",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Panel Position",message:"Coming next."})}),r.jsx(ue,{label:"Right",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Panel Position",message:"Coming next."})}),r.jsx(ue,{label:"Bottom",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Panel Position",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Align Panel",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("alignPanel"),onClick:()=>Qe(h=>h==="alignPanel"?null:"alignPanel")}),yi==="alignPanel"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Center",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Align Panel",message:"Coming next."})}),r.jsx(ue,{label:"Justify",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Align Panel",message:"Coming next."})}),r.jsx(ue,{label:"Left",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Align Panel",message:"Coming next."})}),r.jsx(ue,{label:"Right",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Align Panel",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Tab Bar",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("tabBar"),onClick:()=>Qe(h=>h==="tabBar"?null:"tabBar")}),yi==="tabBar"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Multiple Tabs",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Tab Bar",message:"Coming next."})}),r.jsx(ue,{label:"Single Tabs",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Tab Bar",message:"Coming next."})}),r.jsx(ue,{label:"Hidden",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Tab Bar",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Editor Actions Position",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>Qe("editorActionsPosition"),onClick:()=>Qe(h=>h==="editorActionsPosition"?null:"editorActionsPosition")}),yi==="editorActionsPosition"?r.jsxs("div",{className:"absolute right-full top-0 z-50 mr-1 w-max min-w-56 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Tab Bar",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Editor Actions",message:"Coming next."})}),r.jsx(ue,{label:"Title Bar",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Editor Actions",message:"Coming next."})}),r.jsx(ue,{label:"Hidden",right:r.jsx(nt,{}),onClick:()=>pe({kind:"info",title:"Editor Actions",message:"Coming next."})})]}):null]}),r.jsx(st,{}),r.jsx(ue,{label:"Minimap",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Minimap",message:"Coming next."})}),r.jsx(ue,{label:"Breadcrumbs",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Breadcrumbs",message:"Coming next."})}),r.jsx(ue,{label:"Sticky Scroll",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Sticky Scroll",message:"Coming next."})}),r.jsx(ue,{label:"Render Whitespace",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Render Whitespace",message:"Coming next."})}),r.jsx(ue,{label:"Render Control Characters",right:r.jsx(nt,{checked:!0}),onClick:()=>pe({kind:"info",title:"Render Control Characters",message:"Coming next."})})]}):null]}),r.jsx(st,{}),r.jsx(ue,{label:"Zoom In",shortcut:"Ctrl+=",onClick:()=>pe({kind:"info",title:"Zoom In",message:"Coming next."})}),r.jsx(ue,{label:"Zoom Out",shortcut:"Ctrl+-",onClick:()=>pe({kind:"info",title:"Zoom Out",message:"Coming next."})}),r.jsx(ue,{label:"Reset Zoom",shortcut:"Ctrl+NumPad0",onClick:()=>pe({kind:"info",title:"Reset Zoom",message:"Coming next."})}),r.jsx(st,{}),r.jsxs("div",{className:"relative",children:[r.jsx(ue,{label:"Editor Layout",right:r.jsx(Ps,{className:"h-3.5 w-3.5"}),keepOpen:!0,onMouseEnter:()=>gt("editorLayout"),onClick:()=>gt(h=>h==="editorLayout"?null:"editorLayout")}),Is==="editorLayout"?r.jsxs("div",{className:"absolute left-full top-0 z-50 ml-1 w-max min-w-64 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsx(ue,{label:"Split Up",shortcut:"Ctrl+K Ctrl+\\\\",onClick:()=>pe({kind:"info",title:"Split Up",message:"Coming next."})}),r.jsx(ue,{label:"Split Down",onClick:()=>pe({kind:"info",title:"Split Down",message:"Coming next."})}),r.jsx(ue,{label:"Split Left",onClick:()=>pe({kind:"info",title:"Split Left",message:"Coming next."})}),r.jsx(ue,{label:"Split Right",onClick:()=>pe({kind:"info",title:"Split Right",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Split in Group",shortcut:"Ctrl+Shift+\\\\",onClick:()=>pe({kind:"info",title:"Split in Group",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Single",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Two Columns",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Three Columns",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Two Rows",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Three Rows",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Grid 2x2",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Two Rows Right",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(ue,{label:"Two Columns Bottom",onClick:()=>pe({kind:"info",title:"Layout",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Flip Layout",shortcut:"Shift+Alt+0",onClick:()=>pe({kind:"info",title:"Flip Layout",message:"Coming next."})})]}):null]}),r.jsx(st,{}),r.jsx(ue,{label:"Explorer",shortcut:"Ctrl+Shift+E",onClick:()=>E("explorer")}),r.jsx(ue,{label:"Search",shortcut:"Ctrl+Shift+F",onClick:()=>E("search")}),r.jsx(ue,{label:"Source Control",shortcut:"Ctrl+Shift+G",onClick:()=>E("scm")}),r.jsx(ue,{label:"Run",shortcut:"Ctrl+Shift+D",onClick:()=>pe({kind:"info",title:"Run",message:"Coming next."})}),r.jsx(ue,{label:"Extensions",shortcut:"Ctrl+Shift+X",onClick:()=>pe({kind:"info",title:"Extensions",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Problems",shortcut:"Ctrl+Shift+M",onClick:()=>pe({kind:"info",title:"Problems",message:"Coming next."})}),r.jsx(ue,{label:"Output",shortcut:"Ctrl+Shift+U",onClick:()=>pe({kind:"info",title:"Output",message:"Coming next."})}),r.jsx(ue,{label:"Debug Console",shortcut:"Ctrl+Shift+Y",onClick:()=>pe({kind:"info",title:"Debug Console",message:"Coming next."})}),r.jsx(ue,{label:"Terminal",shortcut:"Ctrl+`",onClick:()=>{Da()}}),r.jsx(st,{}),r.jsx(ue,{label:"Word Wrap",shortcut:"Alt+Z",onClick:()=>pe({kind:"info",title:"Word Wrap",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(xt(!0),Ae(!1),ie(!1),fe(!1),ke(!1),qe(!1),Tt(!1),gt(null),Qe(null))},onClick:()=>{xt(h=>!h),Ae(!1),ie(!1),fe(!1),ke(!1),qe(!1),Tt(!1),gt(null),Qe(null)},children:"Run"}),Nt?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-72 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[r.jsx(ue,{label:"Start Debugging",shortcut:"F5",onClick:()=>pe({kind:"info",title:"Start Debugging",message:"Coming next."})}),r.jsx(ue,{label:"Run Without Debugging",shortcut:"Ctrl+F5",onClick:()=>pe({kind:"info",title:"Run Without Debugging",message:"Coming next."})}),r.jsx(ue,{label:"Stop Debugging",shortcut:"Shift+F5",onClick:()=>pe({kind:"info",title:"Stop Debugging",message:"Coming next."})}),r.jsx(ue,{label:"Restart Debugging",shortcut:"Ctrl+Shift+F5",onClick:()=>pe({kind:"info",title:"Restart Debugging",message:"Coming next."})})]}):null]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"rounded-md px-2 py-1 hover:bg-bg",onMouseEnter:()=>{ai&&(Tt(!0),Ae(!1),ie(!1),fe(!1),ke(!1),qe(!1),xt(!1),gt(null),Qe(null))},onClick:()=>{Tt(h=>!h),Ae(!1),ie(!1),fe(!1),ke(!1),qe(!1),xt(!1),gt(null),Qe(null)},children:"Terminal"}),Pe?r.jsxs("div",{className:"absolute left-0 top-full z-50 mt-1 w-80 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[r.jsx(ue,{label:"New Terminal",shortcut:"Ctrl+Shift+`",onClick:()=>{Fi().finally(()=>{Da()})}}),r.jsx(ue,{label:"Split Terminal",shortcut:"Ctrl+Shift+5",onClick:()=>pe({kind:"info",title:"Split Terminal",message:"Coming next."})}),r.jsx(ue,{label:"New Terminal Window",shortcut:"Ctrl+Shift+Alt+`",onClick:()=>pe({kind:"info",title:"New Terminal Window",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Run Task",onClick:()=>pe({kind:"info",title:"Run Task",message:"Coming next."})}),r.jsx(ue,{label:"Run Build Task",shortcut:"Ctrl+Shift+B",onClick:()=>pe({kind:"info",title:"Run Build Task",message:"Coming next."})}),r.jsx(ue,{label:"Run Active File",onClick:()=>pe({kind:"info",title:"Run Active File",message:"Coming next."})}),r.jsx(ue,{label:"Run Selected Text",onClick:()=>pe({kind:"info",title:"Run Selected Text",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Show Running Tasks",onClick:()=>pe({kind:"info",title:"Show Running Tasks",message:"Coming next."})}),r.jsx(ue,{label:"Restart Running Tasks",onClick:()=>pe({kind:"info",title:"Restart Running Tasks",message:"Coming next."})}),r.jsx(ue,{label:"Terminate Task",onClick:()=>pe({kind:"info",title:"Terminate Task",message:"Coming next."})}),r.jsx(st,{}),r.jsx(ue,{label:"Configure Tasks",onClick:()=>pe({kind:"info",title:"Configure Tasks",message:"Coming next."})}),r.jsx(ue,{label:"Configure Default Build Task",onClick:()=>pe({kind:"info",title:"Configure Default Build Task",message:"Coming next."})})]}):null]})]})]}),r.jsx("div",{className:"mx-4 hidden min-w-0 items-center justify-self-center md:flex",children:r.jsxs("div",{className:"flex w-[520px] max-w-[42vw] items-center gap-1",children:[r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>pe({kind:"info",title:"Back",message:"Coming next."}),children:r.jsx(Fg,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>pe({kind:"info",title:"Forward",message:"Coming next."}),children:r.jsx(Wg,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-input h-7 flex-1 cursor-pointer px-3 py-0 text-left text-[12px] text-muted",onClick:()=>te(!0),children:"Search or type a command"})]})}),r.jsxs("div",{className:"flex shrink-0 items-center gap-1 justify-self-end",children:[r.jsxs("div",{className:"relative","data-account-menu-root":!0,children:[r.jsx("button",{type:"button",className:"ws-icon-btn h-8 w-8 p-0",onClick:()=>{Ss(h=>!h)},disabled:zi,"aria-label":mt?"Account":"Sign in",children:r.jsxs("div",{className:"relative h-6 w-6 overflow-hidden rounded-full bg-[rgb(var(--p-panel2))]",children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] font-semibold leading-none text-text",children:Rl}),mt?.avatar_url?r.jsx("img",{src:mt.avatar_url,className:"absolute inset-0 block h-full w-full object-cover",alt:"Profile",onError:h=>{h.currentTarget.style.display="none"}}):null]})}),va?mt?r.jsxs("div",{className:"absolute right-0 top-full z-[80] mt-1 w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsxs("div",{className:"px-3 py-2",children:[r.jsx("div",{className:"text-xs font-semibold text-text",children:mt.email||"Account"}),r.jsxs("div",{className:"mt-0.5 text-[11px] text-muted",children:["Plan: ",Hi?.plan||mt.plan||"starter"]}),Hi?r.jsxs("div",{className:"mt-2 text-[11px] text-muted",children:["Slow credits: ",Hi.slow.remaining," / ",Hi.slow.limit]}):null]}),r.jsx(st,{}),r.jsx(ue,{label:"Open Dashboard",onClick:()=>{Ss(!1),Oa("https://pompora.dev/dashboard")}}),r.jsx(ue,{label:"Manage Plan",onClick:()=>{Ss(!1),Oa("https://pompora.dev/pricing")}}),r.jsx(st,{}),r.jsx(ue,{label:"Sign out",onClick:()=>{Ss(!1),cr()}})]}):r.jsxs("div",{className:"absolute right-0 top-full z-[80] mt-1 w-72 max-w-[calc(100vw-16px)] overflow-x-hidden overflow-y-auto rounded-xl border border-border bg-panel p-1 shadow max-h-[calc(100vh-80px)]",children:[r.jsxs("div",{className:"px-3 py-2",children:[r.jsx("div",{className:"text-xs font-semibold text-text",children:"Not signed in"}),r.jsx("div",{className:"mt-0.5 text-[11px] text-muted",children:"Sign in to sync credits and use Pompora AI."})]}),r.jsx(st,{}),r.jsx(ue,{label:"Log in",onClick:()=>{Ss(!1),ur("login")}}),r.jsx(ue,{label:"Create account",onClick:()=>{Ss(!1),ur("signup")}})]}):null]}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>Dn(),children:r.jsx($m,{className:"h-4 w-4"})})]})]})}),r.jsxs("div",{className:"grid min-h-0 flex-1 overflow-x-auto",style:{gridTemplateColumns:Jc},children:[r.jsxs("aside",{className:"min-w-0 border-r border-border bg-panel",children:[r.jsxs("div",{className:"flex h-full flex-col items-center gap-2 py-2",children:[r.jsx(Am,{id:"search",active:D==="search",onClick:E,Icon:Wh}),r.jsx(Am,{id:"scm",active:D==="scm",onClick:E,Icon:p0}),r.jsx("div",{className:"flex-1"})]}),D==="explorer"?r.jsx(gb,{workspaceRoot:Z.root,recent:Z.recent,explorer:ns,expandedDirs:rs,selectedPath:Ct,onContextMenu:h=>sa(h),showTooltipForEl:Rn,hideTooltip:Mn,onOpenFolder:()=>{At()},onOpenRecent:h=>{sn(h)},onToggleDir:async h=>{const y=new Set(rs);if(y.has(h)){y.delete(h),Zt(y);return}y.add(h),Zt(y),ns[h]||await lt(h)},onSelect:h=>Ht(h),onOpenFile:h=>{et(h)},onRefresh:()=>{Mt()},onCreateNewFile:()=>{Ki()},onCreateNewFolder:()=>{vi()}}):D==="search"?r.jsx(Yh,{title:"Search",children:Z.root?r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Find in files",value:Zn,onChange:h=>_a(h.currentTarget.value),autoFocus:!0}),r.jsx("div",{className:"text-xs text-muted",children:Ur?"Searching...":`${Fs.length} results`}),r.jsx("div",{className:"space-y-1",children:Fs.map((h,y)=>r.jsxs("button",{type:"button",className:"w-full rounded border border-border bg-bg px-3 py-2 text-left text-sm text-muted hover:border-accent hover:text-text",onClick:async()=>{Ir({path:h.path,line:h.line}),await et(h.path)},children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:"truncate text-text",children:h.path}),r.jsx("span",{className:"shrink-0 text-xs text-muted",children:h.line})]}),r.jsx("div",{className:"mt-1 truncate text-xs text-muted",children:h.text})]},`${h.path}:${h.line}:${y}`))})]}):r.jsx("div",{className:"text-sm text-muted",children:"Open a folder to search."})}):D==="scm"?r.jsx(Yh,{title:"Source Control",children:r.jsx("div",{className:"text-sm text-muted",children:"Git view is coming next."})}):null]}),r.jsx("main",{className:"min-h-0 min-w-0 bg-bg",children:r.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[r.jsxs("div",{className:"flex h-10 items-center gap-1 border-b border-border bg-panel px-2",children:[r.jsx("div",{className:"flex min-w-0 flex-1 items-stretch gap-1 overflow-auto",children:bs.map(h=>r.jsx(yb,{tab:h,active:h.path===Si,onActivate:()=>bt(h.path),onClose:()=>Yi(h.path)},h.path))}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{At()},children:r.jsx(Hc,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"min-h-0 flex-1 flex flex-col",children:Z.root?Te?Te.path===la?r.jsx("div",{className:"min-h-0 flex-1 overflow-auto",children:r.jsx(wb,{settings:J,authProfile:mt,isAuthBusy:zi,providerLabel:La,keyStatus:as,providerChoices:Bs,apiKeyDraft:dn,encryptionPasswordDraft:Fr,secretsError:_l,isSavingSettings:I,isTogglingOffline:j,isKeyOperationInProgress:Gt,isSettingsLoaded:se,workspaceLabel:jl,recentWorkspaces:Z.recent,onChangeTheme:h=>ae(y=>({...y,theme:h})),onToggleOffline:Hn,onChangeProvider:h=>{Bl(h)},onChangePomporaThinking:h=>{Hl(h)},onPickFolder:()=>{At()},onOpenRecent:h=>{sn(h)},onApiKeyDraft:Eo,onEncryptionPasswordDraft:ml,onStoreKey:zl,onClearKey:zn,onLoginToPompora:()=>{ur("login")},onSignupToPompora:()=>{ur("signup")},onSaveSettings:fr,showKeySaved:Ws,showKeyCleared:Yc,onDebugGemini:Ns,debugResult:Ao})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-0 flex-1 flex flex-col",children:r.jsxs("div",{className:"relative min-h-0 flex-1",children:[or?r.jsx(nm,{height:"100%",theme:pr,language:Te.language,original:or.before??"",modified:Ho!==null?Ho:or.after??Te.content,onMount:h=>{const y=h.getModifiedEditor();js.current=y,na.current?.dispose(),na.current=y.onDidChangeCursorPosition(P=>{const re=P.position;Ra({line:re.lineNumber,col:re.column})});const N=y.getPosition();N&&Ra({line:N.lineNumber,col:N.column}),y.focus()},options:{readOnly:!0,renderSideBySide:!1,fontSize:13,minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,padding:{top:8,bottom:8}}}):r.jsx(Ag,{height:"100%",theme:pr,language:Te.language,value:Te.content,onChange:h=>{const y=h??"";ht(N=>N.map(P=>P.path===Te.path?{...P,content:y,isDirty:!0}:P))},onMount:h=>{js.current=h,na.current?.dispose(),na.current=h.onDidChangeCursorPosition(N=>{const P=N.position;Ra({line:P.lineNumber,col:P.column})});const y=h.getPosition();y&&Ra({line:y.lineNumber,col:y.column}),h.focus()},options:{fontSize:13,minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,padding:{top:8,bottom:8}}}),Le.changeSet&&oi.length?r.jsx("div",{className:"pointer-events-none absolute bottom-3 left-1/2 z-30 -translate-x-1/2",children:r.jsxs("div",{className:"pointer-events-auto flex items-center gap-2 ws-change-bar min-w-[373px] min-h-[35px]",children:[r.jsx("button",{type:"button",className:"ws-icon-btn",disabled:oi.findIndex(h=>h.path===(Xe??""))<=0,onClick:()=>{const h=oi.findIndex(N=>N.path===(Xe??"")),y=h>0?oi[h-1]:null;y?.kind==="write"&&(jt(y.path),et(y.path))},children:r.jsx(Jg,{className:"h-4 w-4"})}),r.jsx("div",{className:"max-w-[42vw] truncate text-[11px] text-muted",children:(()=>{const h=oi.findIndex(N=>N.path===(Xe??""));return`${h>=0?h+1:1} of ${oi.length}  ${Xe??oi[0].path}`})()}),r.jsx("button",{type:"button",className:"ws-icon-btn",disabled:oi.findIndex(h=>h.path===(Xe??""))>=oi.length-1,onClick:()=>{const h=oi.findIndex(N=>N.path===(Xe??"")),y=h>=0?oi[h+1]:null;y?.kind==="write"&&(jt(y.path),et(y.path))},children:r.jsx(Ps,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",disabled:Et||!Xe,className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{Xe&&rn(Xe)},children:"Reject File"}),r.jsx("button",{type:"button",disabled:Et||!Xe,className:"ws-btn ws-btn-secondary h-7 px-5 bg-accent hover:opacity-90",onClick:()=>{Xe&&nn(Xe)},children:"Accept File"})]})}):null]})})}):r.jsx(Vh,{recentWorkspaces:Z.recent,recentFiles:gs,onOpenFolder:()=>{At()},onOpenFile:()=>{ii()},onOpenRecentWorkspace:h=>{sn(h)},onOpenRecentFile:h=>{fi(h)},onOpenChat:()=>Gs(!0),onOpenCommandPalette:()=>te(!0),title:"POMPORA",subtitle:"Getting started with Pompora",hint:"Open a file from Explorer to start editing."}):r.jsx(Vh,{recentWorkspaces:Z.recent,recentFiles:gs,onOpenFolder:()=>{At()},onOpenFile:()=>{ii()},onOpenRecentWorkspace:h=>{sn(h)},onOpenRecentFile:h=>{fi(h)},onOpenChat:()=>Gs(!0),onOpenCommandPalette:()=>te(!0)})}),mn?r.jsxs("div",{className:"relative border-t border-border bg-panel",style:{height:Qs},children:[r.jsx("div",{className:"absolute left-0 top-0 z-20 h-1 w-full cursor-row-resize",onMouseDown:h=>{xa.current={startY:h.clientY,startH:Qs}}}),r.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-panel px-2 py-1.5",children:[r.jsx("div",{className:"flex min-w-0 items-center gap-1",children:[{id:"problems",label:"Problems"},{id:"output",label:"Output"},{id:"debug",label:"Debug Console"},{id:"terminal",label:"Terminal"},{id:"ports",label:"Ports"}].map(h=>r.jsx("button",{type:"button",className:`rounded-md px-2 py-1 text-[11px] ${_n===h.id?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:()=>{vn(h.id),h.id==="terminal"&&window.setTimeout(()=>{Rs().then(()=>{Ms(),ki.current?.focus()})},0)},children:h.label},h.id))}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{vn("terminal"),window.setTimeout(()=>{Rs().then(()=>{Ms(),ki.current?.focus()})},0)},children:r.jsx(T0,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{Fi()},children:r.jsx(Ic,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"relative min-h-0 flex-1 bg-bg",children:[r.jsx("div",{className:_n==="terminal"?"absolute inset-0":"absolute inset-0 hidden",children:r.jsx("div",{ref:rr,className:"h-full w-full"})}),_n!=="terminal"?r.jsxs("div",{className:"absolute inset-0 p-3 text-xs text-muted",children:[_n," is coming next."]}):null]})]})]}):null]})}),Kr?r.jsxs("aside",{className:"relative min-h-0 min-w-0 border-l border-border bg-panel",children:[r.jsx("div",{className:"absolute left-0 top-0 z-20 h-full w-1 cursor-col-resize",onMouseDown:h=>{yn.current={startX:h.clientX,startW:wl}}}),r.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[r.jsx("div",{className:"border-b border-border bg-panel px-3 py-2",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("div",{className:"min-w-0",children:r.jsx("div",{className:"truncate text-[13px] font-normal text-[#a39d9d]",children:Le.title})}),r.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[nr?r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{Cs(h=>!h),ir||gl("")},children:r.jsx(bi,{className:`h-4 w-4 ${ir?"rotate-180":""}`})}):null,r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{const h=Date.now(),y=`${h}-${Math.random().toString(16).slice(2)}`;ws(N=>[...N,{id:y,title:kl,createdAt:h,updatedAt:h,messages:[],logs:[],draft:"",changeSet:null}]),Ks(y),Cs(!1)},children:r.jsx(Hc,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>Gs(!1),children:r.jsx(Ic,{className:"h-4 w-4"})})]})]})}),nr&&ir?r.jsx("div",{className:"border-b border-transparent bg-panel px-3 pb-2",children:r.jsxs("div",{className:"ws-panel2 overflow-hidden rounded-xl border border-border",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5",children:[r.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[r.jsx(Wh,{className:"h-4 w-4 text-muted"}),r.jsx("input",{className:"w-full bg-transparent text-sm text-text outline-none placeholder:text-muted",placeholder:"Search",value:pn,onChange:h=>gl(h.currentTarget.value),autoFocus:!0})]}),r.jsx("div",{className:"shrink-0 rounded-md bg-panel px-2 py-1 text-[11px] text-muted",children:"All Conversations"})]}),r.jsx("div",{className:"h-2"}),r.jsx("div",{className:"max-h-56 overflow-auto px-1 pb-1",children:Jt.slice().sort((h,y)=>y.updatedAt-h.updatedAt).filter(h=>h.messages.some(y=>y.role==="user")).filter(h=>{const y=pn.trim().toLowerCase();return y?`${h.title}
${h.messages.filter(P=>P.role==="user").map(P=>P.content).join(`
`)}`.toLowerCase().includes(y):!0}).map(h=>r.jsxs("button",{type:"button",className:`flex w-full items-start justify-between gap-3 rounded-lg px-2 py-2 text-left focus-visible:outline-none hover:bg-panel ${h.id===Yt?"bg-panel":""}`,onClick:()=>{Ks(h.id),Cs(!1),window.setTimeout(()=>Zr.current?.focus(),0)},children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"truncate text-sm text-text",children:h.title}),r.jsx("div",{className:"truncate text-[11px] text-muted",children:Wi})]}),r.jsx("div",{className:"shrink-0 pt-0.5 text-[11px] text-muted",children:Sm(h.updatedAt)})]},h.id))})]})}):null,Le.changeSet?r.jsx("div",{className:"px-3 pt-2",children:r.jsxs("div",{className:"rounded-lg bg-[rgb(var(--p-panel2))] px-2 py-1",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("button",{type:"button",className:"flex min-w-0 items-center gap-2 rounded-md px-2 py-1 text-left hover:bg-[rgb(var(--p-panel))]",onClick:()=>Ll(h=>!h),children:[r.jsx(bi,{className:`h-4 w-4 text-muted ${Ha?"rotate-180":""}`}),r.jsxs("div",{className:"min-w-0 text-[11px] text-muted",children:[r.jsxs("span",{className:"text-text",children:[Le.changeSet.stats.files," files"]}),r.jsxs("span",{className:"ml-2 text-emerald-300",children:["+",Le.changeSet.stats.added]}),r.jsxs("span",{className:"ml-2 text-red-300",children:["-",Le.changeSet.stats.removed]})]})]}),r.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[r.jsx("button",{type:"button",disabled:Et,className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{_i()},children:"Reject all"}),r.jsx("button",{type:"button",disabled:Et,className:"ws-btn h-7 border border-accent bg-accent px-2 text-white hover:opacity-90 disabled:opacity-50",onClick:()=>Nl(),children:"Accept all"})]})]}),Ha?r.jsx("div",{className:"mt-2",children:r.jsx("div",{className:"max-h-56 overflow-auto",children:Le.changeSet.files.map((h,y)=>{const N=h.kind==="write",P=N&&Xe===h.path,re=h.kind==="write"?"M":h.kind==="delete"?"D":"R",K=h.kind==="write"?"bg-emerald-500/15 text-emerald-300":h.kind==="delete"?"bg-red-500/15 text-red-300":"bg-sky-500/15 text-sky-300";return r.jsxs("div",{className:`flex items-center justify-between gap-2 rounded-md px-2 py-1 ${P?"bg-[rgb(var(--p-panel))]":"hover:bg-[rgb(var(--p-panel))]"}`,children:[r.jsxs("button",{type:"button",className:"flex min-w-0 flex-1 items-center gap-2 text-left",onClick:()=>{N&&(jt(h.path),et(h.path))},children:[r.jsx("span",{className:`flex h-5 w-5 items-center justify-center rounded text-[11px] ${K}`,children:re}),r.jsx("span",{className:`min-w-0 truncate text-[11px] ${N?"text-text":"text-muted"}`,children:h.path})]}),N?r.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[r.jsx("button",{type:"button",disabled:Et,className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>{rn(h.path)},children:"Revert"}),r.jsx("button",{type:"button",disabled:Et,className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>nn(h.path),children:"Accept"})]}):null]},`${h.kind}:${h.path}:${y}`)})})}):null]})}):null,r.jsx("div",{className:"border-b border-border bg-panel px-3 py-2",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("div",{className:"min-w-0",children:r.jsx("div",{className:"truncate text-[13px] font-normal text-[#a39d9d]",children:Le.title})}),r.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[r.jsxs("div",{className:"ws-segment",children:[r.jsx("button",{type:"button",className:`ws-segment-item ${ga==="chat"?"ws-segment-item-active":""}`,onClick:()=>Gr("chat"),children:"Chat"}),r.jsx("button",{type:"button",className:`ws-segment-item ${ga==="logs"?"ws-segment-item-active":""}`,onClick:()=>Gr("logs"),children:"Logs"})]}),nr?r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{Cs(h=>!h),ir||gl("")},children:r.jsx(bi,{className:`h-4 w-4 ${ir?"rotate-180":""}`})}):null,r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>{const h=Date.now(),y=`${h}-${Math.random().toString(16).slice(2)}`;ws(N=>[...N,{id:y,title:kl,createdAt:h,updatedAt:h,messages:[],logs:[],draft:"",changeSet:null}]),Ks(y),Cs(!1)},children:r.jsx(Hc,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>Gs(!1),children:r.jsx(Ic,{className:"h-4 w-4"})})]})]})}),r.jsxs("div",{ref:Sa,className:`min-h-0 flex-1 overflow-auto px-3 py-3 ${jn&&!Le.messages.length?"flex items-center justify-center":""}`,children:[ti?r.jsx("div",{className:"mb-3 rounded-lg border border-border bg-bg p-3 text-sm text-muted",children:ti}):null,ga==="logs"?r.jsx("div",{className:"space-y-3",children:(()=>{const h=(Le.logs??[]).slice(-400);if(!h.length)return r.jsx("div",{className:"text-sm text-muted",children:"No logs yet."});const y=(Le.messages??[]).filter(K=>K.role==="assistant"&&K.kind==="agent_run"&&K.id).map(K=>K.id),N=new Map(y.map((K,ye)=>[K,ye+1])),P=new Map;for(const K of h){const ye=K.groupId??"session",ve=P.get(ye);ve?ve.push(K):P.set(ye,[K])}return[...P.entries()].sort((K,ye)=>{const ve=K[1][K[1].length-1]?.ts??0;return(ye[1][ye[1].length-1]?.ts??0)-ve}).map(([K,ye])=>{const ve=`${Yt}:${K}`,De=!!Vc[ve],Ee=((Le.messages??[]).find(Re=>Re.id===K&&Re.kind==="agent_run"&&Re.agentRun)??null)?.agentRun?.status??(K==="session"?"done":"running"),Ce=K==="session"?"Session":`Run ${N.get(K)??""}`.trim(),Oe=K==="session"?"General":"Agent";return r.jsxs("div",{className:"ws-log-group",children:[r.jsxs("button",{type:"button",className:"ws-log-group-h",onClick:()=>wi(Re=>({...Re,[ve]:!Re[ve]})),children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"ws-log-group-title",children:Ce}),r.jsx("div",{className:"ws-log-group-sub",children:Oe})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`ws-log-status ${qc(Ee==="error"?"error":Ee==="done"?"done":"running")}`,children:Ee}),r.jsx(bi,{className:`h-4 w-4 text-muted transition-transform ${De?"":"rotate-180"}`})]})]}),De?null:r.jsx("div",{className:"ws-log-group-b",children:r.jsx("div",{className:"space-y-2",children:ye.map(Re=>r.jsxs("div",{className:"ws-log-entry",children:[r.jsxs("button",{type:"button",className:"ws-log-entry-h",onClick:()=>eu(Re.id),children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"ws-log-entry-title",children:Re.title}),r.jsx("div",{className:"ws-log-entry-sub",children:Sm(Re.ts)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Re.status?r.jsx("span",{className:`ws-log-status ${qc(Re.status==="pending"?"pending":Re.status)}`,children:Re.status}):null,r.jsx(bi,{className:`h-4 w-4 text-muted transition-transform ${Re.collapsed?"":"rotate-180"}`})]})]}),!Re.collapsed&&(Re.details??[]).length?r.jsx("div",{className:"ws-log-entry-b",children:r.jsx("div",{className:"ws-terminal-log",children:(Re.details??[]).slice(-160).map((Dt,St)=>r.jsx("div",{className:"whitespace-pre-wrap break-words",children:Dt},St))})}):null]},Re.id))})})]},K)})})()}):Le.messages.length?r.jsx("div",{className:"space-y-3",children:(Le.messages??[]).filter(h=>h.role!=="meta").map((h,y)=>r.jsx("div",{className:`flex ${h.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"max-w-[92%]",children:[h.role==="assistant"&&h.kind==="agent_run"&&h.agentRun?r.jsx(sb,{messageId:h.id??"",ar:h.agentRun,onToggle:Nn}):h.role==="assistant"&&h.kind==="activity"&&h.activity?r.jsxs("div",{className:"ws-msg ws-msg-anim ws-msg-assistant",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-[11px] text-muted",children:"Activity"}),r.jsx("div",{className:"mt-1 text-[13px] text-text",children:h.activity.title})]}),r.jsx("div",{className:"shrink-0 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.activity.status==="running"?r.jsx(Wm,{className:"h-3.5 w-3.5 text-muted animate-spin"}):h.activity.status==="done"?r.jsx(qh,{className:"h-3.5 w-3.5 text-emerald-300"}):h.activity.status==="error"?r.jsx($h,{className:"h-3.5 w-3.5 text-red-300"}):null,r.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] ${qc(h.activity.status)}`,children:h.activity.status})]})})]}),h.activity.progress?r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px] text-muted",children:[r.jsx("span",{className:"truncate",children:h.activity.progress.current?h.activity.progress.current:""}),r.jsxs("span",{className:"shrink-0",children:[h.activity.progress.done,"/",h.activity.progress.total]})]}),r.jsx("div",{className:"mt-1 h-1.5 w-full overflow-hidden rounded-full border border-border bg-bg",children:r.jsx("div",{className:"h-full bg-accent transition-[width] duration-300",style:{width:`${Math.max(0,Math.min(100,Math.round(100*(h.activity.progress.total?h.activity.progress.done:0)/Math.max(1,h.activity.progress.total))))}%`}})})]}):null,(h.activity.steps?.length??0)>0?r.jsx("div",{className:"mt-2 space-y-1",children:(h.activity.steps??[]).slice(-6).map((N,P)=>r.jsx("div",{className:"text-[11px] text-muted whitespace-pre-wrap break-words",children:N},P))}):null,(h.activity.details?.length??0)>0?r.jsxs("div",{className:"mt-2",children:[r.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>El(h.id??""),children:h.activity.collapsed?"Show details":"Hide details"}),h.activity.collapsed?null:r.jsx("div",{className:"mt-2 max-h-44 overflow-auto rounded-lg border border-border bg-bg p-2 font-mono text-[11px] text-muted",children:(h.activity.details??[]).slice(-120).map((N,P)=>r.jsx("div",{className:"whitespace-pre-wrap break-words",children:N},P))})]}):null]}):h.role==="assistant"&&h.kind==="proposal"&&h.proposal?r.jsx("div",{className:"ws-msg ws-msg-anim ws-msg-assistant",children:(()=>{const N=Le.changeSet,P=!!(N&&N.id===h.proposal?.changeSetId),re=!!(N&&N.id===h.proposal?.changeSetId&&N.applied);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-[11px] text-muted",children:"Proposal"}),r.jsx("div",{className:"mt-1 text-[13px] text-text",children:h.proposal.title}),r.jsxs("div",{className:"mt-1 text-[11px] text-muted",children:[r.jsxs("span",{className:"text-text",children:[h.proposal.stats.files," files"]}),r.jsxs("span",{className:"ml-2 text-emerald-300",children:["+",h.proposal.stats.added]}),r.jsxs("span",{className:"ml-2 text-red-300",children:["-",h.proposal.stats.removed]})]})]}),r.jsxs("div",{className:"shrink-0 text-right",children:[r.jsx("div",{className:"text-[10px] text-muted",children:"State"}),r.jsx("div",{className:"mt-1 text-[11px] text-text",children:P?re?"applied":"pending":"outdated"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Plan"}),r.jsx("div",{className:"mt-1 space-y-1",children:(h.proposal.plan??[]).slice(0,6).map((K,ye)=>r.jsxs("div",{className:"flex items-start gap-2 text-[12px] text-muted",children:[r.jsx("span",{className:"mt-1 h-1.5 w-1.5 shrink-0 rounded-full bg-[rgb(var(--p-accent))]"}),r.jsx("span",{className:"whitespace-pre-wrap break-words",children:K})]},ye))})]}),(h.proposal.risks?.length??0)>0?r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Warnings"}),r.jsx("div",{className:"mt-1 space-y-1",children:(h.proposal.risks??[]).slice(0,6).map((K,ye)=>r.jsx("div",{className:"text-[12px] text-muted whitespace-pre-wrap break-words",children:K},ye))})]}):null,r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Files"}),r.jsx("div",{className:"mt-1 max-h-52 overflow-auto rounded-lg border border-border bg-bg",children:(h.proposal.files??[]).map((K,ye)=>{const ve=K.kind==="delete"?"D":K.kind==="rename"?"R":K.isNew?"A":"M",De=K.kind==="delete"?"bg-red-500/15 text-red-300":K.kind==="rename"?"bg-sky-500/15 text-sky-300":"bg-emerald-500/15 text-emerald-300",we=N?.files.find(Re=>Re.kind==="write"&&Re.path===K.path)??null,Ee=!!(we&&we.kind==="write"&&typeof we.before=="string"&&typeof we.after=="string"),Ce=!!Os[K.path],Oe=Vm(K.path);return r.jsxs("div",{className:"border-b border-border/60 last:border-b-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5",children:[r.jsxs("button",{type:"button",className:"flex min-w-0 flex-1 items-center gap-2 text-left",onClick:()=>{K.kind==="write"&&et(K.path)},children:[r.jsx("span",{className:`flex h-5 w-5 items-center justify-center rounded text-[11px] ${De}`,children:ve}),r.jsx(Oe,{className:"h-4 w-4 text-muted"}),r.jsx("span",{className:"min-w-0 truncate text-[12px] text-text",children:K.path})]}),r.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[K.kind==="write"&&Ee?r.jsxs("button",{type:"button",className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",onClick:()=>Ol(Re=>({...Re,[K.path]:!Re[K.path]})),children:[r.jsx(n0,{className:"mr-1 inline-block h-3.5 w-3.5"}),Ce?"Hide":"Preview"]}):null,K.kind==="write"&&P&&!re?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-6 px-2 text-[11px]",disabled:Et,onClick:()=>{rn(K.path)},children:"Reject"}),r.jsx("button",{type:"button",className:"ws-btn ws-btn-primary h-6 px-2 text-[11px]",disabled:Et,onClick:()=>nn(K.path),children:"Apply"})]}):null]})]}),K.kind==="write"&&Ee?r.jsx("div",{className:`overflow-hidden transition-[max-height,opacity] duration-300 ${Ce?"max-h-[360px] opacity-100":"max-h-0 opacity-0"}`,children:r.jsx("div",{className:"px-2 pb-2",children:r.jsx("div",{className:"rounded-lg border border-border bg-panel",children:r.jsx(nm,{height:"240px",theme:pr,language:cl(K.path),original:we?.before??"",modified:we?.after??"",options:{readOnly:!0,renderSideBySide:!1,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,fontSize:12,padding:{top:8,bottom:8}}})})})}):null]},`${K.kind}:${K.path}:${ye}`)})})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-7 px-2",disabled:!P||Et,onClick:()=>{_i()},children:"Discard"}),r.jsx("button",{type:"button",className:"ws-btn h-7 border border-accent bg-accent px-2 text-white hover:opacity-90 disabled:opacity-50",disabled:!P||re||Et,onClick:()=>Nl(),children:"Apply"})]})]})})()}):h.role==="assistant"&&h.kind==="run_request"&&h.run?r.jsxs("div",{className:"ws-msg ws-msg-anim ws-msg-assistant","data-run-menu-root":!0,children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-[11px] text-muted",children:"Run"}),r.jsx("div",{className:"mt-1 font-mono text-[12px] text-text",children:r.jsx("span",{className:"rounded border border-border bg-bg px-2 py-1",children:h.run.cmd})}),h.run.error?r.jsx("div",{className:"mt-2 rounded border border-red-500/30 bg-bg px-2 py-1 text-[11px] text-muted",children:h.run.error}):null]}),r.jsxs("div",{className:"shrink-0 text-right",children:[r.jsx("div",{className:"text-[10px] text-muted",children:"Status"}),r.jsx("div",{className:"mt-1 text-[11px] text-text",children:h.run.status})]})]}),r.jsxs("div",{className:"mt-2 flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-7 px-2",disabled:h.run.status!=="pending",onClick:()=>ta(h.id??""),children:"Cancel"}),h.run.status==="done"&&h.run.error?r.jsx("button",{type:"button",className:"ws-btn ws-btn-secondary h-7 px-2",onClick:()=>{Aa(h.id??"")},children:"Fix"}):null,r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",className:"ws-btn ws-btn-primary h-7 px-3",disabled:h.run.status!=="pending",onClick:()=>{kn(h.id??"","once")},children:"Run"}),r.jsx("button",{type:"button",className:"ml-1 ws-icon-btn h-7 w-7 rounded-lg border border-border bg-panel disabled:opacity-50",disabled:h.run.status!=="pending",onClick:()=>V(N=>N===(h.id??"")?null:h.id??""),children:r.jsx(bi,{className:"h-3.5 w-3.5"})}),F===(h.id??"")?r.jsxs("div",{className:"absolute right-0 top-full z-50 mt-1 w-56 overflow-hidden rounded-xl border border-border bg-panel p-1 shadow",children:[r.jsx(ue,{label:"Run once",onClick:()=>{V(null),kn(h.id??"","once")}}),r.jsx(ue,{label:"Always allow & run",onClick:()=>{V(null),kn(h.id??"","always")}})]}):null]})]}),Array.isArray(h.run.remaining)&&h.run.remaining.length?r.jsxs("div",{className:"mt-2 text-[11px] text-muted",children:["Next: ",r.jsx("span",{className:"font-mono",children:h.run.remaining[0]})]}):null]}):r.jsx("div",{className:`ws-msg ws-msg-anim ${h.role==="user"?"ws-msg-user":"ws-msg-assistant"}`,children:r.jsx("div",{className:"whitespace-pre-wrap break-words",children:h.content})}),h.role==="assistant"?r.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[r.jsx("button",{type:"button",className:`ws-icon-btn ${h.rating==="up"?"text-text":""}`,onClick:()=>{const N=Le.messages.findIndex(P=>P===h);N>=0&&Ba(N,"up")},children:r.jsx(O0,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:`ws-icon-btn ${h.rating==="down"?"text-text":""}`,onClick:()=>{const N=Le.messages.findIndex(P=>P===h);N>=0&&Ba(N,"down")},children:r.jsx(M0,{className:"h-4 w-4"})})]}):null]})},h.id??y))}):r.jsxs("div",{className:"flex min-h-[240px] flex-col items-center text-center",children:[r.jsx("img",{src:"/logo_transparent_bigger.png",alt:"Pompora",className:"h-47 w-47 opacity-90"}),r.jsx("div",{className:"mt-4 text-base font-semibold text-text",children:"Pompora Code"}),r.jsx("div",{className:"mt-1 max-w-[320px] text-sm text-muted",children:"Build and improve your codebase - privately."})]})]}),r.jsx("div",{className:"bg-panel px-3 py-2",children:r.jsxs("div",{className:"ws-panel2 rounded-md border border-border p-2",children:[r.jsx("textarea",{ref:Zr,className:"h-16 w-full resize-none bg-transparent px-2 py-1 text-sm font-normal text-muted outline-none placeholder:text-muted focus-visible:outline-none",placeholder:"Ask anything (Ctrl+L)",value:Le.draft,onChange:h=>ea(h.currentTarget.value),onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),Vi())}}),r.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2 px-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:()=>pe({kind:"info",title:"Add",message:"Coming next."}),children:r.jsx(Hc,{className:"h-4 w-4"})}),r.jsxs("div",{className:"relative","data-model-picker-root":!0,children:[r.jsxs("button",{type:"button",className:"flex items-center gap-2 rounded-md px-2 py-1 text-sm text-text hover:bg-[rgb(var(--p-panel2))] focus-visible:outline-none",onClick:()=>{Uo(),ks(h=>!h)},onMouseEnter:h=>{ti&&Rn(h.currentTarget,ti,"tr")},onMouseLeave:Mn,children:[r.jsx("span",{className:`text-sm ${J.active_provider==="pompora"?"text-text":zo?"text-muted":qi?"text-text":"text-muted"}`,children:La}),r.jsx(bi,{className:`h-4 w-4 text-muted ${xi?"rotate-180":""}`})]}),xi?r.jsxs("div",{className:"absolute left-0 bottom-full z-50 mb-2 w-56 overflow-hidden rounded-xl border border-border bg-panel shadow",children:[r.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Pompora"}),["slow","fast","reasoning"].map(h=>{const y=qr.pompora,N=String(J.pompora_thinking??Zs??"slow").toLowerCase(),P=(J.active_provider??"")==="pompora"&&N===h,re=!mt,K=mt?!An.has(h):!0,ye=mt?y?.is_configured!==!0:!0,ve=re||K||ye,De=re?"Log in":h==="reasoning"?"Pro":h==="fast"?"Plus":"Starter",we=h==="reasoning"?"Pompora Reasoning":h==="fast"?"Pompora Fast":"Pompora Slow";return r.jsxs("button",{type:"button",className:`flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-[rgb(var(--p-panel2))] ${P?"bg-[rgb(var(--p-panel2))]":""} ${ve?"text-muted opacity-60":"text-text"}`,onClick:()=>{if(ve){Dn(),ks(!1);return}ca(h),ks(!1)},onMouseEnter:Ee=>{ve&&Rn(Ee.currentTarget,re?"Log in to use Pompora AI":ye?"Finish signing in to Pompora":"Upgrade your plan to unlock this mode","tr")},onMouseLeave:Mn,children:[r.jsx("span",{children:we}),r.jsx("span",{className:"text-xs text-muted",children:De})]},`pompora-${h}`)}),r.jsx("div",{className:"border-t border-border"}),r.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"BYOK"}),mi.filter(h=>h.id!=="pompora").map(h=>{const y=qr[h.id],N=h.api?y?.is_configured!==!0:!1;return r.jsxs("button",{type:"button",className:`flex w-full items-center justify-between px-3 py-2 text-left text-sm hover:bg-[rgb(var(--p-panel2))] ${(J.active_provider??"")===h.id?"bg-[rgb(var(--p-panel2))]":""} ${N?"text-muted opacity-60":"text-text"}`,onClick:()=>{Bl(h.id),ks(!1)},onMouseEnter:P=>{N&&Rn(P.currentTarget,"Add an API key in Settings (Ctrl+,)","tr")},onMouseLeave:Mn,children:[r.jsx("span",{className:h.api?"":"text-muted",children:h.label}),r.jsx("span",{className:"text-xs text-muted",children:h.api?N?"API key":"API":"Local"})]},h.id)})]}):null]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{type:"button",className:"relative h-6 w-6 rounded-full focus-visible:outline-none",onMouseEnter:h=>Rn(h.currentTarget,`${Math.round(aa.pct*100)}% (${aa.used.toLocaleString()} / ${aa.total.toLocaleString()}) context used`,"tr"),onMouseLeave:Mn,style:{background:`conic-gradient(rgb(var(--p-muted)) ${Math.round(aa.pct*360)}deg, rgb(var(--p-panel2)) 0deg)`},children:r.jsx("span",{className:"absolute inset-[2px] rounded-full bg-panel"})}),r.jsx("button",{type:"button",disabled:$r||!Le.draft.trim(),className:`ws-icon-btn ${jn?"":"cursor-not-allowed opacity-50"}`,onClick:()=>{if(!jn){Dn();return}Vi()},onMouseEnter:h=>{!jn&&ti&&Rn(h.currentTarget,ti,"tr")},onMouseLeave:Mn,children:r.jsx(Kg,{className:"h-4 w-4"})})]})]})]})})]})]}):null]}),r.jsx("footer",{className:"flex items-center justify-end border-t border-border bg-panel px-3 text-[11px] text-muted",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:Te?Te.path:"No file"}),Te?r.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:Te.language}):null,Te?r.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:Tl?`Ln ${Tl.line}, Col ${Tl.col}`:"Ln -, Col -"}):null,r.jsx("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},children:"Free plan"}),r.jsxs("button",{type:"button",className:"ws-footer-btn",onClick:()=>{},"aria-label":"Notifications",children:[r.jsx(Yg,{className:"h-4 w-4"}),Qr.length?r.jsx("span",{className:"text-[11px]",children:Qr.length}):null]})]})})]}),Y?r.jsx(Sb,{query:q,setQuery:d,commands:Ul,index:m,setIndex:_,onClose:()=>te(!1),onRun:h=>{h.run(),te(!1)}}):null,C?r.jsx(_b,{query:x,setQuery:T,files:o,index:A,setIndex:k,isLoading:g,onClose:()=>v(!1),onPick:h=>{et(h),v(!1)}}):null,R?r.jsx(vb,{value:b,setValue:M,onClose:()=>O(!1),onGo:h=>{Ai(h),O(!1)}}):null,us?r.jsx(bb,{x:us.x,y:us.y,onClose:()=>sa(null),items:[{id:"newFile",label:"New File...",onClick:()=>{Ki()}},{id:"newFolder",label:"New Folder...",onClick:()=>{vi()}},{id:"rename",label:"Rename...",onClick:()=>{Gi()}},{id:"delete",label:"Delete",onClick:()=>{Ua()}},{id:"copyPath",label:"Copy Relative Path",onClick:()=>{Un(us.path)}},{id:"copyFullPath",label:"Copy Full Path",onClick:()=>{const h=(Z.root??"").replace(/\\/g,"/").replace(/\/$/,""),y=us.path.replace(/^\//,"");Un(h&&y?`${h}/${y}`:us.path)}}]}):null,Tn?r.jsx("div",{className:"fixed z-[9999] pointer-events-none select-none ws-msg-anim max-w-[320px] rounded-md border border-border ws-panel2 px-2 py-1 text-[11px] text-text shadow-xl backdrop-blur-sm",style:{left:Tn.x,top:Tn.y,transform:Tn.placement==="above"?Tn.align==="tr"?"translate(-100%, -110%)":"translate(0, -110%)":Tn.align==="tr"?"translate(-100%, 10%)":"translate(0, 10%)"},children:Tn.text}):null]})}function mb(p,f){let D=0;for(let E=0;E<f.length&&D<p.length;E++)f[E]===p[D]&&D++;return D===p.length}function _b(p){const f=p.query.trim().toLowerCase(),D=z.useMemo(()=>{if(!p.files.length)return[];if(!f)return p.files.slice(0,60);const E=[];for(const Y of p.files){const te=Y.toLowerCase();if((te.includes(f)||mb(f,te))&&(E.push(Y),E.length>=120))break}return E},[p.files,f]);return z.useEffect(()=>{const E=Y=>{if(Y.key==="ArrowDown"&&(Y.preventDefault(),p.setIndex(Math.min(p.index+1,Math.max(0,D.length-1)))),Y.key==="ArrowUp"&&(Y.preventDefault(),p.setIndex(Math.max(0,p.index-1))),Y.key==="Enter"){Y.preventDefault();const te=D[p.index];te&&p.onPick(te)}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[D,p]),r.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:p.onClose,children:r.jsxs("div",{className:"mx-auto mt-20 w-[820px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"border-b border-border p-3",children:[r.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Type to search files",autoFocus:!0,value:p.query,onChange:E=>p.setQuery(E.currentTarget.value)}),r.jsx("div",{className:"mt-2 text-xs text-muted",children:p.isLoading?"Indexing files...":`${p.files.length} files`})]}),r.jsx("div",{className:"max-h-[360px] overflow-auto p-2",children:D.length?D.map((E,Y)=>r.jsx("button",{type:"button",className:`flex w-full items-center justify-between rounded px-3 py-2 text-left text-sm ${Y===p.index?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onMouseEnter:()=>p.setIndex(Y),onClick:()=>p.onPick(E),children:r.jsx("span",{className:"truncate",children:E})},E)):r.jsx("div",{className:"p-3 text-sm text-muted",children:"No matches"})})]})})}function vb(p){return z.useEffect(()=>{const f=D=>{if(D.key==="Enter"){D.preventDefault();const E=Number.parseInt(p.value.trim(),10);Number.isFinite(E)&&E>0&&p.onGo(E)}};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[p]),r.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:p.onClose,children:r.jsxs("div",{className:"mx-auto mt-20 w-[520px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"border-b border-border p-3",children:[r.jsx("div",{className:"mb-2 text-xs font-semibold text-muted",children:"Go to Line"}),r.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Line number",autoFocus:!0,value:p.value,onChange:f=>p.setValue(f.currentTarget.value)})]}),r.jsx("div",{className:"p-3",children:r.jsx("button",{type:"button",className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-muted hover:border-accent hover:text-text",onClick:()=>{const f=Number.parseInt(p.value.trim(),10);Number.isFinite(f)&&f>0&&p.onGo(f)},children:"Go"})})]})})}function Am(p){const{id:f,active:D,onClick:E,Icon:Y}=p;return r.jsxs("button",{type:"button",className:`relative mx-auto flex h-9 w-9 items-center justify-center rounded-md ${D?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:()=>E(f),"aria-current":D?"page":void 0,children:[r.jsx("span",{"aria-hidden":!0,className:`absolute left-[-10px] top-1.5 h-6 w-0.5 rounded bg-accent transition-opacity ${D?"opacity-100":"opacity-0"}`}),r.jsx(Y,{className:"h-5 w-5"})]})}function Yh(p){return r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"border-b border-border bg-panel px-3 py-2 text-xs font-normal text-muted",children:p.title}),r.jsx("div",{className:"min-h-0 flex-1 overflow-auto p-2",children:p.children})]})}function gb(p){if(!p.workspaceRoot)return r.jsx(Yh,{title:"Explorer",children:r.jsx(Vh,{title:"No folder opened",subtitle:"Open a folder to browse files and start editing.",onOpenFolder:p.onOpenFolder,onOpenFile:void 0,recentWorkspaces:p.recent,recentFiles:[],onOpenRecentWorkspace:p.onOpenRecent,onOpenRecentFile:void 0,onOpenChat:void 0,onOpenCommandPalette:void 0,compact:!0})});const f=p.explorer[""]??[];return r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between border-border bg-panel px-3 py-2",children:[r.jsx("div",{className:"text-xs font-normal text-[#a39d9d]",children:"Explorer"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:p.onCreateNewFile,children:r.jsx(Fm,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:p.onCreateNewFolder,children:r.jsx(qm,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",className:"ws-icon-btn",onClick:p.onRefresh,children:r.jsx(Wm,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"min-h-0 flex-1 overflow-auto p-1",children:r.jsx(Xm,{prefix:"",entries:f,explorer:p.explorer,expandedDirs:p.expandedDirs,selectedPath:p.selectedPath,onContextMenu:p.onContextMenu,workspaceRoot:p.workspaceRoot,showTooltipForEl:p.showTooltipForEl,hideTooltip:p.hideTooltip,onToggleDir:p.onToggleDir,onSelect:p.onSelect,onOpenFile:p.onOpenFile})})]})}function Xm(p){const f=z.useRef(null);return z.useEffect(()=>()=>{f.current&&window.clearTimeout(f.current),f.current=null},[]),r.jsx("div",{className:"space-y-0.5",children:p.entries.map(D=>{const E=p.selectedPath===D.path,Y=E?"bg-panel text-text":"text-muted hover:bg-panel hover:text-text hover:translate-x-[1px] hover:-translate-y-[0.5px]",te=E?"bg-accent opacity-100":"opacity-0";if(D.is_dir){const d=p.expandedDirs.has(D.path),m=p.explorer[D.path]??[];return r.jsxs("div",{children:[r.jsxs("button",{type:"button",className:`group relative flex w-full items-center gap-2 rounded-md px-2 py-0.5 text-left text-[13px] transition-all duration-150 ${Y}`,onClick:()=>{p.onSelect(D.path),p.onToggleDir(D.path)},onContextMenu:_=>{_.preventDefault(),p.onSelect(D.path),p.onContextMenu({x:_.clientX,y:_.clientY,path:D.path,isDir:!0})},children:[r.jsx("span",{"aria-hidden":!0,className:`absolute left-0 top-1.5 h-4 w-0.5 rounded ${te}`}),r.jsx(Ps,{className:`h-4 w-4 text-muted transition-transform duration-150 group-hover:text-text ${d?"rotate-90":""}`}),r.jsx(qm,{className:"h-4 w-4 text-muted transition-transform duration-150 group-hover:scale-[1.03] group-hover:text-text"}),r.jsx("span",{className:"truncate",children:D.name})]}),d?r.jsx("div",{className:"ml-4 border-l border-border/60 pl-2",children:r.jsx(Xm,{prefix:D.path,entries:m,explorer:p.explorer,expandedDirs:p.expandedDirs,selectedPath:p.selectedPath,onContextMenu:p.onContextMenu,workspaceRoot:p.workspaceRoot,showTooltipForEl:p.showTooltipForEl,hideTooltip:p.hideTooltip,onToggleDir:p.onToggleDir,onSelect:p.onSelect,onOpenFile:p.onOpenFile})}):null]},D.path)}const q=Vm(D.path);return r.jsxs("button",{type:"button",className:`group relative flex w-full items-center gap-2 rounded-md px-2 py-0.5 text-left text-[13px] transition-all duration-150 ${Y}`,onMouseEnter:d=>{f.current&&window.clearTimeout(f.current),f.current=window.setTimeout(()=>{if(f.current=null,!p.workspaceRoot)return;const m=p.workspaceRoot.replace(/\\/g,"/").replace(/\/$/,""),_=D.path.replace(/^\//,"");p.showTooltipForEl(d.currentTarget,`${m}/${_}`,"tl")},350)},onMouseLeave:()=>{f.current&&window.clearTimeout(f.current),f.current=null,p.hideTooltip()},onMouseDown:()=>{f.current&&window.clearTimeout(f.current),f.current=null,p.hideTooltip()},onClick:()=>{p.onSelect(D.path),p.onOpenFile(D.path)},onContextMenu:d=>{d.preventDefault(),p.onSelect(D.path),p.onContextMenu({x:d.clientX,y:d.clientY,path:D.path,isDir:!1})},children:[r.jsx("span",{"aria-hidden":!0,className:`absolute left-0 top-1.5 h-4 w-0.5 rounded ${te}`}),r.jsx("span",{className:"inline-block w-4"}),r.jsx(q,{className:"h-4 w-4 text-muted transition-transform duration-150 group-hover:scale-[1.03] group-hover:text-text"}),r.jsx("span",{className:"truncate",children:D.name})]},D.path)})})}function bb(p){return r.jsx("div",{className:"fixed inset-0 z-50",onMouseDown:p.onClose,children:r.jsx("div",{className:"absolute w-56 overflow-hidden rounded border border-border bg-panel shadow-2xl",style:{left:p.x,top:p.y},onMouseDown:f=>f.stopPropagation(),children:p.items.map(f=>r.jsx("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-left text-sm text-muted hover:bg-bg hover:text-text",onClick:()=>{f.onClick(),p.onClose()},children:r.jsx("span",{children:f.label})},f.id))})})}function yb(p){return r.jsx("div",{className:"relative",children:r.jsxs("div",{className:`group relative flex h-8 max-w-[220px] items-center gap-2 rounded-md px-2 text-[13px] ${p.active?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onClick:p.onActivate,role:"button",tabIndex:0,onKeyDown:f=>{f.key==="Enter"&&p.onActivate()},children:[r.jsx("span",{className:"min-w-0 flex-1 truncate",children:p.tab.name}),p.tab.isDirty?r.jsx("span",{className:"text-[10px] text-accent",children:""}):null,r.jsx("button",{type:"button",className:"ml-1 rounded p-0.5 text-muted opacity-0 hover:bg-panel hover:text-text group-hover:opacity-100",onClick:f=>{f.stopPropagation(),p.onClose()},children:r.jsx(Ic,{className:"h-3.5 w-3.5"})}),r.jsx("span",{"aria-hidden":!0,className:`absolute bottom-0 left-2 right-2 h-px rounded bg-accent transition-opacity ${p.active?"opacity-100":"opacity-0"}`})]})})}function Vh(p){const f=!!p.compact,D=p.title??"POMPORA",E=p.subtitle??"Getting started with Pompora",Y=p.hint??"Open a folder, then open a file to begin.",te=(p.recentFiles??[]).filter(m=>typeof m=="string"),q=(p.recentWorkspaces??[]).filter(m=>typeof m=="string"),d=m=>{const _=m.replace(/\\/g,"/");return{name:Oi(_),detail:_}};return r.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[f?null:r.jsxs("svg",{className:"pointer-events-none absolute inset-0 h-full w-full",viewBox:"0 0 1200 720",preserveAspectRatio:"none","aria-hidden":!0,children:[r.jsxs("defs",{children:[r.jsxs("radialGradient",{id:"pomporaDotsFade",cx:"62%",cy:"46%",r:"78%",children:[r.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"1"}),r.jsx("stop",{offset:"55%",stopColor:"white",stopOpacity:"0.35"}),r.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]}),r.jsx("mask",{id:"pomporaDotsMask",children:r.jsx("rect",{width:"1200",height:"720",fill:"url(#pomporaDotsFade)"})}),r.jsxs("pattern",{id:"pomporaDots",width:"180",height:"180",patternUnits:"userSpaceOnUse",children:[r.jsx("circle",{cx:"24",cy:"34",r:"1.2",fill:"rgb(var(--p-muted))",fillOpacity:"0.22"}),r.jsx("circle",{cx:"86",cy:"62",r:"1.6",fill:"rgb(var(--p-muted))",fillOpacity:"0.16"}),r.jsx("circle",{cx:"148",cy:"26",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.14"}),r.jsx("circle",{cx:"58",cy:"134",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.12"}),r.jsx("circle",{cx:"132",cy:"128",r:"1.8",fill:"rgb(var(--p-muted))",fillOpacity:"0.18"}),r.jsx("circle",{cx:"170",cy:"164",r:"1",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),r.jsx("circle",{cx:"40",cy:"92",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),r.jsx("circle",{cx:"104",cy:"156",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"}),r.jsx("circle",{cx:"164",cy:"84",r:"0.9",fill:"rgb(var(--p-muted))",fillOpacity:"0.1"})]})]}),r.jsx("g",{mask:"url(#pomporaDotsMask)",children:r.jsx("rect",{width:"1200",height:"720",fill:"url(#pomporaDots)",opacity:"0.9"})})]}),r.jsx("div",{className:`relative z-10 flex h-full w-full flex-col items-center ${f?"justify-start":"justify-center"}`,children:r.jsx("div",{className:`w-full ${f?"px-2 py-2":"px-6 py-6"}`,children:r.jsxs("div",{className:`mx-auto w-full ${f?"max-w-none":"max-w-[760px]"}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`${f?"ws-brand-title text-2xl":"ws-brand-title text-5xl md:text-6xl"} font-normal text-text`,children:D}),r.jsx("div",{className:`${f?"mt-1 text-[11px]":"mt-2 text-sm"} text-muted`,children:E}),r.jsx("div",{className:`${f?"mt-1 text-[10px]":"mt-1 text-xs"} text-muted`,children:Y})]}),r.jsxs("div",{className:`${f?"mt-4":"mt-7"} space-y-6`,children:[r.jsxs("section",{className:"text-left",children:[r.jsx("div",{className:"ws-welcome-section-title",children:"Quick actions"}),r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>p.onOpenChat?.(),disabled:!p.onOpenChat,children:[r.jsx("span",{className:"truncate",children:"Open Chat"}),r.jsx("span",{className:"ws-kbd",children:"Ctrl+L"})]}),r.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>p.onOpenCommandPalette?.(),disabled:!p.onOpenCommandPalette,children:[r.jsx("span",{className:"truncate",children:"Open Command Palette"}),r.jsx("span",{className:"ws-kbd",children:"Ctrl+Shift+P"})]})]})]}),q.length>0||te.length>0&&p.onOpenRecentFile?r.jsxs("section",{className:"text-left",children:[r.jsx("div",{className:"ws-welcome-section-title",children:"Recent"}),q.length?r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"ws-welcome-subtitle",children:"Workspaces"}),r.jsx("div",{className:"mt-2 space-y-2",children:q.slice(0,1).map(m=>r.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>p.onOpenRecentWorkspace(m),children:[r.jsx("span",{className:"truncate",children:m}),r.jsx("span",{className:"text-[11px] text-muted",children:"Open"})]},m))})]}):null,te.length&&p.onOpenRecentFile?r.jsxs("div",{className:`${q.length?"mt-6":"mt-3"}`,children:[r.jsx("div",{className:"ws-welcome-subtitle",children:"Files"}),r.jsx("div",{className:"mt-2 space-y-2",children:te.slice(0,3).map(m=>{const _=d(m);return r.jsxs("button",{type:"button",className:"ws-welcome-row",onClick:()=>p.onOpenRecentFile?.(m),children:[r.jsx("span",{className:"min-w-0 flex-1 truncate",children:_.name}),r.jsx("span",{className:"ml-3 max-w-[56%] truncate text-[11px] text-muted",children:_.detail})]},m)})})]}):null]}):null]})]})})})]})}function Sb(p){const f=p.commands;return z.useEffect(()=>{const D=E=>{if(E.key==="ArrowDown"&&(E.preventDefault(),p.setIndex(Math.min(p.index+1,Math.max(0,f.length-1)))),E.key==="ArrowUp"&&(E.preventDefault(),p.setIndex(Math.max(0,p.index-1))),E.key==="Enter"){E.preventDefault();const Y=f[p.index];Y&&p.onRun(Y)}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[f,p]),r.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onMouseDown:p.onClose,children:r.jsxs("div",{className:"mx-auto mt-20 w-[820px] max-w-[92vw] overflow-hidden rounded-xl border border-border bg-panel shadow-2xl",onMouseDown:D=>D.stopPropagation(),children:[r.jsx("div",{className:"border-b border-border p-3",children:r.jsx("input",{className:"w-full rounded border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-muted",placeholder:"Type a command",autoFocus:!0,value:p.query,onChange:D=>p.setQuery(D.currentTarget.value)})}),r.jsx("div",{className:"max-h-[360px] overflow-auto p-2",children:f.length?f.map((D,E)=>r.jsxs("button",{type:"button",className:`flex w-full items-center justify-between rounded px-3 py-2 text-left text-sm ${E===p.index?"bg-bg text-text":"text-muted hover:bg-bg hover:text-text"}`,onMouseEnter:()=>p.setIndex(E),onClick:()=>p.onRun(D),children:[r.jsx("span",{children:D.label}),r.jsx("span",{className:"text-xs text-muted",children:D.shortcut??""})]},D.id)):r.jsx("div",{className:"p-3 text-sm text-muted",children:"No commands"})})]})})}const wb=p=>{const[f,D]=z.useState(""),E=f.trim().toLowerCase(),Y=z.useMemo(()=>[{id:"common",label:"Commonly Used",icon:A0},{id:"workspace",label:"Workspace",icon:h0},{id:"appearance",label:"Appearance",icon:v0},{id:"ai",label:"AI",icon:Kh}],[]),te=p.keyStatus?.is_configured?"Configured":"Not configured",[q,d]=z.useState("workspace"),m=z.useMemo(()=>({common:{title:"Commonly Used",description:"Frequently changed settings"},workspace:{title:"Workspace",description:"Workspace folder and recent workspaces"},appearance:{title:"Appearance",description:"Theme"},ai:{title:"AI",description:"Provider and offline mode"}}),[]);z.useEffect(()=>{new Set(Y.map(k=>k.id)).has(q)||d("workspace")},[q,Y]);const _=z.useMemo(()=>new Set(["workspace.folder","appearance.theme","ai.offline"]),[]),C=A=>{const[k,l]=z.useState(!1),u=z.useRef(null),o=A.options.find(c=>c.value===A.value)??A.options[0];return z.useEffect(()=>{const c=g=>{if(!k)return;const S=g.target;S&&(u.current?.contains(S)||l(!1))};return window.addEventListener("mousedown",c),()=>window.removeEventListener("mousedown",c)},[k]),r.jsxs("div",{ref:u,className:`relative ${A.widthClassName??""}`.trim(),children:[r.jsxs("button",{type:"button",className:"ws-vscode-dropdown-btn",onClick:()=>l(c=>!c),"aria-expanded":k,children:[r.jsx("span",{className:"truncate",children:o?.label??""}),r.jsx(bi,{className:`h-4 w-4 shrink-0 text-muted transition-transform ${k?"rotate-180":""}`})]}),k?r.jsx("div",{className:"ws-vscode-dropdown-menu",children:A.options.map(c=>r.jsx("button",{type:"button",className:`ws-vscode-dropdown-item ${c.value===A.value?"ws-vscode-dropdown-item-active":""}`,onClick:()=>{A.onChange(c.value),l(!1)},children:c.label},c.value))}):null]})},v=A=>r.jsx("button",{type:"button",className:`ws-vscode-switch ${A.disabled?"opacity-60":""}`,"data-checked":A.checked?"true":"false",onClick:()=>{A.disabled||A.onChange(!A.checked)},"aria-checked":A.checked,role:"switch",children:r.jsx("span",{className:"ws-vscode-switch-thumb"})}),x=z.useMemo(()=>[{id:"workspace.folder",section:"workspace",title:"Workspace Folder",description:"Choose the folder you want to work in.",keywords:"workspace folder open",renderControl:()=>r.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:p.onPickFolder,children:"Open Folder"})},{id:"appearance.theme",section:"appearance",title:"Theme",description:"Choose the color theme.",keywords:"theme dark light appearance",renderControl:()=>r.jsx(C,{value:p.settings.theme,options:[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],onChange:A=>p.onChangeTheme(A)})},{id:"ai.offline",section:"ai",title:"AI: Offline Mode",description:"Disable all network AI calls.",keywords:"offline ai network",renderControl:()=>r.jsx(v,{checked:p.settings.offline_mode,onChange:()=>p.onToggleOffline(),disabled:p.isTogglingOffline})},...p.settings.active_provider&&p.settings.active_provider!=="pompora"?[{id:"ai.apiKey",section:"ai",title:"AI: API Key",description:"Paste your API key for the selected provider.",keywords:"api key security",renderControl:()=>r.jsx("input",{className:"ws-vscode-input",placeholder:"Paste your API key",value:p.apiKeyDraft,autoComplete:"off",spellCheck:!1,onChange:A=>p.onApiKeyDraft(A.target.value)})}]:[],{id:"ai.encryption",section:"ai",title:"Encryption Password",description:"Optional extra protection for secrets storage.",keywords:"encryption password security",renderControl:()=>r.jsx("input",{className:"ws-vscode-input",placeholder:"Optional encryption password",type:p.encryptionPasswordDraft?"text":"password",value:p.encryptionPasswordDraft,autoComplete:"off",spellCheck:!1,onChange:A=>p.onEncryptionPasswordDraft(A.target.value)})}],[p]),T=z.useMemo(()=>{if(!E)return q==="common"?x.filter(k=>_.has(k.id)):x.filter(k=>k.section===q);const A=E.toLowerCase();return x.filter(k=>`${k.title} ${k.description} ${k.keywords??""}`.toLowerCase().includes(A))},[q,_,E,x]);return r.jsxs("div",{className:"flex h-full flex-col bg-bg",children:[r.jsx("div",{className:"border-b border-border bg-panel px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($m,{className:"h-4 w-4 text-muted"}),r.jsx("div",{className:"text-sm font-semibold text-text",children:"Settings"})]}),r.jsxs("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-primary",onClick:p.onSaveSettings,disabled:!p.isSettingsLoaded||p.isSavingSettings,children:[r.jsx(S0,{className:"h-4 w-4"}),"Save Settings"]})]})}),r.jsx("div",{className:"min-h-0 flex-1 overflow-hidden",children:r.jsxs("div",{className:"grid h-full grid-cols-[260px_1fr]",children:[r.jsx("aside",{className:"min-w-0 border-r border-border bg-panel",children:r.jsx("div",{className:"flex h-full flex-col",children:r.jsxs("div",{className:"min-h-0 flex-1 overflow-auto px-2 pb-3 pt-4",children:[r.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"User"}),r.jsx("div",{className:"space-y-0.5",children:Y.map(A=>{const k=!E&&A.id===q;return r.jsx("button",{type:"button",className:`ws-vscode-nav-item ${k?"ws-vscode-nav-item-active":""}`,onClick:()=>{d(A.id),D("")},children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(A.icon,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:A.label})]})},A.id)})})]})})}),r.jsx("main",{className:"min-w-0 overflow-auto bg-bg",children:r.jsxs("div",{className:"mx-auto w-full max-w-[980px] p-4",children:[r.jsx("div",{className:"mb-3",children:r.jsxs("div",{className:"relative",children:[r.jsx(Wh,{className:"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-muted"}),r.jsx("input",{className:"ws-vscode-search pl-9",placeholder:"Search settings",value:f,onChange:A=>D(A.currentTarget.value)})]})}),r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:E?"Search results":m[q].title}),r.jsx("div",{className:"mt-1 text-xs text-muted",children:E?`Showing ${T.length} setting(s)`:m[q].description})]}),r.jsx("div",{className:"ws-vscode-settings",children:T.length?T.map(A=>r.jsxs("div",{className:"ws-vscode-setting-row",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm text-text",children:A.title}),r.jsx("div",{className:"mt-0.5 text-xs text-muted",children:A.description})]}),r.jsx("div",{className:"ws-vscode-setting-control",children:A.renderControl()})]},A.id)):r.jsx("div",{className:"p-4 text-sm text-muted",children:"No settings found."})}),q==="workspace"&&!E?r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted",children:"Recent workspaces"}),p.recentWorkspaces.length?r.jsx("div",{className:"ws-vscode-settings",children:p.recentWorkspaces.slice(0,12).map(A=>r.jsx("button",{type:"button",className:"ws-vscode-list-row",onClick:()=>p.onOpenRecent(A),children:r.jsx("span",{className:"truncate",children:A})},A))}):r.jsx("div",{className:"text-sm text-muted",children:"No recent workspaces."})]}):null,q==="ai"&&!E?r.jsxs("div",{className:"mt-3 space-y-3",children:[r.jsxs("div",{className:"text-xs text-muted",children:["Status: ",te]}),p.settings.active_provider==="pompora"&&!p.authProfile?r.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:"Connect to Pompora"}),r.jsx("div",{className:"mt-1 text-xs text-muted",children:"Log in to sync your plan and credits across devices."}),r.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[r.jsx("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-primary",onClick:p.onLoginToPompora,disabled:p.isAuthBusy,children:"Log in"}),r.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:p.onSignupToPompora,disabled:p.isAuthBusy,children:"Create account"})]})]}):null,p.secretsError?r.jsx("div",{className:"ws-vscode-error",children:p.secretsError}):null,r.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.settings.active_provider&&p.settings.active_provider!=="pompora"?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:p.onStoreKey,disabled:!p.isSettingsLoaded||p.isKeyOperationInProgress||!p.apiKeyDraft.trim()||!p.settings.active_provider,children:"Save Key"}),r.jsx("button",{type:"button",className:"ws-vscode-btn ws-vscode-btn-ghost",onClick:p.onClearKey,disabled:!p.isSettingsLoaded||p.isKeyOperationInProgress||!p.settings.active_provider,children:"Clear Key"})]}):null,r.jsx("div",{className:"flex-1"}),r.jsx("button",{type:"button",className:"ws-vscode-btn",onClick:p.onDebugGemini,children:"Test AI"})]}),p.debugResult?r.jsx("pre",{className:"ws-vscode-pre",children:p.debugResult}):null,p.settings.active_provider==="pompora"?r.jsxs("div",{className:"overflow-hidden rounded-xl border border-border bg-panel",children:[r.jsxs("div",{className:"border-b border-border px-4 py-3",children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:"Pompora AI Plans"}),r.jsxs("div",{className:"mt-1 text-xs text-muted",children:["Credits keep the service fast and fair. ",r.jsx("span",{className:"text-text",children:"2 credits = 1 request"}),"."]})]}),r.jsxs("div",{className:"grid gap-3 p-3 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-lg border border-border bg-bg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:"Starter"}),r.jsx("div",{className:"text-xs text-muted",children:"Free"})]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[r.jsx("div",{children:"25 Slow Credits (reset every 2 weeks)"}),r.jsx("div",{children:"Unlimited tab completions"}),r.jsx("div",{children:"Unlimited inline edits"}),r.jsx("div",{children:"Local AI (slow thinking)"}),r.jsx("div",{children:"BYOK support"})]}),r.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-[rgb(var(--p-panel2))] px-3 py-2 text-xs font-semibold text-text hover:opacity-90",onClick:()=>{Fc("https://pompora.dev/pricing")},children:"Start Free"})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-gradient-to-b from-[rgba(255,255,255,0.06)] to-[rgba(255,255,255,0.02)] p-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:"Plus"}),r.jsx("div",{className:"mt-0.5 text-[11px] font-semibold uppercase tracking-wider text-muted",children:"Most Popular"})]}),r.jsx("div",{className:"text-xs text-text",children:"$10 / month"})]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[r.jsx("div",{children:"150 Fast Credits / month (daily cap: 100)"}),r.jsx("div",{children:"50 Slow Credits (reset every 2 weeks)"}),r.jsx("div",{children:"Fast thinking enabled"}),r.jsx("div",{children:"Priority execution"}),r.jsx("div",{children:"BYOK support"})]}),r.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground hover:opacity-90",onClick:()=>{Fc("https://pompora.dev/pricing")},children:"Upgrade to Plus"})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-bg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-text",children:"Pro"}),r.jsx("div",{className:"text-xs text-text",children:"$20 / month"})]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted",children:[r.jsx("div",{children:"300 Fast Credits / month (daily cap: 150)"}),r.jsx("div",{children:"150 Slow Credits (reset every 2 weeks)"}),r.jsx("div",{children:"Reasoning + fast thinking"}),r.jsx("div",{children:"Highest priority"}),r.jsx("div",{children:"Advanced agents"}),r.jsx("div",{children:"BYOK support"})]}),r.jsx("button",{type:"button",className:"mt-3 w-full rounded-md bg-[rgb(var(--p-panel2))] px-3 py-2 text-xs font-semibold text-text hover:opacity-90",onClick:()=>{Fc("https://pompora.dev/pricing")},children:"Go Pro"})]})]})]}):null]}):null,E?r.jsx("div",{className:"mt-3 text-xs text-muted",children:"Tip: click a category on the left to exit search."}):null]})})]})})]})};gv.createRoot(document.getElementById("root")).render(r.jsx(z.StrictMode,{children:r.jsx(pb,{})}));
